/***********************************************************************************************************************
* Copyright (c) , CVTE
* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * **
 文件 : LCD_Service.c 
 用途 : LCD显示服务层
***********************************************************************************************************************/
#ifndef _LCD_SERVICE_C_
#define _LCD_SERVICE_C_

#include <stdlib.h>
#include <stdio.h>
#include "Config.h"
#include "LCD_Service.h"
#include "LCD_KS0108_6800_Device.h"
#include "DisplayChineseTab.h"
#include "RTC_Service.h"
#include "Storage_Management_Service.h"
#include "Fault_Management_Service.h"
#include "Key_Device.h"
#include "Modbus_BMS_COMData.h"
#include "Modbus_PCS_COMData.h"
#include "Modbus_Meter_COMData.h"
#include "Buzzer_Device.h"

#if RTC_TEST
    extern TimeInf_t SetTimeTest;
#endif

#if LCD_CHINESE_DISP_TEST
extern uint8_t gu8LCDEnglishFont;
extern uint8_t gu8CharacterSpace;
#else
extern uint8_t gu8LCDEnglishFont;
extern uint8_t gu8CharacterSpace;
#endif
#if LCD_SERVICE_MOUDLE
// Test
/*************************全局变量区Start*****************************/
DisplayStatus_TypeDef gEnumDispStatus;   //模块状态全局变量
DisplaySystem gDisplay;                  //Display数据结构全局变量
Display_CurrentMenu_Status gCurrentMenu; //Display当前操作界面
Display_LastMenu_Status gLastMenu;       //Display前一个操作界面

char tab_display[DISPLAY_CACHE_SIZE];    //Display显示缓存
bool_t gbEditFlag;                       //界面输入标志
uint8_t gPromptCount;                    //提示状态计时
bool_t keyDetectionFlag = STATUS_FALSE;                      //松手标志，无按键按下
Display_KeyDetectionFilter_t  Display_KeyDetectionFilter;    //按键滤波时间计数
Display_KEYDetection_Status keyDetectStatus ;                //检测按键结果
/*时间设置全局变量*/
char tab_date[11] = {"0000-00-00"}; 
char tab_time[9] = {"00:00:00"}; 
Week_TypeDef eWeekday = WEEK_SUNDAY ;
char tab_date_modify[11] = {"0000-00-00"}; 
char tab_time_modify[9] = {"00:00:00"}; 
Week_TypeDef eWeekday_modify = WEEK_SUNDAY ;

/*密码设置全局变量，用于自测*/
char tab_Password_Flash[7] = {"148002"}; //系统密码
char tab_OldPassword_edit[7]     = {"000000"}; 
char tab_NewPassword_edit[7]     = {"000000"}; 
char tab_ConfirmPassword_edit[7] = {"000000"}; 

/*分时电价,削峰填谷策略共用*/
char tab_TPFV_Time_Start[9] = {"00:00:00"}; 
char tab_TPFV_Time_End[9]   = {"00:00:00"};
char tab_TPFV_Price[6]      = {"00.00"};
char tab_TPFV_Time_Start_modify[9] = {"00:00:00"}; 
char tab_TPFV_Time_End_modify[9]   = {"00:00:00"};
char tab_TPFV_Price_modify[6]      = {"00.00"};

/*削峰填谷策略生效日期、星期(预留)*/
char tab_date_Start[11] = {"2023-01-01"}; 
char tab_date_End[11]   = {"2023-01-01"}; 
bool_t valid_week[7] = {STATUS_FALSE,STATUS_FALSE,STATUS_FALSE,STATUS_FALSE,STATUS_FALSE,STATUS_FALSE,STATUS_FALSE};
char tab_Stop_SOC[4]      = {"100"};
char tab_Power[6]         = {"+6000"};
char tab_Stop_SOC_modify[4] = {"100"};
char tab_Power_modify[6]    = {"+6000"};
/*备电策略*/
char tab_Rate_Power[6]    = {"+6000"};
char tab_Rate_Power_modify[6] = {"+6000"};

/*发电机策略*/
char tab_Forbid_SOC[4]      = {"100"};
char tab_Supply_SOC[4]      = {"100"};
char tab_Forbid_SOC_modify[4]  = {"100"};
char tab_Supply_SOC_modify[4]  = {"100"};

/*BMS电池充电截止SOC和放电截止SOC设置*/
char tab_BMS_LiIon_Endof_CharSOC[4]            = {"100"};
char tab_BMS_LiIon_Endof_DisCharSOC[4]         = {"100"};
char tab_BMS_LiIon_Endof_CharSOC_modify[4]     = {"100"};
char tab_BMS_LiIon_Endof_DisCharSOC_modify[4]  = {"100"};


/*BMS电池最大充电电流和最大充电电压设置*/
char tab_BMS_CharCur[6]            = {"100.0"};
char tab_BMS_DisCharCur[6]         = {"100.0"};
char tab_BMS_CharCur_modify[6]     = {"100.0"};
char tab_BMS_DisCharCur_modify[6]  = {"100.0"};


/*BMS电池过充过放保护设置*/
char tab_BMS_OverCharProct[4]            = {"100"};
char tab_BMS_OverDisCharProct[4]         = {"100"};
char tab_BMS_OverCharProct_modify[4]     = {"100"};
char tab_BMS_OverDisCharProct_modify[4]  = {"100"};


/*BMS电池容量设置*/
char tab_BMS_Capacity[4]                    = {"100"};
char tab_BMS_Capacity_modify[4]             = {"100"};
char tab_BMS_LeadAcid_CharCur[6]            = {"100.0"};
char tab_BMS_LeadAcid_CharCur_modify[6]     = {"100.0"};
char tab_BMS_LeadAcid_DisCharCur[6]         = {"100.0"};
char tab_BMS_LeadAcid_DisCharCur_modify[6]  = {"100.0"};



/*BMS电池充电截止SOC和放电截止SOC设置*/
char tab_BMS_LeadAcid_Endof_CharSOC[4]            = {"100"};
char tab_BMS_LeadAcid_Endof_DisCharSOC[4]         = {"100"};
char tab_BMS_LeadAcid_Endof_CharSOC_modify[4]     = {"100"};
char tab_BMS_LeadAcid_Endof_DisCharSOC_modify[4]  = {"100"};

/*BMS电池容量设置*/
char tab_BMS_LowVolt_ShutPoint[5]                    = {"40.0"};
char tab_BMS_LowVolt_ShutPoint_modify[5]             = {"40.0"};
char tab_BMS_FloatVolt_Point[5]                      = {"48.0"};
char tab_BMS_FloatVolt_Point_modify[5]               = {"48.0"};
char tab_BMS_ConstVolt_Point[5]                      = {"48.0"};
char tab_BMS_ConstVolt_Point_modify[5]               = {"48.0"};


/*削峰填谷策略*/
char tab_PeakLoadShifting_Time_Start[9] = {"00:00:00"};     // 开始时间
char tab_PeakLoadShifting_Time_End[9]   = {"00:00:00"};     // 结束时间
char tab_PeakLoadShifting_SOC[4]        = {"100"};          // SOC
char tab_PeakLoadShifting_Power[6]      = {"+6000"};        // 功率

/*定时充放电策略*/
char tab_date_RegularStart[11] = {"2023-01-01"}; 
char tab_date_RegularEnd[11]   = {"2023-01-01"}; 
char tab_Regular_Time_Start[9] = {"00:00:00"}; 
char tab_Regular_Time_End[9]   = {"00:00:00"};
char tab_RegularPower[5]       = {"6000"};
char tab_RegularStop_SOC[4]    = {"100"};
char tab_Regular_Time_Start_modify[9] = {"00:00:00"}; 
char tab_Regular_Time_End_modify[9]   = {"00:00:00"};
char tab_RegularPower_modify[5]       = {"6000"};
char tab_RegularStop_SOC_modify[4]    = {"100"};

/*CT变比设置全局变量，用于自测*/
char tab_CurrentCT_edit[5] = {"0000"};
char tab_VoltageCT_edit[5] = {"0000"};
bool_t bCTEnableFlag = STATUS_FALSE;

char tab_CurrentCT_edit_modify[5] = {"0000"};
char tab_VoltageCT_edit_modify[5] = {"0000"};
bool_t bCTEnableFlag_modify = STATUS_FALSE;

char tab_LoginPassword_edit[7]   = {"000000"};//登陆密码

/*密码设置全局变量，用于自测*/
char tab_SerialAddress_edit[4]  = {"000"}; 
char tab_SerialBaud_edit[6]     = {"00000"};
bool_t bMeterEnableFlag = STATUS_FALSE;

char tab_SerialAddress_edit_modify[4]  = {"000"}; 
char tab_SerialBaud_edit_modify[6]     = {"00000"};
bool_t bMeterEnableFlag_modify = STATUS_FALSE;

/*无功设置全局变量*/
uint8_t gU8ReactPowerControlWay_modify = 0;
char tab_ReactPower_edit[6] = {"00000"};
char tab_ReactPower_edit_modify[6] = {"00000"};
char tab_PF_edit[7] = {"0.000"};
char tab_PF_edit_modify[7] = {"0.000"};

/*发电机功率全局变量*/
char tab_Gen_RatedPower_edit[5] = {"0000"};
char tab_Gen_MaxPower_edit[5] = {"0000"};
char tab_Gen_RatedPower_edit_modify[5] = {"0000"};
char tab_Gen_MaxPower_edit_modify[5] = {"0000"};
uint8_t gU8UsageSelectCounter_modify = 0;
uint8_t gU8DryRlySelectCounter_modify = 0;
char tab_IntelLoad_CutSOC_edit[4] = {"000"};
char tab_IntelLoad_AccessSOC_edit[4] = {"000"};
char tab_IntelLoad_CutSOC_edit_modify[4] = {"000"};
char tab_IntelLoad_AccessSOC_edit_modify[4] = {"000"};

/*RTC 实时时间*/
TimeInf_t tab_SysTime;
/*使能参数 修改*/
uint8_t gU8EnableProtect_modify = 0;

/* 策略设置*/
uint8_t gU8StrategyCounter_modify = 0;

/* 语言设置*/
uint8_t gU8SettLanguageCounter_modify = 0;

uint8_t gU8BatteryManufacturerCounter_modify = 0;

/*LiIon电池通信方式*/
uint8_t gU8BatteryComWayCounter_modify = 0;
 /* 安规标准*/
uint8_t gU8GridSRCounter_modify = 0;
int16_t S16ReactivePowerValue = 0;
int16_t S16PowerFactorValue = 100;

//英文
Display_Flicker_Pos arrayFixCTFlicker[DISPLAY_SET_SYSTEM_CT_ITEM_COUNT];                           /*CT字符跳动位置定长数组*/  
Display_Flicker_Pos arrayFixTimeFlicker[DISPLAY_SET_SYSTEM_TIME_ITEM_COUNT-1];                     /*时间字符跳动位置定长数组*/
Display_Flicker_Pos arrayVarTimeFlicker[WEEK_NULL];                                                /*时间字符跳动位置定长数组*/
Display_Flicker_Pos arrayFixPasswordFlicker[DISPLAY_SET_SYSTEM_PASSWORD_COUNT];                    /*密码字符跳动位置定长数组*/
Display_Flicker_Pos arrayFixSerialFlicker[DISPLAY_SET_SYSTEM_SERIAL_ITEM_COUNT];                   /*串口字符跳动位置定长数组*/
Display_Flicker_Pos arrayPriceFlicker[DISPLAY_SET_GRID_PRICE_INPUT_COUNT];                         /*电价字符跳动位置定长数组*/
Display_Flicker_Pos arrayPriceTimeFlicker[DISPLAY_SET_TPFV_TIME_ITEM_COUNT];                       /*电价时间字符跳动位置定长数组*/
Display_Flicker_Pos arrayTPFVStartegyFlicker[DISPLAY_SET_SYSTEM_STRATEGY_TPFV_NUMBER_COUNT];       /*峰谷模式字符跳动位置定长数组*/
Display_Flicker_Pos arrayREGULARStartegyFlicker[DISPLAY_SET_SYSTEM_STRATEGY_REGULAR_INPUT_COUNT];  /*定时模式字符跳动位置定长数组*/
Display_Flicker_Pos arrayBACKUPStartegyFlicker[DISPLAY_SET_SYSTEM_STRATEGY_BACKUP_RATEPOWER_COUNT];/*备电模式字符跳动位置定长数组*/
Display_Flicker_Pos arrayGENStartegyFlicker[DISPLAY_SET_SYSTEM_STRATEGY_GEN_SOC_COUNT];            /*发电机模式字符跳动位置定长数组*/
Display_Flicker_Pos arrayVarConfirmFlicker[DISPLAY_SET_SYSTEM_CONFIRM_ITEM_COUNT-1];                /*确认界面字符跳动位置定长数组*/
Display_Flicker_Pos arrayFixReactPowerFlicker[DISPLAY_SET_GRID_REACTIVEPOWER_COUNT];               /*无功功率字符跳动位置定长数组*/
Display_Flicker_Pos arrayFixPFFlicker[DISPLAY_SET_GRID_POWERFACTOR_COUNT];                         /*功率因数字符跳动位置定长数组*/
Display_Flicker_Pos arrayFixGenPowerParaFlicker[DISPLAY_SET_GEN_POWERPARA_COUNT];                  /*发电机功率参数字符跳动位置定长数组*/
Display_Flicker_Pos arrayFixIntelLoadParaFlicker[DISPLAY_SET_GEN_INTELLOAD_COUNT];                 /*发电机功率参数字符跳动位置定长数组*/
Display_Flicker_Pos arrayBMSLiIonEndOfSOCFlicker[DISPLAY_SET_BMS_TYPE_COUNT_LI_SOC_COUNT];         /*BMS-LiIon充放电截止SOC设置字符跳动位置定长数组*/
Display_Flicker_Pos arrayBMSLiIonMaxCurrentFlicker[DISPLAY_SET_BMS_TYPE_COUNT_LI_CURRENT_COUNT];   /*BMS-LiIon最大充放电电流设置字符跳动位置定长数组*/
Display_Flicker_Pos arrayBMSLeadAcidEndOfSOCFlicker[DISPLAY_SET_BMS_TYPE_COUNT_LEAD_SOC_COUNT];    /*BMS-LeadAcid充放电截止SOC设置字符跳动位置定长数组*/
Display_Flicker_Pos arrayVoltPointFlicker[DISPLAY_SET_BMS_TYPE_COUNT_LEAD_VOLTPOINT_COUNT];        /*BMS-LeadAcid电压点设置字符跳动位置定长数组*/

Display_Flicker_Pos arrayBMSLiIonCapacityAndCurrentFlicker[DISPLAY_SET_BMS_TYPE_COUNT_LEAD_CAPANDCUR_COUNT];   /*BMS-LiIon最大充放电电流设置字符跳动位置定长数组*/

Display_Flicker_Pos arrayFixPeakPeriodStartTimeParaFlicker[DISPLAY_StrategyStartTime_COUNT];             /*策略结束时间参数字符跳动位置定长数组*/
Display_Flicker_Pos arrayFixPeakPeriodEndTimeParaFlicker[DISPLAY_StrategyStartTime_COUNT];             /*策略结束时间参数字符跳动位置定长数组*/
Display_Flicker_Pos arrayFixStrategyPowerFlicker[DISPLAY_StrategyStartPower_ALL_COUNT];                 /*策略功率参数字符跳动位置定长数组*/
Display_Flicker_Pos arrayFixStrategySOCFlicker[DISPLAY_StrategySOC_ALL_COUNT];                    /*策略SOC参数字符跳动位置定长数组*/      
Display_Flicker_Pos arrayFixBackupPowerFlicker[DISPLAY_StrategyBackupPower_ALL_COUNT];                    /*策略SOC参数字符跳动位置定长数组*/    

//中文
Display_Flicker_Pos arrayFixCTFlickerChinese[DISPLAY_SET_SYSTEM_CT_ITEM_COUNT];                           /*CT字符跳动位置定长数组*/  
Display_Flicker_Pos arrayFixTimeFlickerChinese[DISPLAY_SET_SYSTEM_TIME_ITEM_COUNT-1];                     /*时间字符跳动位置定长数组*/
Display_Flicker_Pos arrayVarTimeFlickerChinese[WEEK_NULL];                                                /*时间字符跳动位置定长数组*/
Display_Flicker_Pos arrayFixPasswordFlickerChinese[DISPLAY_SET_SYSTEM_PASSWORD_COUNT];                    /*密码字符跳动位置定长数组*/
Display_Flicker_Pos arrayFixSerialFlickerChinese[DISPLAY_SET_SYSTEM_SERIAL_ITEM_COUNT];                   /*串口字符跳动位置定长数组*/
Display_Flicker_Pos arrayPriceFlickerChinese[DISPLAY_SET_GRID_PRICE_INPUT_COUNT];                         /*电价字符跳动位置定长数组*/
Display_Flicker_Pos arrayPriceTimeFlickerChinese[DISPLAY_SET_TPFV_TIME_ITEM_COUNT];                       /*电价时间字符跳动位置定长数组*/
Display_Flicker_Pos arrayTPFVStartegyFlickerChinese[DISPLAY_SET_SYSTEM_STRATEGY_TPFV_NUMBER_COUNT];       /*峰谷模式字符跳动位置定长数组*/
Display_Flicker_Pos arrayREGULARStartegyFlickerChinese[DISPLAY_SET_SYSTEM_STRATEGY_REGULAR_INPUT_COUNT];  /*定时模式字符跳动位置定长数组*/
Display_Flicker_Pos arrayBACKUPStartegyFlickerChinese[DISPLAY_SET_SYSTEM_STRATEGY_BACKUP_RATEPOWER_COUNT];/*备电模式字符跳动位置定长数组*/
Display_Flicker_Pos arrayGENStartegyFlickerChinese[DISPLAY_SET_SYSTEM_STRATEGY_GEN_SOC_COUNT];            /*发电机模式字符跳动位置定长数组*/
Display_Flicker_Pos arrayVarConfirmFlickerChinese[DISPLAY_SET_SYSTEM_CONFIRM_ITEM_COUNT-1];               /*确认界面字符跳动位置定长数组*/
Display_Flicker_Pos arrayFixReactPowerFlickerChinese[DISPLAY_SET_GRID_REACTIVEPOWER_COUNT];               /*无功功率字符跳动位置定长数组*/
Display_Flicker_Pos arrayFixPFFlickerChinese[DISPLAY_SET_GRID_POWERFACTOR_COUNT];                         /*功率因数字符跳动位置定长数组*/
/*************************全局变量区End****************************/

/***********************************************************************************************************************
 功能：显示模块全局变量初始化
***********************************************************************************************************************/
void Display_Service_InitVar(void)
{
    gEnumDispStatus = DISPLAY_INIT;
}

/***********************************************************************************************************************
 功能：显示模块硬件初始化
***********************************************************************************************************************/
void Display_Service_HwInit(void)
{
}

/***********************************************************************************************************************
 功能：显示处理任务
***********************************************************************************************************************/
void Display_Handler(void)
{
    if (TimeTask_GetFlag_20ms == STATUS_FALSE)
    {
        return;
    }

    if (TimeTask_GetFlag_1s == STATUS_TRUE)
    {
        GetDisplayRealTimeData();
    }

    switch (gEnumDispStatus)
    {
        case DISPLAY_INIT://LCD模块初始化
            {
                DisplayInit();
                gEnumDispStatus = DISPLAY_RUNNING;
            }
            break;
        case DISPLAY_RUNNING://LCD模块运行
            {
                #if LCD_ATE_TEST
                AteDisplayRunning();
                #else
                DisplayRunning();
                #endif
            } 
            break;
        case DISPLAY_DESTRCUCTION://LCD模块析构,预留
            {
                DisplayDestruction();
            }
            break;
        default:

        break;
    }
}

/***************************************************************************
 功能:初始化驱动，全局变量等
****************************************************************************/
void DisplayInit(void)
{   
#if LCD_DEVICE_KS0108_6800_MOUDLE
    GUI_Init();//初始化液晶显示器
#endif
    //初始页面为HOME页面
    gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_HOME;
    //初始上一个页面为空页面
    gLastMenu.eLastDisplayMenuType = DISPLAY_NULL;
    //页面编辑状态初始化为false
    gbEditFlag = STATUS_FALSE;
    //初始化显示缓存为零
    memset(tab_display, 0, DISPLAY_CACHE_SIZE);
    memset(&keyDetectStatus, 0, sizeof(Display_KEYDetection_Status));            //检测按键结果
    memset(&Display_KeyDetectionFilter, 0, sizeof(Display_KeyDetectionFilter_t)); //按键滤波时间计数
    memset(&tab_SysTime, 0, sizeof(TimeInf_t));
    //setSystemLanguageItem(LANGUAGE_ENGLISH);                   //调试使用
   
    //读取语言配置
    SystemLanguageInit();
    
    //
    gPromptCount = 0;

    Flash_Device_StatisticsData_Read(&gDisplay.stDisplayData.stStatistical,sizeof(Display_DATA_STATISTICAL));                              //重启加载统计数据  
    Flash_Device_ElecPriceData_Read(&gDisplay.stDisplaySet.stGrid.stTimeDivisionElecPrice,sizeof(Display_SET_Grid_TimeDivisionElecPrice)); //重启加载分时电价数据
    Flash_Device_StrategyData_Read(&gDisplay.stDisplaySet.stStrategy,sizeof(Display_SET_System_Strategy));                                 //重启加载系统策略数据 
    Flash_Device_LanguageType_Read((uint8_t *)&gDisplay.stDisplaySet.u8LanguageType);                                                      //重启加载语言设置类型 
    Flash_Device_ControlMode_Read((uint8_t *)&gDisplay.stDisplaySet.u8RemoteControl);                                                      //重启加载控制方式设置
    Flash_Device_Password_Read(gDisplay.stDisplaySet.stPasswordModify.u8ArrayOldPassword,DISPLAY_LOGIN_PASSWORD_COUNT);                    //重启加载登陆设置密码
    Flash_Device_PCSSerial_Read(&gDisplay.stDisplaySet.stDspUsartParas,sizeof(Display_SET_USART_Paras));                                   //重启加载PCS串口信息
    Flash_Device_CTRadio_Read(&gDisplay.stDisplaySet.stCTRadio,sizeof(Display_SET_System_CTRadio));                                        //重启加载CT校准信息
    Flash_Device_ProtectInfo_Read(&gDisplay.stDisplaySet.stProtectEnable,sizeof(Display_SET_System_ProtectEnable));                        //重启加载保护使能信息
    Flash_Device_InsulationInfo_Read((uint8_t *)&gDisplay.stDisplaySet.u8InsulationImpedanceDetectionFlag);                                //重启加载绝缘检测使能信息
    Flash_Device_PVInfo_Read(&gDisplay.stDisplaySet.stPV,sizeof(Display_SET_PV));                                                          //重启加载光伏信息
    Flash_Device_BMSInfo_Read(&gDisplay.stDisplaySet.stBMS,sizeof(Display_SET_BMS));                                                       //重启加载电池信息
    Flash_Device_GridInfo_Read(&gDisplay.stDisplaySet.stGrid,sizeof(Display_SET_Grid));                                                    //重启加载电网信息
    Flash_Device_GenInfo_Read(&gDisplay.stDisplaySet.stGen,sizeof(Display_SET_Gen));                                                       //重启加载发电机信息
    
    //安规初始化
    SafetyRegulationInit(gDisplay.stDisplaySet.stGrid.u8SafetyRegulationType);
    
    //英文字符闪烁点阵初始化
    ArrayFixFlickerStartPosAndEndPosInit_English();
    //中文文字符闪烁点阵初始化
    ArrayFixFlickerStartPosAndEndPosInit_Chinese();

}

/***************************************************************************
 功能:Display总运行函数
****************************************************************************/

void DisplayRunning(void)
{   
    static uint16_t sU16RealtimeCounter = 0;
    
    KeyAction_TypeDef actionType =  KEYACTION_NULL;                     //按键操作意图  
    
    memset(tab_display,0,DISPLAY_CACHE_SIZE);                           //初始化显存
    
    keyDetectStatus = getKeyDetectionStatus();                          //按键检测 
    
    if(keyDetectionFlag == STATUS_FALSE)                                //松手检测完成
    {
        actionType = getDisplayHandleCodeByKeyDetection(keyDetectStatus);//根据按键检测得到按键处理功能码 
    }
    
    if(actionType == KEYACTION_NULL)
    {
        sU16RealtimeCounter++;
        if(sU16RealtimeCounter >= KEYACTIONNULLCONTER)                             
        {
            Display_Fault_t ptDisplayFault;
            memset(&ptDisplayFault ,0, sizeof(ptDisplayFault));
            GetDisplayDeviceFaultState(&ptDisplayFault);
            if((ptDisplayFault.eDeviceFault == DEVICESTATE_FAULT)||
               (ptDisplayFault.eDeviceFault == DEVICESTATE_ALARM))
            {
                gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_DATA_DISPLAYREALFAULTRECORD;
            }
            else
            {
                gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_HOME; 
            }
            sU16RealtimeCounter = 0;
            gbEditFlag = STATUS_FALSE;
            Display_Set_UnderLine_Blink_Position(STATUS_FALSE,0,0);
        }
    }
    else 
    {
        sU16RealtimeCounter = 0;
    }
    
    switch(gCurrentMenu.eCurrentDisplayMenuType)//本次界面操作类型
    {
        case DISPLAY_HOME://主界面
            {
                updateDisplayHomeData(actionType,gCurrentMenu.eCurrentDisplayMenuType);
            }
            break;
        case DISPLAY_LOGIN://登陆界面
            {
                updateDisplayLoginData(actionType,gCurrentMenu.eCurrentDisplayMenuType);
            }
            break;
        case DISPLAY_MENU://菜单页面
            {
                updateDisplayMenuSetData(actionType, gCurrentMenu.eCurrentDisplayMenuType);
            }
        break;
                case DISPLAY_DETAILEDINFO://详细信息页面
            {
               updateDisplayDETAILEDINFOIndexSetData(actionType, gCurrentMenu.eCurrentDisplayMenuType);
            }
        break;
        case DISPLAY_RunningStatus: //状态机运行界面
            {
                updateDisplayRunningStatus(actionType,gCurrentMenu.eCurrentDisplayMenuType);
            }
        break;
        case DISPLAY_MachinStatus:  //整机数据状态运行界面
            {
                updateDisplayMachinData(actionType,gCurrentMenu.eCurrentDisplayMenuType);
            }
        break;

        case DISPLAY_GridInfo:  //电网数据状态运行界面
            {
                updateDisplayGridData(actionType,gCurrentMenu.eCurrentDisplayMenuType);
            }
        break;
        case DISPLAY_Photovoltaic:  //光伏数据状态运行界面
            {
                updateDisplayPVData(actionType,gCurrentMenu.eCurrentDisplayMenuType);
            }
        break;
        case DISPLAY_Battery:  //电池数据状态运行界面
            {
                updateDisplayBatteryData(actionType,gCurrentMenu.eCurrentDisplayMenuType);
            }
        break;
        case DISPLAY_PowerLoad:  //电池数据状态运行界面
            {
                updateDisplayPowerLodaData(actionType,gCurrentMenu.eCurrentDisplayMenuType);
            }
        break;
        case DISPLAY_Generator:      //发电机数据运行界面
            {
                updateDisplayGeneratorData(actionType,gCurrentMenu.eCurrentDisplayMenuType);
            }
        break;
        case DISPLAY_Factory:       //出厂设置数据运行界面
            {
                updateDisplayFactoryData(actionType,gCurrentMenu.eCurrentDisplayMenuType);
            }
        case DISPLAY_LOG:           //历史记录显示界面
            {
                updateDisplayLogData(actionType,gCurrentMenu.eCurrentDisplayMenuType);
            }
        break;
        case DISPLAY_SET://设置界面
            {
                updateDisplaySettingMenuData(actionType,gCurrentMenu.eCurrentDisplayMenuType);
            }
            break;
        case DISPLAY_STATISTICS:    //统计数据菜单页面
            {
                updateDisplayStatistics(actionType,gCurrentMenu.eCurrentDisplayMenuType);
            }
        break;  
        case DISPLAY_STATISTICS_DAY:    //当日统计
        {
            updateDisplayStatistics_Day(actionType,gCurrentMenu.eCurrentDisplayMenuType);
        }
        break;  
        case DISPLAY_STATISTICS_MONTH:    //当月统计
        {
            updateDisplayStatistics_Month(actionType,gCurrentMenu.eCurrentDisplayMenuType);
        }
        break; 
        case DISPLAY_STATISTICS_YEAR:    //当年统计
        {
            updateDisplayStatistics_Year(actionType,gCurrentMenu.eCurrentDisplayMenuType);
        }
        break; 
        case DISPLAY_STATISTICS_ALL:    //当月统计
        {
            updateDisplayStatistics_All(actionType,gCurrentMenu.eCurrentDisplayMenuType);
        }
        break; 
        case DISPLAY_SET_PV://光伏设置界面
            {
                updateDisplayPVSetData(actionType,gCurrentMenu.eCurrentDisplayMenuType);
            }
            break;
        case DISPLAY_SET_PV_CONTROLWAY://光伏控制方式设置界面
            {
                updateDisplayPVControlWaySetData(actionType,gCurrentMenu.eCurrentDisplayMenuType);
            }
            break;
        case DISPLAY_SET_PV_SCAN://光伏IV扫描设置界面
            {
                updateDisplayProtectItemSetData(gCurrentMenu.eCurrentDisplayMenuType,actionType,ENABLE_CLASS_CURVE_SCAN);
            }
            break;
		case DISPLAY_SET_PV_VOC://光伏开路电压设置
            {
                //updateDisplayPV_VOSetData(actionType,gCurrentMenu.eCurrentDisplayMenuType);
            }
            break;
        case DISPLAY_SET_BATTERY://电池设置界面
            {
                updateDisplayBMSSetData(actionType,gCurrentMenu.eCurrentDisplayMenuType);                
            }
            break;
        case DISPLAY_SET_BATTERY_ENABLE://电池使能设置界面
            {
                updateDisplayProtectItemSetData(gCurrentMenu.eCurrentDisplayMenuType,actionType,ENABLE_CLASS_BATTERY_ENABLE);                
            }
            break;
        //case DISPLAY_SET_BATTERY_WAKEUP://电池唤醒设置界面
        //    {
        //        updateDisplayProtectItemSetData(gCurrentMenu.eCurrentDisplayMenuType,actionType,ENABLE_CLASS_BATTERY_WAKEUP);                
        //    }
        //    break;
        case DISPLAY_SET_BATTERY_TYPE://电池类型设置界面
            {
                updateDisplayBatteryTypeSetData(actionType,gCurrentMenu.eCurrentDisplayMenuType);         
            }
            break;
        //case DISPLAY_SET_BATTERY_TYPE_LI_ION://LI电池类型设置界面
        //    {
        //        updateDisplayLiBatteryTypeSetData(actionType,gCurrentMenu.eCurrentDisplayMenuType);         
        //    }
        //    break;
        case DISPLAY_SET_BATTERY_TYPE_LI_ION://LI电池参数设置界面
            {
                updateDisplayBatteryLiIonParaSetData(actionType,gCurrentMenu.eCurrentDisplayMenuType);         
            }
            break;
        case DISPLAY_SET_BATTERY_TYPE_LI_ION_MANUFACTURER://电池厂商界面
            {
                updateDisplayBatteryManufacturerSetData(actionType,gCurrentMenu.eCurrentDisplayMenuType);         
            }
            break;
        case DISPLAY_SET_BATTERY_TYPE_LI_ION_COMWAY://Li.Ion通信方式设置界面
            {
                updateDisplayBatteryLiIonComWaySetData(actionType,gCurrentMenu.eCurrentDisplayMenuType);         
            }
            break;
        case DISPLAY_SET_BATTERY_TYPE_LI_ION_ENDOF_SOC:   //BMS充放电SOC设置界面
            {
                updateDisplayBatteryLiIonParaSetEndofSOCData(actionType,gCurrentMenu.eCurrentDisplayMenuType);         
            }
            break;
        case DISPLAY_SET_BATTERY_TYPE_LI_ION_CURRENT:   //BMS最大电流设置界面
            {
                updateDisplayBatteryLiIonParaSetCurrentData(actionType,gCurrentMenu.eCurrentDisplayMenuType);         
            }
            break;
        //case DISPLAY_SET_BATTERY_TYPE_LI_ION_OVERPROCTECT:   //BMS过充过放保护设置界面
        //    {
                //updateDisplayBatteryLiIonParaSetOverProctectData(actionType,gCurrentMenu.eCurrentDisplayMenuType);         
        //    }
        //    break;
        case DISPLAY_SET_BATTERY_TYPE_LEAD_ACID://LEAD电池类型设置界面
            {
                updateDisplayLeadAcidBatteryTypeSetData(actionType,gCurrentMenu.eCurrentDisplayMenuType);         
            }
            break;
        case DISPLAY_SET_BATTERY_TYPE_LEAD_ACID_CAPANDCUR:   //BMS容量和最大充放电流设置界面
            {
                updateDisplayLeadAcidBatteryParaSetCapacityData(actionType,gCurrentMenu.eCurrentDisplayMenuType);         
            }
            break;
        case DISPLAY_SET_BATTERY_TYPE_LEAD_ACID_ENDOF_SOC:   //BMS充放电SOC设置界面
            {
                updateDisplayBatteryLeadAcidParaSetEndofSOCData(actionType,gCurrentMenu.eCurrentDisplayMenuType);         
            }
            break;
        case DISPLAY_SET_BATTERY_TYPE_LEAD_ACID_VOLTPOINT:   //BMS电压点设置界面
            {
                updateDisplayLeadAcidBatteryParaSetVoltPointData(actionType,gCurrentMenu.eCurrentDisplayMenuType);         
            }
            break;
        case DISPLAY_SET_GEN://发电机设置界面
            {
                updateDisplayGenSetData(actionType,gCurrentMenu.eCurrentDisplayMenuType);
            }
            break;
        case DISPLAY_SET_GEN_USE://发电机用途选择能界面
            {
                updateDisplayGenUsageSelectSetData(actionType,gCurrentMenu.eCurrentDisplayMenuType);
            }
            break;
        case DISPLAY_SET_GEN_DRYRLY://发电机干接点选择能界面
            {
                updateDisplayGenDryRlySelectSetData(actionType,gCurrentMenu.eCurrentDisplayMenuType);
            }
            break;
        case DISPLAY_SET_GEN_ENABLE://发电机使能界面
            {
                updateDisplayProtectItemSetData(gCurrentMenu.eCurrentDisplayMenuType,actionType,ENABLE_CLASS_GEN);
            }
            break;
        case DISPLAY_SET_GEN_POWERPARA://发电机功率参数界面
            {
                updateDisplayGenPowerParaSetData(actionType,gCurrentMenu.eCurrentDisplayMenuType);
            }
            break;
        case DISPLAY_SET_GEN_INTELLOADPARA://智能负载参数界面
            {
                updateDisplayIntelLoadParaSetData(actionType,gCurrentMenu.eCurrentDisplayMenuType);
            }
            break;
//        case DISPLAY_SET_UPGRADE://升级
//            {
//                updateDisplayUpgradeData(actionType,gCurrentMenu.eCurrentDisplayMenuType);               
//            }
//            break;  
        case DISPLAY_SET_GRID://电网设置界面
            {
                updateDisplayGridSetData(actionType,gCurrentMenu.eCurrentDisplayMenuType);  
            }
            break;
        case DISPLAY_SET_GRID_SELLENABLE://电网买电使能设置界面
            {
                updateDisplayProtectItemSetData(gCurrentMenu.eCurrentDisplayMenuType,actionType,ENABLE_CLASS_SELL);     
            }
            break;
        case DISPLAY_SET_GRID_ANTIREFLUX://防逆流使能使能设置界面
            {
                updateDisplayProtectItemSetData(gCurrentMenu.eCurrentDisplayMenuType,actionType,ENABLE_CLASS_ANTIREFLUX);   
            }
            break;
        case DISPLAY_SET_GRID_METER://电表设置界面
            {
                updateDisplaySystemSerialSetData(actionType,gCurrentMenu.eCurrentDisplayMenuType,SERIAL_USE_Meter);                
            }
            break;
        case DISPLAY_SET_GRID_SR://安规设置
            {
                updateDisplayGridSRSetData(actionType,gCurrentMenu.eCurrentDisplayMenuType);    
            }
            break; 
        case DISPLAY_SET_GRID_REACTIVEPOWERCONTROLWAY://无功控制方式修改设置
            {
                updateDisplayGridReactPowerControlWaySetData(actionType,gCurrentMenu.eCurrentDisplayMenuType);    
            }
            break;
		case DISPLAY_SET_GRID_POWERSETTING://功率设置
            {
                updateDisplayGridPowerSettingsData(actionType,gCurrentMenu.eCurrentDisplayMenuType);    
            }
            break;		
        case  DISPLAY_SET_GRID_REACTIVEPOWER://无功功率设置
            {
                updateDisplayGridReactivePowerSetData(actionType,gCurrentMenu.eCurrentDisplayMenuType);    
            }
            break;
        case DISPLAY_SET_GRID_POWERFACTOR://功率因素设置
            {
                updateDisplayGridPowerFactorSetData(actionType,gCurrentMenu.eCurrentDisplayMenuType);    
            }
            break; 
        case DISPLAY_SET_GRID_TIMEDIVEPRICE://电网分时电价设置
            {
                updateDisplayGridPriceSetData(actionType,gCurrentMenu.eCurrentDisplayMenuType); 
            }
            break; 
        case DISPLAY_SET_GRID_TIMEDIVEPRICE_TPFV_TIP://电网尖时电价设置
            {
                updateDisplayGridPriceTPFVSetData(actionType,gCurrentMenu.eCurrentDisplayMenuType,TPFV_TIP);    
            }
            break; 
        case DISPLAY_SET_GRID_TIMEDIVEPRICE_TPFV_TIP_PERIOD_ONE://电网尖时时间段设置
            {
                updateDisplayGridPriceTPFVTimePeriodSetData(actionType,gCurrentMenu.eCurrentDisplayMenuType,TPFV_TIP,PRICE_TPFV_PERIOD_ONE);
            }
            break; 
        case DISPLAY_SET_GRID_TIMEDIVEPRICE_TPFV_TIP_PERIOD_TWO://电网尖时时间段二设置
            {
                updateDisplayGridPriceTPFVTimePeriodSetData(actionType,gCurrentMenu.eCurrentDisplayMenuType,TPFV_TIP,PRICE_TPFV_PERIOD_TWO);    
            }
            break;
        case DISPLAY_SET_GRID_TIMEDIVEPRICE_TPFV_TIP_PERIOD_THREE://电网尖时时间段三设置
            {
                updateDisplayGridPriceTPFVTimePeriodSetData(actionType,gCurrentMenu.eCurrentDisplayMenuType,TPFV_TIP,PRICE_TPFV_PERIOD_THREE);  
            }
            break;
        case DISPLAY_SET_GRID_TIMEDIVEPRICE_TPFV_PEAK://电网峰时电价设置
            {
                updateDisplayGridPriceTPFVSetData(actionType,gCurrentMenu.eCurrentDisplayMenuType,TPFV_PEAK);   
            }
            break;
        case DISPLAY_SET_GRID_TIMEDIVEPRICE_TPFV_PEAK_PERIOD_ONE://电网峰时时间段一设置
            {
                updateDisplayGridPriceTPFVTimePeriodSetData(actionType,gCurrentMenu.eCurrentDisplayMenuType,TPFV_PEAK,PRICE_TPFV_PERIOD_ONE);                
            }
            break; 
        case DISPLAY_SET_GRID_TIMEDIVEPRICE_TPFV_PEAK_PERIOD_TWO://电网峰时时间段二设置
            {
                updateDisplayGridPriceTPFVTimePeriodSetData(actionType,gCurrentMenu.eCurrentDisplayMenuType,TPFV_PEAK,PRICE_TPFV_PERIOD_TWO);                 
            }
            break;
        case DISPLAY_SET_GRID_TIMEDIVEPRICE_TPFV_PEAK_PERIOD_THREE://电网峰时时间段三设置
            {
                updateDisplayGridPriceTPFVTimePeriodSetData(actionType,gCurrentMenu.eCurrentDisplayMenuType,TPFV_PEAK,PRICE_TPFV_PERIOD_THREE);                
            }
            break;
        case DISPLAY_SET_GRID_TIMEDIVEPRICE_TPFV_FLAT://电网平时电价设置
            {
                updateDisplayGridPriceTPFVSetData(actionType,gCurrentMenu.eCurrentDisplayMenuType,TPFV_FLAT);
            }
            break;
        case DISPLAY_SET_GRID_TIMEDIVEPRICE_TPFV_FLAT_PERIOD_ONE://电网平时时间段一设置
            {
                updateDisplayGridPriceTPFVTimePeriodSetData(actionType,gCurrentMenu.eCurrentDisplayMenuType,TPFV_FLAT,PRICE_TPFV_PERIOD_ONE);   
            }
            break; 
        case DISPLAY_SET_GRID_TIMEDIVEPRICE_TPFV_FLAT_PERIOD_TWO://电网平时时间段二设置
            {
                updateDisplayGridPriceTPFVTimePeriodSetData(actionType,gCurrentMenu.eCurrentDisplayMenuType,TPFV_FLAT,PRICE_TPFV_PERIOD_TWO);       
            }
            break;
        case DISPLAY_SET_GRID_TIMEDIVEPRICE_TPFV_FLAT_PERIOD_THREE://电网平时时间段三设置
            {
                updateDisplayGridPriceTPFVTimePeriodSetData(actionType,gCurrentMenu.eCurrentDisplayMenuType,TPFV_FLAT,PRICE_TPFV_PERIOD_THREE);     
            }
            break;
        case DISPLAY_SET_GRID_TIMEDIVEPRICE_TPFV_VALLEY://电网谷时电价设置
            {
                updateDisplayGridPriceTPFVSetData(actionType,gCurrentMenu.eCurrentDisplayMenuType,TPFV_VALLEY); 
            }
            break;
        case DISPLAY_SET_GRID_TIMEDIVEPRICE_TPFV_VALLEY_PERIOD_ONE://电网谷时时间段一设置
            {
                updateDisplayGridPriceTPFVTimePeriodSetData(actionType,gCurrentMenu.eCurrentDisplayMenuType,TPFV_VALLEY,PRICE_TPFV_PERIOD_ONE);
            }
            break; 
        case DISPLAY_SET_GRID_TIMEDIVEPRICE_TPFV_VALLEY_PERIOD_TWO://电网谷时时间段二设置
            {
                updateDisplayGridPriceTPFVTimePeriodSetData(actionType,gCurrentMenu.eCurrentDisplayMenuType,TPFV_VALLEY,PRICE_TPFV_PERIOD_TWO);
            }
            break;
        case DISPLAY_SET_GRID_TIMEDIVEPRICE_TPFV_VALLEY_PERIOD_THREE://电网谷时时间段三设置
            {
                updateDisplayGridPriceTPFVTimePeriodSetData(actionType,gCurrentMenu.eCurrentDisplayMenuType,TPFV_VALLEY,PRICE_TPFV_PERIOD_THREE);
            }
            break;
        case DISPLAY_SET_SYSTEM://系统设置界面
            {
                updateDisplaySystemSetData(actionType,gCurrentMenu.eCurrentDisplayMenuType);
            }
            break;
        case DISPLAY_SET_SYSTEM_LANGUAGE://语言设置界面
            {
                updateDisplaySystemLanguageSetData(actionType,gCurrentMenu.eCurrentDisplayMenuType);
            }
            break;
        case DISPLAY_SET_SYSTEM_TIME://时间设置界面
            {
                updateDisplaySystemTimeSetData(actionType,gCurrentMenu.eCurrentDisplayMenuType);
            }
            break;
        case DISPLAY_SET_SYSTEM_PASSWORD://密码设置界面
            {
                updateDisplaySystemPasswordSetData(actionType,gCurrentMenu.eCurrentDisplayMenuType);
            }
            break;  
        case DISPLAY_SET_SYSTEM_CLEARFAULT://清除故障告警
            {
                updateDisplaySystemClearFaultData();
            }
            break; 
        case DISPLAY_SET_SYSTEM_CLEARRECORD://清除操作记录
            {
                updateDisplaySystemClearRecordData();
            }
            break;     
        case DISPLAY_SET_SYSTEM_SERIAL://串口设置
            {
                updateDisplaySystemSerialSetData(actionType,gCurrentMenu.eCurrentDisplayMenuType,SERIAL_USE_PCS);
            }
            break; 
        case DISPLAY_SET_SYSTEM_FACTORY://恢复出厂设置
            {
               updateDisplaySystemFactorySetData();
            }
            break;
        case DISPLAY_SET_SYSTEM_RESET://通信复位
            {
                updateDisplaySystemCommResetData(actionType,gCurrentMenu.eCurrentDisplayMenuType);
            }
            break;   
        case DISPLAY_SET_SYSTEM_REMOTECONTROL://远程控制
            {
                updateDisplaySystemRemoteControlData(actionType,gCurrentMenu.eCurrentDisplayMenuType);
            }
            break;
        case DISPLAY_SET_SYSTEM_STRATEGY://策略设置
            {
                updateDisplayPolicySettingsData(actionType,gCurrentMenu.eCurrentDisplayMenuType);
            }
            break;
        case DISPLAY_SET_SYSTEM_STRATEGY_TPFV://TPFV策略设置
            {
                //updateDisplaySystemTPFVStrategyAbstractSetData(actionType,gCurrentMenu.eCurrentDisplayMenuType);
                updateDisplayPeakLoadShiftingSetData(actionType,gCurrentMenu.eCurrentDisplayMenuType);
            }
            break;
        case DISPLAY_SET_SYSTEM_STRATEGY_TPFV_TIP://TPFV tip策略设置
            {
                updateDisplaySystemTPFVStrategySetData(actionType,gCurrentMenu.eCurrentDisplayMenuType,TPFV_TIP);
            }
            break;
        case DISPLAY_SET_SYSTEM_STRATEGY_TPFV_TIP_PERIOD_ONE:  //TPFV tip 时间段 1策略设置
            {
                updateDisplaySystemTPFVStrategyPeriodSetData(actionType,gCurrentMenu.eCurrentDisplayMenuType,TPFV_TIP,STRATEGY_TPFV_PERIOD_ONE);
            }
            break;
        case DISPLAY_SET_SYSTEM_STRATEGY_TPFV_TIP_PERIOD_TWO:  //TPFV tip 时间段 2策略设置
            {
                updateDisplaySystemTPFVStrategyPeriodSetData(actionType,gCurrentMenu.eCurrentDisplayMenuType,TPFV_TIP,STRATEGY_TPFV_PERIOD_TWO);
            }
            break;
        case DISPLAY_SET_SYSTEM_STRATEGY_TPFV_TIP_PERIOD_THREE://TPFV tip 时间段 3策略设置
            {
                updateDisplaySystemTPFVStrategyPeriodSetData(actionType,gCurrentMenu.eCurrentDisplayMenuType,TPFV_TIP,STRATEGY_TPFV_PERIOD_THREE);
            }
            break;
        case DISPLAY_SET_SYSTEM_STRATEGY_TPFV_PEAK://TPFV peak策略设置
            {
                updateDisplaySystemTPFVStrategySetData(actionType,gCurrentMenu.eCurrentDisplayMenuType,TPFV_PEAK);
            }
            break;
        case DISPLAY_SET_SYSTEM_STRATEGY_TPFV_PEAK_PERIOD_ONE:  //TPFV peak 时间段 1策略设置
            {
                updateDisplayPeakLoadShiftingPEAKVALLEYSetData(actionType,gCurrentMenu.eCurrentDisplayMenuType,STRATEGY_TPFV_PEAK_PERIOD_ONE);
            }
            break;
        case DISPLAY_SET_SYSTEM_STRATEGY_TPFV_PEAK_PERIOD_TWO:  //TPFV peak 时间段 2策略设置
            {
                updateDisplayPeakLoadShiftingPEAKVALLEYSetData(actionType,gCurrentMenu.eCurrentDisplayMenuType,STRATEGY_TPFV_PEAK_PERIOD_TWO);

            }
            break;
        case DISPLAY_SET_SYSTEM_STRATEGY_TPFV_PEAK_PERIOD_THREE://TPFV peak 时间段 3策略设置
            {
                updateDisplayPeakLoadShiftingPEAKVALLEYSetData(actionType,gCurrentMenu.eCurrentDisplayMenuType,STRATEGY_TPFV_PEAK_PERIOD_THREE);

            }
            break;
        case DISPLAY_SET_SYSTEM_STRATEGY_TPFV_FLAT://TPFV plat策略设置
            {
                updateDisplaySystemTPFVStrategySetData(actionType,gCurrentMenu.eCurrentDisplayMenuType,TPFV_FLAT);
            }
            break;
        case DISPLAY_SET_SYSTEM_STRATEGY_TPFV_FLAT_PERIOD_ONE:  //TPFV plat 时间段 1策略设置
            {
                updateDisplaySystemTPFVStrategyPeriodSetData(actionType,gCurrentMenu.eCurrentDisplayMenuType,TPFV_FLAT,STRATEGY_TPFV_PERIOD_ONE);
            }
            break;
        case DISPLAY_SET_SYSTEM_STRATEGY_TPFV_FLAT_PERIOD_TWO:  //TPFV plat 时间段 2策略设置
            {
                updateDisplaySystemTPFVStrategyPeriodSetData(actionType,gCurrentMenu.eCurrentDisplayMenuType,TPFV_FLAT,STRATEGY_TPFV_PERIOD_TWO);
            }
            break;
        case DISPLAY_SET_SYSTEM_STRATEGY_TPFV_FLAT_PERIOD_THREE://TPFV plat 时间段 3策略设置
            {
                updateDisplaySystemTPFVStrategyPeriodSetData(actionType,gCurrentMenu.eCurrentDisplayMenuType,TPFV_FLAT,STRATEGY_TPFV_PERIOD_THREE);
            }
            break;
        case DISPLAY_SET_SYSTEM_STRATEGY_TPFV_VALLEY://TPFV valley策略设置
            {
                updateDisplaySystemTPFVStrategySetData(actionType,gCurrentMenu.eCurrentDisplayMenuType,TPFV_VALLEY);
            }
            break;
        case DISPLAY_SET_SYSTEM_STRATEGY_TPFV_VALLEY_PERIOD_ONE:  //TPFV valley 时间段 1策略设置
            {
                updateDisplayPeakLoadShiftingPEAKVALLEYSetData(actionType,gCurrentMenu.eCurrentDisplayMenuType,STRATEGY_TPFV_VALLEY_PERIOD_ONE);
            }
            break;
        case DISPLAY_SET_SYSTEM_STRATEGY_TPFV_VALLEY_PERIOD_TWO:  //TPFV valley 时间段 2策略设置
            {
                updateDisplayPeakLoadShiftingPEAKVALLEYSetData(actionType,gCurrentMenu.eCurrentDisplayMenuType,STRATEGY_TPFV_VALLEY_PERIOD_TWO);
            }
            break;
        case DISPLAY_SET_SYSTEM_STRATEGY_TPFV_VALLEY_PERIOD_THREE://TPFV valley 时间段 3策略设置
            {
                updateDisplayPeakLoadShiftingPEAKVALLEYSetData(actionType,gCurrentMenu.eCurrentDisplayMenuType,STRATEGY_TPFV_VALLEY_PERIOD_THREE);
            }
            break;
        case DISPLAY_SET_SYSTEM_STRATEGY_SELFUSE://自发自用策略设置
            {
                updateDisplaySystemSelfStrategySetData(actionType,gCurrentMenu.eCurrentDisplayMenuType);
            }
            break;
        case DISPLAY_SET_SYSTEM_STRATEGY_BACKUP://备电策略设置
            {
                updateDisplayBackupPowerSetData(actionType,gCurrentMenu.eCurrentDisplayMenuType);
            }
            break;
        case DISPLAY_SET_SYSTEM_STRATEGY_GEN://发电机策略设置
            {
                updateDisplaySystemGenStrategySetData(actionType,gCurrentMenu.eCurrentDisplayMenuType);
            }
            break;
        case DISPLAY_SET_SYSTEM_STRATEGY_REGULAR://定时充放电策略设置
            {
                updateDisplaySystemRegularStrategyAbstractSetData(actionType,gCurrentMenu.eCurrentDisplayMenuType);
            }
            break;
        case DISPLAY_SET_SYSTEM_STRATEGY_REGULAR_CHARGE://定时充电策略设置
            {
                updateDisplaySystemRegularStrategySetData(actionType,gCurrentMenu.eCurrentDisplayMenuType,REGULAR_CHARGE);
            }
            break;
        case DISPLAY_SET_SYSTEM_STRATEGY_REGULAR_CHARGE_PERIOD_ONE://定时充电策略时间段一设置
            {
                updateDisplaySystemRegularStrategyPeriodSetData(actionType,gCurrentMenu.eCurrentDisplayMenuType,REGULAR_CHARGE,STRATEGY_REGULAR_PERIOD_ONE);
            }
            break;
        case DISPLAY_SET_SYSTEM_STRATEGY_REGULAR_CHARGE_PERIOD_TWO://定时充电策略时间段二设置
            {
                updateDisplaySystemRegularStrategyPeriodSetData(actionType,gCurrentMenu.eCurrentDisplayMenuType,REGULAR_CHARGE,STRATEGY_REGULAR_PERIOD_TWO);
            }
            break;
        case DISPLAY_SET_SYSTEM_STRATEGY_REGULAR_CHARGE_PERIOD_THREE://定时充电策略时间段三设置
            {
                updateDisplaySystemRegularStrategyPeriodSetData(actionType,gCurrentMenu.eCurrentDisplayMenuType,REGULAR_CHARGE,STRATEGY_REGULAR_PERIOD_THREE);
            }
            break;
        case DISPLAY_SET_SYSTEM_STRATEGY_REGULAR_CHARGE_PERIOD_FOUR://定时充电策略时间段四设置
            {
                updateDisplaySystemRegularStrategyPeriodSetData(actionType,gCurrentMenu.eCurrentDisplayMenuType,REGULAR_CHARGE,STRATEGY_REGULAR_PERIOD_FOUR);
            }
            break;
        case DISPLAY_SET_SYSTEM_STRATEGY_REGULAR_DISCHARGE://定时放电策略设置
            {
                updateDisplaySystemRegularStrategySetData(actionType,gCurrentMenu.eCurrentDisplayMenuType,REGULAR_DISCHARGE);
            }
            break;
        case DISPLAY_SET_SYSTEM_STRATEGY_REGULAR_DISCHARGE_PERIOD_ONE://定时放电策略时间段一设置
            {
                updateDisplaySystemRegularStrategyPeriodSetData(actionType,gCurrentMenu.eCurrentDisplayMenuType,REGULAR_DISCHARGE,STRATEGY_REGULAR_PERIOD_ONE);
            }
            break;
        case DISPLAY_SET_SYSTEM_STRATEGY_REGULAR_DISCHARGE_PERIOD_TWO://定时放电策略时间段二设置
            {
                updateDisplaySystemRegularStrategyPeriodSetData(actionType,gCurrentMenu.eCurrentDisplayMenuType,REGULAR_DISCHARGE,STRATEGY_REGULAR_PERIOD_TWO);
            }
            break;
        case DISPLAY_SET_SYSTEM_STRATEGY_REGULAR_DISCHARGE_PERIOD_THREE://定时放电策略时间段三设置
            {
                updateDisplaySystemRegularStrategyPeriodSetData(actionType,gCurrentMenu.eCurrentDisplayMenuType,REGULAR_DISCHARGE,STRATEGY_REGULAR_PERIOD_THREE);
            }
            break;
        case DISPLAY_SET_SYSTEM_STRATEGY_REGULAR_DISCHARGE_PERIOD_FOUR://定时放电策略时间段四设置
            {
                updateDisplaySystemRegularStrategyPeriodSetData(actionType,gCurrentMenu.eCurrentDisplayMenuType,REGULAR_DISCHARGE,STRATEGY_REGULAR_PERIOD_FOUR);
            }
            break;
//        case DISPLAY_SET_SYSTEM_CT://CT变比设置
//            {
//                updateDisplaySystemCTRatioData(actionType,gCurrentMenu.eCurrentDisplayMenuType);
//            }
//            break;  
        case DISPLAY_SET_SYSTEM_DETECTION://绝缘阻抗检测
            {
                updateDisplaySystemInsulationDetetionData(actionType,gCurrentMenu.eCurrentDisplayMenuType);
            }
            break;   
        case DISPLAY_SET_SYSTEM_PROTECT://保护使能界面
            {
                updateDisplayProtectSetData(actionType,gCurrentMenu.eCurrentDisplayMenuType);
            }
            break; 
        case DISPAY_SET_SYSTEM_LOWPOWER://低功耗使能界面
        {
            updateDisplayProtectItemSetData(gCurrentMenu.eCurrentDisplayMenuType,actionType,ENABLE_CLASS_LOWPOWER);
        }
        break;
        
        case DISPLAY_SET_SYSTEM_PROTECT_ISLAND://孤岛保护使能界面
            {
                updateDisplayProtectItemSetData(gCurrentMenu.eCurrentDisplayMenuType,actionType,ENABLE_CLASS_ISLAND);
            }
            break;
        case DISPLAY_SET_SYSTEM_PROTECT_GROUND://接地保护使能界面
            {
                updateDisplayProtectItemSetData(gCurrentMenu.eCurrentDisplayMenuType,actionType,ENABLE_CLASS_GROUND);
            }
            break;
        case DISPLAY_SET_SYSTEM_PROTECT_LEAKAGE://漏电保护使能界面
            {
                updateDisplayProtectItemSetData(gCurrentMenu.eCurrentDisplayMenuType,actionType,ENABLE_CLASS_LEAKAGE);
            }
            break;
        case DISPLAY_SET_SYSTEM_PROTECT_ARC://拉弧保护使能界面
            {
                updateDisplayProtectItemSetData(gCurrentMenu.eCurrentDisplayMenuType,actionType,ENABLE_CLASS_ARC);
            }
            break;
//        case DISPLAY_SET_SYSTEM_PROTECT_OVERHEAT://过热保护使能界面
//            {    
//                updateDisplayProtectItemSetData(gCurrentMenu.eCurrentDisplayMenuType,actionType,ENABLE_CLASS_OVERHEAT);
//            }
//            break;
        case DISPLAY_SET_SYSTEM_PROTECT_LVRT://低电压穿越保护使能界面
            {
                updateDisplayProtectItemSetData(gCurrentMenu.eCurrentDisplayMenuType,actionType,ENABLE_CLASS_LVRT);
            }
            break;
        case DISPLAY_SET_SYSTEM_PROTECT_HVRT://高电压穿越保护使能界面
            {    
                updateDisplayProtectItemSetData(gCurrentMenu.eCurrentDisplayMenuType,actionType,ENABLE_CLASS_HVRT);
            }
            break;
        case DISPLAY_SET_SYSTEM_PROTECT_LIGHT://防雷保护使能界面
            {
                updateDisplayProtectItemSetData(gCurrentMenu.eCurrentDisplayMenuType,actionType,ENABLE_CLASS_LIGHT);
            }
            break;
        case DISPLAY_SET_SYSTEM_PROTECT_GEN://发电机保护使能界面
            {    
                updateDisplayProtectItemSetData(gCurrentMenu.eCurrentDisplayMenuType,actionType,ENABLE_CLASS_GEN_PROTECT);
            }
            break;
        case DISPLAY_SET_SYSTEM_PROTECT_LFRT://低频率穿越保护使能界面
            {
                updateDisplayProtectItemSetData(gCurrentMenu.eCurrentDisplayMenuType,actionType,ENABLE_CLASS_LFRT);
            }
            break;
        case DISPLAY_SET_SYSTEM_PROTECT_HFRT://高频率穿越保护使能界面
            {    
                updateDisplayProtectItemSetData(gCurrentMenu.eCurrentDisplayMenuType,actionType,ENABLE_CLASS_HFRT);
            }
            break;
        case DISPLAY_SET_SYSTEM_PROTECT_P_V://P(V)保护使能界面
            {
                updateDisplayProtectItemSetData(gCurrentMenu.eCurrentDisplayMenuType,actionType,ENABLE_CLASS_P_V);
            }
            break;
        case DISPLAY_SET_SYSTEM_PROTECT_P_F://P(F)保护使能界面
            {
                updateDisplayProtectItemSetData(gCurrentMenu.eCurrentDisplayMenuType,actionType,ENABLE_CLASS_P_F);
            }
            break;   
        case DISPLAY_SET_SYSTEM_PROTECT_Q_V://Q(V)保护使能界面
            {
                updateDisplayProtectItemSetData(gCurrentMenu.eCurrentDisplayMenuType,actionType,ENABLE_CLASS_Q_V);
            }
            break;  
        case DISPLAY_SET_SYSTEM_PROTECT_Q_P://Q(P)保护使能界面
            {
                updateDisplayProtectItemSetData(gCurrentMenu.eCurrentDisplayMenuType,actionType,ENABLE_CLASS_Q_P);
            }
            break; 
        case DISPLAY_SET_SYSTEM_PROTECT_CPF://CPF保护使能界面
            {    
                updateDisplayProtectItemSetData(gCurrentMenu.eCurrentDisplayMenuType,actionType,ENABLE_CLASS_CPF);
            }
            break;  
        case DISPLAY_SET_SYSTEM_PROTECT_CQ://CQ保护使能界面
            {    
                updateDisplayProtectItemSetData(gCurrentMenu.eCurrentDisplayMenuType,actionType,ENABLE_CLASS_CQ);
            }
            break;              
        case DISPLAY_DATA_DISPLAYSTACISTICS://统计数据显示
            {
                updateDisplayStatisticsData(actionType,gCurrentMenu.eCurrentDisplayMenuType);
            }
            break;
        case DISPLAY_DATA_DISPLAYSYSTEMDATA://系统数据显示
            {
                updateDisplaySystemData(actionType,gCurrentMenu.eCurrentDisplayMenuType);
            }
            break;  

        case DISPLAY_DATA_DISPLAYREALTIMEDATA://实时数据显示
            {
                updateDisplayRealtimeData(actionType,gCurrentMenu.eCurrentDisplayMenuType); 
            }
            break;
        case DISPLAY_DATA_DISPLAYREALFAULTRECORD://实时故障记录显示
            {
                updateDisplayRealFaultData(actionType,gCurrentMenu.eCurrentDisplayMenuType);
            }
            break;
        case DISPLAY_DATA_DISPLAYHISTORYFAULTRECORD://历史故障记录显示
            {
                updateDisplayHistoryFaultData(actionType,gCurrentMenu.eCurrentDisplayMenuType);
            }
            break;
        case DISPLAY_DATA_DISPLAYOPERATIONRECORD://操作记录数据显示
            {
                updateDisplayOperationRecordData(actionType,gCurrentMenu.eCurrentDisplayMenuType);
            }
            break;
        case DISPLAY_PROMPT://提示界面
            {
                updateDisplaySystemPrompt(actionType,gCurrentMenu.eCurrentDisplayMenuType);
            }
            break;
        case DISPLAY_CONFIRM://确认界面
            {
                updateDisplaySystemConfirm(actionType,gCurrentMenu.eCurrentDisplayMenuType);
            }
            break; 

        default: 
            break; 
    }
}

/***************************************************************************
 功能:Ate Display总运行函数
****************************************************************************/
void AteDisplayRunning(void)
{
    Display_KEYDetection_Status keyDetectStatus = getKeyDetectionStatus();//按键检测 驱动封装 getKeyDetectionStatus
    KeyAction_TypeDef actionType = getDisplayHandleCodeByKeyDetection(keyDetectStatus);//根据按键检测得到按键处理功能码
    
    switch(actionType)
    {
        case KEYACTION_DOWN:
            {
                GUI_LCD_ON();
            }
            break;
        case KEYACTION_UP:
            {
                #if LCD_ATE_TEST
                Display_Ate_Test();
                LED_Device_GenCntrl(INDICATION_ALAWAYON_ENABLE,INDICATION_ALAWAYOFF_FORBID,INDICATION_FLASH_FORBID,0,0);
                LED_Device_GridCntrl(INDICATION_ALAWAYON_ENABLE,INDICATION_ALAWAYOFF_FORBID,INDICATION_FLASH_FORBID,0,0);
                LED_Device_FaultCntrl(INDICATION_ALAWAYON_ENABLE,INDICATION_ALAWAYOFF_FORBID,INDICATION_FLASH_FORBID,0,0);
                Buzzer_Device_Cntrl(INDICATION_ALAWAYON_ENABLE,INDICATION_ALAWAYOFF_FORBID,INDICATION_FLASH_FORBID,BUZZER_BEEP_5TIME,BUZZER_PER_1000ms);
                #endif
            }
            break;
        case KEYACTION_ENTER:
            {
                GUI_Clear();
                #if LCD_ATE_TEST
                LED_Device_GenCntrl(INDICATION_ALAWAYON_FORBID,INDICATION_ALAWAYOFF_ENABLE,INDICATION_FLASH_FORBID,0,0);
                LED_Device_GridCntrl(INDICATION_ALAWAYON_FORBID,INDICATION_ALAWAYOFF_ENABLE,INDICATION_FLASH_FORBID,0,0);
                LED_Device_FaultCntrl(INDICATION_ALAWAYON_FORBID,INDICATION_ALAWAYOFF_ENABLE,INDICATION_FLASH_FORBID,0,0);
                #endif
            }
            break;
        case KEYACTION_ESC:
            {
               GUI_LCD_OFF();
               #if LCD_ATE_TEST
               Buzzer_Device_Cntrl(INDICATION_ALAWAYON_FORBID,INDICATION_ALAWAYOFF_ENABLE,INDICATION_FLASH_FORBID,BUZZER_BEEP_5TIME,BUZZER_PER_1000ms);
               #endif
            }
            break;
        case KEYACTION_NULL:
        default:
            {
            }
            break;
    }

}

/***************************************************************************
 功能:Display析构函数
****************************************************************************/
void DisplayDestruction(void)
{

}

/***************************************************************************
 功能:安规初始化
****************************************************************************/
void SafetyRegulationInit(uint8_t u8SRType)
{
    //安规初始化
    SR_Service_InitVar();
    //安国通用数据结构体
    SR_Universal stSRUniversal;
    memset(&stSRUniversal,0,sizeof(SR_Universal));
    //根据设置安规国家给安国通用数据结构体赋值
    if(u8SRType == SR_EURTEN)
    {
        SR_EUTen * pSREUTen = (SR_EUTen*)get_SRInfo(SR_EURTEN);
        stSRUniversal.u16SRType = SR_EURTEN;
        stSRUniversal.stEnableStatus = pSREUTen->stEnableStatus;
        stSRUniversal.stGeneralPara.u16RatedVoltage   = pSREUTen->stGeneralPara.u16RatedVoltage;
        stSRUniversal.stGeneralPara.u16RatedPower     = pSREUTen->stGeneralPara.u16RatedPower;
        stSRUniversal.stGeneralPara.u16RatedFrequency = pSREUTen->stGeneralPara.u16RatedFrequency;
        stSRUniversal.stGeneralPara.u16OFReturnValue  = pSREUTen->stGeneralPara.u16OFReturnValue;
        stSRUniversal.stGeneralPara.u16UFReturnValue  = pSREUTen->stGeneralPara.u16UFReturnValue;
        stSRUniversal.stGeneralPara.u16OVReturnValue  = pSREUTen->stGeneralPara.u16OVReturnValue;
        stSRUniversal.stGeneralPara.u16UVReturnValue  = pSREUTen->stGeneralPara.u16UVReturnValue;

        //bSRUnderVoltageFlag 电网欠压使能状态
        stSRUniversal.stUnderVoltage.stLevelOne.u16RatedVoltagePercentage   = pSREUTen->stUVPT.stUVPTLevelOne.u16Voltage;
        stSRUniversal.stUnderVoltage.stLevelOne.u16ResponseTime             = pSREUTen->stUVPT.stUVPTLevelOne.u16ResponseTime;
        stSRUniversal.stUnderVoltage.stLevelTwo.u16RatedVoltagePercentage   = pSREUTen->stUVPT.stUVPTLevelTwo.u16Voltage;
        stSRUniversal.stUnderVoltage.stLevelTwo.u16ResponseTime             = pSREUTen->stUVPT.stUVPTLevelTwo.u16ResponseTime;
        stSRUniversal.stUnderVoltage.stLevelThr.u16RatedVoltagePercentage   = pSREUTen->stUVPT.stUVPTLevelThr.u16Voltage;
        stSRUniversal.stUnderVoltage.stLevelThr.u16ResponseTime             = pSREUTen->stUVPT.stUVPTLevelThr.u16ResponseTime;

        //bSROverVoltageFlag 电网过压使能状态
        stSRUniversal.stOverVoltage.stLevelOne.u16RatedVoltagePercentage    = pSREUTen->stOVPT.stOVPTLevelOne.u16Voltage;
        stSRUniversal.stOverVoltage.stLevelOne.u16ResponseTime              = pSREUTen->stOVPT.stOVPTLevelOne.u16ResponseTime;
        stSRUniversal.stOverVoltage.stLevelTwo.u16RatedVoltagePercentage    = pSREUTen->stOVPT.stOVPTLevelTwo.u16Voltage;
        stSRUniversal.stOverVoltage.stLevelTwo.u16ResponseTime              = pSREUTen->stOVPT.stOVPTLevelTwo.u16ResponseTime;
        stSRUniversal.stOverVoltage.stLevelThr.u16RatedVoltagePercentage    = pSREUTen->stOVPT.stOVPTLevelThr.u16Voltage;
        stSRUniversal.stOverVoltage.stLevelThr.u16ResponseTime              = pSREUTen->stOVPT.stOVPTLevelThr.u16ResponseTime;

        //bSRUnderFrequencyFlag 电网欠频使能状态
        stSRUniversal.stUnderFrequency.stLevelOne.u16Frequency    = pSREUTen->stOperatingFrequencyRange.stUnderFrequency.stLevelOne.u16Frequency;
        stSRUniversal.stUnderFrequency.stLevelOne.u16ResponseTime = pSREUTen->stOperatingFrequencyRange.stUnderFrequency.stLevelOne.u16ResponseTime;
        stSRUniversal.stUnderFrequency.stLevelTwo.u16Frequency    = pSREUTen->stOperatingFrequencyRange.stUnderFrequency.stLevelTwo.u16Frequency;
        stSRUniversal.stUnderFrequency.stLevelTwo.u16ResponseTime = pSREUTen->stOperatingFrequencyRange.stUnderFrequency.stLevelTwo.u16ResponseTime;
        stSRUniversal.stUnderFrequency.stLevelThr.u16Frequency    = pSREUTen->stOperatingFrequencyRange.stUnderFrequency.stLevelThr.u16Frequency;
        stSRUniversal.stUnderFrequency.stLevelThr.u16ResponseTime = pSREUTen->stOperatingFrequencyRange.stUnderFrequency.stLevelThr.u16ResponseTime;
        
         //bSRUnderFrequencyFlag 电网过频使能状态
        stSRUniversal.stOverFrequency.stLevelOne.u16Frequency    = pSREUTen->stOperatingFrequencyRange.stOverFrequency.stLevelOne.u16Frequency;
        stSRUniversal.stOverFrequency.stLevelOne.u16ResponseTime = pSREUTen->stOperatingFrequencyRange.stOverFrequency.stLevelOne.u16ResponseTime;
        stSRUniversal.stOverFrequency.stLevelTwo.u16Frequency    = pSREUTen->stOperatingFrequencyRange.stOverFrequency.stLevelTwo.u16Frequency;
        stSRUniversal.stOverFrequency.stLevelTwo.u16ResponseTime = pSREUTen->stOperatingFrequencyRange.stOverFrequency.stLevelTwo.u16ResponseTime;
        stSRUniversal.stOverFrequency.stLevelThr.u16Frequency    = pSREUTen->stOperatingFrequencyRange.stOverFrequency.stLevelThr.u16Frequency;
        stSRUniversal.stOverFrequency.stLevelThr.u16ResponseTime = pSREUTen->stOperatingFrequencyRange.stOverFrequency.stLevelThr.u16ResponseTime;
        
        //bSROVRTFlag 高电压穿越使能状态
        stSRUniversal.stOVRT.stOVRT1.sRatedVoltagePercent = pSREUTen->stOVRT.stOVRTLevelOne.u16Voltage;
        stSRUniversal.stOVRT.stOVRT1.sSupportTime         = pSREUTen->stOVRT.stOVRTLevelOne.u16ResponseTime;
        stSRUniversal.stOVRT.stOVRT2.sRatedVoltagePercent = pSREUTen->stOVRT.stOVRTLevelTwo.u16Voltage;
        stSRUniversal.stOVRT.stOVRT2.sSupportTime         = pSREUTen->stOVRT.stOVRTLevelTwo.u16ResponseTime;
        stSRUniversal.stOVRT.stOVRT3.sRatedVoltagePercent = pSREUTen->stOVRT.stOVRTLevelThr.u16Voltage;
        stSRUniversal.stOVRT.stOVRT3.sSupportTime         = pSREUTen->stOVRT.stOVRTLevelThr.u16ResponseTime;
        stSRUniversal.stOVRT.stOVRT4.sRatedVoltagePercent = pSREUTen->stOVRT.stOVRTLevelFur.u16Voltage;
        stSRUniversal.stOVRT.stOVRT4.sSupportTime         = pSREUTen->stOVRT.stOVRTLevelFur.u16ResponseTime;
        stSRUniversal.stOVRT.stOVRT5.sRatedVoltagePercent = pSREUTen->stOVRT.stOVRTLevelFiv.u16Voltage;
        stSRUniversal.stOVRT.stOVRT5.sSupportTime         = pSREUTen->stOVRT.stOVRTLevelFiv.u16ResponseTime;
        stSRUniversal.stOVRT.stOVRT6.sRatedVoltagePercent = pSREUTen->stOVRT.stOVRTLevelSix.u16Voltage;
        stSRUniversal.stOVRT.stOVRT6.sSupportTime         = pSREUTen->stOVRT.stOVRTLevelSix.u16ResponseTime;
        
        //bSRUVRTFlag 低电压穿越使能状态
        stSRUniversal.stUVRT.stUVRT1.sRatedVoltagePercent = pSREUTen->stUVRT.stUVRTLevelOne.u16Voltage;
        stSRUniversal.stUVRT.stUVRT1.sSupportTime         = pSREUTen->stUVRT.stUVRTLevelOne.u16ResponseTime;
        stSRUniversal.stUVRT.stUVRT2.sRatedVoltagePercent = pSREUTen->stUVRT.stUVRTLevelTwo.u16Voltage;
        stSRUniversal.stUVRT.stUVRT2.sSupportTime         = pSREUTen->stUVRT.stUVRTLevelTwo.u16ResponseTime;
        stSRUniversal.stUVRT.stUVRT3.sRatedVoltagePercent = pSREUTen->stUVRT.stUVRTLevelThr.u16Voltage;
        stSRUniversal.stUVRT.stUVRT3.sSupportTime         = pSREUTen->stUVRT.stUVRTLevelThr.u16ResponseTime;
        stSRUniversal.stUVRT.stUVRT4.sRatedVoltagePercent = pSREUTen->stUVRT.stUVRTLevelFur.u16Voltage;
        stSRUniversal.stUVRT.stUVRT4.sSupportTime         = pSREUTen->stUVRT.stUVRTLevelFur.u16ResponseTime;
        stSRUniversal.stUVRT.stUVRT5.sRatedVoltagePercent = pSREUTen->stUVRT.stUVRTLevelFiv.u16Voltage;
        stSRUniversal.stUVRT.stUVRT5.sSupportTime         = pSREUTen->stUVRT.stUVRTLevelFiv.u16ResponseTime;
        stSRUniversal.stUVRT.stUVRT6.sRatedVoltagePercent = pSREUTen->stUVRT.stUVRTLevelSix.u16Voltage;
        stSRUniversal.stUVRT.stUVRT6.sSupportTime         = pSREUTen->stUVRT.stUVRTLevelSix.u16ResponseTime;

        //bReconnectFlag  电网重连
        stSRUniversal.stReconnect.u16Gradient              = pSREUTen->stReconnect.u16Gradient;/*爬升斜率界面可设置*/
        stSRUniversal.stReconnect.u16BeginForbidAdjustTime = pSREUTen->stReconnect.u16BeginForbidAdjustTime;
        
        //bSRLowFrequencyDerateFlag   低频降额使能状态
        stSRUniversal.stLFActionPower.u16FrequencyThreshold = pSREUTen->stUnderFrequency.u16FrequencyThreshold;
        stSRUniversal.stLFActionPower.s16DerateSlope        = pSREUTen->stUnderFrequency.s16DerateSlope;
        
       //bSROFPSFlag     过频功率响应使能状态
       stSRUniversal.stOFPS.u16StartFrequencyThreshold = pSREUTen->stOverFrequencyPowerResponse.u16StartFrequencyThreshold;
       stSRUniversal.stOFPS.u16StopFrequencyThreshold  = pSREUTen->stOverFrequencyPowerResponse.u16StopFrequencyThreshold;
       stSRUniversal.stOFPS.u16StopTime                = pSREUTen->stOverFrequencyPowerResponse.u16StopTime;
       stSRUniversal.stOFPS.u16Sagslope                = pSREUTen->stOverFrequencyPowerResponse.u16Sagslope;
       stSRUniversal.stOFPS.u16DelayTime               = pSREUTen->stOverFrequencyPowerResponse.u16DelayTime;
        
       //bSRUFPSFlag     欠频功率响应使能状态
       stSRUniversal.stUFPS.u16StartFrequencyThreshold = pSREUTen->stUnderFrequencyPowerResponse.u16StartFrequencyThreshold;
       stSRUniversal.stUFPS.u16StopFrequencyThreshold  = pSREUTen->stUnderFrequencyPowerResponse.u16StopFrequencyThreshold;
       stSRUniversal.stUFPS.u16StopTime                = pSREUTen->stUnderFrequencyPowerResponse.u16StopTime;
       stSRUniversal.stUFPS.u16Sagslope                = pSREUTen->stUnderFrequencyPowerResponse.u16Sagslope;
       stSRUniversal.stUFPS.u16DelayTime               = pSREUTen->stUnderFrequencyPowerResponse.u16DelayTime;
       
       //bTenMInOVFlag     过压10分钟平均保护
       stSRUniversal.stTenMinOV.u16OverVoltagePercent = pSREUTen->stOvervoltage10minProtection.u16OverVoltagePercent;
       stSRUniversal.stTenMinOV.u16PercentTime = pSREUTen->stOvervoltage10minProtection.u16PercentTime;
    }
    else if(u8SRType == SR_DE)
    {
        SR_Germany * pSRGermany = (SR_Germany*) get_SRInfo(SR_DE);
        stSRUniversal.u16SRType = SR_DE;
        stSRUniversal.stEnableStatus  = pSRGermany->stEnableStatus;
        stSRUniversal.stGeneralPara.u16RatedFrequency = pSRGermany->stGeneralPara.u16RatedFrequency;
        stSRUniversal.stGeneralPara.u16RatedPower     = pSRGermany->stGeneralPara.u16RatedPower;
        stSRUniversal.stGeneralPara.u16RatedVoltage   = pSRGermany->stGeneralPara.u16RatedVoltage;
        //bSRONGridCriteriaFlag == 1
        stSRUniversal.stSRONGridCriteria.u16SinglePhaseMaxPower = pSRGermany->stConnectionCriteria.u16SinglePhaseMaxPower;
        //bSRThreePhaseFlag == 1
        stSRUniversal.stThreePhase.u16PowerDeviation = pSRGermany->stThreePhaseNetwork.u16PowerDeviation;
        //bSRUnderVoltageFlag == 1
        stSRUniversal.stUnderVoltage.stLevelOne.u16RatedVoltagePercentage = pSRGermany->stProtectionFunction.stUnderVoltage.u16RatedVoltagePercentage;
        stSRUniversal.stUnderVoltage.stLevelOne.u16ResponseTime = pSRGermany->stProtectionFunction.stUnderVoltage.u16ResponseTime;
        //bSROverVoltageFlag == 1
        stSRUniversal.stOverVoltage.stLevelOne.u16RatedVoltagePercentage = pSRGermany->stProtectionFunction.stOverVoltage115.u16RatedVoltagePercentage;
        stSRUniversal.stOverVoltage.stLevelOne.u16ResponseTime = pSRGermany->stProtectionFunction.stOverVoltage115.u16ResponseTime;
        //bSRUnderFrequencyFlag == 1
        stSRUniversal.stUnderFrequency.stLevelOne.u16Frequency    = pSRGermany->stProtectionFunction.stUnderFrequency.stLevelOne.u16Frequency;
        stSRUniversal.stUnderFrequency.stLevelOne.u16ResponseTime = pSRGermany->stProtectionFunction.stUnderFrequency.stLevelOne.u16ResponseTime;
        stSRUniversal.stUnderFrequency.stLevelTwo.u16Frequency    = pSRGermany->stProtectionFunction.stUnderFrequency.stLevelTwo.u16Frequency;
        stSRUniversal.stUnderFrequency.stLevelTwo.u16ResponseTime = pSRGermany->stProtectionFunction.stUnderFrequency.stLevelTwo.u16ResponseTime;
        stSRUniversal.stUnderFrequency.stLevelThr.u16Frequency    = pSRGermany->stProtectionFunction.stUnderFrequency.stLevelThr.u16Frequency;
        stSRUniversal.stUnderFrequency.stLevelThr.u16ResponseTime = pSRGermany->stProtectionFunction.stUnderFrequency.stLevelThr.u16ResponseTime;
        
        //bSROverFrequencyFlag == 1
        stSRUniversal.stOverFrequency.stLevelOne.u16Frequency    = pSRGermany->stProtectionFunction.stOverFrequency.stLevelOne.u16Frequency;
        stSRUniversal.stOverFrequency.stLevelOne.u16ResponseTime = pSRGermany->stProtectionFunction.stOverFrequency.stLevelOne.u16ResponseTime;
        stSRUniversal.stOverFrequency.stLevelTwo.u16Frequency    = pSRGermany->stProtectionFunction.stOverFrequency.stLevelTwo.u16Frequency;
        stSRUniversal.stOverFrequency.stLevelTwo.u16ResponseTime = pSRGermany->stProtectionFunction.stOverFrequency.stLevelTwo.u16ResponseTime;
        stSRUniversal.stOverFrequency.stLevelThr.u16Frequency    = pSRGermany->stProtectionFunction.stOverFrequency.stLevelThr.u16Frequency;
        stSRUniversal.stOverFrequency.stLevelThr.u16ResponseTime = pSRGermany->stProtectionFunction.stOverFrequency.stLevelThr.u16ResponseTime;
    }
    //调用通信接口给PCS发送安规数据
    SetPcs10HGridStandardInfo(&stSRUniversal);
}
/***************************************************************************
 功能:系统语言初始化
****************************************************************************/
void SystemLanguageInit(void)
{
    gDisplay.stDisplayData.stSystemData.u8LanguageType = getSystemLanguageItem();
    
    if(LANGUAGE_ENGLISH == gDisplay.stDisplayData.stSystemData.u8LanguageType)
    {
        GUI_Clear();
        gu8LCDEnglishFont = En_5x8;                                                                                         //英文显示时，英文字体需初始化调整为8*5
        gu8CharacterSpace = En_5x8_CharacterSpace_SIZE;                                                                     //英文显示时，字符间距进行调整;
        SetSingleRowSize(En_ROW_SIZE);  
        gu8ColumnSizeOfChar = En_5x8_Column_SIZE;
    }
    else
    {
        GUI_Clear();
        gu8LCDEnglishFont = En_8x16;                                                                                        //中文显示时，英文字体需初始化调整为8*16
        gu8CharacterSpace = En_8x16_CharacterSpace_SIZE;                                                                    //中文显示时，字符间距进行调整;
        SetSingleRowSize(CH_ROW_SIZE); 
        gu8ColumnSizeOfChar = En_8x16_Column_SIZE;
    }
}

/***************************************************************************
 功能:英文字符闪烁点阵初始化
****************************************************************************/
void ArrayFixFlickerStartPosAndEndPosInit_English(void)
{
    /*CT 闪动字符*/
    memset(&arrayFixCTFlicker,0,sizeof(arrayFixCTFlicker));
    arrayFixCTFlicker[0].u8StartPos   = 29; 
    arrayFixCTFlicker[0].u8EndPos     = 34;
    arrayFixCTFlicker[1].u8StartPos   = 47;
    arrayFixCTFlicker[1].u8EndPos     = 47;
    arrayFixCTFlicker[2].u8StartPos   = 48;
    arrayFixCTFlicker[2].u8EndPos     = 48;
    arrayFixCTFlicker[3].u8StartPos   = 49;
    arrayFixCTFlicker[3].u8EndPos     = 49;
    arrayFixCTFlicker[4].u8StartPos   = 50;
    arrayFixCTFlicker[4].u8EndPos     = 50;
    arrayFixCTFlicker[5].u8StartPos   = 69;
    arrayFixCTFlicker[5].u8EndPos     = 69;
    arrayFixCTFlicker[6].u8StartPos   = 70;
    arrayFixCTFlicker[6].u8EndPos     = 70;
    arrayFixCTFlicker[7].u8StartPos   = 71;
    arrayFixCTFlicker[7].u8EndPos     = 71;
    arrayFixCTFlicker[8].u8StartPos   = 72;
    arrayFixCTFlicker[8].u8EndPos     = 72;
    
    /*时间 闪动字符*/
    memset(&arrayFixTimeFlicker,0,sizeof(arrayFixTimeFlicker));
    memset(&arrayVarTimeFlicker,0,sizeof(arrayVarTimeFlicker));
    arrayFixTimeFlicker[0].u8StartPos   = 27;
    arrayFixTimeFlicker[0].u8EndPos     = 27;
    arrayFixTimeFlicker[1].u8StartPos   = 28;
    arrayFixTimeFlicker[1].u8EndPos     = 28;
    arrayFixTimeFlicker[2].u8StartPos   = 29;
    arrayFixTimeFlicker[2].u8EndPos     = 29;
    arrayFixTimeFlicker[3].u8StartPos   = 30;
    arrayFixTimeFlicker[3].u8EndPos     = 30;
    arrayFixTimeFlicker[4].u8StartPos   = 32;
    arrayFixTimeFlicker[4].u8EndPos     = 32;
    arrayFixTimeFlicker[5].u8StartPos   = 33;
    arrayFixTimeFlicker[5].u8EndPos     = 33;
    arrayFixTimeFlicker[6].u8StartPos   = 35;
    arrayFixTimeFlicker[6].u8EndPos     = 35;
    arrayFixTimeFlicker[7].u8StartPos   = 36;
    arrayFixTimeFlicker[7].u8EndPos     = 36;
    arrayFixTimeFlicker[8].u8StartPos   = 49;
    arrayFixTimeFlicker[8].u8EndPos     = 49;
    arrayFixTimeFlicker[9].u8StartPos   = 50;
    arrayFixTimeFlicker[9].u8EndPos     = 50;
    arrayFixTimeFlicker[10].u8StartPos  = 52;
    arrayFixTimeFlicker[10].u8EndPos    = 52;
    arrayFixTimeFlicker[11].u8StartPos  = 53;
    arrayFixTimeFlicker[11].u8EndPos    = 53;
    arrayFixTimeFlicker[12].u8StartPos  = 55;
    arrayFixTimeFlicker[12].u8EndPos    = 55;
    arrayFixTimeFlicker[13].u8StartPos  = 56;
    arrayFixTimeFlicker[13].u8EndPos    = 56;
    arrayVarTimeFlicker[0].u8StartPos   = 71;
    arrayVarTimeFlicker[0].u8EndPos     = 76;
    arrayVarTimeFlicker[1].u8StartPos   = 71;
    arrayVarTimeFlicker[1].u8EndPos     = 76;
    arrayVarTimeFlicker[2].u8StartPos   = 71;
    arrayVarTimeFlicker[2].u8EndPos     = 77;
    arrayVarTimeFlicker[3].u8StartPos   = 71;
    arrayVarTimeFlicker[3].u8EndPos     = 79;
    arrayVarTimeFlicker[4].u8StartPos   = 71;
    arrayVarTimeFlicker[4].u8EndPos     = 78;
    arrayVarTimeFlicker[5].u8StartPos   = 71;
    arrayVarTimeFlicker[5].u8EndPos     = 76;
    arrayVarTimeFlicker[6].u8StartPos   = 71;
    arrayVarTimeFlicker[6].u8EndPos     = 78;
    
    /*密码 闪动字符*/
    memset(&arrayFixPasswordFlicker,0,sizeof(arrayFixPasswordFlicker));
    arrayFixPasswordFlicker[0].u8StartPos   = 26;
    arrayFixPasswordFlicker[0].u8EndPos     = 26;
    arrayFixPasswordFlicker[1].u8StartPos   = 27;
    arrayFixPasswordFlicker[1].u8EndPos     = 27;
    arrayFixPasswordFlicker[2].u8StartPos   = 28;
    arrayFixPasswordFlicker[2].u8EndPos     = 28;
    arrayFixPasswordFlicker[3].u8StartPos   = 29;
    arrayFixPasswordFlicker[3].u8EndPos     = 29;
    arrayFixPasswordFlicker[4].u8StartPos   = 30;
    arrayFixPasswordFlicker[4].u8EndPos     = 30;
    arrayFixPasswordFlicker[5].u8StartPos   = 31;
    arrayFixPasswordFlicker[5].u8EndPos     = 31;
    arrayFixPasswordFlicker[6].u8StartPos   = 48;
    arrayFixPasswordFlicker[6].u8EndPos     = 48;
    arrayFixPasswordFlicker[7].u8StartPos   = 49;
    arrayFixPasswordFlicker[7].u8EndPos     = 49;
    arrayFixPasswordFlicker[8].u8StartPos   = 50;
    arrayFixPasswordFlicker[8].u8EndPos     = 50;
    arrayFixPasswordFlicker[9].u8StartPos   = 51;
    arrayFixPasswordFlicker[9].u8EndPos     = 51;
    arrayFixPasswordFlicker[10].u8StartPos  = 52;
    arrayFixPasswordFlicker[10].u8EndPos    = 52;
    arrayFixPasswordFlicker[11].u8StartPos  = 53;
    arrayFixPasswordFlicker[11].u8EndPos    = 53;
    arrayFixPasswordFlicker[12].u8StartPos  = 74;
    arrayFixPasswordFlicker[12].u8EndPos    = 74;
    arrayFixPasswordFlicker[13].u8StartPos  = 75;
    arrayFixPasswordFlicker[13].u8EndPos    = 75;
    arrayFixPasswordFlicker[14].u8StartPos  = 76;
    arrayFixPasswordFlicker[14].u8EndPos    = 76;
    arrayFixPasswordFlicker[15].u8StartPos  = 77;
    arrayFixPasswordFlicker[15].u8EndPos    = 77;
    arrayFixPasswordFlicker[16].u8StartPos  = 78;
    arrayFixPasswordFlicker[16].u8EndPos    = 78;
    arrayFixPasswordFlicker[17].u8StartPos  = 79;
    arrayFixPasswordFlicker[17].u8EndPos    = 79;
    
    /*串口 闪动字符*/
    memset(&arrayFixSerialFlicker,0,sizeof(arrayFixSerialFlicker));
    arrayFixSerialFlicker[0].u8StartPos   = 29;
    arrayFixSerialFlicker[0].u8EndPos     = 34;
    arrayFixSerialFlicker[1].u8StartPos   = 52;
    arrayFixSerialFlicker[1].u8EndPos     = 52;
    arrayFixSerialFlicker[2].u8StartPos   = 53;
    arrayFixSerialFlicker[2].u8EndPos     = 53;
    arrayFixSerialFlicker[3].u8StartPos   = 54;
    arrayFixSerialFlicker[3].u8EndPos     = 54;
    arrayFixSerialFlicker[4].u8StartPos   = 71;
    arrayFixSerialFlicker[4].u8EndPos     = 75;
    
    /*电价 闪动字符*/
    memset(&arrayPriceFlicker,0,sizeof(arrayPriceFlicker));
    arrayPriceFlicker[0].u8StartPos   = 30;
    arrayPriceFlicker[0].u8EndPos     = 30;
    arrayPriceFlicker[1].u8StartPos   = 31;
    arrayPriceFlicker[1].u8EndPos     = 31;
    arrayPriceFlicker[2].u8StartPos   = 33;
    arrayPriceFlicker[2].u8EndPos     = 33;
    arrayPriceFlicker[3].u8StartPos   = 34;
    arrayPriceFlicker[3].u8EndPos     = 34;
    
    /*电价时间 闪动字符*/    
    memset(&arrayPriceTimeFlicker,0,sizeof(arrayPriceTimeFlicker));
    arrayPriceTimeFlicker[0].u8StartPos   = 33;
    arrayPriceTimeFlicker[0].u8EndPos     = 33;
    arrayPriceTimeFlicker[1].u8StartPos   = 34;
    arrayPriceTimeFlicker[1].u8EndPos     = 34;
    arrayPriceTimeFlicker[2].u8StartPos   = 36;
    arrayPriceTimeFlicker[2].u8EndPos     = 36;
    arrayPriceTimeFlicker[3].u8StartPos   = 37;
    arrayPriceTimeFlicker[3].u8EndPos     = 37;
    arrayPriceTimeFlicker[4].u8StartPos   = 39;
    arrayPriceTimeFlicker[4].u8EndPos     = 39;
    arrayPriceTimeFlicker[5].u8StartPos   = 40;
    arrayPriceTimeFlicker[5].u8EndPos     = 40;
    arrayPriceTimeFlicker[6].u8StartPos   = 53;
    arrayPriceTimeFlicker[6].u8EndPos     = 53;
    arrayPriceTimeFlicker[7].u8StartPos   = 54;
    arrayPriceTimeFlicker[7].u8EndPos     = 54;
    arrayPriceTimeFlicker[8].u8StartPos   = 56;
    arrayPriceTimeFlicker[8].u8EndPos     = 56;
    arrayPriceTimeFlicker[9].u8StartPos   = 57;
    arrayPriceTimeFlicker[9].u8EndPos     = 57;
    arrayPriceTimeFlicker[10].u8StartPos  = 59;
    arrayPriceTimeFlicker[10].u8EndPos    = 59;
    arrayPriceTimeFlicker[11].u8StartPos  = 60;
    arrayPriceTimeFlicker[11].u8EndPos    = 60;
    
    /*峰谷策略 闪动字符*/
    memset(&arrayTPFVStartegyFlicker,0,sizeof(arrayTPFVStartegyFlicker));
    arrayTPFVStartegyFlicker[0].u8StartPos   = 26;
    arrayTPFVStartegyFlicker[0].u8EndPos     = 26;
    arrayTPFVStartegyFlicker[1].u8StartPos   = 27;
    arrayTPFVStartegyFlicker[1].u8EndPos     = 27;
    arrayTPFVStartegyFlicker[2].u8StartPos   = 28;
    arrayTPFVStartegyFlicker[2].u8EndPos     = 28;
    arrayTPFVStartegyFlicker[3].u8StartPos   = 36;
    arrayTPFVStartegyFlicker[3].u8EndPos     = 36;
    arrayTPFVStartegyFlicker[4].u8StartPos   = 37;
    arrayTPFVStartegyFlicker[4].u8EndPos     = 37;
    arrayTPFVStartegyFlicker[5].u8StartPos   = 38;
    arrayTPFVStartegyFlicker[5].u8EndPos     = 38;
    arrayTPFVStartegyFlicker[6].u8StartPos   = 39;
    arrayTPFVStartegyFlicker[6].u8EndPos     = 39;
    arrayTPFVStartegyFlicker[7].u8StartPos   = 40;
    arrayTPFVStartegyFlicker[7].u8EndPos     = 40;
    
    /*定时策略 闪动字符*/
    memset(&arrayREGULARStartegyFlicker,0,sizeof(arrayREGULARStartegyFlicker));
    arrayREGULARStartegyFlicker[0].u8StartPos   = 28;
    arrayREGULARStartegyFlicker[0].u8EndPos     = 28;
    arrayREGULARStartegyFlicker[1].u8StartPos   = 29;
    arrayREGULARStartegyFlicker[1].u8EndPos     = 29;
    arrayREGULARStartegyFlicker[2].u8StartPos   = 30;
    arrayREGULARStartegyFlicker[2].u8EndPos     = 30;
    arrayREGULARStartegyFlicker[3].u8StartPos   = 31;
    arrayREGULARStartegyFlicker[3].u8EndPos     = 31;
    arrayREGULARStartegyFlicker[4].u8StartPos   = 37;
    arrayREGULARStartegyFlicker[4].u8EndPos     = 37;
    arrayREGULARStartegyFlicker[5].u8StartPos   = 38;
    arrayREGULARStartegyFlicker[5].u8EndPos     = 38;
    arrayREGULARStartegyFlicker[6].u8StartPos   = 39;
    arrayREGULARStartegyFlicker[6].u8EndPos     = 39;
    arrayREGULARStartegyFlicker[7].u8StartPos   = 55;
    arrayREGULARStartegyFlicker[7].u8EndPos     = 55;
    arrayREGULARStartegyFlicker[8].u8StartPos   = 56;
    arrayREGULARStartegyFlicker[8].u8EndPos     = 56;
    arrayREGULARStartegyFlicker[9].u8StartPos   = 58;
    arrayREGULARStartegyFlicker[9].u8EndPos     = 58;
    arrayREGULARStartegyFlicker[10].u8StartPos  = 59;
    arrayREGULARStartegyFlicker[10].u8EndPos    = 59;
    arrayREGULARStartegyFlicker[11].u8StartPos  = 61;
    arrayREGULARStartegyFlicker[11].u8EndPos    = 61;
    arrayREGULARStartegyFlicker[12].u8StartPos  = 62;
    arrayREGULARStartegyFlicker[12].u8EndPos    = 62;
    arrayREGULARStartegyFlicker[13].u8StartPos  = 75;
    arrayREGULARStartegyFlicker[13].u8EndPos    = 75;
    arrayREGULARStartegyFlicker[14].u8StartPos  = 76;
    arrayREGULARStartegyFlicker[14].u8EndPos    = 76;
    arrayREGULARStartegyFlicker[15].u8StartPos  = 78;
    arrayREGULARStartegyFlicker[15].u8EndPos    = 78;
    arrayREGULARStartegyFlicker[16].u8StartPos  = 79;
    arrayREGULARStartegyFlicker[16].u8EndPos    = 79;
    arrayREGULARStartegyFlicker[17].u8StartPos  = 81;
    arrayREGULARStartegyFlicker[17].u8EndPos    = 81;
    arrayREGULARStartegyFlicker[18].u8StartPos  = 82;
    arrayREGULARStartegyFlicker[18].u8EndPos    = 82;
    
    /*定时策略 闪动字符*/
    memset(&arrayBACKUPStartegyFlicker,0,sizeof(arrayBACKUPStartegyFlicker));
    arrayBACKUPStartegyFlicker[0].u8StartPos   = 55;
    arrayBACKUPStartegyFlicker[0].u8EndPos     = 55;
    arrayBACKUPStartegyFlicker[1].u8StartPos   = 56;
    arrayBACKUPStartegyFlicker[1].u8EndPos     = 56;
    arrayBACKUPStartegyFlicker[2].u8StartPos   = 57;
    arrayBACKUPStartegyFlicker[2].u8EndPos     = 57;
    arrayBACKUPStartegyFlicker[3].u8StartPos   = 58;
    arrayBACKUPStartegyFlicker[3].u8EndPos     = 58;
    arrayBACKUPStartegyFlicker[4].u8StartPos   = 59;
    arrayBACKUPStartegyFlicker[4].u8EndPos     = 59;
    
    /*定时策略 闪动字符*/
    memset(&arrayGENStartegyFlicker,0,sizeof(arrayGENStartegyFlicker));
    arrayGENStartegyFlicker[0].u8StartPos   = 34;
    arrayGENStartegyFlicker[0].u8EndPos     = 34;
    arrayGENStartegyFlicker[1].u8StartPos   = 35;
    arrayGENStartegyFlicker[1].u8EndPos     = 35;
    arrayGENStartegyFlicker[2].u8StartPos   = 36;
    arrayGENStartegyFlicker[2].u8EndPos     = 36;
    arrayGENStartegyFlicker[3].u8StartPos   = 55;
    arrayGENStartegyFlicker[3].u8EndPos     = 55;
    arrayGENStartegyFlicker[4].u8StartPos   = 56;
    arrayGENStartegyFlicker[4].u8EndPos     = 56;
    arrayGENStartegyFlicker[5].u8StartPos   = 57;
    arrayGENStartegyFlicker[5].u8EndPos     = 57;
    
    /*确认界面 闪动字符*/
    memset(&arrayVarConfirmFlicker,0,sizeof(arrayVarConfirmFlicker));
    arrayVarConfirmFlicker[0].u8StartPos   = 25;
    arrayVarConfirmFlicker[0].u8EndPos     = 28;
    arrayVarConfirmFlicker[1].u8StartPos   = 33;
    arrayVarConfirmFlicker[1].u8EndPos     = 38;

    /*确认中文界面 闪动字符*/
    memset(&arrayVarConfirmFlickerChinese,0,sizeof(arrayVarConfirmFlickerChinese));
    arrayVarConfirmFlickerChinese[0].u8StartPos   = 19;
    arrayVarConfirmFlickerChinese[0].u8EndPos     = 22;
    arrayVarConfirmFlickerChinese[1].u8StartPos   = 25;
    arrayVarConfirmFlickerChinese[1].u8EndPos     = 28;
    /*无功功率 闪动字符*/
    memset(&arrayFixReactPowerFlicker,0,sizeof(arrayFixReactPowerFlicker));
    arrayFixReactPowerFlicker[0].u8StartPos   = 55;
    arrayFixReactPowerFlicker[0].u8EndPos     = 55;
    arrayFixReactPowerFlicker[1].u8StartPos   = 56;
    arrayFixReactPowerFlicker[1].u8EndPos     = 56;
    arrayFixReactPowerFlicker[2].u8StartPos   = 57;
    arrayFixReactPowerFlicker[2].u8EndPos     = 57;
    arrayFixReactPowerFlicker[3].u8StartPos   = 58;
    arrayFixReactPowerFlicker[3].u8EndPos     = 58;
    arrayFixReactPowerFlicker[4].u8StartPos   = 59;
    arrayFixReactPowerFlicker[4].u8EndPos     = 59;
    
    /*功率因数 闪动字符*/
    memset(&arrayFixPFFlicker,0,sizeof(arrayFixPFFlicker));
    arrayFixPFFlicker[0].u8StartPos   = 56;
    arrayFixPFFlicker[0].u8EndPos     = 56;
    arrayFixPFFlicker[1].u8StartPos   = 57;
    arrayFixPFFlicker[1].u8EndPos     = 57;
    arrayFixPFFlicker[2].u8StartPos   = 58;
    arrayFixPFFlicker[2].u8EndPos     = 58;
    arrayFixPFFlicker[3].u8StartPos   = 59;
    arrayFixPFFlicker[3].u8EndPos     = 59;
    arrayFixPFFlicker[4].u8StartPos   = 60;
    arrayFixPFFlicker[4].u8EndPos     = 60;
    arrayFixPFFlicker[5].u8StartPos   = 61;
    arrayFixPFFlicker[5].u8EndPos     = 61;
    
    /*发电机功率参数 闪动字符*/
    memset(&arrayFixGenPowerParaFlicker,0,sizeof(arrayFixGenPowerParaFlicker));
    arrayFixGenPowerParaFlicker[0].u8StartPos   = 33;
    arrayFixGenPowerParaFlicker[0].u8EndPos     = 33;
    arrayFixGenPowerParaFlicker[1].u8StartPos   = 34;
    arrayFixGenPowerParaFlicker[1].u8EndPos     = 34;
    arrayFixGenPowerParaFlicker[2].u8StartPos   = 35;
    arrayFixGenPowerParaFlicker[2].u8EndPos     = 35;
    arrayFixGenPowerParaFlicker[3].u8StartPos   = 36;
    arrayFixGenPowerParaFlicker[3].u8EndPos     = 36;
    arrayFixGenPowerParaFlicker[4].u8StartPos   = 53;
    arrayFixGenPowerParaFlicker[4].u8EndPos     = 53;
    arrayFixGenPowerParaFlicker[5].u8StartPos   = 54;
    arrayFixGenPowerParaFlicker[5].u8EndPos     = 54;
    arrayFixGenPowerParaFlicker[6].u8StartPos   = 55;
    arrayFixGenPowerParaFlicker[6].u8EndPos     = 55;
    arrayFixGenPowerParaFlicker[7].u8StartPos   = 56;
    arrayFixGenPowerParaFlicker[7].u8EndPos     = 56;
    
    /*智能负载 闪动字符*/
    memset(&arrayFixIntelLoadParaFlicker,0,sizeof(arrayFixIntelLoadParaFlicker));
    arrayFixIntelLoadParaFlicker[0].u8StartPos   = 30;
    arrayFixIntelLoadParaFlicker[0].u8EndPos     = 30;
    arrayFixIntelLoadParaFlicker[1].u8StartPos   = 31;
    arrayFixIntelLoadParaFlicker[1].u8EndPos     = 31;
    arrayFixIntelLoadParaFlicker[2].u8StartPos   = 32;
    arrayFixIntelLoadParaFlicker[2].u8EndPos     = 32;
    arrayFixIntelLoadParaFlicker[3].u8StartPos   = 55;
    arrayFixIntelLoadParaFlicker[3].u8EndPos     = 55;
    arrayFixIntelLoadParaFlicker[4].u8StartPos   = 56;
    arrayFixIntelLoadParaFlicker[4].u8EndPos     = 56;
    arrayFixIntelLoadParaFlicker[5].u8StartPos   = 57;
    arrayFixIntelLoadParaFlicker[5].u8EndPos     = 57;

    /*LiIon充放电截止SOC设置 闪动字符*/
    memset(&arrayBMSLiIonEndOfSOCFlicker,0,sizeof(arrayBMSLiIonEndOfSOCFlicker));
    arrayBMSLiIonEndOfSOCFlicker[0].u8StartPos   = 35;
    arrayBMSLiIonEndOfSOCFlicker[0].u8EndPos     = 35;
    arrayBMSLiIonEndOfSOCFlicker[1].u8StartPos   = 36;
    arrayBMSLiIonEndOfSOCFlicker[1].u8EndPos     = 36;
    arrayBMSLiIonEndOfSOCFlicker[2].u8StartPos   = 37;
    arrayBMSLiIonEndOfSOCFlicker[2].u8EndPos     = 37;
    arrayBMSLiIonEndOfSOCFlicker[3].u8StartPos   = 60;
    arrayBMSLiIonEndOfSOCFlicker[3].u8EndPos     = 60;
    arrayBMSLiIonEndOfSOCFlicker[4].u8StartPos   = 61;
    arrayBMSLiIonEndOfSOCFlicker[4].u8EndPos     = 61;
    arrayBMSLiIonEndOfSOCFlicker[5].u8StartPos   = 62;
    arrayBMSLiIonEndOfSOCFlicker[5].u8EndPos     = 62;

    /*LeadAcid充放电截止SOC设置 闪动字符*/
    memset(&arrayBMSLeadAcidEndOfSOCFlicker,0,sizeof(arrayBMSLeadAcidEndOfSOCFlicker));
    arrayBMSLeadAcidEndOfSOCFlicker[0].u8StartPos   = 35;
    arrayBMSLeadAcidEndOfSOCFlicker[0].u8EndPos     = 35;
    arrayBMSLeadAcidEndOfSOCFlicker[1].u8StartPos   = 36;
    arrayBMSLeadAcidEndOfSOCFlicker[1].u8EndPos     = 36;
    arrayBMSLeadAcidEndOfSOCFlicker[2].u8StartPos   = 37;
    arrayBMSLeadAcidEndOfSOCFlicker[2].u8EndPos     = 37;
    arrayBMSLeadAcidEndOfSOCFlicker[3].u8StartPos   = 60;
    arrayBMSLeadAcidEndOfSOCFlicker[3].u8EndPos     = 60;
    arrayBMSLeadAcidEndOfSOCFlicker[4].u8StartPos   = 61;
    arrayBMSLeadAcidEndOfSOCFlicker[4].u8EndPos     = 61;
    arrayBMSLeadAcidEndOfSOCFlicker[5].u8StartPos   = 62;
    arrayBMSLeadAcidEndOfSOCFlicker[5].u8EndPos     = 62;

    /*LiIon最大充放电电流设置 闪动字符*/
    memset(&arrayBMSLiIonMaxCurrentFlicker,0,sizeof(arrayBMSLiIonMaxCurrentFlicker));
    arrayBMSLiIonMaxCurrentFlicker[0].u8StartPos   = 33;
    arrayBMSLiIonMaxCurrentFlicker[0].u8EndPos     = 33;
    arrayBMSLiIonMaxCurrentFlicker[1].u8StartPos   = 34;
    arrayBMSLiIonMaxCurrentFlicker[1].u8EndPos     = 34;
    arrayBMSLiIonMaxCurrentFlicker[2].u8StartPos   = 35;
    arrayBMSLiIonMaxCurrentFlicker[2].u8EndPos     = 35;
    arrayBMSLiIonMaxCurrentFlicker[3].u8StartPos   = 36;
    arrayBMSLiIonMaxCurrentFlicker[3].u8EndPos     = 36;
    arrayBMSLiIonMaxCurrentFlicker[4].u8StartPos   = 37;
    arrayBMSLiIonMaxCurrentFlicker[4].u8EndPos     = 37;
    arrayBMSLiIonMaxCurrentFlicker[5].u8StartPos   = 58;
    arrayBMSLiIonMaxCurrentFlicker[5].u8EndPos     = 58;
    arrayBMSLiIonMaxCurrentFlicker[6].u8StartPos   = 59;
    arrayBMSLiIonMaxCurrentFlicker[6].u8EndPos     = 59;
    arrayBMSLiIonMaxCurrentFlicker[7].u8StartPos   = 60;
    arrayBMSLiIonMaxCurrentFlicker[7].u8EndPos     = 60;
    arrayBMSLiIonMaxCurrentFlicker[8].u8StartPos   = 61;
    arrayBMSLiIonMaxCurrentFlicker[8].u8EndPos     = 61;
    arrayBMSLiIonMaxCurrentFlicker[9].u8StartPos   = 62;
    arrayBMSLiIonMaxCurrentFlicker[9].u8EndPos     = 62;


    /*LeadAcid电压点设置 闪动字符*/
    memset(&arrayVoltPointFlicker,0,sizeof(arrayVoltPointFlicker));
    arrayVoltPointFlicker[0].u8StartPos   = 34;
    arrayVoltPointFlicker[0].u8EndPos     = 34;
    arrayVoltPointFlicker[1].u8StartPos   = 35;
    arrayVoltPointFlicker[1].u8EndPos     = 35;
    arrayVoltPointFlicker[2].u8StartPos   = 36;
    arrayVoltPointFlicker[2].u8EndPos     = 36;
    arrayVoltPointFlicker[3].u8StartPos   = 37;
    arrayVoltPointFlicker[3].u8EndPos     = 37;
    arrayVoltPointFlicker[4].u8StartPos   = 54;
    arrayVoltPointFlicker[4].u8EndPos     = 54;
    arrayVoltPointFlicker[5].u8StartPos   = 55;
    arrayVoltPointFlicker[5].u8EndPos     = 55;
    arrayVoltPointFlicker[6].u8StartPos   = 56;
    arrayVoltPointFlicker[6].u8EndPos     = 56;
    arrayVoltPointFlicker[7].u8StartPos   = 57;
    arrayVoltPointFlicker[7].u8EndPos     = 57;
    arrayVoltPointFlicker[8].u8StartPos   = 76;
    arrayVoltPointFlicker[8].u8EndPos     = 76;
    arrayVoltPointFlicker[9].u8StartPos   = 77;
    arrayVoltPointFlicker[9].u8EndPos     = 77;
    arrayVoltPointFlicker[10].u8StartPos  = 78;
    arrayVoltPointFlicker[10].u8EndPos    = 78;
    arrayVoltPointFlicker[11].u8StartPos  = 79;
    arrayVoltPointFlicker[11].u8EndPos    = 79;

    /*LeadAcid电压点设置 闪动字符*/
    memset(&arrayBMSLiIonCapacityAndCurrentFlicker,0,sizeof(arrayBMSLiIonCapacityAndCurrentFlicker));
    arrayBMSLiIonCapacityAndCurrentFlicker[0].u8StartPos   = 31;
    arrayBMSLiIonCapacityAndCurrentFlicker[0].u8EndPos     = 31;
    arrayBMSLiIonCapacityAndCurrentFlicker[1].u8StartPos   = 32;
    arrayBMSLiIonCapacityAndCurrentFlicker[1].u8EndPos     = 32;
    arrayBMSLiIonCapacityAndCurrentFlicker[2].u8StartPos   = 33;
    arrayBMSLiIonCapacityAndCurrentFlicker[2].u8EndPos     = 33;
    arrayBMSLiIonCapacityAndCurrentFlicker[3].u8StartPos   = 55;
    arrayBMSLiIonCapacityAndCurrentFlicker[3].u8EndPos     = 55;
    arrayBMSLiIonCapacityAndCurrentFlicker[4].u8StartPos   = 56;
    arrayBMSLiIonCapacityAndCurrentFlicker[4].u8EndPos     = 56;
    arrayBMSLiIonCapacityAndCurrentFlicker[5].u8StartPos   = 57;
    arrayBMSLiIonCapacityAndCurrentFlicker[5].u8EndPos     = 57;
    arrayBMSLiIonCapacityAndCurrentFlicker[6].u8StartPos   = 58;
    arrayBMSLiIonCapacityAndCurrentFlicker[6].u8EndPos     = 58;
    arrayBMSLiIonCapacityAndCurrentFlicker[7].u8StartPos   = 59;
    arrayBMSLiIonCapacityAndCurrentFlicker[7].u8EndPos     = 59;
    arrayBMSLiIonCapacityAndCurrentFlicker[8].u8StartPos   = 80;
    arrayBMSLiIonCapacityAndCurrentFlicker[8].u8EndPos     = 80;
    arrayBMSLiIonCapacityAndCurrentFlicker[9].u8StartPos   = 81;
    arrayBMSLiIonCapacityAndCurrentFlicker[9].u8EndPos     = 81;
    arrayBMSLiIonCapacityAndCurrentFlicker[10].u8StartPos  = 82;
    arrayBMSLiIonCapacityAndCurrentFlicker[10].u8EndPos    = 82;
    arrayBMSLiIonCapacityAndCurrentFlicker[11].u8StartPos  = 83;
    arrayBMSLiIonCapacityAndCurrentFlicker[11].u8EndPos    = 83;
    arrayBMSLiIonCapacityAndCurrentFlicker[12].u8StartPos  = 84;
    arrayBMSLiIonCapacityAndCurrentFlicker[12].u8EndPos    = 84;
}

/***************************************************************************
 功能:中文文字符闪烁点阵初始化
****************************************************************************/
void ArrayFixFlickerStartPosAndEndPosInit_Chinese(void)
{
    /*CT 闪动字符*/
    memset(&arrayFixCTFlickerChinese,0,sizeof(arrayFixCTFlickerChinese));
    arrayFixCTFlickerChinese[0].u8StartPos   = 29; 
    arrayFixCTFlickerChinese[0].u8EndPos     = 34;
    arrayFixCTFlickerChinese[1].u8StartPos   = 47;
    arrayFixCTFlickerChinese[1].u8EndPos     = 47;
    arrayFixCTFlickerChinese[2].u8StartPos   = 48;
    arrayFixCTFlickerChinese[2].u8EndPos     = 48;
    arrayFixCTFlickerChinese[3].u8StartPos   = 49;
    arrayFixCTFlickerChinese[3].u8EndPos     = 49;
    arrayFixCTFlickerChinese[4].u8StartPos   = 50;
    arrayFixCTFlickerChinese[4].u8EndPos     = 50;
    arrayFixCTFlickerChinese[5].u8StartPos   = 69;
    arrayFixCTFlickerChinese[5].u8EndPos     = 69;
    arrayFixCTFlickerChinese[6].u8StartPos   = 70;
    arrayFixCTFlickerChinese[6].u8EndPos     = 70;
    arrayFixCTFlickerChinese[7].u8StartPos   = 71;
    arrayFixCTFlickerChinese[7].u8EndPos     = 71;
    arrayFixCTFlickerChinese[8].u8StartPos   = 72;
    arrayFixCTFlickerChinese[8].u8EndPos     = 72;
    
    /*时间 闪动字符*/
    memset(&arrayFixTimeFlickerChinese,0,sizeof(arrayFixTimeFlickerChinese));
    memset(&arrayVarTimeFlickerChinese,0,sizeof(arrayVarTimeFlickerChinese));
    arrayFixTimeFlickerChinese[0].u8StartPos   = 21;
    arrayFixTimeFlickerChinese[0].u8EndPos     = 21;
    arrayFixTimeFlickerChinese[1].u8StartPos   = 22;
    arrayFixTimeFlickerChinese[1].u8EndPos     = 22;
    arrayFixTimeFlickerChinese[2].u8StartPos   = 23;
    arrayFixTimeFlickerChinese[2].u8EndPos     = 23;
    arrayFixTimeFlickerChinese[3].u8StartPos   = 24;
    arrayFixTimeFlickerChinese[3].u8EndPos     = 24;
    arrayFixTimeFlickerChinese[4].u8StartPos   = 26;
    arrayFixTimeFlickerChinese[4].u8EndPos     = 26;
    arrayFixTimeFlickerChinese[5].u8StartPos   = 27;
    arrayFixTimeFlickerChinese[5].u8EndPos     = 27;
    arrayFixTimeFlickerChinese[6].u8StartPos   = 29;
    arrayFixTimeFlickerChinese[6].u8EndPos     = 29;
    arrayFixTimeFlickerChinese[7].u8StartPos   = 30;
    arrayFixTimeFlickerChinese[7].u8EndPos     = 30;
    arrayFixTimeFlickerChinese[8].u8StartPos   = 37;
    arrayFixTimeFlickerChinese[8].u8EndPos     = 37;
    arrayFixTimeFlickerChinese[9].u8StartPos   = 38;
    arrayFixTimeFlickerChinese[9].u8EndPos     = 38;
    arrayFixTimeFlickerChinese[10].u8StartPos  = 40;
    arrayFixTimeFlickerChinese[10].u8EndPos    = 40;
    arrayFixTimeFlickerChinese[11].u8StartPos  = 41;
    arrayFixTimeFlickerChinese[11].u8EndPos    = 41;
    arrayFixTimeFlickerChinese[12].u8StartPos  = 43;
    arrayFixTimeFlickerChinese[12].u8EndPos    = 43;
    arrayFixTimeFlickerChinese[13].u8StartPos  = 44;
    arrayFixTimeFlickerChinese[13].u8EndPos    = 44;
    arrayVarTimeFlickerChinese[0].u8StartPos   = 51;
    arrayVarTimeFlickerChinese[0].u8EndPos     = 51;
    arrayVarTimeFlickerChinese[1].u8StartPos   = 52;
    arrayVarTimeFlickerChinese[1].u8EndPos     = 52;
    arrayVarTimeFlickerChinese[2].u8StartPos   = 53;
    arrayVarTimeFlickerChinese[2].u8EndPos     = 53;
    arrayVarTimeFlickerChinese[3].u8StartPos   = 54;
    arrayVarTimeFlickerChinese[3].u8EndPos     = 54;
    arrayVarTimeFlickerChinese[4].u8StartPos   = 55;
    arrayVarTimeFlickerChinese[4].u8EndPos     = 55;
    arrayVarTimeFlickerChinese[5].u8StartPos   = 56;
    arrayVarTimeFlickerChinese[5].u8EndPos     = 56;
    arrayVarTimeFlickerChinese[6].u8StartPos   = 57;
    arrayVarTimeFlickerChinese[6].u8EndPos     = 57;
    
    /*密码 闪动字符*/
    memset(&arrayFixPasswordFlickerChinese,0,sizeof(arrayFixPasswordFlickerChinese));
    arrayFixPasswordFlickerChinese[0].u8StartPos   = 26;
    arrayFixPasswordFlickerChinese[0].u8EndPos     = 26;
    arrayFixPasswordFlickerChinese[1].u8StartPos   = 27;
    arrayFixPasswordFlickerChinese[1].u8EndPos     = 27;
    arrayFixPasswordFlickerChinese[2].u8StartPos   = 28;
    arrayFixPasswordFlickerChinese[2].u8EndPos     = 28;
    arrayFixPasswordFlickerChinese[3].u8StartPos   = 29;
    arrayFixPasswordFlickerChinese[3].u8EndPos     = 29;
    arrayFixPasswordFlickerChinese[4].u8StartPos   = 30;
    arrayFixPasswordFlickerChinese[4].u8EndPos     = 30;
    arrayFixPasswordFlickerChinese[5].u8StartPos   = 31;
    arrayFixPasswordFlickerChinese[5].u8EndPos     = 31;
    arrayFixPasswordFlickerChinese[6].u8StartPos   = 48;
    arrayFixPasswordFlickerChinese[6].u8EndPos     = 48;
    arrayFixPasswordFlickerChinese[7].u8StartPos   = 49;
    arrayFixPasswordFlickerChinese[7].u8EndPos     = 49;
    arrayFixPasswordFlickerChinese[8].u8StartPos   = 50;
    arrayFixPasswordFlickerChinese[8].u8EndPos     = 50;
    arrayFixPasswordFlickerChinese[9].u8StartPos   = 51;
    arrayFixPasswordFlickerChinese[9].u8EndPos     = 51;
    arrayFixPasswordFlickerChinese[10].u8StartPos  = 52;
    arrayFixPasswordFlickerChinese[10].u8EndPos    = 52;
    arrayFixPasswordFlickerChinese[11].u8StartPos  = 53;
    arrayFixPasswordFlickerChinese[11].u8EndPos    = 53;
    arrayFixPasswordFlickerChinese[12].u8StartPos  = 74;
    arrayFixPasswordFlickerChinese[12].u8EndPos    = 74;
    arrayFixPasswordFlickerChinese[13].u8StartPos  = 75;
    arrayFixPasswordFlickerChinese[13].u8EndPos    = 75;
    arrayFixPasswordFlickerChinese[14].u8StartPos  = 76;
    arrayFixPasswordFlickerChinese[14].u8EndPos    = 76;
    arrayFixPasswordFlickerChinese[15].u8StartPos  = 77;
    arrayFixPasswordFlickerChinese[15].u8EndPos    = 77;
    arrayFixPasswordFlickerChinese[16].u8StartPos  = 78;
    arrayFixPasswordFlickerChinese[16].u8EndPos    = 78;
    arrayFixPasswordFlickerChinese[17].u8StartPos  = 79;
    arrayFixPasswordFlickerChinese[17].u8EndPos    = 79;
    
    /*串口 闪动字符*/
    memset(&arrayFixSerialFlickerChinese,0,sizeof(arrayFixSerialFlickerChinese));
    arrayFixSerialFlickerChinese[0].u8StartPos   = 29;
    arrayFixSerialFlickerChinese[0].u8EndPos     = 34;
    arrayFixSerialFlickerChinese[1].u8StartPos   = 52;
    arrayFixSerialFlickerChinese[1].u8EndPos     = 52;
    arrayFixSerialFlickerChinese[2].u8StartPos   = 53;
    arrayFixSerialFlickerChinese[2].u8EndPos     = 53;
    arrayFixSerialFlickerChinese[3].u8StartPos   = 54;
    arrayFixSerialFlickerChinese[3].u8EndPos     = 54;
    arrayFixSerialFlickerChinese[4].u8StartPos   = 71;
    arrayFixSerialFlickerChinese[4].u8EndPos     = 75;
    
    /*电价 闪动字符*/
    memset(&arrayPriceFlickerChinese,0,sizeof(arrayPriceFlickerChinese));
    arrayPriceFlickerChinese[0].u8StartPos   = 30;
    arrayPriceFlickerChinese[0].u8EndPos     = 30;
    arrayPriceFlickerChinese[1].u8StartPos   = 31;
    arrayPriceFlickerChinese[1].u8EndPos     = 31;
    arrayPriceFlickerChinese[2].u8StartPos   = 33;
    arrayPriceFlickerChinese[2].u8EndPos     = 33;
    arrayPriceFlickerChinese[3].u8StartPos   = 34;
    arrayPriceFlickerChinese[3].u8EndPos     = 34;
    
    /*电价时间 闪动字符*/    
    memset(&arrayPriceTimeFlickerChinese,0,sizeof(arrayPriceTimeFlickerChinese));
    arrayPriceTimeFlickerChinese[0].u8StartPos   = 33;
    arrayPriceTimeFlickerChinese[0].u8EndPos     = 33;
    arrayPriceTimeFlickerChinese[1].u8StartPos   = 34;
    arrayPriceTimeFlickerChinese[1].u8EndPos     = 34;
    arrayPriceTimeFlickerChinese[2].u8StartPos   = 36;
    arrayPriceTimeFlickerChinese[2].u8EndPos     = 36;
    arrayPriceTimeFlickerChinese[3].u8StartPos   = 37;
    arrayPriceTimeFlickerChinese[3].u8EndPos     = 37;
    arrayPriceTimeFlickerChinese[4].u8StartPos   = 39;
    arrayPriceTimeFlickerChinese[4].u8EndPos     = 39;
    arrayPriceTimeFlickerChinese[5].u8StartPos   = 40;
    arrayPriceTimeFlickerChinese[5].u8EndPos     = 40;
    arrayPriceTimeFlickerChinese[6].u8StartPos   = 53;
    arrayPriceTimeFlickerChinese[6].u8EndPos     = 53;
    arrayPriceTimeFlickerChinese[7].u8StartPos   = 54;
    arrayPriceTimeFlickerChinese[7].u8EndPos     = 54;
    arrayPriceTimeFlickerChinese[8].u8StartPos   = 56;
    arrayPriceTimeFlickerChinese[8].u8EndPos     = 56;
    arrayPriceTimeFlickerChinese[9].u8StartPos   = 57;
    arrayPriceTimeFlickerChinese[9].u8EndPos     = 57;
    arrayPriceTimeFlickerChinese[10].u8StartPos  = 59;
    arrayPriceTimeFlickerChinese[10].u8EndPos    = 59;
    arrayPriceTimeFlickerChinese[11].u8StartPos  = 60;
    arrayPriceTimeFlickerChinese[11].u8EndPos    = 60;
    
    /*峰谷策略 闪动字符*/
    memset(&arrayTPFVStartegyFlickerChinese,0,sizeof(arrayTPFVStartegyFlickerChinese));
    arrayTPFVStartegyFlickerChinese[0].u8StartPos   = 26;
    arrayTPFVStartegyFlickerChinese[0].u8EndPos     = 26;
    arrayTPFVStartegyFlickerChinese[1].u8StartPos   = 27;
    arrayTPFVStartegyFlickerChinese[1].u8EndPos     = 27;
    arrayTPFVStartegyFlickerChinese[2].u8StartPos   = 28;
    arrayTPFVStartegyFlickerChinese[2].u8EndPos     = 28;
    arrayTPFVStartegyFlickerChinese[3].u8StartPos   = 36;
    arrayTPFVStartegyFlickerChinese[3].u8EndPos     = 36;
    arrayTPFVStartegyFlickerChinese[4].u8StartPos   = 37;
    arrayTPFVStartegyFlickerChinese[4].u8EndPos     = 37;
    arrayTPFVStartegyFlickerChinese[5].u8StartPos   = 38;
    arrayTPFVStartegyFlickerChinese[5].u8EndPos     = 38;
    arrayTPFVStartegyFlickerChinese[6].u8StartPos   = 39;
    arrayTPFVStartegyFlickerChinese[6].u8EndPos     = 39;
    arrayTPFVStartegyFlickerChinese[7].u8StartPos   = 40;
    arrayTPFVStartegyFlickerChinese[7].u8EndPos     = 40;
    
    /*定时策略 闪动字符*/
    memset(&arrayREGULARStartegyFlickerChinese,0,sizeof(arrayREGULARStartegyFlickerChinese));
    arrayREGULARStartegyFlickerChinese[0].u8StartPos   = 28;
    arrayREGULARStartegyFlickerChinese[0].u8EndPos     = 28;
    arrayREGULARStartegyFlickerChinese[1].u8StartPos   = 29;
    arrayREGULARStartegyFlickerChinese[1].u8EndPos     = 29;
    arrayREGULARStartegyFlickerChinese[2].u8StartPos   = 30;
    arrayREGULARStartegyFlickerChinese[2].u8EndPos     = 30;
    arrayREGULARStartegyFlickerChinese[3].u8StartPos   = 31;
    arrayREGULARStartegyFlickerChinese[3].u8EndPos     = 31;
    arrayREGULARStartegyFlickerChinese[4].u8StartPos   = 37;
    arrayREGULARStartegyFlickerChinese[4].u8EndPos     = 37;
    arrayREGULARStartegyFlickerChinese[5].u8StartPos   = 38;
    arrayREGULARStartegyFlickerChinese[5].u8EndPos     = 38;
    arrayREGULARStartegyFlickerChinese[6].u8StartPos   = 39;
    arrayREGULARStartegyFlickerChinese[6].u8EndPos     = 39;
    arrayREGULARStartegyFlickerChinese[7].u8StartPos   = 55;
    arrayREGULARStartegyFlickerChinese[7].u8EndPos     = 55;
    arrayREGULARStartegyFlickerChinese[8].u8StartPos   = 56;
    arrayREGULARStartegyFlickerChinese[8].u8EndPos     = 56;
    arrayREGULARStartegyFlickerChinese[9].u8StartPos   = 58;
    arrayREGULARStartegyFlickerChinese[9].u8EndPos     = 58;
    arrayREGULARStartegyFlickerChinese[10].u8StartPos  = 59;
    arrayREGULARStartegyFlickerChinese[10].u8EndPos    = 59;
    arrayREGULARStartegyFlickerChinese[11].u8StartPos  = 61;
    arrayREGULARStartegyFlickerChinese[11].u8EndPos    = 61;
    arrayREGULARStartegyFlickerChinese[12].u8StartPos  = 62;
    arrayREGULARStartegyFlickerChinese[12].u8EndPos    = 62;
    arrayREGULARStartegyFlickerChinese[13].u8StartPos  = 75;
    arrayREGULARStartegyFlickerChinese[13].u8EndPos    = 75;
    arrayREGULARStartegyFlickerChinese[14].u8StartPos  = 76;
    arrayREGULARStartegyFlickerChinese[14].u8EndPos    = 76;
    arrayREGULARStartegyFlickerChinese[15].u8StartPos  = 78;
    arrayREGULARStartegyFlickerChinese[15].u8EndPos    = 78;
    arrayREGULARStartegyFlickerChinese[16].u8StartPos  = 79;
    arrayREGULARStartegyFlickerChinese[16].u8EndPos    = 79;
    arrayREGULARStartegyFlickerChinese[17].u8StartPos  = 81;
    arrayREGULARStartegyFlickerChinese[17].u8EndPos    = 81;
    arrayREGULARStartegyFlickerChinese[18].u8StartPos  = 82;
    arrayREGULARStartegyFlickerChinese[18].u8EndPos    = 82;
    
    /*定时策略 闪动字符*/
    memset(&arrayBACKUPStartegyFlickerChinese,0,sizeof(arrayBACKUPStartegyFlickerChinese));
    arrayBACKUPStartegyFlickerChinese[0].u8StartPos   = 55;
    arrayBACKUPStartegyFlickerChinese[0].u8EndPos     = 55;
    arrayBACKUPStartegyFlickerChinese[1].u8StartPos   = 56;
    arrayBACKUPStartegyFlickerChinese[1].u8EndPos     = 56;
    arrayBACKUPStartegyFlickerChinese[2].u8StartPos   = 57;
    arrayBACKUPStartegyFlickerChinese[2].u8EndPos     = 57;
    arrayBACKUPStartegyFlickerChinese[3].u8StartPos   = 58;
    arrayBACKUPStartegyFlickerChinese[3].u8EndPos     = 58;
    arrayBACKUPStartegyFlickerChinese[4].u8StartPos   = 59;
    arrayBACKUPStartegyFlickerChinese[4].u8EndPos     = 59;
    
    /*定时策略 闪动字符*/
    memset(&arrayGENStartegyFlickerChinese,0,sizeof(arrayGENStartegyFlickerChinese));
    arrayGENStartegyFlickerChinese[0].u8StartPos   = 34;
    arrayGENStartegyFlickerChinese[0].u8EndPos     = 34;
    arrayGENStartegyFlickerChinese[1].u8StartPos   = 35;
    arrayGENStartegyFlickerChinese[1].u8EndPos     = 35;
    arrayGENStartegyFlickerChinese[2].u8StartPos   = 36;
    arrayGENStartegyFlickerChinese[2].u8EndPos     = 36;
    arrayGENStartegyFlickerChinese[3].u8StartPos   = 55;
    arrayGENStartegyFlickerChinese[3].u8EndPos     = 55;
    arrayGENStartegyFlickerChinese[4].u8StartPos   = 56;
    arrayGENStartegyFlickerChinese[4].u8EndPos     = 56;
    arrayGENStartegyFlickerChinese[5].u8StartPos   = 57;
    arrayGENStartegyFlickerChinese[5].u8EndPos     = 57;

    /*确认中文界面 闪动字符*/
    memset(&arrayVarConfirmFlickerChinese,0,sizeof(arrayVarConfirmFlickerChinese));
    arrayVarConfirmFlickerChinese[0].u8StartPos   = 19;
    arrayVarConfirmFlickerChinese[0].u8EndPos     = 22;
    arrayVarConfirmFlickerChinese[1].u8StartPos   = 25;
    arrayVarConfirmFlickerChinese[1].u8EndPos     = 28;
    /*无功功率 闪动字符*/
    memset(&arrayFixReactPowerFlickerChinese,0,sizeof(arrayFixReactPowerFlickerChinese));
    arrayFixReactPowerFlickerChinese[0].u8StartPos   = 55;
    arrayFixReactPowerFlickerChinese[0].u8EndPos     = 55;
    arrayFixReactPowerFlickerChinese[1].u8StartPos   = 56;
    arrayFixReactPowerFlickerChinese[1].u8EndPos     = 56;
    arrayFixReactPowerFlickerChinese[2].u8StartPos   = 57;
    arrayFixReactPowerFlickerChinese[2].u8EndPos     = 57;
    arrayFixReactPowerFlickerChinese[3].u8StartPos   = 58;
    arrayFixReactPowerFlickerChinese[3].u8EndPos     = 58;
    arrayFixReactPowerFlickerChinese[4].u8StartPos   = 59;
    arrayFixReactPowerFlickerChinese[4].u8EndPos     = 59;
    /*功率因数 闪动字符*/
    memset(&arrayFixPFFlickerChinese,0,sizeof(arrayFixPFFlickerChinese));
    arrayFixPFFlickerChinese[0].u8StartPos   = 56;
    arrayFixPFFlickerChinese[0].u8EndPos     = 56;
    arrayFixPFFlickerChinese[1].u8StartPos   = 57;
    arrayFixPFFlickerChinese[1].u8EndPos     = 57;
    arrayFixPFFlickerChinese[2].u8StartPos   = 58;
    arrayFixPFFlickerChinese[2].u8EndPos     = 58;
    arrayFixPFFlickerChinese[3].u8StartPos   = 59;
    arrayFixPFFlickerChinese[3].u8EndPos     = 59;
    arrayFixPFFlickerChinese[4].u8StartPos   = 60;
    arrayFixPFFlickerChinese[4].u8EndPos     = 60;
    arrayFixPFFlickerChinese[5].u8StartPos   = 61;
    arrayFixPFFlickerChinese[5].u8EndPos     = 61;

    /*起始时间 闪动字符*/
    memset(&arrayFixPeakPeriodStartTimeParaFlicker,0,sizeof(arrayFixPeakPeriodStartTimeParaFlicker));
    arrayFixPeakPeriodStartTimeParaFlicker[0].u8StartPos = 32;
    arrayFixPeakPeriodStartTimeParaFlicker[0].u8EndPos = 32;
    arrayFixPeakPeriodStartTimeParaFlicker[1].u8StartPos = 33;
    arrayFixPeakPeriodStartTimeParaFlicker[1].u8EndPos = 33;
    arrayFixPeakPeriodStartTimeParaFlicker[2].u8StartPos = 35;
    arrayFixPeakPeriodStartTimeParaFlicker[2].u8EndPos = 35;
    arrayFixPeakPeriodStartTimeParaFlicker[3].u8StartPos = 36;
    arrayFixPeakPeriodStartTimeParaFlicker[3].u8EndPos = 36;
    arrayFixPeakPeriodStartTimeParaFlicker[4].u8StartPos = 38;
    arrayFixPeakPeriodStartTimeParaFlicker[4].u8EndPos = 38;
    arrayFixPeakPeriodStartTimeParaFlicker[5].u8StartPos = 39;
    arrayFixPeakPeriodStartTimeParaFlicker[5].u8EndPos = 39;

    /*结束时间 闪动字符*/
    memset(&arrayFixPeakPeriodEndTimeParaFlicker,0,sizeof(arrayFixPeakPeriodEndTimeParaFlicker));
    arrayFixPeakPeriodEndTimeParaFlicker[0].u8StartPos = 52;
    arrayFixPeakPeriodEndTimeParaFlicker[0].u8EndPos = 52;
    arrayFixPeakPeriodEndTimeParaFlicker[1].u8StartPos = 53;
    arrayFixPeakPeriodEndTimeParaFlicker[1].u8EndPos = 53;
    arrayFixPeakPeriodEndTimeParaFlicker[2].u8StartPos = 55;
    arrayFixPeakPeriodEndTimeParaFlicker[2].u8EndPos = 55;
    arrayFixPeakPeriodEndTimeParaFlicker[3].u8StartPos = 56;
    arrayFixPeakPeriodEndTimeParaFlicker[3].u8EndPos = 56;
    arrayFixPeakPeriodEndTimeParaFlicker[4].u8StartPos = 58;
    arrayFixPeakPeriodEndTimeParaFlicker[4].u8EndPos = 58;
    arrayFixPeakPeriodEndTimeParaFlicker[5].u8StartPos = 59;
    arrayFixPeakPeriodEndTimeParaFlicker[5].u8EndPos = 59;

    /*峰谷策略功率 闪动字符*/
    memset(&arrayFixStrategyPowerFlicker,0,sizeof(arrayFixStrategyPowerFlicker));
    arrayFixStrategyPowerFlicker[0].u8StartPos  = 74;
    arrayFixStrategyPowerFlicker[0].u8EndPos    = 74;
    arrayFixStrategyPowerFlicker[1].u8StartPos  = 75;
    arrayFixStrategyPowerFlicker[1].u8EndPos    = 75;
    arrayFixStrategyPowerFlicker[2].u8StartPos  = 76;
    arrayFixStrategyPowerFlicker[2].u8EndPos    = 76; 
    arrayFixStrategyPowerFlicker[3].u8StartPos  = 77;
    arrayFixStrategyPowerFlicker[3].u8EndPos    = 77;
    arrayFixStrategyPowerFlicker[4].u8StartPos  = 78;
    arrayFixStrategyPowerFlicker[4].u8EndPos    = 78;

    /*峰谷策略SOC 闪动字符*/
    memset(&arrayFixStrategySOCFlicker,0,sizeof(arrayFixStrategySOCFlicker));
    arrayFixStrategySOCFlicker[0].u8StartPos  = 72;
    arrayFixStrategySOCFlicker[0].u8EndPos    = 72;
    arrayFixStrategySOCFlicker[1].u8StartPos  = 73;
    arrayFixStrategySOCFlicker[1].u8EndPos    = 73;
    arrayFixStrategySOCFlicker[2].u8StartPos  = 74;
    arrayFixStrategySOCFlicker[2].u8EndPos    = 74;

    /*备电时间 闪动字符*/
    memset(&arrayFixBackupPowerFlicker,0,sizeof(arrayFixBackupPowerFlicker));
    arrayFixBackupPowerFlicker[0].u8StartPos = 55;
    arrayFixBackupPowerFlicker[0].u8EndPos = 55;
    arrayFixBackupPowerFlicker[1].u8StartPos = 56;
    arrayFixBackupPowerFlicker[1].u8EndPos = 56;
    arrayFixBackupPowerFlicker[2].u8StartPos = 58;
    arrayFixBackupPowerFlicker[2].u8EndPos = 58;
    arrayFixBackupPowerFlicker[3].u8StartPos = 59;
    arrayFixBackupPowerFlicker[3].u8EndPos = 59;
    arrayFixBackupPowerFlicker[4].u8StartPos = 60;
    arrayFixBackupPowerFlicker[4].u8EndPos = 60;
    arrayFixBackupPowerFlicker[5].u8StartPos = 61;
    arrayFixBackupPowerFlicker[5].u8EndPos = 61;
}

/***************************************************************************
 功能:根据按键检测结果得到人机交互处理码
****************************************************************************/
KeyAction_TypeDef getDisplayHandleCodeByKeyDetection(const Display_KEYDetection_Status keyDetectStatus)
{
    static uint8_t u8Counter = 0;
    KeyAction_TypeDef actionCode;
    
    if((keyDetectStatus.bKEYDetectionEnter == KEYSTATUS_PRESSED)&&(keyDetectStatus.bKEYDetectionUp == KEYSTATUS_PRESSED))//Enter + Up 同时按下
    {
        actionCode = KEYACTION_ENTERUP;
    }
    else if((keyDetectStatus.bKEYDetectionEnter == KEYSTATUS_PRESSED)&&(keyDetectStatus.bKEYDetectionDown == KEYSTATUS_PRESSED))//Enter + Down 同时按下
    {
        actionCode = KEYACTION_ENTERDOWN;
    }
    else if((keyDetectStatus.bKEYDetectionEnter == KEYSTATUS_PRESSED)&&(keyDetectStatus.bKEYDetectionEsc == KEYSTATUS_PRESSED))//Enter + Esc 同时按下
    {
        actionCode = KEYACTION_ENTERESC;
    }
    else if(keyDetectStatus.bKEYDetectionEnter == KEYSTATUS_PRESSED)//Enter 按下
    {
        actionCode = KEYACTION_ENTER;
    }
    else if((keyDetectStatus.bKEYDetectionUp == KEYSTATUS_PRESSED)&&(keyDetectStatus.bKEYDetectionDown == KEYSTATUS_PRESSED))//Up + Dow同时按下
    {
        actionCode = KEYACTION_UPDOWN;
    #if RTC_TEST
        GPIO_Driver_WriteOutputPin(DEV_BL5372_SCL_PORT, DEV_BL5372_SCL_PIN, SET);                                           //SCL拉高
        GPIO_Driver_WriteOutputPin(DEV_BL5372_SDA_PORT, DEV_BL5372_SDA_PIN, SET);                                           //SDA拉高
        Set_SysTime(SetTimeTest);
        #endif
    }
    else if((keyDetectStatus.bKEYDetectionUp == KEYSTATUS_PRESSED)&&(keyDetectStatus.bKEYDetectionEsc == KEYSTATUS_PRESSED))//Up + Esc同时按下
    {
        actionCode = KEYACTION_UPESC;
    } 
    else if(keyDetectStatus.bKEYDetectionUp == KEYSTATUS_PRESSED)//Up 按下
    {
        actionCode = KEYACTION_UP;
    }
    else if((keyDetectStatus.bKEYDetectionDown == KEYSTATUS_PRESSED)&&(keyDetectStatus.bKEYDetectionEsc == KEYSTATUS_PRESSED))//Dow + Esc同时按下
    {
        actionCode = KEYACTION_DOWNESC;
    }
    else if(keyDetectStatus.bKEYDetectionDown == KEYSTATUS_PRESSED)//Down 按下
    {
        actionCode = KEYACTION_DOWN;
    }
    else if(keyDetectStatus.bKEYDetectionEsc == KEYSTATUS_PRESSED)//Esc 按下
    {
        actionCode = KEYACTION_ESC;
    }
    else
    {
        actionCode = KEYACTION_NULL;
    }
	
    if(actionCode != KEYACTION_NULL)
    {
       // Buzzer_Device_Cntrl(INDICATION_ALAWAYON_ENABLE,INDICATION_ALAWAYOFF_FORBID,INDICATION_FLASH_FORBID,BUZZER_BEEP_1TIME,BUZZER_PER_1000ms);
    }
    else
    {
        if(u8Counter % 5 == 0)
        {
          //  Buzzer_Device_Cntrl(INDICATION_ALAWAYON_FORBID,INDICATION_ALAWAYOFF_ENABLE,INDICATION_FLASH_FORBID,BUZZER_BEEP_1TIME,BUZZER_PER_1000ms);
        }
    }
    u8Counter++;
	
    return actionCode;
}
/***************************************************************************
 功能:获取主界面实时数据
****************************************************************************/
void getDisplayHomeData(void)
{
    /*1=初始化,2=上电参数匹配,3=监听态,4=待机,5=测试模式,6=母线软起判断,7=母线软起,
     8=母线软起等待,9=主机电器闭合,A=运行,B=故障,C=在线升级*/
    gDisplay.stDisplayHome.u8WorkSate = WORKSTATE_INIT;
    gDisplay.stDisplayHome.u8FaultStatus = FAULTSTATE_NORMAL;//1:正常 2:故障 3:告警
    float32_t f32TempChagePowerGeneration = 40.9;//(3883*20)>>2; 
    gDisplay.stDisplayHome.f32ChagePowerGeneration = f32TempChagePowerGeneration;
    float32_t f32TempDisChagePowerGeneration = 39.1;//(3883*20)<<2; 
    gDisplay.stDisplayHome.f32DisChagePowerGeneration = f32TempDisChagePowerGeneration;     
}

/***************************************************************************
 功能:根据上一次界面操作类型和本次操作类型判断本次HOME界面数据更新
****************************************************************************/

void updateDisplayHomeData(KeyAction_TypeDef nowActionType,DisplayAction_TypeDef nowDisplayType)
{
    switch(nowActionType)//本次界面操作类型
    {
        case KEYACTION_ENTER://在主界面下，Enter键按下，进入设置界面
            {
                //开发调试，不用登陆密码校验
//                gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_LOGIN;
                gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_MENU;
            }
            break;
        case KEYACTION_ENTERUP://在主界面下，Enter + Up同时键按下，进入设置语言界面
            {
                gLastMenu.eLastDisplayMenuType = DISPLAY_HOME;
                gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_SET_SYSTEM_LANGUAGE;
            }
            break;
        case KEYACTION_ENTERDOWN://在主界面下，Enter + Down同时键按下，进入统计界面
            {
                gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_DATA_DISPLAYSTACISTICS;
            }
            break;
        case KEYACTION_ENTERESC://在主界面下，Enter + ESC同时键按下，进入查看操作记录界面
            {
                gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_DATA_DISPLAYOPERATIONRECORD;
            }
            break;
        case KEYACTION_UP://在主界面下，Up键按下，进入查看实时数据界面
            {
                gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_DATA_DISPLAYREALTIMEDATA;
            }
            break;
        case KEYACTION_UPDOWN://在主界面下，Up + Down同时键按下，进入查看实时故障记录界面
            {
                gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_DATA_DISPLAYREALFAULTRECORD;
            }
            break;
        case KEYACTION_UPESC://在主界面下，Up + Esc同时键按下，进入查看历史故障记录界面
            {
                gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_DATA_DISPLAYHISTORYFAULTRECORD;
            }
            break;
        case KEYACTION_DOWNESC:////在主界面下，Down同时键按下，进入查看系统数据界面
            {
                gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_DATA_DISPLAYSYSTEMDATA;
            }
            break;
        case KEYACTION_NULL://无操作刷新主界面数据
        default:
            {   
                //getDisplayHomeData();//获取主界面实时数据    
                if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_ENGLISH)//主界面home 英文界面组装 
                { 
                    updateDisplayHomeData_English();                    
                }         
                else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_CHINESE)//主界面home 中文界面组装
                {
                    updateDisplayHomeData_Chinese();
                }
                else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_SPANISH)//主界面home 西班牙界面组装 
                {
                    updateDisplayHomeData_Spanish();  
                }   
                else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_GERMAN)//主界面home 德语界面组装
                {
                    updateDisplayHomeData_German();  
                }   
                else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_FRENCH)//主界面home 法语界面组装 
                {
                    updateDisplayHomeData_French();    
                } 
                else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_POLISH)//主界面home 波兰界面组装
                {
                    updateDisplayHomeData_Polish(); 
                }  
                else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_ITALIAN)//主界面home 意大利界面组装
                {
                    updateDisplayHomeData_Italian();  
                } 
                else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_CZECH)//主界面home 捷克界面组装 
                {
                    updateDisplayHomeData_Czech();   
                }        
                else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_DUTCH)//主界面home 荷兰界面组装 
                {
                    updateDisplayHomeData_Dutch();   
                }
                else
                {       
                }
                gCurrentMenu.eCurrentDisplayMenuType = nowDisplayType;
            }
            break;
    }
}
/***************************************************************************
 功能:登陆界面流程
****************************************************************************/
void updateDisplayLoginData(KeyAction_TypeDef nowActionType,DisplayAction_TypeDef nowDisplayType)
{
    static uint8_t sU8SetLoginCounter = 0;
    static uint8_t sU8NumberCounter = 0;

    gLastMenu.eLastDisplayMenuType = DISPLAY_LOGIN;
    switch(nowActionType) //本次界面操作类型
    {
        case KEYACTION_ENTER://在登陆界面下，Enter键按下，进入密码校验阶段，通过之后设置界面
            {                                  
                gbEditFlag = STATUS_FALSE;//退出编辑模式  
                Tip_TypeDef re = DisplaySystemLoginVerify(tab_LoginPassword_edit);//校验密码
                    
                if(re != TIP_PASSED)
                {
                    gCurrentMenu.stTip.eOccurTipAction = DISPLAY_LOGIN;
                    //gCurrentMenu.stTip.eOccurPreTipAction = DISPLAY_HOME;
                    gCurrentMenu.stTip.eTipType = re;
                    //gCurrentMenu.stTip.eOccurPreIndex = 0;
                    gCurrentMenu.stTip.u8PromptTime = 60;
                    gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_PROMPT;   
                }
                else
                {
                    gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_SET;   
                }            
                memset(tab_LoginPassword_edit,'0',6);
                sU8SetLoginCounter = 0;
                sU8NumberCounter = 0;
            }
            break;
        case KEYACTION_DOWN://在登陆界面下，UP键按下，数字加一
            {                       
                if(gbEditFlag != STATUS_TRUE)//进入编辑模式
                {
                    gbEditFlag = STATUS_TRUE;
                }  
                
                if(sU8SetLoginCounter == 0) //Login密码第一个数字
                {
                    sU8NumberCounter++;
                    if(sU8NumberCounter<=9)
                    {
                       tab_LoginPassword_edit[0] =  '0' + sU8NumberCounter;
                    }
                    else
                    {
                       sU8NumberCounter = 0;
                       tab_LoginPassword_edit[0] = '0';
                    } 
                }    
                if(sU8SetLoginCounter == 1) //Login密码第二个数字
                {
                    sU8NumberCounter++;
                    if(sU8NumberCounter<=9)
                    {
                       tab_LoginPassword_edit[1] =  '0' + sU8NumberCounter;
                    }
                    else
                    {
                       sU8NumberCounter = 0;
                       tab_LoginPassword_edit[1] = '0';
                    } 
                } 
                if(sU8SetLoginCounter == 2) //Login密码第三个数字
                {
                    sU8NumberCounter++;
                    if(sU8NumberCounter<=9)
                    {
                       tab_LoginPassword_edit[2] =  '0' + sU8NumberCounter;
                    }
                    else
                    {
                       sU8NumberCounter = 0;
                       tab_LoginPassword_edit[2] = '0';
                    } 
                }  
                if(sU8SetLoginCounter == 3)//Login密码第四个数字 
                {
                    sU8NumberCounter++;
                    if(sU8NumberCounter<=9)
                    {
                       tab_LoginPassword_edit[3] =  '0' + sU8NumberCounter;
                    }
                    else
                    {
                       sU8NumberCounter = 0;
                       tab_LoginPassword_edit[3] = '0';
                    } 
                } 
                if(sU8SetLoginCounter == 4)//Login密码第五个数字
                {
                    sU8NumberCounter++;
                    if(sU8NumberCounter<=9)
                    {
                       tab_LoginPassword_edit[4] =  '0' + sU8NumberCounter;
                    }
                    else
                    {
                       sU8NumberCounter = 0;
                       tab_LoginPassword_edit[4] = '0';
                    } 
                }        
                if(sU8SetLoginCounter == 5)//Login密码第六个数字
                {
                    sU8NumberCounter++;
                    if(sU8NumberCounter<=9)
                    {
                       tab_LoginPassword_edit[5] =  '0' + sU8NumberCounter;
                    }
                    else
                    {
                       sU8NumberCounter = 0;
                       tab_LoginPassword_edit[5] = '0';
                    } 
                }
                
                if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_ENGLISH) //系统密码登陆界面PasswordSystemLogin 英文界面组装
                { 
                    updateDisplayLoginData_English(tab_LoginPassword_edit);                    
                }     
                else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_CHINESE)//系统密码登陆界面PasswordSystemLogin 中文界面组装
                {
                    updateDisplayLoginData_Chinese(tab_LoginPassword_edit);
                }    
                else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_SPANISH)//系统密码登陆界面PasswordSystemLogin 西班牙界面组装
                { 
                    updateDisplayLoginData_Spanish(tab_LoginPassword_edit);
                } 
                else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_GERMAN)//系统密码登陆界面PasswordSystemLogin 德语界面组装
                { 
                    updateDisplayLoginData_German(tab_LoginPassword_edit);
                } 
                else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_FRENCH)//系统密码登陆界面PasswordSystemLogin 法语界面组装
                { 
                    updateDisplayLoginData_French(tab_LoginPassword_edit);                     
                }   
                else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_POLISH)//系统密码登陆界面PasswordSystemLogin 波兰界面组装
                {
                    updateDisplayLoginData_Polish(tab_LoginPassword_edit);
                }    
                else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_ITALIAN)//系统密码登陆界面PasswordSystemLogin 意大利界面组装
                {
                    updateDisplayLoginData_Italian(tab_LoginPassword_edit);                   
                } 
                else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_CZECH)//系统密码登陆界面PasswordSystemLogin 捷克界面组装
                { 
                    updateDisplayLoginData_Czech(tab_LoginPassword_edit);                  
                }   
                else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_DUTCH)//系统密码登陆界面PasswordSystemLogin 荷兰界面组装
                { 
                    updateDisplayLoginData_Dutch(tab_LoginPassword_edit);                 
                }
                else
                {   
                    updateDisplayLoginData_English(tab_LoginPassword_edit);                    
                }
                gCurrentMenu.eCurrentDisplayMenuType = nowDisplayType;
            }
            break;
        case KEYACTION_UP://在登陆界面下，DOWN键按下，数字减一
            {                
                if(gbEditFlag != STATUS_TRUE)//进入编辑模式
                {
                    gbEditFlag = STATUS_TRUE;
                }
               
                if(sU8SetLoginCounter == 0)  //Login密码第一个数字
                {
                    sU8NumberCounter--;
                    if(!(sU8NumberCounter <= 9))
                    {
                       sU8NumberCounter = 9;
                       tab_LoginPassword_edit[0] = '0';
                    }
                    tab_LoginPassword_edit[0] =  '0' + sU8NumberCounter;                    
                }      
                if(sU8SetLoginCounter == 1) //Login密码第二个数字
                {
                    sU8NumberCounter--;
                    if(!(sU8NumberCounter <= 9))
                    {
                       sU8NumberCounter = 9;
                       tab_LoginPassword_edit[1] = '0';
                    }
                    tab_LoginPassword_edit[1] =  '0' + sU8NumberCounter;                    
                }        
                if(sU8SetLoginCounter == 2)//Login密码第三个数字 
                {
                    sU8NumberCounter--;
                    if(!(sU8NumberCounter <= 9))
                    {
                       sU8NumberCounter = 9;
                       tab_LoginPassword_edit[2] = '0';
                    }
                    tab_LoginPassword_edit[2] =  '0' + sU8NumberCounter;                    
                }          
                if(sU8SetLoginCounter == 3)//Login密码第四个数字
                {
                    sU8NumberCounter--;
                    if(!(sU8NumberCounter <= 9))
                    {
                       sU8NumberCounter = 9;
                       tab_LoginPassword_edit[3] = '0';
                    }
                    tab_LoginPassword_edit[3] =  '0' + sU8NumberCounter;                    
                }   
                if(sU8SetLoginCounter == 4)//Login密码第五个数字
                {
                    sU8NumberCounter--;
                    if(!(sU8NumberCounter <= 9))
                    {
                       sU8NumberCounter = 9;
                       tab_LoginPassword_edit[4] = '0';
                    }
                    tab_LoginPassword_edit[4] =  '0' + sU8NumberCounter;                    
                }               
                if(sU8SetLoginCounter == 5)//Login密码第六个数字
                {
                    sU8NumberCounter--;
                    if(!(sU8NumberCounter <= 9))
                    {
                       sU8NumberCounter = 9;
                       tab_LoginPassword_edit[5] = '0';
                    }
                    tab_LoginPassword_edit[5] =  '0' + sU8NumberCounter;                    
                }  
                
                if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_ENGLISH)//系统密码登陆界面PasswordSystemLogin 英文界面组装
                { 
                    updateDisplayLoginData_English(tab_LoginPassword_edit);                    
                }               
                else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_CHINESE)//系统密码登陆界面PasswordSystemLogin 中文界面组装
                {
                    updateDisplayLoginData_Chinese(tab_LoginPassword_edit);
                }              
                else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_SPANISH)//系统密码登陆界面PasswordSystemLogin 西班牙界面组装
                { 
                    updateDisplayLoginData_Spanish(tab_LoginPassword_edit);
                }               
                else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_GERMAN)//系统密码登陆界面PasswordSystemLogin 德语界面组装
                { 
                    updateDisplayLoginData_German(tab_LoginPassword_edit);
                }             
                else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_FRENCH)//系统密码登陆界面PasswordSystemLogin 法语界面组装
                { 
                    updateDisplayLoginData_French(tab_LoginPassword_edit);                     
                }
                else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_POLISH)//系统密码登陆界面PasswordSystemLogin 波兰界面组装
                {
                    updateDisplayLoginData_Polish(tab_LoginPassword_edit);
                }
                else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_ITALIAN)//系统密码登陆界面PasswordSystemLogin 意大利界面组装
                {
                    updateDisplayLoginData_Italian(tab_LoginPassword_edit);                   
                }
                else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_CZECH)//系统密码登陆界面PasswordSystemLogin 捷克界面组装
                { 
                    updateDisplayLoginData_Czech(tab_LoginPassword_edit);                  
                }
                else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_DUTCH)//系统密码登陆界面PasswordSystemLogin 荷兰界面组装
                { 
                    updateDisplayLoginData_Dutch(tab_LoginPassword_edit);                 
                }
                else
                {   
                    updateDisplayLoginData_English(tab_LoginPassword_edit);                    
                }                
                gCurrentMenu.eCurrentDisplayMenuType = nowDisplayType;
            }
            break;
        case KEYACTION_ESC://在登陆界面下，Esc键按下，回退到主界面
            {                  
                gbEditFlag = STATUS_FALSE;//退出编辑模式 
                sU8SetLoginCounter = 0;
                sU8NumberCounter = 0;
                gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_HOME;
                memset(tab_LoginPassword_edit,'0',6);
            }
            break;
        case KEYACTION_UPDOWN://在登陆界面下，UP键 + DOWN键同时按下，设置下一个数字
            {                
                sU8SetLoginCounter++;
                sU8NumberCounter = 0;
                if(sU8SetLoginCounter == DISPLAY_LOGIN_PASSWORD_COUNT)
                {
                    sU8SetLoginCounter = 0;  
                }
                gCurrentMenu.eCurrentDisplayMenuType = nowDisplayType;
            }
            break;
        case KEYACTION_NULL://无操作
        default:
            {
                if(gbEditFlag != STATUS_TRUE)
                {            
                    if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_ENGLISH) //系统密码登陆界面PasswordSystemLogin 英文界面组装
                    { 
                        updateDisplayLoginData_English(tab_LoginPassword_edit);                    
                    }   
                    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_CHINESE)//系统密码登陆界面PasswordSystemLogin 中文界面组装
                    {
                        updateDisplayLoginData_Chinese(tab_LoginPassword_edit);
                    } 
                    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_SPANISH)//系统密码登陆界面PasswordSystemLogin 西班牙界面组装
                    { 
                        updateDisplayLoginData_Spanish(tab_LoginPassword_edit);
                    }           
                    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_GERMAN)//系统密码登陆界面PasswordSystemLogin 德语界面组装
                    { 
                        updateDisplayLoginData_German(tab_LoginPassword_edit);
                    }    
                    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_FRENCH)//系统密码登陆界面PasswordSystemLogin 法语界面组装
                    { 
                        updateDisplayLoginData_French(tab_LoginPassword_edit);                     
                    }    
                    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_POLISH)//系统密码登陆界面PasswordSystemLogin 波兰界面组装
                    {
                        updateDisplayLoginData_Polish(tab_LoginPassword_edit);
                    }  
                    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_ITALIAN)//系统密码登陆界面PasswordSystemLogin 意大利界面组装 
                    {
                        updateDisplayLoginData_Italian(tab_LoginPassword_edit);                   
                    }
                    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_CZECH)//系统密码登陆界面PasswordSystemLogin 捷克界面组装
                    { 
                        updateDisplayLoginData_Czech(tab_LoginPassword_edit);                  
                    }                    
                    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_DUTCH)//系统密码登陆界面PasswordSystemLogin 荷兰界面组装
                    { 
                        updateDisplayLoginData_Dutch(tab_LoginPassword_edit);                 
                    }
                    else
                    {   
                        updateDisplayLoginData_English(tab_LoginPassword_edit);                    
                    }
                    gCurrentMenu.eCurrentDisplayMenuType = nowDisplayType;
                }
            }
            break;
    }
}
/***************************************************************************
 功能:英文LOGIN显示界面
****************************************************************************/
void updateDisplayLoginData_English(char* sLoginPassword)
{
    memset(tab_display,0,DISPLAY_CACHE_SIZE);
    sprintf(tab_display,"        Login        \n                     \nPassword: %s     \n                   \n",sLoginPassword);
    //GUI_DispStringAt((uint8_t*)tab_display, 0, 0);
    GUI_Display(tab_display, 0, 0);
}
/***************************************************************************
 功能:西班牙语LOGIN显示界面
****************************************************************************/
void updateDisplayLoginData_Spanish(char* sLoginPassword)
{
    
}
/***************************************************************************
 功能:德语LOGIN显示界面
****************************************************************************/
void updateDisplayLoginData_German(char* sLoginPassword)
{
    
}
/***************************************************************************
 功能:法语LOGIN显示界面
****************************************************************************/
void updateDisplayLoginData_French(char* sLoginPassword)
{
    
}
/***************************************************************************
 功能:波兰语LOGIN显示界面
****************************************************************************/
void updateDisplayLoginData_Polish(char* sLoginPassword)
{
    
}
/***************************************************************************
 功能:意大利语LOGIN显示界面
****************************************************************************/
void updateDisplayLoginData_Italian(char* sLoginPassword)
{
    
}
/***************************************************************************
 功能:捷克语LOGIN显示界面
****************************************************************************/
void updateDisplayLoginData_Czech(char* sLoginPassword)
{
    
}
/***************************************************************************
 功能:荷兰语LOGIN显示界面
****************************************************************************/
void updateDisplayLoginData_Dutch(char* sLoginPassword)
{
    
}

/***************************************************************************
 功能:英文HOME界面
****************************************************************************/
void updateDisplayHomeData_English(void)
{    
    if(gDisplay.stDisplayHome.u8WorkSate == WORKSTATE_INIT)
    {
        /*字符串格式不要随意修改，影响UI布局*/
        if(gDisplay.stDisplayHome.u8FaultStatus == FAULTSTATE_NORMAL)
        {
            sprintf(tab_display,"         HOME        \nWorkS:Init           \nFaultS:Normal        \nDCC:%-6.1f DDC:%-6.1f\n",gDisplay.stDisplayHome.f32ChagePowerGeneration,gDisplay.stDisplayHome.f32DisChagePowerGeneration);  
        }
        else if(gDisplay.stDisplayHome.u8FaultStatus == FAULTSTATE_FAULT)
        {
            sprintf(tab_display,"         HOME        \nWorkS:Init           \nFaultS:Fault         \nDCC:%-6.1f DDC:%-6.1f\n",gDisplay.stDisplayHome.f32ChagePowerGeneration,gDisplay.stDisplayHome.f32DisChagePowerGeneration);                     
        }
        else if(gDisplay.stDisplayHome.u8FaultStatus == FAULTSTATE_ALARM)
        {
            sprintf(tab_display,"         HOME        \nWorkS:Init           \nFaultS:Alerm         \nDCC:%-6.1f DDC:%-6.1f\n",gDisplay.stDisplayHome.f32ChagePowerGeneration,gDisplay.stDisplayHome.f32DisChagePowerGeneration);  
        }
        else
        {
            sprintf(tab_display,"         HOME        \nWorkS:Init           \nFaultS:              \nDCC:%-6.1f DDC:%-6.1f\n",gDisplay.stDisplayHome.f32ChagePowerGeneration,gDisplay.stDisplayHome.f32DisChagePowerGeneration);
        }
    }
    else if(gDisplay.stDisplayHome.u8WorkSate == WORKSTATE_FIT)
    {
        /*字符串格式不要随意修改，影响UI布局*/
        if(gDisplay.stDisplayHome.u8FaultStatus == FAULTSTATE_NORMAL)
        {
            sprintf(tab_display,"         HOME        \nWorkS:Fit            \nFaultS:Normal        \nDCC:%-6.1f DDC:%-6.1f\n",gDisplay.stDisplayHome.f32ChagePowerGeneration,gDisplay.stDisplayHome.f32DisChagePowerGeneration);  
        }
        else if(gDisplay.stDisplayHome.u8FaultStatus == FAULTSTATE_FAULT)
        {
            sprintf(tab_display,"         HOME        \nWorkS:Fit            \nFaultS:Fault         \nDCC:%-6.1f DDC:%-6.1f\n",gDisplay.stDisplayHome.f32ChagePowerGeneration,gDisplay.stDisplayHome.f32DisChagePowerGeneration);                     
        }
        else if(gDisplay.stDisplayHome.u8FaultStatus == FAULTSTATE_ALARM)
        {
            sprintf(tab_display,"         HOME        \nWorkS:Fit            \nFaultS:Alerm         \nDCC:%-6.1f DDC:%-6.1f\n",gDisplay.stDisplayHome.f32ChagePowerGeneration,gDisplay.stDisplayHome.f32DisChagePowerGeneration);  
        }
        else
        {
            sprintf(tab_display,"         HOME        \nWorkS:Fit            \nFaultS:              \nDCC:%-6.1f DDC:%-6.1f\n",gDisplay.stDisplayHome.f32ChagePowerGeneration,gDisplay.stDisplayHome.f32DisChagePowerGeneration);
        }  
    }
    else if(gDisplay.stDisplayHome.u8WorkSate == WORKSTATE_MONITOR)
    {
        /*字符串格式不要随意修改，影响UI布局*/
        if(gDisplay.stDisplayHome.u8FaultStatus == FAULTSTATE_NORMAL)
        {
            sprintf(tab_display,"         HOME        \nWorkS:Monitor        \nFaultS:Normal        \nDCC:%-6.1f DDC:%-6.1f\n",gDisplay.stDisplayHome.f32ChagePowerGeneration,gDisplay.stDisplayHome.f32DisChagePowerGeneration);  
        }
        else if(gDisplay.stDisplayHome.u8FaultStatus == FAULTSTATE_FAULT)
        {
            sprintf(tab_display,"         HOME        \nWorkS:Monitor        \nFaultS:Fault         \nDCC:%-6.1f DDC:%-6.1f\n",gDisplay.stDisplayHome.f32ChagePowerGeneration,gDisplay.stDisplayHome.f32DisChagePowerGeneration);                     
        }
        else if(gDisplay.stDisplayHome.u8FaultStatus == FAULTSTATE_ALARM)
        {
            sprintf(tab_display,"         HOME        \nWorkS:Monitor        \nFaultS:Alerm         \nDCC:%-6.1f DDC:%-6.1f\n",gDisplay.stDisplayHome.f32ChagePowerGeneration,gDisplay.stDisplayHome.f32DisChagePowerGeneration);  
        }
        else
        {
            sprintf(tab_display,"         HOME        \nWorkS:Monitor        \nFaultS:              \nDCC:%-6.1f DDC:%-6.1f\n",gDisplay.stDisplayHome.f32ChagePowerGeneration,gDisplay.stDisplayHome.f32DisChagePowerGeneration);
        }  
    }
    else if(gDisplay.stDisplayHome.u8WorkSate == WORKSTATE_STANDBY)
    {
        /*字符串格式不要随意修改，影响UI布局*/
        if(gDisplay.stDisplayHome.u8FaultStatus == FAULTSTATE_NORMAL)
        {
            sprintf(tab_display,"         HOME        \nWorkS:Standby        \nFaultS:Normal        \nDCC:%-6.1f DDC:%-6.1f\n",gDisplay.stDisplayHome.f32ChagePowerGeneration,gDisplay.stDisplayHome.f32DisChagePowerGeneration);  
        }
        else if(gDisplay.stDisplayHome.u8FaultStatus == FAULTSTATE_FAULT)
        {
            sprintf(tab_display,"         HOME        \nWorkS:Standby        \nFaultS:Fault         \nDCC:%-6.1f DDC:%-6.1f\n",gDisplay.stDisplayHome.f32ChagePowerGeneration,gDisplay.stDisplayHome.f32DisChagePowerGeneration);                     
        }
        else if(gDisplay.stDisplayHome.u8FaultStatus == FAULTSTATE_ALARM)
        {
            sprintf(tab_display,"         HOME        \nWorkS:Standby        \nFaultS:Alerm         \nDCC:%-6.1f DDC:%-6.1f\n",gDisplay.stDisplayHome.f32ChagePowerGeneration,gDisplay.stDisplayHome.f32DisChagePowerGeneration);  
        }
        else
        {
            sprintf(tab_display,"         HOME        \nWorkS:Standby        \nFaultS:              \nDCC:%-6.1f DDC:%-6.1f\n",gDisplay.stDisplayHome.f32ChagePowerGeneration,gDisplay.stDisplayHome.f32DisChagePowerGeneration);
        }  
    }
    else if(gDisplay.stDisplayHome.u8WorkSate == WORKSTATE_TEST)
    {
        /*字符串格式不要随意修改，影响UI布局*/
        if(gDisplay.stDisplayHome.u8FaultStatus == FAULTSTATE_NORMAL)
        {
            sprintf(tab_display,"         HOME        \nWorkS:Test           \nFaultS:Normal        \nDCC:%-6.1f DDC:%-6.1f\n",gDisplay.stDisplayHome.f32ChagePowerGeneration,gDisplay.stDisplayHome.f32DisChagePowerGeneration);  
        }
        else if(gDisplay.stDisplayHome.u8FaultStatus == FAULTSTATE_FAULT)
        {
            sprintf(tab_display,"         HOME        \nWorkS:Test           \nFaultS:Fault         \nDCC:%-6.1f DDC:%-6.1f\n",gDisplay.stDisplayHome.f32ChagePowerGeneration,gDisplay.stDisplayHome.f32DisChagePowerGeneration);                     
        }
        else if(gDisplay.stDisplayHome.u8FaultStatus == FAULTSTATE_ALARM)
        {
            sprintf(tab_display,"         HOME        \nWorkS:Test           \nFaultS:Alerm         \nDCC:%-6.1f DDC:%-6.1f\n",gDisplay.stDisplayHome.f32ChagePowerGeneration,gDisplay.stDisplayHome.f32DisChagePowerGeneration);  
        }
        else
        {
            sprintf(tab_display,"         HOME        \nWorkS:Test           \nFaultS:              \nDCC:%-6.1f DDC:%-6.1f\n",gDisplay.stDisplayHome.f32ChagePowerGeneration,gDisplay.stDisplayHome.f32DisChagePowerGeneration);
        }  
    }
    else if(gDisplay.stDisplayHome.u8WorkSate == WORKSTATE_PRESOFTSTART)
    {
        /*字符串格式不要随意修改，影响UI布局*/
        if(gDisplay.stDisplayHome.u8FaultStatus == FAULTSTATE_NORMAL)
        {
            sprintf(tab_display,"         HOME        \nWorkS:PreSoftstart   \nFaultS:Normal        \nDCC:%-6.1f DDC:%-6.1f\n",gDisplay.stDisplayHome.f32ChagePowerGeneration,gDisplay.stDisplayHome.f32DisChagePowerGeneration);  
        }
        else if(gDisplay.stDisplayHome.u8FaultStatus == FAULTSTATE_FAULT)
        {
            sprintf(tab_display,"         HOME        \nWorkS:PreSoftstart   \nFaultS:Fault         \nDCC:%-6.1f DDC:%-6.1f\n",gDisplay.stDisplayHome.f32ChagePowerGeneration,gDisplay.stDisplayHome.f32DisChagePowerGeneration);                     
        }
        else if(gDisplay.stDisplayHome.u8FaultStatus == FAULTSTATE_ALARM)
        {
            sprintf(tab_display,"         HOME        \nWorkS:PreSoftstart   \nFaultS:Alerm         \nDCC:%-6.1f DDC:%-6.1f\n",gDisplay.stDisplayHome.f32ChagePowerGeneration,gDisplay.stDisplayHome.f32DisChagePowerGeneration);  
        }
        else
        {
            sprintf(tab_display,"         HOME        \nWorkS:PreSoftstart   \nFaultS:              \nDCC:%-6.1f DDC:%-6.1f\n",gDisplay.stDisplayHome.f32ChagePowerGeneration,gDisplay.stDisplayHome.f32DisChagePowerGeneration);
        }  
    }
    else if(gDisplay.stDisplayHome.u8WorkSate == WORKSTATE_SOFTSTART)
    {
        /*字符串格式不要随意修改，影响UI布局*/
        if(gDisplay.stDisplayHome.u8FaultStatus == FAULTSTATE_NORMAL)
        {
            sprintf(tab_display,"         HOME        \nWorkS:Softstart      \nFaultS:Normal        \nDCC:%-6.1f DDC:%-6.1f\n",gDisplay.stDisplayHome.f32ChagePowerGeneration,gDisplay.stDisplayHome.f32DisChagePowerGeneration);  
        }
        else if(gDisplay.stDisplayHome.u8FaultStatus == FAULTSTATE_FAULT)
        {
            sprintf(tab_display,"         HOME        \nWorkS:Softstart      \nFaultS:Fault         \nDCC:%-6.1f DDC:%-6.1f\n",gDisplay.stDisplayHome.f32ChagePowerGeneration,gDisplay.stDisplayHome.f32DisChagePowerGeneration);                     
        }
        else if(gDisplay.stDisplayHome.u8FaultStatus == FAULTSTATE_ALARM)
        {
            sprintf(tab_display,"         HOME        \nWorkS:Softstart      \nFaultS:Alerm         \nDCC:%-6.1f DDC:%-6.1f\n",gDisplay.stDisplayHome.f32ChagePowerGeneration,gDisplay.stDisplayHome.f32DisChagePowerGeneration);  
        }
        else
        {
            sprintf(tab_display,"         HOME        \nWorkS:Softstart      \nFaultS:              \nDCC:%-6.1f DDC:%-6.1f\n",gDisplay.stDisplayHome.f32ChagePowerGeneration,gDisplay.stDisplayHome.f32DisChagePowerGeneration);
        }  
    }
    else if(gDisplay.stDisplayHome.u8WorkSate == WORKSTATE_SOFTSTARTWAIT)
    {
        /*字符串格式不要随意修改，影响UI布局*/
        if(gDisplay.stDisplayHome.u8FaultStatus == FAULTSTATE_NORMAL)
        {
            sprintf(tab_display,"         HOME        \nWorkS:SoftstartWait  \nFaultS:Normal        \nDCC:%-6.1f DDC:%-6.1f\n",gDisplay.stDisplayHome.f32ChagePowerGeneration,gDisplay.stDisplayHome.f32DisChagePowerGeneration);  
        }
        else if(gDisplay.stDisplayHome.u8FaultStatus == FAULTSTATE_FAULT)
        {
            sprintf(tab_display,"         HOME        \nWorkS:SoftstartWait  \nFaultS:Fault         \nDCC:%-6.1f DDC:%-6.1f\n",gDisplay.stDisplayHome.f32ChagePowerGeneration,gDisplay.stDisplayHome.f32DisChagePowerGeneration);                     
        }
        else if(gDisplay.stDisplayHome.u8FaultStatus == FAULTSTATE_ALARM)
        {
            sprintf(tab_display,"         HOME        \nWorkS:SoftstartWait  \nFaultS:Alerm         \nDCC:%-6.1f DDC:%-6.1f\n",gDisplay.stDisplayHome.f32ChagePowerGeneration,gDisplay.stDisplayHome.f32DisChagePowerGeneration);  
        }
        else
        {
            sprintf(tab_display,"         HOME        \nWorkS:SoftstartWait  \nFaultS:              \nDCC:%-6.1f DDC:%-6.1f\n",gDisplay.stDisplayHome.f32ChagePowerGeneration,gDisplay.stDisplayHome.f32DisChagePowerGeneration);
        }  
    }   
    else if(gDisplay.stDisplayHome.u8WorkSate == WORKSTATE_RELAYCLOSED)
    {
        /*字符串格式不要随意修改，影响UI布局*/
        if(gDisplay.stDisplayHome.u8FaultStatus == FAULTSTATE_NORMAL)
        {
            sprintf(tab_display,"         HOME        \nWorkS:RelayClosed    \nFaultS:Normal        \nDCC:%-6.1f DDC:%-6.1f\n",gDisplay.stDisplayHome.f32ChagePowerGeneration,gDisplay.stDisplayHome.f32DisChagePowerGeneration);  
        }
        else if(gDisplay.stDisplayHome.u8FaultStatus == FAULTSTATE_FAULT)
        {
            sprintf(tab_display,"         HOME        \nWorkS:RelayClosed    \nFaultS:Fault         \nDCC:%-6.1f DDC:%-6.1f\n",gDisplay.stDisplayHome.f32ChagePowerGeneration,gDisplay.stDisplayHome.f32DisChagePowerGeneration);                     
        }
        else if(gDisplay.stDisplayHome.u8FaultStatus == FAULTSTATE_ALARM)
        {
            sprintf(tab_display,"         HOME        \nWorkS:RelayClosed    \nFaultS:Alerm         \nDCC:%-6.1f DDC:%-6.1f\n",gDisplay.stDisplayHome.f32ChagePowerGeneration,gDisplay.stDisplayHome.f32DisChagePowerGeneration);  
        }
        else
        {
            sprintf(tab_display,"         HOME        \nWorkS:RelayClosed    \nFaultS:              \nDCC:%-6.1f DDC:%-6.1f\n",gDisplay.stDisplayHome.f32ChagePowerGeneration,gDisplay.stDisplayHome.f32DisChagePowerGeneration);
        }  
    }
    else if(gDisplay.stDisplayHome.u8WorkSate == WORKSTATE_RUN)
    {
        /*字符串格式不要随意修改，影响UI布局*/
        if(gDisplay.stDisplayHome.u8FaultStatus == FAULTSTATE_NORMAL)
        {
            sprintf(tab_display,"         HOME        \nWorkS:Running        \nFaultS:Normal        \nDCC:%-6.1f DDC:%-6.1f\n",gDisplay.stDisplayHome.f32ChagePowerGeneration,gDisplay.stDisplayHome.f32DisChagePowerGeneration);  
        }
        else if(gDisplay.stDisplayHome.u8FaultStatus == FAULTSTATE_FAULT)
        {
            sprintf(tab_display,"         HOME        \nWorkS:Running        \nFaultS:Fault         \nDCC:%-6.1f DDC:%-6.1f\n",gDisplay.stDisplayHome.f32ChagePowerGeneration,gDisplay.stDisplayHome.f32DisChagePowerGeneration);                     
        }
        else if(gDisplay.stDisplayHome.u8FaultStatus == FAULTSTATE_ALARM)
        {
            sprintf(tab_display,"         HOME        \nWorkS:Running        \nFaultS:Alerm         \nDCC:%-6.1f DDC:%-6.1f\n",gDisplay.stDisplayHome.f32ChagePowerGeneration,gDisplay.stDisplayHome.f32DisChagePowerGeneration);  
        }
        else
        {
            sprintf(tab_display,"         HOME        \nWorkS:Running        \nFaultS:              \nDCC:%-6.1f DDC:%-6.1f\n",gDisplay.stDisplayHome.f32ChagePowerGeneration,gDisplay.stDisplayHome.f32DisChagePowerGeneration);
        }  
    }
    else if(gDisplay.stDisplayHome.u8WorkSate == WORKSTATE_FAULT)
    {
        /*字符串格式不要随意修改，影响UI布局*/
        if(gDisplay.stDisplayHome.u8FaultStatus == FAULTSTATE_NORMAL)
        {
            sprintf(tab_display,"         HOME        \nWorkS:Fault          \nFaultS:Normal        \nDCC:%-6.1f DDC:%-6.1f\n",gDisplay.stDisplayHome.f32ChagePowerGeneration,gDisplay.stDisplayHome.f32DisChagePowerGeneration);  
        }
        else if(gDisplay.stDisplayHome.u8FaultStatus == FAULTSTATE_FAULT)
        {
            sprintf(tab_display,"         HOME        \nWorkS:Fault          \nFaultS:Fault         \nDCC:%-6.1f DDC:%-6.1f\n",gDisplay.stDisplayHome.f32ChagePowerGeneration,gDisplay.stDisplayHome.f32DisChagePowerGeneration);                     
        }
        else if(gDisplay.stDisplayHome.u8FaultStatus == FAULTSTATE_ALARM)
        {
            sprintf(tab_display,"         HOME        \nWorkS:Fault          \nFaultS:Alerm         \nDCC:%-6.1f DDC:%-6.1f\n",gDisplay.stDisplayHome.f32ChagePowerGeneration,gDisplay.stDisplayHome.f32DisChagePowerGeneration);  
        }
        else
        {
            sprintf(tab_display,"         HOME        \nWorkS:Fault          \nFaultS:              \nDCC:%-6.1f DDC:%-6.1f\n",gDisplay.stDisplayHome.f32ChagePowerGeneration,gDisplay.stDisplayHome.f32DisChagePowerGeneration);
        }  
    }  
    else if(gDisplay.stDisplayHome.u8WorkSate == WORKSTATE_UPGRADE)
    {
        /*字符串格式不要随意修改，影响UI布局*/
        if(gDisplay.stDisplayHome.u8FaultStatus == FAULTSTATE_NORMAL)
        {
            sprintf(tab_display,"         HOME        \nWorkS:Upgrade        \nFaultS:Normal        \nDCC:%-6.1f DDC:%-6.1f\n",gDisplay.stDisplayHome.f32ChagePowerGeneration,gDisplay.stDisplayHome.f32DisChagePowerGeneration);  
        }
        else if(gDisplay.stDisplayHome.u8FaultStatus == FAULTSTATE_FAULT)
        {
            sprintf(tab_display,"         HOME        \nWorkS:Upgrade        \nFaultS:Fault         \nDCC:%-6.1f DDC:%-6.1f\n",gDisplay.stDisplayHome.f32ChagePowerGeneration,gDisplay.stDisplayHome.f32DisChagePowerGeneration);                     
        }
        else if(gDisplay.stDisplayHome.u8FaultStatus == FAULTSTATE_ALARM)
        {
            sprintf(tab_display,"         HOME        \nWorkS:Upgrade        \nFaultS:Alerm         \nDCC:%-6.1f DDC:%-6.1f\n",gDisplay.stDisplayHome.f32ChagePowerGeneration,gDisplay.stDisplayHome.f32DisChagePowerGeneration);  
        }
        else
        {
            sprintf(tab_display,"         HOME        \nWorkS:Upgrade        \nFaultS:              \nDCC:%-6.1f DDC:%-6.1f\n",gDisplay.stDisplayHome.f32ChagePowerGeneration,gDisplay.stDisplayHome.f32DisChagePowerGeneration);
        }  
    }
    else
    {
        /*字符串格式不要随意修改，影响UI布局*/
        if(gDisplay.stDisplayHome.u8FaultStatus == FAULTSTATE_NORMAL)
        {
            sprintf(tab_display,"         HOME        \nWorkS:               \nFaultS:Normal        \nDCC:%-6.1f DDC:%-6.1f\n",gDisplay.stDisplayHome.f32ChagePowerGeneration,gDisplay.stDisplayHome.f32DisChagePowerGeneration);  
        }
        else if(gDisplay.stDisplayHome.u8FaultStatus == FAULTSTATE_FAULT)
        {
            sprintf(tab_display,"         HOME        \nWorkS:               \nFaultS:Fault         \nDCC:%-6.1f DDC:%-6.1f\n",gDisplay.stDisplayHome.f32ChagePowerGeneration,gDisplay.stDisplayHome.f32DisChagePowerGeneration);                     
        }
        else if(gDisplay.stDisplayHome.u8FaultStatus == FAULTSTATE_ALARM)
        {
            sprintf(tab_display,"         HOME        \nWorkS:               \nFaultS:Alerm         \nDCC:%-6.1f DDC:%-6.1f\n",gDisplay.stDisplayHome.f32ChagePowerGeneration,gDisplay.stDisplayHome.f32DisChagePowerGeneration);  
        }
        else
        {
            sprintf(tab_display,"         HOME        \nWorkS:               \nFaultS:              \nDCC:%-6.1f DDC:%-6.1f\n",gDisplay.stDisplayHome.f32ChagePowerGeneration,gDisplay.stDisplayHome.f32DisChagePowerGeneration);
        }   
    }
    //GUI_DispStringAt((uint8_t*)tab_display, 0, 0);  
    GUI_Display(tab_display, 0, 0);
}

/***************************************************************************
 功能:西班牙HOME界面
****************************************************************************/
void updateDisplayHomeData_Spanish(void)
{
    
}
/***************************************************************************
 功能:德语HOME界面
****************************************************************************/
void updateDisplayHomeData_German(void)
{
    
}
/***************************************************************************
 功能:法语HOME界面
****************************************************************************/
void updateDisplayHomeData_French(void)
{
    
}
/***************************************************************************
 功能:波兰HOME界面
****************************************************************************/
void updateDisplayHomeData_Polish(void)
{
    
}
/***************************************************************************
 功能:意大利HOME界面
****************************************************************************/
void updateDisplayHomeData_Italian(void)
{
    
}
/***************************************************************************
 功能:捷克HOME界面
****************************************************************************/
void updateDisplayHomeData_Czech(void)
{
    
}
/***************************************************************************
 功能:荷兰HOME界面
****************************************************************************/
void updateDisplayHomeData_Dutch(void)
{
    
}
/***************************************************************************
 功能:设置SET英文界面
****************************************************************************/
void updateDisplaySetData_English(uint8_t u8SetIndex)
{    
    if(u8SetIndex == SET_SYSTEM_Index)
    {
        sprintf(tab_display,"         SET         \n->System Set         \nPV Set               \nBattery Set          \n");
        //GUI_DispStringAt((uint8_t*)tab_display, 0, 0); 
        GUI_Display(tab_display, 0, 0);
    }
    else if(u8SetIndex == SET_PV_Index)
    {
        sprintf(tab_display,"         SET         \nSystem Set           \n->PV Set             \nBattery Set          \n");
        //GUI_DispStringAt((uint8_t*)tab_display, 0, 0); 
        GUI_Display(tab_display, 0, 0);
    }
    else if(u8SetIndex == SET_BATTERY_Index)
    {
        sprintf(tab_display,"         SET         \nSystem Set           \nPV Set               \n->Battery Set        \n");
        //GUI_DispStringAt((uint8_t*)tab_display, 0, 0); 
        GUI_Display(tab_display, 0, 0);
    }
    else if(u8SetIndex == SET_GRID_Index)
    {
        sprintf(tab_display,"         SET         \n->Grid Set           \nGen Set              \n                     \n");
        //sprintf(tab_display,"         SET         \n->Grid Set           \nGen Set              \nUpgrade Set          \n");
        //GUI_DispStringAt((uint8_t*)tab_display, 0, 0); 
        GUI_Display(tab_display, 0, 0);
    }
    else if(u8SetIndex == SET_GEN_Index)
    {
        sprintf(tab_display,"         SET         \nGrid Set             \n->Gen Set            \n                     \n");
        //sprintf(tab_display,"         SET         \nGrid Set             \n->Gen Set            \nUpgrade Set          \n");
        //GUI_DispStringAt((uint8_t*)tab_display, 0, 0); 
        GUI_Display(tab_display, 0, 0);
    }
//    else if(u8SetIndex == SET_UPGRADE_Index)
//    {
//        sprintf(tab_display,"         SET         \nGrid Set             \nGen Set              \n->Upgrade Set        \n");
//        //GUI_DispStringAt((uint8_t*)tab_display, 0, 0); 
//        GUI_Display(tab_display, 0, 0);
//    }
    else
    {
                    
    }
}
/***************************************************************************
 功能:设置SET西班牙界面
****************************************************************************/
void updateDisplaySetData_Spanish(uint8_t u8SetIndex)
{
    
}
/***************************************************************************
 功能:设置SET德语界面
****************************************************************************/
void updateDisplaySetData_German(uint8_t u8SetIndex)
{
    
}
/***************************************************************************
 功能:设置SET法语界面
****************************************************************************/
void updateDisplaySetData_French(uint8_t u8SetIndex)
{
    
}
/***************************************************************************
 功能:设置SET波兰语界面
****************************************************************************/
void updateDisplaySetData_Polish(uint8_t u8SetIndex)
{
    
}
/***************************************************************************
 功能:设置SET意大利语界面
****************************************************************************/
void updateDisplaySetData_Italian(uint8_t u8SetIndex)
{
    
}
/***************************************************************************
 功能:设置SET捷克语界面
****************************************************************************/
void updateDisplaySetData_Czech(uint8_t u8SetIndex)
{
    
}
/***************************************************************************
 功能:设置SET荷兰语界面
****************************************************************************/
void updateDisplaySetData_Dutch(uint8_t u8SetIndex)
{
    
}
/***************************************************************************
 功能:按键检测
****************************************************************************/
Display_KEYDetection_Status getKeyDetectionStatus(void)
{
    Display_KEYDetection_Status  keyStatus;
    memset(&keyStatus,0,sizeof(keyStatus));

    Drive_KEYDetection_Status  drivekeyStatus;
    
    drivekeyStatus.u16KeyStatus = Key_Device_GetKeyValue();
    
    if(drivekeyStatus.BitKeyStatus.bKEYDetectionEnter == 1)/*Enter 按下检测*/
    {
        Display_KeyDetectionFilter.u16EnterKeyCnt++;
        keyDetectionFlag = STATUS_TRUE;
    }
    else
    {
        if(Display_KeyDetectionFilter.u16EnterKeyCnt >= 5)
        {
            keyStatus.bKEYDetectionEnter = KEYSTATUS_PRESSED;
        }
        else
        {
            keyStatus.bKEYDetectionEnter = KEYSTATUS_REKEASE;
        }
        Display_KeyDetectionFilter.u16EnterKeyCnt = 0;
    }

    if(drivekeyStatus.BitKeyStatus.bKEYDetectionUp == 1)/*Up 按下检测*/
    {
        Display_KeyDetectionFilter.u16UpKeyCnt++;
        keyDetectionFlag = STATUS_TRUE;
    }
    else
    {
        if(Display_KeyDetectionFilter.u16UpKeyCnt >= 5)
        {
            keyStatus.bKEYDetectionUp = KEYSTATUS_PRESSED;
        }
        else
        {
            keyStatus.bKEYDetectionUp = KEYSTATUS_REKEASE;
        }
        Display_KeyDetectionFilter.u16UpKeyCnt = 0;
    }

    if(drivekeyStatus.BitKeyStatus.bKEYDetectionDown == 1)//Down 按下检测
    {
        Display_KeyDetectionFilter.u16DownKeyCnt++;
        keyDetectionFlag = STATUS_TRUE;
    }
    else
    {
        if(Display_KeyDetectionFilter.u16DownKeyCnt >= 5)
        {
            keyStatus.bKEYDetectionDown = KEYSTATUS_PRESSED;
        }
        else
        {
            keyStatus.bKEYDetectionDown = KEYSTATUS_REKEASE;
        }
        Display_KeyDetectionFilter.u16DownKeyCnt = 0;
    }

    if(drivekeyStatus.BitKeyStatus.bKEYDetectionEsc == 1)//Esc 按下检测
    {
        Display_KeyDetectionFilter.u16EscKeyCnt++;
        keyDetectionFlag = STATUS_TRUE;
    }
    else
    {
        if(Display_KeyDetectionFilter.u16EscKeyCnt >= 5)
        {
            keyStatus.bKEYDetectionEsc = KEYSTATUS_PRESSED;
        }
        else
        {
            keyStatus.bKEYDetectionEsc = KEYSTATUS_REKEASE;
        }
        Display_KeyDetectionFilter.u16EscKeyCnt = 0;
    }
    
    if(drivekeyStatus.u16KeyStatus == 0)//所用按键松开，松手检测
    {
        keyStatus.bKEYDetectionNull = KEYSTATUS_PRESSED;
        keyDetectionFlag = STATUS_FALSE;
        
    }
    
    return keyStatus;
}




/***************************************************************************
 功能:根据上一次界面操作类型和本次操作类型判断本次SET界面切换（菜单页）
****************************************************************************/
void updateDisplayMenuSetData(KeyAction_TypeDef nowActionType,DisplayAction_TypeDef nowDisplayType)
{
    static uint8_t sU8SetSystemCounter = 0;
    gLastMenu.eLastDisplayMenuType = DISPLAY_MENU;          //菜单页面
    switch(nowActionType) //本次界面操作类型
    {
        case KEYACTION_ENTER://在设置界面下，Enter键按下，进入选择对应的设置项
        {
            // 详细数据
            if(sU8SetSystemCounter == MENU_DETAILEDINFO_Index)
            {       
                gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_DETAILEDINFO;
            }
            // 历史记录
            else if(sU8SetSystemCounter == MENU_LOG_Index)
            {
               gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_LOG;
            }
            // 设置
            else if(sU8SetSystemCounter == MENU_SETTING_Index)
            {
                gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_SET;
            }            
            // 统计数据
            else if(sU8SetSystemCounter == MENU_STATISTICS_Index)
            {
                gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_STATISTICS;
            }
            else
            {
                //None
            }
        }
        break;
        //在菜单界面下，Down同时键按下，选择对应的设置项
        case KEYACTION_DOWN :  
            sU8SetSystemCounter++;
            if(sU8SetSystemCounter >= DISPLAY_MENU_COUNT)
            {
                sU8SetSystemCounter = 0;
            }
            gCurrentMenu.eCurrentDisplayMenuType = nowDisplayType;
        break;
        case KEYACTION_UP :
            sU8SetSystemCounter--;
            if(sU8SetSystemCounter >= DISPLAY_MENU_COUNT)
            {
                sU8SetSystemCounter = DISPLAY_MENU_COUNT;
            }
            gCurrentMenu.eCurrentDisplayMenuType = nowDisplayType;
        break;
        //在菜单界面下，Esc键按下，返回到主界面
        case KEYACTION_ESC:
            sU8SetSystemCounter = 0;
            gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_HOME;
        break;
    }
    if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_ENGLISH) //系统设置界面Set 英文界面组装
    { 
        updateDisplayMenuSetData_English(sU8SetSystemCounter);                    
    }
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_SPANISH)//系统设置界面Set 西班牙界面组装
    {
        updateDisplayMenuSetData_Spanish(sU8SetSystemCounter);  
    } 
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_GERMAN)//系统设置界面Set 德语界面组装
    {
        updateDisplayMenuSetData_German(sU8SetSystemCounter);  
    }
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_FRENCH)//系统设置界面Set 法语界面组装
    {
        updateDisplayMenuSetData_French(sU8SetSystemCounter);    
    }
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_POLISH) //系统设置界面Set 波兰界面组装
    {
        updateDisplayMenuSetData_Polish(sU8SetSystemCounter); 
    }
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_ITALIAN)//系统设置界面Set 意大利界面组装
    {
        updateDisplayMenuSetData_Italian(sU8SetSystemCounter);  
    } 
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_CZECH)//系统设置界面Set 捷克界面组装
    {
        updateDisplayMenuSetData_Czech(sU8SetSystemCounter);   
    }
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_DUTCH)//系统设置界面Set 荷兰界面组装c
    {
        updateDisplayMenuSetData_Dutch(sU8SetSystemCounter);   
    }
    else
    { 
        updateDisplayMenuSetData_English(sU8SetSystemCounter);        
    }
}


/***************************************************************************
 功能:菜单页面英文界面
****************************************************************************/
void updateDisplayMenuSetData_English(uint8_t u8SetIndex)
{
    memset(tab_display,0,DISPLAY_MENU_COUNT);          
    // 详细数据
    if(u8SetIndex == MENU_DETAILEDINFO_Index)
    {
        sprintf(tab_display,"        Menu         \n->Detailed Info      \nLog                  \nSet                  \n");
    }   
    // 历史记录
    else if(u8SetIndex == MENU_LOG_Index)
    {
        sprintf(tab_display,"        Menu         \nDetailed Info        \n->Log                \nSet                  \n");
    }    
    // 设置
    else if(u8SetIndex == MENU_SETTING_Index)
    {
        sprintf(tab_display,"        Menu         \nDetailed Info        \nLog                  \n->Set                \n");
    }
    // 统计数据
    else if(u8SetIndex == MENU_STATISTICS_Index)
    {
        sprintf(tab_display,"        Menu         \nSet                  \nLog                  \n->Statistics         \n");
    }
    else
    {
    }
    GUI_Display(tab_display, 0, 0);
}

/***************************************************************************
 *  菜单页 西班牙
****************************************************************************/
void updateDisplayMenuSetData_Spanish(uint8_t u8SetIndex)
{

}
/***************************************************************************
 *  菜单页 德语
****************************************************************************/
void updateDisplayMenuSetData_German(uint8_t u8SetIndex)
{

}
/***************************************************************************
 *  菜单页 法语
****************************************************************************/
void updateDisplayMenuSetData_French(uint8_t u8SetIndex)
{

}
/***************************************************************************
 *  菜单页 波兰
****************************************************************************/
void updateDisplayMenuSetData_Polish(uint8_t u8SetIndex)
{

}
/***************************************************************************
 *  菜单页 意大利
****************************************************************************/
void updateDisplayMenuSetData_Italian(uint8_t u8SetIndex)
{

}
/***************************************************************************
 *  菜单页 捷克
****************************************************************************/
void updateDisplayMenuSetData_Czech(uint8_t u8SetIndex)
{

}
/***************************************************************************
 *  菜单页  荷兰
****************************************************************************/
void updateDisplayMenuSetData_Dutch(uint8_t u8SetIndex)
{

}


/***************************************************************************
 功能:根据上一次界面操作类型和本次操作类型判断本次SET界面切换（详细信息）
 * 运行状态显示
 * 整机数据显示
 * 电网数据显示
 * 光伏数据显示
 * 电网数据显示
 * 光伏数据显示
 * 负载数据显示
 * 发电机数据显示
 * 出厂数据
****************************************************************************/
void updateDisplayDETAILEDINFOIndexSetData(KeyAction_TypeDef nowActionType,DisplayAction_TypeDef nowDisplayType)
{
    static uint8_t sU8SetSystemCounter = 0;
    gLastMenu.eLastDisplayMenuType = DISPLAY_DETAILEDINFO;          //当前页面为详细数据
    switch(nowActionType) //本次界面操作类型
    {
        case KEYACTION_ENTER://在设置界面下，Enter键按下，进入选择对应的设置项
        {
            // 状态机显示索引运行状态
            if(sU8SetSystemCounter == DETAILEDINFO_RunningStatus_Index)
            {       
                gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_RunningStatus;
            }
            // 整机数据显示索引
            else if(sU8SetSystemCounter == DETAILEDINFO_Machin_Index)
            {
                gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_MachinStatus;
            }
            // 电网数据显示索引
            else if(sU8SetSystemCounter == DETAILEDINFO_Grid_Index)
            {
                gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_GridInfo;
            }
            // 光伏数据显示索引
            else if(sU8SetSystemCounter == DETAILEDINFO_Photovoltaic_Index)
            {
                gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_Photovoltaic;
            }
            // 电池数据显示索引
            else if(sU8SetSystemCounter == DETAILEDINFO_Battery_Index)
            {
                gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_Battery;
            }
            // 负载数据显示索引
            else if(sU8SetSystemCounter == DETAILEDINFO_PowerLoad_Index)
            {
                gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_PowerLoad;
            }
            // 发电机数据显示索引
            else if(sU8SetSystemCounter == DETAILEDINFO_Generator_Index)
            {
                gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_Generator;
            }
            // 出厂设置显示索引
            else if(sU8SetSystemCounter == DETAILEDINFO_Factory_Index)
            {
                gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_Factory;
            }
                
        }
        break;
        case KEYACTION_DOWN :  //在设置界面下，Down同时键按下，选择对应的设置项
            sU8SetSystemCounter++;
            if(sU8SetSystemCounter >= DISPLAY_DETAILEDINFO_COUNT)
            {
                sU8SetSystemCounter = 0;
            }
            gCurrentMenu.eCurrentDisplayMenuType = nowDisplayType;
        break;
        case KEYACTION_UP :
            sU8SetSystemCounter--;
            if(sU8SetSystemCounter >= DISPLAY_DETAILEDINFO_COUNT)
            {
                sU8SetSystemCounter = DISPLAY_DETAILEDINFO_COUNT;
            }
            gCurrentMenu.eCurrentDisplayMenuType = nowDisplayType;
        break;
        case KEYACTION_ESC://在设置界面下，Esc键按下，返回到菜单页面
            sU8SetSystemCounter = 0;
            gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_MENU;
        break;
        default:
            {
                gCurrentMenu.eCurrentDisplayMenuType = nowDisplayType;
            }
            break;
    }
    if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_ENGLISH) //详细数据界面 英文界面组装
    { 
        updateDisplayDetailedInfoData_English(sU8SetSystemCounter);                    
    }
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_CHINESE)//详细数据界面 中文界面组装
    {
        //updateDisplayDetailedInfoData_Chinese(sU8RealtimeCounter);
    }    
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_SPANISH)//详细数据界面 西班牙界面组装
    { 
        updateDisplayDetailedInfoData_Spanish(sU8SetSystemCounter);
    } 
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_GERMAN)//详细数据界面 德语界面组装
    { 
        updateDisplayDetailedInfoData_German(sU8SetSystemCounter);
    } 
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_FRENCH)//详细数据界面 法语界面组装
    { 
        updateDisplayDetailedInfoData_French(sU8SetSystemCounter);                     
    }   
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_POLISH)//详细数据界面 波兰界面组装
    {
        updateDisplayDetailedInfoData_Polish(sU8SetSystemCounter);
    }    
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_ITALIAN)//详细数据界面 意大利界面组装
    {
        updateDisplayDetailedInfoData_Italian(sU8SetSystemCounter);                   
    } 
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_CZECH)//详细数据界面 捷克界面组装
    { 
        updateDisplayDetailedInfoData_Czech(sU8SetSystemCounter);                  
    }   
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_DUTCH)//详细数据界面 荷兰界面组装
    { 
        updateDisplayDetailedInfoData_Dutch(sU8SetSystemCounter);                 
    }
    else
    {   
        updateDisplayDetailedInfoData_English(sU8SetSystemCounter);                    
    }
}
/***************************************************************************
* 功能:详细数据查看页面
* 运行状态显示
* 整机数据显示
* 电网数据显示
* 光伏数据显示
* 电网数据显示
* 光伏数据显示
* 负载数据显示
* 发电机数据显示
* 出厂数据
****************************************************************************/
void updateDisplayDetailedInfoData_English(uint8_t u8SetIndex)
{
    memset(tab_display,0,DISPLAY_DETAILEDINFO_COUNT);
    // 整机状态显示
    if(u8SetIndex == DETAILEDINFO_RunningStatus_Index)
    {
        sprintf(tab_display,"    DetailedInfo     \n->Running status     \nMachin Info          \nGrid Info            \n");
    }
    // 整机数据
    else if(u8SetIndex == DETAILEDINFO_Machin_Index)
    {
        sprintf(tab_display,"    DetailedInfo     \nRunning status       \n->Machin Info        \nGrid Info            \n");
    }
    // 电网数据
    else if(u8SetIndex == DETAILEDINFO_Grid_Index)
    {
        sprintf(tab_display,"    DetailedInfo     \nRunning status       \nMachin Info          \n->Grid Info          \n");
    }
    // 光伏数据
    else if(u8SetIndex == DETAILEDINFO_Photovoltaic_Index)
    {
        sprintf(tab_display,"    DetailedInfo     \nMachin Info          \nGrid Info            \n->PV Info            \n");
    }
    // 电池数据
    else if(u8SetIndex == DETAILEDINFO_Battery_Index)
    {
        sprintf(tab_display,"    DetailedInfo     \nGrid Info            \nPV Info              \n->Battery            \n");
    }
    // 负载数据
    else if(u8SetIndex == DETAILEDINFO_PowerLoad_Index)
    {
        sprintf(tab_display,"    DetailedInfo     \nPV Info              \nBattery              \n->Load Power         \n");
    }
    // 发电机数据
    else if(u8SetIndex == DETAILEDINFO_Generator_Index)
    {
        sprintf(tab_display,"    DetailedInfo     \nBattery              \nLoad Power           \n->Generator          \n");
    }
    // 出厂数据
    else if(u8SetIndex == DETAILEDINFO_Factory_Index)
    {
        sprintf(tab_display,"    DetailedInfo     \nLoad Power           \nGenerator            \n->Factory            \n");
    }
    GUI_Display(tab_display, 0, 0);
}

/***************************************************************************
 功能:西班牙 详细数据查看页面
****************************************************************************/
void updateDisplayDetailedInfoData_Spanish(uint8_t u8SetIndex)
{

}
/***************************************************************************
 功能:德语 详细数据查看页面
****************************************************************************/
void updateDisplayDetailedInfoData_German(uint8_t u8SetIndex)
{

}
/***************************************************************************
 功能:法语 详细数据查看页面
****************************************************************************/
void updateDisplayDetailedInfoData_French(uint8_t u8SetIndex)
{

}
/***************************************************************************
 功能:波兰 详细数据查看页面
****************************************************************************/
void updateDisplayDetailedInfoData_Polish(uint8_t u8SetIndex)
{

}
/***************************************************************************
 功能:意大利详细数据查看页面
****************************************************************************/
void updateDisplayDetailedInfoData_Italian(uint8_t u8SetIndex)
{

}
/***************************************************************************
 功能:捷克 详细数据查看页面
****************************************************************************/
void updateDisplayDetailedInfoData_Czech(uint8_t u8SetIndex)
{

}
/***************************************************************************
 功能:荷兰语 详细数据查看页面
****************************************************************************/
void updateDisplayDetailedInfoData_Dutch(uint8_t u8SetIndex)
{

}

/***************************************************************************
 功能:状态机显示更新
****************************************************************************/
void updateDisplayRunningStatus(KeyAction_TypeDef nowActionType,DisplayAction_TypeDef nowDisplayType)
{
    static uint8_t sU8SetSystemCounter = 0;
    gLastMenu.eLastDisplayMenuType = DISPLAY_RunningStatus;        //当前页面为运行状态页面
    switch(nowActionType)
    {
        case KEYACTION_DOWN://状态机数据界面下，UP键按下，页面数字加一
        {
            sU8SetSystemCounter++;
            if(sU8SetSystemCounter == DISPLAY_RunningStatus_ITEM_COUNT)
            {
                sU8SetSystemCounter = 0;  
            }
            gCurrentMenu.eCurrentDisplayMenuType = nowDisplayType;
        }
        break;
        case KEYACTION_UP://状态机数据界面下，Down键按下，页面数字减一
        {
            sU8SetSystemCounter--;
            sU8SetSystemCounter = 0 ;
            if(sU8SetSystemCounter >= DISPLAY_RunningStatus_ITEM_COUNT)
            {
                sU8SetSystemCounter = sU8SetSystemCounter - 1;  
            }
            gCurrentMenu.eCurrentDisplayMenuType = nowDisplayType;                
        }
        break;
        case KEYACTION_ESC://状态机数据界面下，Esc键按下，回退到详细数据界面
        {
            sU8SetSystemCounter = 0;
            gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_DETAILEDINFO;
        }
        break;
        case KEYACTION_NULL://无操作
        default:
        {
            // 其他不响应
        }                            
        break;
    }
    
    if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_ENGLISH) //状态机数据显示界面 英文界面组装
    { 
        updateDisplayRunningStatus_English(sU8SetSystemCounter);                    
    }
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_CHINESE)//状态机数据显示界面 中文界面组装
    {
      // updateDisplayRunningStatus_Chinese(sU8RealtimeCounter);
    }    
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_SPANISH)//状态机数据显示界面 西班牙界面组装
    { 
        updateDisplayRunningStatus_Spanish(sU8SetSystemCounter);
    } 
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_GERMAN)//状态机数据显示界面 德语界面组装
    { 
        updateDisplayRunningStatus_German(sU8SetSystemCounter);
    } 
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_FRENCH)//状态机数据显示界面 法语界面组装
    { 
        updateDisplayRunningStatus_French(sU8SetSystemCounter);                     
    }   
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_POLISH)//状态机数据显示界面 波兰界面组装
    {
        updateDisplayRunningStatus_Polish(sU8SetSystemCounter);
    }    
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_ITALIAN)//状态机数据显示界面 意大利界面组装
    {
        updateDisplayRunningStatus_Italian(sU8SetSystemCounter);                   
    } 
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_CZECH)//状态机数据显示界面 捷克界面组装
    { 
        updateDisplayRunningStatus_Czech(sU8SetSystemCounter);                  
    }   
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_DUTCH)//状态机数据显示界面 荷兰界面组装
    { 
        updateDisplayRunningStatus_Dutch(sU8SetSystemCounter);                 
    }
    else
    {   
        updateDisplayRunningStatus_English(sU8SetSystemCounter);                    
    }
}

/***************************************************************************
 功能:状态机显示 英文界面
****************************************************************************/
void updateDisplayRunningStatus_English(uint8_t sU8RealtimeCounter)
{
    memset(tab_display,0,DISPLAY_CACHE_SIZE);
   
    char tab_pv[11] = {""};
    if((gDisplay.stDisplayData.stPV.stPV1.u8PVStatus == 0x00)&&(gDisplay.stDisplayData.stPV.stPV2.u8PVStatus == 0x00))
    {
        sprintf(tab_pv,"%s","Standby    ");
    }
    else if((gDisplay.stDisplayData.stPV.stPV1.u8PVStatus == 0x01)||(gDisplay.stDisplayData.stPV.stPV2.u8PVStatus == 0x01))
    {
        sprintf(tab_pv,"%s","Running    ");
    }
    else
    {
        sprintf(tab_pv,"%s","unknown    ");
    }
    char tab_Grid[9] = {""};
    if(gDisplay.stDisplayData.stGridData.u8GridStatus == 0x00)
    {
        sprintf(tab_Grid,"%s","On-grid  ");
    }
    else if(gDisplay.stDisplayData.stGridData.u8GridStatus == 0x01)
    {
        sprintf(tab_Grid,"%s","Off-grid ");
    }
    else if(gDisplay.stDisplayData.stGridData.u8GridStatus == 0x02)
    {
        sprintf(tab_Grid,"%s","Have-Grid");
    }
    else if(gDisplay.stDisplayData.stGridData.u8GridStatus == 0x04)
    {
        sprintf(tab_Grid,"%s","Closed   ");
    }
    else
    {
        sprintf(tab_Grid,"%s","unknown  ");
    }
    char tab_battery[10] = {""};
    if(gDisplay.stDisplayData.stBMS.u8BMSStatus == 0x00)
    {
        sprintf(tab_battery,"%s","Normal    ");
    }
    else if(gDisplay.stDisplayData.stBMS.u8BMSStatus == 0x01)
    {
        sprintf(tab_battery,"%s","Fault     ");
    }
    else
    {
        sprintf(tab_battery,"%s","unknown  ");
    }
    char tab_Gen[10] = {""};
    if(gDisplay.stDisplayData.stGenData.u8GenStatus == 0x00)
    {
        sprintf(tab_Gen,"%s","Gen Run  ");
    }
    else if(gDisplay.stDisplayData.stGenData.u8GenStatus == 0x01)
    {
        sprintf(tab_Gen,"%s","EPS Run  ");
    }
    else if(gDisplay.stDisplayData.stGenData.u8GenStatus == 0x02)
    {
        sprintf(tab_Gen,"%s","Have Gen ");
    }
    else if(gDisplay.stDisplayData.stGenData.u8GenStatus == 0x04)
    {
        sprintf(tab_Gen,"%s","No Gen   ");
    }
    else
    {
        sprintf(tab_Gen,"%s","unknown  ");
    }
    sprintf(tab_display,"PV Status:%s\nBat Status:%s\nGrid Status:%s\nGen Status:%s\n",tab_pv,tab_battery,tab_Grid,tab_Gen);
    GUI_Display(tab_display, 0, 0);
}

/***************************************************************************
 功能:状态机显示 西班牙语 
****************************************************************************/
void updateDisplayRunningStatus_Spanish(uint8_t sU8RealtimeCounter)
{

}

/***************************************************************************
 功能:状态机显示 德语 
****************************************************************************/
void updateDisplayRunningStatus_German(uint8_t sU8RealtimeCounter)
{

}

/***************************************************************************
 功能:状态机显示 法语
****************************************************************************/
void updateDisplayRunningStatus_French(uint8_t sU8RealtimeCounter)
{

}

/***************************************************************************
 功能:状态机显示 波兰语
****************************************************************************/
void updateDisplayRunningStatus_Polish(uint8_t sU8RealtimeCounter)
{

}

/***************************************************************************
 功能:状态机显示 意大利语
****************************************************************************/
void updateDisplayRunningStatus_Italian(uint8_t sU8RealtimeCounter)
{

}
/***************************************************************************
 功能:状态机显示 捷克语
****************************************************************************/
void updateDisplayRunningStatus_Czech(uint8_t sU8RealtimeCounter)
{

}
/***************************************************************************
 功能:状态机显示 荷兰语
****************************************************************************/
void updateDisplayRunningStatus_Dutch(uint8_t sU8RealtimeCounter)
{

}

/***************************************************************************
 功能:整机数据显示更新
****************************************************************************/
void updateDisplayMachinData(KeyAction_TypeDef nowActionType,DisplayAction_TypeDef nowDisplayType)
{
    static uint8_t sU8SetSystemCounter = 0;
    gLastMenu.eLastDisplayMenuType = DISPLAY_MachinStatus;              //当前页面为整机状态
    switch(nowActionType)
    {
        case KEYACTION_DOWN:                                            //整机数据界面下，UP键按下，页面数字加一
        {
            sU8SetSystemCounter++;
            if(sU8SetSystemCounter == DISPLAY_Machine_ITEM_COUNT)
            {
                sU8SetSystemCounter = 0;  
            }
            gCurrentMenu.eCurrentDisplayMenuType = nowDisplayType;
       }
       break;
       case KEYACTION_UP:                                               //整机数据界面下，Down键按下，页面数字减一
       {
           sU8SetSystemCounter--;
           sU8SetSystemCounter = 0 ;
           if(sU8SetSystemCounter >= DISPLAY_Machine_ITEM_COUNT)
           {
               sU8SetSystemCounter = sU8SetSystemCounter - 1;  
           }
           gCurrentMenu.eCurrentDisplayMenuType = nowDisplayType;                
       }
       break;
       case KEYACTION_ESC:                                              //整机数据界面下，Esc键按下，回退到详细数据界面
       {
           sU8SetSystemCounter = 0;
           gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_DETAILEDINFO;
       }
       break;
       case KEYACTION_NULL://无操作
       default:
       {
           // 其他不响应
       }                            
       break;
    }

    if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_ENGLISH)          //整机数据数据显示界面 英文界面组装
    { 
        updateDisplayMachin_English(sU8SetSystemCounter);
    }
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_CHINESE)     //整机数据数据显示界面 中文界面组装
    {
        updateDisplayMachin_Chinese(sU8SetSystemCounter);
    }    
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_SPANISH)     //整机数据数据显示界面 西班牙界面组装
    { 
        updateDisplayMachin_Spanish(sU8SetSystemCounter);
    } 
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_GERMAN)      //整机数据数据显示界面 德语界面组装
    { 
        updateDisplayMachin_German(sU8SetSystemCounter);
    } 
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_FRENCH)      //整机数据数据显示界面 法语界面组装
    { 
       updateDisplayMachin_French(sU8SetSystemCounter);
    }   
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_POLISH)      //整机数据数据显示界面 波兰界面组装
    {
        updateDisplayMachin_Polish(sU8SetSystemCounter);
    }    
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_ITALIAN)     //整机数据数据显示界面 意大利界面组装
    {
        updateDisplayMachin_Italian(sU8SetSystemCounter);
    } 
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_CZECH)       //整机数据数据显示界面 捷克界面组装
    { 
        updateDisplayMachin_Czech(sU8SetSystemCounter);
    }
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_DUTCH)       //整机数据数据显示界面 荷兰界面组装
    { 
        updateDisplayMachin_Dutch(sU8SetSystemCounter);
    }
    else
    {   
        updateDisplayMachin_Dutch(sU8SetSystemCounter);
    }
}

/***************************************************************************
 功能:整机数据显示 英文界面
****************************************************************************/
void updateDisplayMachin_English(uint8_t sU8RealtimeCounter)
{
    memset(tab_display,0,DISPLAY_CACHE_SIZE);
    if(sU8RealtimeCounter == PAGE_ONE)
    {
        char tab_SR[10] = {""}; //zh-cn  
        if(gDisplay.stDisplaySet.stGrid.u8SafetyRegulationType == SR_EURTEN) 
        {
            sprintf(tab_SR,"%s","EurUnion");      
        }
        if(gDisplay.stDisplaySet.stGrid.u8SafetyRegulationType == SR_DE) 
        {
            sprintf(tab_SR,"%s","DE      ");      
        }
        else if(gDisplay.stDisplaySet.stGrid.u8SafetyRegulationType == SR_UK)
        {
            sprintf(tab_SR,"%s","UK      ");
        }
        else if(gDisplay.stDisplaySet.stGrid.u8SafetyRegulationType == SR_ZA)
        {
            sprintf(tab_SR,"%s","ZA      ");
        }
        else if(gDisplay.stDisplaySet.stGrid.u8SafetyRegulationType == SR_AU)
        {
            sprintf(tab_SR,"%s","AU      ");
        }
        else
        {
            sprintf(tab_SR,"%s","Null    ");
        }
        
        char tab_PVWay[9] = {""}; 

        if(gDisplay.stDisplaySet.stPV.u8PVControlWay == PV_WAY_ALONE) 
        {
            sprintf(tab_PVWay,"%s","Alone   ");      
        }
        else
        {
            sprintf(tab_PVWay,"%s","Parallel"); 
        }
        sprintf(tab_display,"    Machin Data %d    \nLanguage:%s     \nGridStandard:%s\nPV Way:%s      \n",sU8RealtimeCounter+1,"English",tab_SR,tab_PVWay);  
    }
    else if(sU8RealtimeCounter == PAGE_TWO)
    {
        char tab_Work[9] = {""}; 
        
        if(gDisplay.stDisplaySet.stStrategy.u8StrategyType == STRATEGY_TPFV)
        {
            sprintf(tab_Work,"%s","TPFV    ");
        }
        else if(gDisplay.stDisplaySet.stStrategy.u8StrategyType == STRATEGY_REGULAR)
        {
            sprintf(tab_Work,"%s","Regular "); 
        }
        else if(gDisplay.stDisplaySet.stStrategy.u8StrategyType == STRATEGY_SELF)
        {
            sprintf(tab_Work,"%s","Self use"); 
        }
        else if(gDisplay.stDisplaySet.stStrategy.u8StrategyType == STRATEGY_BACKUP)
        {
            sprintf(tab_Work,"%s","Backup  "); 
        }
		         
        char tab_Anti[5] = {""}; 
        if(gDisplay.stDisplaySet.stGrid.u8PreventReverseFlowControlFlag == ENABLE_YES)
        {   
            sprintf(tab_Anti,"%s","Yes ");  
        }
        else
        {
            sprintf(tab_Anti,"%s","No  "); 
        } 
        
        char tab_BMS_Manufacturer[7] = {""}; 
        
        if(gDisplay.stDisplaySet.stBMS.u8Type == BMS_MANU_CVTE)
        {   
            sprintf(tab_BMS_Manufacturer,"%s","CVTE  ");  
        }
//        else if(gDisplay.stDisplaySet.stBMS.u8Type == BMS_MANU_LG)
//        {
//            sprintf(tab_BMS_Manufacturer,"%s","LG    ");
//        }
        else if(gDisplay.stDisplaySet.stBMS.u8Type == BMS_MANU_Pylon)
        {
            sprintf(tab_BMS_Manufacturer,"%s","Pylon ");
        }
        sprintf(tab_display,"    Machin Data %d    \nWork Mode:%s   \nAnti-reflux:%s     \nBMS-Menu:%s     \n",sU8RealtimeCounter+1,tab_Work,tab_Anti,tab_BMS_Manufacturer);  
    }
    else if(sU8RealtimeCounter == PAGE_THREE)
    {
        float fSystemTemp = gDisplay.stDisplayData.stSystemData.s16SystemTemperature / 10.0;        //后续优化除法   
        sprintf(tab_display,"    Machin Data %d    \nSys Temperature:%-5.1f\n                     \n                     \n",sU8RealtimeCounter+1,fSystemTemp); 
    }    
    else
    {
        //None
    }
    GUI_Display(tab_display, 0, 0);
}
/***************************************************************************
 功能:整机数据显示 中文界面
****************************************************************************/
void updateDisplayMachin_Chinese(uint8_t u8SetIndex)
{

}
/***************************************************************************
 功能:整机数据显示 西班牙语界面
****************************************************************************/
void updateDisplayMachin_Spanish(uint8_t u8SetIndex)
{

}
/***************************************************************************
 功能:整机数据显示 德语界面
****************************************************************************/
void updateDisplayMachin_German(uint8_t u8SetIndex)
{

}
/***************************************************************************
 功能:整机数据显示 法语界面
****************************************************************************/
void updateDisplayMachin_French(uint8_t u8SetIndex)
{

}
/***************************************************************************
 功能:整机数据显示 波兰语界面
****************************************************************************/
void updateDisplayMachin_Polish(uint8_t u8SetIndex)
{

}
/***************************************************************************
 功能:整机数据显示 意大利语界面
****************************************************************************/
void updateDisplayMachin_Italian(uint8_t u8SetIndex)
{

}
/***************************************************************************
 功能:整机数据显示 捷克语界面
****************************************************************************/
void updateDisplayMachin_Czech(uint8_t u8SetIndex)
{

}
/***************************************************************************
 功能:整机数据显示 荷兰语界面
****************************************************************************/
void updateDisplayMachin_Dutch(uint8_t u8SetIndex)
{

}


/***************************************************************************
 功能:电网数据显示更新
****************************************************************************/
void updateDisplayGridData(KeyAction_TypeDef nowActionType,DisplayAction_TypeDef nowDisplayType)
{
    static uint8_t sU8SetSystemCounter = 0;
    gLastMenu.eLastDisplayMenuType = DISPLAY_GridInfo;                                         //当前页面为电网数据
    switch(nowActionType)
    {
        case KEYACTION_DOWN:                                                                  //电网数据界面下，UP键按下，页面数字加一
        {
            sU8SetSystemCounter++;
            if(sU8SetSystemCounter == DISPLAY_GridInfo_ITEM_COUNT)
            {
                sU8SetSystemCounter = 0;  
            }
            gCurrentMenu.eCurrentDisplayMenuType = nowDisplayType;
        }
        break;
        case KEYACTION_UP:                                                                     //电网数据界面下，Down键按下，页面数字减一
        {
            sU8SetSystemCounter--;
            sU8SetSystemCounter = 0 ;
            if(sU8SetSystemCounter >= DISPLAY_GridInfo_ITEM_COUNT)
            {
                sU8SetSystemCounter = sU8SetSystemCounter - 1;  
            }
            gCurrentMenu.eCurrentDisplayMenuType = nowDisplayType;                
        }
        break;
        case KEYACTION_ESC:                                                                    //电网数据界面下，Esc键按下，回退到详细数据界面
        {
            sU8SetSystemCounter = 0;
            gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_DETAILEDINFO;
        }
        break;
        case KEYACTION_NULL://无操作
        default:
        {
            // 其他不响应
        }                            
         break;
    }
    
    if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_ENGLISH)            //电网数据数据显示界面 英文界面组装
    { 
        updateDisplayGridData_English(sU8SetSystemCounter);
    }
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_CHINESE)       //电网数据数据显示界面 中文界面组装
    {
        updateDisplayGridData_Chinese(sU8SetSystemCounter);
    }    
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_SPANISH)       //电网数据数据显示界面 西班牙界面组装
    { 
        updateDisplayGridData_Spanish(sU8SetSystemCounter);
    } 
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_GERMAN)        //电网数据数据显示界面 德语界面组装
    { 
        updateDisplayGridData_German(sU8SetSystemCounter);
    } 
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_FRENCH)        //电网数据数据显示界面 法语界面组装
    { 
        updateDisplayGridData_French(sU8SetSystemCounter);
    }   
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_POLISH)        //电网数据数据显示界面 波兰界面组装
    {
        updateDisplayGridData_Polish(sU8SetSystemCounter);
    }    
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_ITALIAN)       //电网数据数据显示界面 意大利界面组装
    {
        updateDisplayGridData_Italian(sU8SetSystemCounter);
    } 
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_CZECH)         //电网数据数据显示界面 捷克界面组装
    { 
        updateDisplayGridData_Czech(sU8SetSystemCounter);
    }
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_DUTCH)         //电网数据数据显示界面 荷兰界面组装
    { 
        updateDisplayGridData_Dutch(sU8SetSystemCounter);
    }
    else
    {   
        updateDisplayGridData_English(sU8SetSystemCounter);
    }
}
/***************************************************************************
 功能: 电网数据显示 英文界面
****************************************************************************/
void updateDisplayGridData_English(uint8_t u8SetIndex)
{
    memset(tab_display,0,DISPLAY_CACHE_SIZE);
    //第一页显示 电网电压、电流 频率
    if(u8SetIndex == PAGE_ONE)
    {
        float fCurrent   = gDisplay.stDisplayData.stGridData.sGridcurrent / 10.0;
        float fVoltage   = gDisplay.stDisplayData.stGridData.u16GridVoltage / 10.0;
        float fFrequency = gDisplay.stDisplayData.stGridData.u16GridFrequency / 100.00;
        
        sprintf(tab_display,"     Grid Data 1     \nVoltage:    %8.1fV\nCurrent:    %8.1fA\nFrequency: %8.2fHz\n",fVoltage,fCurrent,fFrequency);
    }
    //第二页显示 有功功率 无功功率
    else if(u8SetIndex == PAGE_TWO)
    {
        float fReactivePower   = gDisplay.stDisplayData.stGridData.sGridReactivePower / 10.0;
        float fGridActivePower = gDisplay.stDisplayData.stGridData.sGridActivePower / 10.0;
        
        sprintf(tab_display,"     Grid Data 2     \nAct-Power:    %6.1fW\nReact-Power:%6.1fVar\n                     \n",fGridActivePower,fReactivePower);  
    } 
    else
    {
        //None
    }
    GUI_Display(tab_display, 0, 0);


}

/***************************************************************************
 功能: 电网数据显示 中文界面
****************************************************************************/
void updateDisplayGridData_Chinese(uint8_t u8SetIndex)
{

}
/***************************************************************************
 功能:电网数据显示 西班牙语界面
****************************************************************************/
void updateDisplayGridData_Spanish(uint8_t u8SetIndex)
{

}
/***************************************************************************
 功能:电网数据显示 德语界面
****************************************************************************/
void updateDisplayGridData_German(uint8_t u8SetIndex)
{

}
/***************************************************************************
 功能:电网数据显示 法语界面
****************************************************************************/
void updateDisplayGridData_French(uint8_t u8SetIndex)
{

}
/***************************************************************************
 功能:电网数据显示 波兰语界面
****************************************************************************/
void updateDisplayGridData_Polish(uint8_t u8SetIndex)
{

}
/***************************************************************************
 功能:电网数据显示 意大利语界面
****************************************************************************/
void updateDisplayGridData_Italian(uint8_t u8SetIndex)
{

}
/***************************************************************************
 功能:电网数据显示 捷克语界面
****************************************************************************/
void updateDisplayGridData_Czech(uint8_t u8SetIndex)
{

}
/***************************************************************************
 功能:电网数据显示 荷兰语
****************************************************************************/
void updateDisplayGridData_Dutch(uint8_t u8SetIndex)
{

}


/***************************************************************************
 功能:根据上一次界面操作类型和本次操作类型判断本次LOGIN界面切换   （光伏数据）
****************************************************************************/
void updateDisplayPVData(KeyAction_TypeDef nowActionType,DisplayAction_TypeDef nowDisplayType)
{

    static uint8_t sU8SetSystemCounter = 0;
    gLastMenu.eLastDisplayMenuType = DISPLAY_Photovoltaic;                          //当前页面为光伏数据
    switch(nowActionType)
    {
        case KEYACTION_DOWN:                                                        //光伏数据界面下，UP键按下，页面数字加一
        {
            sU8SetSystemCounter++;
            if(sU8SetSystemCounter == DISPLAY_PVInfo_ITEM_COUNT)
            {
                sU8SetSystemCounter = 0;  
            }
            gCurrentMenu.eCurrentDisplayMenuType = nowDisplayType;
        }
        break;
        case KEYACTION_UP:                                                          //光伏数据界面下，Down键按下，页面数字减一
        {
            sU8SetSystemCounter--;
            sU8SetSystemCounter = 0 ;
            if(sU8SetSystemCounter >= DISPLAY_PVInfo_ITEM_COUNT)
            {
                sU8SetSystemCounter = sU8SetSystemCounter - 1;  
            }
            gCurrentMenu.eCurrentDisplayMenuType = nowDisplayType;                
        }
    break;
    case KEYACTION_ESC:                                                            //光伏数据界面下，Esc键按下，回退到详细数据界面
    {
        sU8SetSystemCounter = 0;
        gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_DETAILEDINFO;
    }
    break;
    case KEYACTION_NULL:                                                            //无操作
    default:
    {
        // 其他不响应
    }                            
    break;
    }
    
    if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_ENGLISH)          //光伏数据数据显示界面 英文界面组装
    { 
      updateDisplayPVData_English(sU8SetSystemCounter);
    }
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_CHINESE)     //光伏数据数据显示界面 中文界面组装
    {
      updateDisplayPVData_Chinese(sU8SetSystemCounter);
    }    
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_SPANISH)     //光伏数据数据显示界面 西班牙界面组装
    { 
      updateDisplayPVData_Spanish(sU8SetSystemCounter);
    } 
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_GERMAN)      //光伏数据数据显示界面 德语界面组装
    { 
      updateDisplayPVData_German(sU8SetSystemCounter);
    } 
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_FRENCH)      //光伏数据数据显示界面 法语界面组装
    { 
     updateDisplayPVData_French(sU8SetSystemCounter);
    }   
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_POLISH)      //光伏数据数据显示界面 波兰界面组装
    {
      updateDisplayPVData_Polish(sU8SetSystemCounter);
    }    
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_ITALIAN)     //光伏数据数据显示界面 意大利界面组装
    {
      updateDisplayPVData_Italian(sU8SetSystemCounter);
    } 
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_CZECH)       //光伏数据数据显示界面 捷克界面组装
    { 
      updateDisplayPVData_Czech(sU8SetSystemCounter);
    }
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_DUTCH)       //光伏数据数据显示界面 荷兰界面组装
    { 
      updateDisplayPVData_Dutch(sU8SetSystemCounter);
    }
    else
    {   
      updateDisplayPVData_English(sU8SetSystemCounter);
    }
    GUI_Display(tab_display, 0, 0);
}
/***************************************************************************
 功能:光伏数据显示 英文界面
****************************************************************************/
void updateDisplayPVData_English(uint8_t u8SetIndex)
{
    memset(tab_display,0,DISPLAY_CACHE_SIZE);
    if(u8SetIndex == PAGE_ONE)
    {
        float fVoltage   = gDisplay.stDisplayData.stPV.stPV1.u16PVVoltage / 10.0;       //光伏1电压
        float fCurrent   = gDisplay.stDisplayData.stPV.stPV1.sPVCurrent / 10.0;         //光伏1电流
        float fPower     = gDisplay.stDisplayData.stPV.stPV1.sPVPower / 10.0;           //光伏1功率
        
        sprintf(tab_display,"      PV1 Data 1     \nVoltage:    %8.1fV\nCurrent:    %8.1fA\nPower:      %8.3fW\n",fVoltage,fCurrent,fPower);  
    }
    else if(u8SetIndex == PAGE_TWO)
    {
        float fVoltage   = gDisplay.stDisplayData.stPV.stPV2.u16PVVoltage / 10.0;       //光伏2电压
        float fCurrent   = gDisplay.stDisplayData.stPV.stPV2.sPVCurrent / 10.0;         //光伏2电流
        float fPower     = gDisplay.stDisplayData.stPV.stPV2.sPVPower / 10.0;           //光伏2功率
        
        sprintf(tab_display,"      PV2 Data 1     \nVoltage:    %8.1fV\nCurrent:    %8.1fA\nPower:      %8.3fW\n",fVoltage,fCurrent,fPower);  
    } 
}
/***************************************************************************
 功能:光伏数据显示 中文界面
****************************************************************************/
void updateDisplayPVData_Chinese(uint8_t u8SetIndex)
{

}
/***************************************************************************
 功能:光伏数据显示 西班牙语界面
****************************************************************************/
void updateDisplayPVData_Spanish(uint8_t u8SetIndex)
{

}
/***************************************************************************
 功能:光伏数据显示 德语界面
****************************************************************************/
void updateDisplayPVData_German(uint8_t u8SetIndex)
{

}
/***************************************************************************
 功能:光伏数据显示 法语界面
****************************************************************************/
void updateDisplayPVData_French(uint8_t u8SetIndex)
{

}
/***************************************************************************
 功能:光伏数据显示 波兰语界面
****************************************************************************/
void updateDisplayPVData_Polish(uint8_t u8SetIndex)
{

}
/***************************************************************************
 功能:光伏数据显示 意大利语界面
****************************************************************************/
void updateDisplayPVData_Italian(uint8_t u8SetIndex)
{

}
/***************************************************************************
 功能:光伏数据显示 捷克语界面
****************************************************************************/
void updateDisplayPVData_Czech(uint8_t u8SetIndex)
{

}
/***************************************************************************
 功能:光伏数据显示 荷兰语界面
****************************************************************************/
void updateDisplayPVData_Dutch(uint8_t u8SetIndex)
{

}
/***************************************************************************
 功能:电池数据显示更新
****************************************************************************/
void updateDisplayBatteryData(KeyAction_TypeDef nowActionType,DisplayAction_TypeDef nowDisplayType)
{
    static uint8_t sU8SetSystemCounter = 0;
    gLastMenu.eLastDisplayMenuType = DISPLAY_Battery;                               //当前页面为电池数据
    switch(nowActionType)
    {
      case KEYACTION_DOWN:                                                          //电池数据界面下，UP键按下，页面数字加一
      {
        sU8SetSystemCounter++;
        if(sU8SetSystemCounter == DISPLAY_BatteryInfo_ITEM_COUNT)
        {
            sU8SetSystemCounter = 0;  
        }
        gCurrentMenu.eCurrentDisplayMenuType = nowDisplayType;
     }
     break;
     case KEYACTION_UP:                                                             //电池数据界面下，Down键按下，页面数字减一
     {
        sU8SetSystemCounter--;
        sU8SetSystemCounter = 0 ;
        if(sU8SetSystemCounter >= DISPLAY_BatteryInfo_ITEM_COUNT)
        {
            sU8SetSystemCounter = sU8SetSystemCounter - 1;  
        }
        gCurrentMenu.eCurrentDisplayMenuType = nowDisplayType;                
     }
     break;
     case KEYACTION_ESC:                                                            //电池数据界面下，Esc键按下，回退到详细数据界面
     {
        sU8SetSystemCounter = 0;
        gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_DETAILEDINFO;
     }
     break;
     case KEYACTION_NULL://无操作
     default:
     {
         // 其他不响应
     }                            
     break;
    }

    if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_ENGLISH)          //电池数据数据显示界面 英文界面组装
    { 
        updateDisplayBatteryData_English(sU8SetSystemCounter);
    }
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_CHINESE)     //电池数据数据显示界面 中文界面组装
    {
        updateDisplayBatteryData_Chinese(sU8SetSystemCounter);
    }    
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_SPANISH)     //电池数据数据显示界面 西班牙界面组装
    { 
        updateDisplayBatteryData_Spanish(sU8SetSystemCounter);
    } 
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_GERMAN)      //电池数据数据显示界面 德语界面组装
    { 
        updateDisplayBatteryData_German(sU8SetSystemCounter);
    } 
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_FRENCH)      //电池数据数据显示界面 法语界面组装
    { 
        updateDisplayBatteryData_French(sU8SetSystemCounter);
    }   
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_POLISH)      //电池数据数据显示界面 波兰界面组装
    {
        updateDisplayBatteryData_Polish(sU8SetSystemCounter);
    }    
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_ITALIAN)     //电池数据数据显示界面 意大利界面组装
    {
        updateDisplayBatteryData_Italian(sU8SetSystemCounter);
    } 
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_CZECH)       //电池数据数据显示界面 捷克界面组装
    { 
        updateDisplayBatteryData_Czech(sU8SetSystemCounter);
    }
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_DUTCH)       //电池数据数据显示界面 荷兰界面组装
    { 
        updateDisplayBatteryData_Dutch(sU8SetSystemCounter);
    }
    else
    {   
        updateDisplayBatteryData_English(sU8SetSystemCounter);
    }
    GUI_Display(tab_display, 0, 0);
}

/***************************************************************************
// 功能:电池数据显示 英文界面
****************************************************************************/
void updateDisplayBatteryData_English(uint8_t u8SetIndex)
{
    memset(tab_display,0,DISPLAY_CACHE_SIZE);
    if(u8SetIndex == PAGE_ONE)
    {
        float fVoltage   = gDisplay.stDisplayData.stBMS.u16BMSVoltage / 10.0;
        float fCurrent   = gDisplay.stDisplayData.stBMS.sBMSCurrent / 10.0;
        if(gDisplay.stDisplayData.stBMS.sBMSCurrent > 0)
        {
            sprintf(tab_display,"      BMS Data 1     \nState:      DisCharge\nVoltage:    %8.1fV\nCurrent:    %8.1fA\n",fVoltage,fCurrent);
        }
        else if(gDisplay.stDisplayData.stBMS.sBMSCurrent <= 0)
        {
            fCurrent   = abs(gDisplay.stDisplayData.stBMS.sBMSCurrent);
            sprintf(tab_display,"      BMS Data 1     \nState:         Charge\nVoltage:    %8.1fV\nCurrent:    %8.1fA\n",fVoltage,fCurrent);
        }
    }  
    else if(u8SetIndex == PAGE_TWO)
    {
        float fSOC        = gDisplay.stDisplayData.stBMS.u8SOC;
        if(gDisplay.stDisplayData.stBMS.sBMSCurrent > 0)
        {
            float fPower   = gDisplay.stDisplayData.stBMS.sDisChargePower / 10.0;
            sprintf(tab_display,"      BMS Data 2     \nPower:      %8.1fW\n        SOC:%8.1f%%\n                     \n",fPower,fSOC);
        }
        else if(gDisplay.stDisplayData.stBMS.sBMSCurrent <= 0)
        {
            float fPower   = abs(gDisplay.stDisplayData.stBMS.sChargePower) / 10.0;
            sprintf(tab_display,"      BMS Data 2     \nPower:      %8.1fW\nSOC:        %8.1f%%\n                     \n",fPower,fSOC);
        }
    }
}

/***************************************************************************
// 功能:电池数据显示 西班牙语界面
****************************************************************************/
void updateDisplayBatteryData_Spanish(uint8_t u8SetIndex)
{

}
/***************************************************************************
// 功能:电池数据显示 中文界面
****************************************************************************/
void updateDisplayBatteryData_Chinese(uint8_t u8SetIndex)
{

}
/***************************************************************************
// 功能:电池数据显示 德语界面
****************************************************************************/
void updateDisplayBatteryData_German(uint8_t u8SetIndex)
{

}
/***************************************************************************
// 功能:电池数据显示 法语界面
****************************************************************************/
void updateDisplayBatteryData_French(uint8_t u8SetIndex)
{

}
/***************************************************************************
// 功能:电池数据显示 波兰语界面
****************************************************************************/
void updateDisplayBatteryData_Polish(uint8_t u8SetIndex)
{

}
/***************************************************************************
// 功能:电池数据显示 意大利语界面
****************************************************************************/
void updateDisplayBatteryData_Italian(uint8_t u8SetIndex)
{

}
/***************************************************************************
// 功能:电池数据显示 捷克语界面
****************************************************************************/
void updateDisplayBatteryData_Czech(uint8_t u8SetIndex)
{

}
/***************************************************************************
// 功能:电池数据显示 荷兰语界面
****************************************************************************/
void updateDisplayBatteryData_Dutch(uint8_t u8SetIndex)
{

}

/***************************************************************************
 功能:状态机显示更新
 * 运行状态显示 
 * 整机数据显示
 * 电网数据显示
 * 光伏数据显示
 * 电池数据显示
 *  ->>>>>>负载数据显示
 * 发电机数据显示
 * 出厂数据
****************************************************************************/
//根据上一次界面操作类型和本次操作类型判断本次LOGIN界面切换   
void updateDisplayPowerLodaData(KeyAction_TypeDef nowActionType,DisplayAction_TypeDef nowDisplayType)
{
    static uint8_t sU8SetSystemCounter = 0;
    gLastMenu.eLastDisplayMenuType = DISPLAY_PowerLoad;                             //当前页面为负载数据
    switch(nowActionType)
    {
        case KEYACTION_DOWN:                                                          //负载数据界面下，UP键按下，页面数字加一
        {
            sU8SetSystemCounter++;
            if(sU8SetSystemCounter == DISPLAY_PowerLoadInfo_ITEM_COUNT)
            {
                sU8SetSystemCounter = 0;  
            }
            gCurrentMenu.eCurrentDisplayMenuType = nowDisplayType;
        }
        break;
        case KEYACTION_UP:                                                             //负载数据界面下，Down键按下，页面数字减一
        {
            sU8SetSystemCounter--;
            sU8SetSystemCounter = 0 ;
            if(sU8SetSystemCounter >= DISPLAY_PowerLoadInfo_ITEM_COUNT)
            {
                sU8SetSystemCounter = sU8SetSystemCounter - 1;  
            }
            gCurrentMenu.eCurrentDisplayMenuType = nowDisplayType;                
        }
        break;
        case KEYACTION_ESC:                                                            //负载数据界面下，Esc键按下，回退到详细数据界面
        {
            sU8SetSystemCounter = 0;
            gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_DETAILEDINFO;
        }
        break;
        case KEYACTION_NULL:                                                           //无操作
        default:
        {
        // 其他不响应
        }                            
        break;
    }
    if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_ENGLISH)          //负载数据数据显示界面 英文界面组装
    { 
        updateDisplayPowerLoadData_English(sU8SetSystemCounter);
    }
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_CHINESE)     //负载数据数据显示界面 中文界面组装
    {
        updateDisplayPowerLoadData_Chinese(sU8SetSystemCounter);
    }    
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_SPANISH)     //负载数据数据显示界面 西班牙界面组装
    { 
        updateDisplayPowerLoadData_Spanish(sU8SetSystemCounter);
    } 
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_GERMAN)      //负载数据数据显示界面 德语界面组装
    { 
        updateDisplayPowerLoadData_German(sU8SetSystemCounter);
    } 
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_FRENCH)      //负载数据数据显示界面 法语界面组装
    { 
        updateDisplayPowerLoadData_French(sU8SetSystemCounter);
    }   
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_POLISH)      //负载数据数据显示界面 波兰界面组装
    {
        updateDisplayPowerLoadData_Polish(sU8SetSystemCounter);
    }    
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_ITALIAN)     //负载数据数据显示界面 意大利界面组装
    {
        updateDisplayPowerLoadData_Italian(sU8SetSystemCounter);
    } 
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_CZECH)       //负载数据数据显示界面 捷克界面组装
    { 
        updateDisplayPowerLoadData_Czech(sU8SetSystemCounter);
    }
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_DUTCH)       //负载数据数据显示界面 荷兰界面组装
    { 
        updateDisplayPowerLoadData_Dutch(sU8SetSystemCounter);
    }
    else
    {   
        updateDisplayPowerLoadData_English(sU8SetSystemCounter);
    }
    GUI_Display(tab_display, 0, 0);
}
/***************************************************************************
 功能:功能:负载数据显示 英文界面
****************************************************************************/
void updateDisplayPowerLoadData_English(uint8_t u8SetIndex)
{
    memset(tab_display,0,DISPLAY_CACHE_SIZE);
    if(u8SetIndex == PAGE_ONE)
    {
        float fVoltage   = gDisplay.stDisplayData.stLoad.u16LoadVoltage / 10.0;
        float fCurrent   = gDisplay.stDisplayData.stLoad.sLoadcurrent / 10.0;
        float fPower     = gDisplay.stDisplayData.stLoad.sLoadPower / 10.0;
        sprintf(tab_display,"     Load Data 1     \nVoltage:    %8.1fV\nCurrent:    %8.1fA\nPower:      %8.3fW\n",fVoltage,fCurrent,fPower);  
    } 
    else if(u8SetIndex == PAGE_TWO)
    {
        float fLoadRate = (float) gDisplay.stDisplayData.stLoad.sLoadPower / DEVICERATEDPOWER;
        sprintf(tab_display,"     Load Data 2     \nLoadRate:        %3.1f%%\n                     \n                     \n",fLoadRate);  
    } 
}
/***************************************************************************
 功能:功能:负载数据显示 中文界面
****************************************************************************/
void updateDisplayPowerLoadData_Chinese(uint8_t u8SetIndex)
{

}
/***************************************************************************
 功能:功能:负载数据显示 西班牙语界面
****************************************************************************/
void updateDisplayPowerLoadData_Spanish(uint8_t u8SetIndex)
{

}
/***************************************************************************
 功能:功能:负载数据显示 德语界面
****************************************************************************/
void updateDisplayPowerLoadData_German(uint8_t u8SetIndex)
{

}
 /***************************************************************************
 功能:功能:负载数据显示 法语界面
****************************************************************************/
void updateDisplayPowerLoadData_French(uint8_t u8SetIndex)
{

}
/***************************************************************************
 功能:功能:负载数据显示 波兰语界面
****************************************************************************/
void updateDisplayPowerLoadData_Polish(uint8_t u8SetIndex)
{

}
/***************************************************************************
 功能:功能:负载数据显示 意大利语界面
****************************************************************************/
void updateDisplayPowerLoadData_Italian(uint8_t u8SetIndex)
{

}
/***************************************************************************
 功能:功能:负载数据显示 捷克语界面
****************************************************************************/
void updateDisplayPowerLoadData_Czech(uint8_t u8SetIndex)
{

}
/***************************************************************************
 功能:功能:负载数据显示 荷兰语界面
****************************************************************************/
void updateDisplayPowerLoadData_Dutch(uint8_t u8SetIndex)
{

}

/***************************************************************************
 功能:状态机显示更新
 * 运行状态显示 
 * 整机数据显示
 * 电网数据显示
 * 光伏数据显示
 * 电池数据显示
 * 负载数据显示
 *  ->>>>>>发电机数据显示
 * 出厂数据
****************************************************************************/
//根据上一次界面操作类型和本次操作类型判断本次LOGIN界面切换   （发电机数据）
void updateDisplayGeneratorData(KeyAction_TypeDef nowActionType,DisplayAction_TypeDef nowDisplayType)
{
    static uint8_t sU8SetSystemCounter = 0;
    gLastMenu.eLastDisplayMenuType = DISPLAY_Generator;                               //当前页面为负载数据
    switch(nowActionType)
    {
        case KEYACTION_DOWN:                                                          //负载数据界面下，UP键按下，页面数字加一
        {
            sU8SetSystemCounter++;
            if(sU8SetSystemCounter == DISPLAY_Generato_ITEM_COUNT)
            {
                sU8SetSystemCounter = 0;  
            }
            gCurrentMenu.eCurrentDisplayMenuType = nowDisplayType;
        }
        break;
        case KEYACTION_UP:                                                             //负载数据界面下，Down键按下，页面数字减一
        {
            sU8SetSystemCounter--;
            sU8SetSystemCounter = 0 ;
            if(sU8SetSystemCounter >= DISPLAY_Generato_ITEM_COUNT)
            {
                sU8SetSystemCounter = sU8SetSystemCounter - 1;  
            }
            gCurrentMenu.eCurrentDisplayMenuType = nowDisplayType;                
        }
        break;
        case KEYACTION_ESC:                                                            //负载数据界面下，Esc键按下，回退到详细数据界面
        {
            sU8SetSystemCounter = 0;
            gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_DETAILEDINFO;
        }
        break;
        case KEYACTION_NULL://无操作
        default:
        {
            // 其他不响应
        }                            
        break;
    }

    if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_ENGLISH)          //负载数据数据显示界面 英文界面组装
    { 
        updateDisplayGeneratorData_English(sU8SetSystemCounter);
    }
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_CHINESE)     //负载数据数据显示界面 中文界面组装
    {
        updateDisplayGeneratorData_Chinese(sU8SetSystemCounter);
    }    
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_SPANISH)     //负载数据数据显示界面 西班牙界面组装
    { 
        updateDisplayGeneratorData_Spanish(sU8SetSystemCounter);
    } 
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_GERMAN)      //负载数据数据显示界面 德语界面组装
    { 
        updateDisplayGeneratorData_German(sU8SetSystemCounter);
    } 
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_FRENCH)      //负载数据数据显示界面 法语界面组装
    { 
        updateDisplayGeneratorData_French(sU8SetSystemCounter);
    }   
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_POLISH)      //负载数据数据显示界面 波兰界面组装
    {
        updateDisplayGeneratorData_Polish(sU8SetSystemCounter);
    }    
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_ITALIAN)     //负载数据数据显示界面 意大利界面组装
    {
        updateDisplayGeneratorData_Italian(sU8SetSystemCounter);
    } 
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_CZECH)       //负载数据数据显示界面 捷克界面组装
    { 
        updateDisplayGeneratorData_Czech(sU8SetSystemCounter);
    }
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_DUTCH)       //负载数据数据显示界面 荷兰界面组装
    { 
        updateDisplayGeneratorData_Dutch(sU8SetSystemCounter);
    }
    else
    {   
        updateDisplayPowerLoadData_English(sU8SetSystemCounter);
    }
    GUI_Display(tab_display, 0, 0);
}
/***************************************************************************
 功能:功能:发电机数据显示 英文界面
****************************************************************************/
void updateDisplayGeneratorData_English(uint8_t u8SetIndex)
{
    memset(tab_display,0,DISPLAY_CACHE_SIZE);
    if(u8SetIndex == PAGE_ONE)
    {
        float fCurrent   = gDisplay.stDisplayData.stGenData.sGencurrent / 10.0;
        float fVoltage   = gDisplay.stDisplayData.stGenData.u16GenVoltage / 10.0;
        float fFrequency = gDisplay.stDisplayData.stGenData.u16GenFrequency / 100.00;
        sprintf(tab_display,"     Gen Data 1      \nVoltage:    %8.1fV\nCurrent:    %8.1fA\nFrequency: %8.2fHz\n",fVoltage,fCurrent,fFrequency);
    }
    else if(u8SetIndex == PAGE_TWO)
    {
        float fActivePower   = gDisplay.stDisplayData.stGenData.sGenPower / 10.0;
        sprintf(tab_display,"     Gen Data 2      \nAct-Power:  %8.1fW\n                     \n                     \n",fActivePower);  
    }  
}
/***************************************************************************
 功能:功能:发电机数据显示 中文界面
****************************************************************************/
void updateDisplayGeneratorData_Chinese(uint8_t u8SetIndex)
{

}
/***************************************************************************
 功能:功能:发电机数据显示 西班牙语界面
****************************************************************************/
void updateDisplayGeneratorData_Spanish(uint8_t u8SetIndex)
{

}
/***************************************************************************
 功能:功能:发电机数据显示 德语界面
****************************************************************************/
void updateDisplayGeneratorData_German(uint8_t u8SetIndex)
{
}
/***************************************************************************
 功能:功能:发电机数据显示 法语界面
****************************************************************************/
void updateDisplayGeneratorData_French(uint8_t u8SetIndex)
{

}
/***************************************************************************
 功能:功能:发电机数据显示 波兰语界面
****************************************************************************/
void updateDisplayGeneratorData_Polish(uint8_t u8SetIndex)
{

}
/***************************************************************************
 功能:功能:发电机数据显示 意大利语界面
****************************************************************************/
void updateDisplayGeneratorData_Italian(uint8_t u8SetIndex)
{

}
/***************************************************************************
 功能:功能:发电机数据显示 捷克语界面
****************************************************************************/
void updateDisplayGeneratorData_Czech(uint8_t u8SetIndex)
{

}
/***************************************************************************
 功能:功能:发电机数据显示 荷兰语界面
****************************************************************************/
void updateDisplayGeneratorData_Dutch(uint8_t u8SetIndex)
{

}

/***************************************************************************
 功能:状态机显示更新
 * 运行状态显示 
 * 整机数据显示
 * 电网数据显示
 * 光伏数据显示
 * 电池数据显示
 * 负载数据显示
 * 发电机数据显示
 * ->>>>>>出厂数据
****************************************************************************/
    //根据上一次界面操作类型和本次操作类型判断本次LOGIN界面切换   （出厂设置数据）
void updateDisplayFactoryData(KeyAction_TypeDef nowActionType,DisplayAction_TypeDef nowDisplayType)
{
    static uint8_t sU8SetSystemCounter = 0;
    gLastMenu.eLastDisplayMenuType = DISPLAY_Factory;                                   //当前页面为出厂设置数据
    switch(nowActionType)
    {
        case KEYACTION_DOWN:                                                          //出厂设置数据界面下    ，UP键按下，页面数字加一
        {
            sU8SetSystemCounter++;
            if(sU8SetSystemCounter == DISPLAY_Factory_ITEM_COUNT)
            {
                sU8SetSystemCounter = 0;  
            }
        }
        break;
        case KEYACTION_UP:                                                             //出厂设置数据界面下 ，Down键按下，页面数字减一
        {
            sU8SetSystemCounter--;
            if(sU8SetSystemCounter >= DISPLAY_Factory_ITEM_COUNT)
            {
                sU8SetSystemCounter = sU8SetSystemCounter - 1;  
            }
        }
        break;
        case KEYACTION_ESC:                                                            //出厂设置数据界面下 ，Esc键按下，回退到详细数据界面
        {
            sU8SetSystemCounter = 0;
            gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_DETAILEDINFO;
        }
        break;
        case KEYACTION_NULL://无操作
        default:
        {
        
            gLastMenu.eLastDisplayMenuType = DISPLAY_Factory; 
            sU8SetSystemCounter = 1; //当前页面为出厂设置数据
            // 其他不响应
        }                            
        break;
    }
    if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_ENGLISH)          //出厂设置数据界面 英文界面组装
    { 
        updateDisplayFactoryData_English(sU8SetSystemCounter);
    }
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_CHINESE)     //出厂设置数据界面 中文界面组装
    {
        updateDisplayFactoryData_Chinese(sU8SetSystemCounter);
    }    
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_SPANISH)     //出厂设置数据界面 西班牙界面组装
    { 
        updateDisplayFactoryData_Spanish(sU8SetSystemCounter);
    } 
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_GERMAN)      //出厂设置数据界面 德语界面组装
    { 
        updateDisplayFactoryData_German(sU8SetSystemCounter);
    } 
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_FRENCH)      //出厂设置数据界面 法语界面组装
    { 
        updateDisplayFactoryData_French(sU8SetSystemCounter);
    }   
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_POLISH)      //出厂设置数据界面 波兰界面组装
    {
        updateDisplayFactoryData_Polish(sU8SetSystemCounter);
    }    
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_ITALIAN)     //出厂设置数据界面 意大利界面组装
    {
        updateDisplayFactoryData_Italian(sU8SetSystemCounter);
    } 
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_CZECH)       //出厂设置数据界面 捷克界面组装
    { 
        updateDisplayFactoryData_Czech(sU8SetSystemCounter);
    }
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_DUTCH)       //出厂设置数据界面 荷兰界面组装
    { 
        updateDisplayFactoryData_Dutch(sU8SetSystemCounter);
    }
    else
    {   
        updateDisplayFactoryData_English(sU8SetSystemCounter);
    }
    GUI_Display(tab_display, 0, 0);
}

/***************************************************************************
  功能:出厂设置数据显示 英文界面
****************************************************************************/
void updateDisplayFactoryData_English(uint8_t u8SetIndex)
{
        memset(tab_display,0,DISPLAY_CACHE_SIZE);
        // 当日统计
        if(u8SetIndex == Statistics_Day_Index)
        {
            sprintf(tab_display,"      Statistics     \n->Day Statistics     \nMonth Statistics     \nYear     Statistics      \n");
        }
        // 当月统计
        else if(u8SetIndex == Statistics_Month_Index)
        {
            sprintf(tab_display,"      Statistics     \nDay Statistics       \n->Month Statistics   \nYear     Statistics      \n");
        }
        // 当年统计
        else if(u8SetIndex == Statistics_Year_Index)
        {
            sprintf(tab_display,"      Statistics     \nDay Statistics       \nMonth Statistics     \n->Year     Statistics    \n");
        }
        // 累计统计
        else if(u8SetIndex == Statistics_All_Index)
        {
            sprintf(tab_display,"      Statistics     \nMonth Statistics     \nYear Statistics      \n->Total     Statistics   \n");
        }
        GUI_Display(tab_display, 0, 0);


}
/***************************************************************************
  功能:出厂设置数据显示 中文界面
****************************************************************************/
void updateDisplayFactoryData_Chinese(uint8_t u8SetIndex)
{

}
/***************************************************************************
  功能:出厂设置数据显示 西班牙语界面
****************************************************************************/
void updateDisplayFactoryData_Spanish(uint8_t u8SetIndex)
{

}
/***************************************************************************
  功能:出厂设置数据显示 德语界面
****************************************************************************/
void updateDisplayFactoryData_German(uint8_t u8SetIndex)
{

}
/***************************************************************************
功能:出厂设置数据显示 法语界面
****************************************************************************/
void updateDisplayFactoryData_French(uint8_t u8SetIndex)
{

}
/***************************************************************************
功能:出厂设置数据显示 波兰语界面
****************************************************************************/
void updateDisplayFactoryData_Polish(uint8_t u8SetIndex)
{

}
/***************************************************************************
功能:出厂设置数据显示 意大利语界面
****************************************************************************/
void updateDisplayFactoryData_Italian(uint8_t u8SetIndex)
{

}
/***************************************************************************
功能:出厂设置数据显示 捷克语界面
****************************************************************************/
void updateDisplayFactoryData_Czech(uint8_t u8SetIndex)
{

}
/***************************************************************************
功能:出厂设置数据显示 荷兰语界面
****************************************************************************/
void updateDisplayFactoryData_Dutch(uint8_t u8SetIndex)
{

}

/***************************************************************************
 功能:历史记录
 * 实时记录20条
 * 历史故障记录100条
 * 操作记录
****************************************************************************/
void updateDisplayLogData(KeyAction_TypeDef nowActionType,DisplayAction_TypeDef nowDisplayType)
{
    static uint8_t sU8SetSystemCounter = 0;
    gLastMenu.eLastDisplayMenuType = DISPLAY_LOG;          //当前页面为详细数据
    switch(nowActionType) //本次界面操作类型
    {
        case KEYACTION_ENTER://在设置界面下，Enter键按下，进入选择对应的设置项
        {
            // 实时故障显示
            if(sU8SetSystemCounter == LOG_REALTIMEFault_Index)
            {       
                gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_DATA_DISPLAYREALFAULTRECORD;
            }
            // 历史故障显示
            else if(sU8SetSystemCounter == LOG_LOGFault_Index)
            {
                gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_DATA_DISPLAYHISTORYFAULTRECORD;
            }
            // 操作记录显示
            else if(sU8SetSystemCounter == LOG_OPERATIONRECORD_Index)
            {
                gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_DATA_DISPLAYOPERATIONRECORD;
            }
        }
        break;
        case KEYACTION_DOWN :  //在设置界面下，Down同时键按下，选择对应的设置项
            sU8SetSystemCounter++;
            if(sU8SetSystemCounter >= DISPLAY_DETALOG_COUNT)
            {
                sU8SetSystemCounter = 0;
            }
            gCurrentMenu.eCurrentDisplayMenuType = nowDisplayType;
        break;
        case KEYACTION_UP :
          sU8SetSystemCounter--;
          if(sU8SetSystemCounter >= DISPLAY_DETALOG_COUNT)
          {
              sU8SetSystemCounter = DISPLAY_DETALOG_COUNT;
          }
          gCurrentMenu.eCurrentDisplayMenuType = nowDisplayType;
        break;
        case KEYACTION_ESC://在设置界面下，Esc键按下，返回到菜单页面
          gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_MENU;
        break;
        default:
        {
          gCurrentMenu.eCurrentDisplayMenuType = nowDisplayType;
        }
        break;
    }
    if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_ENGLISH) //历史数据t 中文界面组装
    { 
        updateDisplayLogData_English(sU8SetSystemCounter);                    
    }
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_CHINESE)//历史数据t 英文界面组装
    {
        updateDisplayLogData_Chinese(sU8SetSystemCounter);
    } 
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_SPANISH)//历史数据t 西班牙界面组装
    {
        updateDisplayLogData_Spanish(sU8SetSystemCounter);  
    } 
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_GERMAN)//历史数据t 德语界面组装
    {
        updateDisplayLogData_German(sU8SetSystemCounter);  
    }
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_FRENCH)//历史数据t 法语界面组装
    {
        updateDisplayLogData_French(sU8SetSystemCounter);    
    }
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_POLISH) //历史数据t 波兰界面组装
    {
        updateDisplayLogData_Polish(sU8SetSystemCounter); 
    }
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_ITALIAN)//历史数据t 意大利界面组装
    {
        updateDisplayLogData_Italian(sU8SetSystemCounter);  
    } 
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_CZECH)//历史数据t 捷克界面组装
    {
        updateDisplayLogData_Czech(sU8SetSystemCounter);   
    }
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_DUTCH)//历史数据t 荷兰界面组装c
    {
        updateDisplayLogData_Dutch(sU8SetSystemCounter);   
    }
    else
    { 
        updateDisplayLogData_English(sU8SetSystemCounter);        
    }
}
/***************************************************************************
 功能:历史记录显示 英文界面
****************************************************************************/
void updateDisplayLogData_English(uint8_t u8SetIndex)
{
    memset(tab_display,0,DISPLAY_CACHE_SIZE);
    // 实时故障显示
    if(u8SetIndex == LOG_REALTIMEFault_Index)
    {
        sprintf(tab_display,"         LOG         \n->Real Fault         \nHistorical faults    \nOperation records    \n");
    }
    // 历史故障显示
    else if(u8SetIndex == LOG_LOGFault_Index)
    {
        sprintf(tab_display,"         LOG         \nReal Fault           \n->Historical faults  \nOperation records    \n");
    }
    // 操作记录
    else if(u8SetIndex == LOG_OPERATIONRECORD_Index)
    {
        sprintf(tab_display,"         LOG         \nReal Fault           \nHistorical faults    \n->Operation records  \n");
    }
    else
    {
        //None
    }
    GUI_Display(tab_display, 0, 0);
}
/***************************************************************************
 功能:历史记录显示 中文界面
****************************************************************************/
void updateDisplayLogData_Chinese(uint8_t u8SetIndex)
{

}
/***************************************************************************
 功能:历史记录显示 西班牙语界面
****************************************************************************/
void updateDisplayLogData_Spanish(uint8_t u8SetIndex)
{

}
/***************************************************************************
 功能:历史记录显示 德语界面
****************************************************************************/
void updateDisplayLogData_German(uint8_t u8SetIndex)
{

}
 /***************************************************************************
 功能:历史记录显示 法语界面
****************************************************************************/
void updateDisplayLogData_French(uint8_t u8SetIndex)
{

}
/***************************************************************************
 功能:历史记录显示 波兰语界面
****************************************************************************/
void updateDisplayLogData_Polish(uint8_t u8SetIndex)
{

}
/***************************************************************************
 功能:历史记录显示 意大利语界面
****************************************************************************/
void updateDisplayLogData_Italian(uint8_t u8SetIndex)
{

}
/***************************************************************************
 功能:历史记录显示 捷克语界面
****************************************************************************/
void updateDisplayLogData_Czech(uint8_t u8SetIndex)
{

}
/***************************************************************************
 功能:历史记录显示 荷兰语界面
****************************************************************************/
void updateDisplayLogData_Dutch(uint8_t u8SetIndex)
{

}

/***************************************************************************
 功能:根据上一次界面操作类型和本次操作类型判断本次 SET界面切换
 * 策略设置
 * 电网设置
 * 电池设置
 * 光伏设置
 * 发电机设置
 * 出厂设置
****************************************************************************/
void updateDisplaySettingMenuData(KeyAction_TypeDef nowActionType,DisplayAction_TypeDef nowDisplayType)
{    
     //本次界面操作类型
    static uint8_t sU8SetCounter = 0;
    gLastMenu.eLastDisplayMenuType = DISPLAY_SET;
    switch(nowActionType) 
    {
        case KEYACTION_ENTER://在系统设置界面下，Enter键按下，进入选择对应的设置项
        {
            // 策略设置
            if(sU8SetCounter == SET_PolicySettings_Index)
            {
                gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_SET_SYSTEM_STRATEGY;
            }
            // 电网设置
            else if(sU8SetCounter == SET_GridSettings_Index)
            {
                gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_SET_GRID;
            }
            // 电池设置
            else if(sU8SetCounter == SET_BatterySetting_Index)
            {
                gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_SET_BATTERY;
            }
            // 光伏设置
            else if(sU8SetCounter == SET_PVSetting_Index)
            {
                gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_SET_PV;
            }
            // 发电机设置
            else if(sU8SetCounter == SET_GenSetting_Index)
            {
                gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_SET_GEN;
            }
            // 系统设置
            else if(sU8SetCounter == SET_SYSSettings_Index)
            {
                gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_SET_SYSTEM;
            }                
        }
        break;
        case KEYACTION_DOWN://在系统设置界面下，UP键按下，选择对应的设置项
        {
            sU8SetCounter++;
            if(sU8SetCounter>=DISPLAY_SET_ITEM_COUNT)
            {
                sU8SetCounter = 0;
            }
            gCurrentMenu.eCurrentDisplayMenuType = nowDisplayType;
        }
        break;
        case KEYACTION_UP://在系统设置界面下，DOWN键按下，选择对应的设置项
        {
            sU8SetCounter--;
            if(sU8SetCounter>=DISPLAY_SET_ITEM_COUNT)
            {
                sU8SetCounter = DISPLAY_SET_ITEM_COUNT - 1;
            }
            gCurrentMenu.eCurrentDisplayMenuType = nowDisplayType;    
        }
        break;
        case KEYACTION_ESC://在系统设置界面下，ESC键按下，返回设置界面
        {
            gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_MENU;
        }
        break;
        case KEYACTION_NULL://无操作刷新主界面数据
        default:
        {
            gCurrentMenu.eCurrentDisplayMenuType = nowDisplayType;                
        }
        break;
    }
    
    if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_ENGLISH) //系统设置界面SystemSet 英文界面组装
    { 
        updateDisplaySettingMenuData_English(sU8SetCounter);                    
    }
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_CHINESE)//系统设置界面SystemSet 中文界面组装
    {
        updateDisplaySettingMenuData_Chinese(sU8SetCounter);
    }
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_SPANISH)//系统设置界面SystemSet 西班牙界面组装 
    {
        updateDisplaySettingMenuData_Spanish(sU8SetCounter);  
    } 
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_GERMAN)//系统设置界面SystemSet 德语界面组装
    {
        updateDisplaySettingMenuData_German(sU8SetCounter);  
    } 
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_FRENCH)//系统设置界面SystemSet 法语界面组装
    {
        updateDisplaySettingMenuData_French(sU8SetCounter);    
    }
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_POLISH)//系统设置界面SystemSet 波兰界面组装
    {
        updateDisplaySettingMenuData_Polish(sU8SetCounter); 
    } 
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_ITALIAN)//系统设置界面SystemSet 意大利界面组装
    {
        updateDisplaySettingMenuData_Italian(sU8SetCounter);  
    }   
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_CZECH)//系统设置界面SystemSet 捷克界面组装
    {
        updateDisplaySettingMenuData_Czech(sU8SetCounter);   
    }  
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_DUTCH)//系统设置界面SystemSet 荷兰界面组装
    {
        updateDisplaySettingMenuData_Dutch(sU8SetCounter);   
    }
    else
    { 
        updateDisplaySettingMenuData_English(sU8SetCounter);        
    }
}
/***************************************************************************
功能: 设置菜单 英文界面
****************************************************************************/
void updateDisplaySettingMenuData_English(uint8_t u8SetIndex)
{
    memset(tab_display,0,DISPLAY_CACHE_SIZE);
    // 策略设置
    if(u8SetIndex == SET_PolicySettings_Index)
    {
        sprintf(tab_display,"      Set   Menu     \n->Policy Set         \nGrid Set             \nBattery Set          \n");
    }
    // 电网设置
    else if(u8SetIndex == SET_GridSettings_Index)
    {
        sprintf(tab_display,"      Set   Menu     \nPolicy Set           \n->Grid Set           \nBattery Set          \n");
    }
    // 电池设置
    else if(u8SetIndex == SET_BatterySetting_Index)
    {
        sprintf(tab_display,"      Set   Menu     \nPolicy Set           \nGrid Set             \n->Battery Set        \n");
    }
    // 光伏设置
    else if(u8SetIndex == SET_PVSetting_Index)
    {
        sprintf(tab_display,"      Set   Menu     \nGrid Set             \nBattery Se t         \n->PV Set             \n");
    }
    // 发电机设置
    else if(u8SetIndex == SET_GenSetting_Index)
    {
        sprintf(tab_display,"      Set   Menu     \nBattery Set          \nPV Set               \n->Gen Set            \n");
    }
    // 系统设置
    else if(u8SetIndex == SET_SYSSettings_Index)
    {
        sprintf(tab_display,"      Set   Menu     \nPV Set               \nGen Set              \n->SYS Set            \n");
    }
    GUI_Display(tab_display, 0, 0);
}
/***************************************************************************
功能: 设置菜单 中文界面界面
****************************************************************************/
void updateDisplaySettingMenuData_Chinese(uint8_t u8SetIndex)
{

}
/***************************************************************************
功能: 设置菜单 英文界面
****************************************************************************/
void updateDisplaySettingMenuData_Spanish(uint8_t u8SetIndex)
{

}
/***************************************************************************
功能: 设置菜单 德语界面
****************************************************************************/
void updateDisplaySettingMenuData_German(uint8_t u8SetIndex)
{

}
/***************************************************************************
功能: 设置菜单 法语界面
****************************************************************************/
void updateDisplaySettingMenuData_French(uint8_t u8SetIndex)
{

}
/***************************************************************************
功能: 设置菜单 波兰界面
****************************************************************************/
void updateDisplaySettingMenuData_Polish(uint8_t u8SetIndex)
{

}
/***************************************************************************
功能: 设置菜单 意大利界面
****************************************************************************/
void updateDisplaySettingMenuData_Italian(uint8_t u8SetIndex)
{

}
/***************************************************************************
功能: 设置菜单 捷克界面
****************************************************************************/
void updateDisplaySettingMenuData_Czech(uint8_t u8SetIndex)
{

}
/***************************************************************************
功能: 设置菜单 荷兰界面
****************************************************************************/
void updateDisplaySettingMenuData_Dutch(uint8_t u8SetIndex)
{

}

/***************************************************************************
 功能:根据上一次界面操作类型和本次操作类型判断本次 策略设置界面切换
****************************************************************************/
void updateDisplayPolicySettingsData(KeyAction_TypeDef nowActionType,DisplayAction_TypeDef nowDisplayType)
{
    //本次界面操作类型
    static uint8_t sU8SetCounter = 0;
    gLastMenu.eLastDisplayMenuType = DISPLAY_SET_SYSTEM_STRATEGY;    //当前页面为策略设置页面
    switch(nowActionType) 
    {
        case KEYACTION_ENTER://在系统设置界面下，Enter键按下，进入选择对应的设置项
            // 削峰填谷
            if(sU8SetCounter == SET_PeakLoadShifting_Index)
            {
                gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_SET_SYSTEM_STRATEGY_TPFV;
            }
            // 自发自用
            else if(sU8SetCounter == SET_SpontaneousSelfUse_Index)
            {
                gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_SET_SYSTEM_STRATEGY_SELFUSE;
            }
            // 备电设置
            else if(sU8SetCounter == SET_Backup_Index)
            {
                gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_SET_SYSTEM_STRATEGY_BACKUP;
            }
            // 定时充放电
            else if(sU8SetCounter == SET_TimingChargingDischarging_Index)
            {
                gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_SET_SYSTEM_STRATEGY_REGULAR;
            }
        break;
        case KEYACTION_DOWN://在系统设置界面下，UP键按下，选择对应的设置项
            sU8SetCounter++;
            if(sU8SetCounter>=DISPLAY_Policysettings_ALL_COUNT)
            {
                sU8SetCounter = 0;
            }
            gCurrentMenu.eCurrentDisplayMenuType = nowDisplayType;
        break;
        case KEYACTION_UP://在系统设置界面下，DOWN键按下，选择对应的设置项
            sU8SetCounter--;
            if(sU8SetCounter>=DISPLAY_Policysettings_ALL_COUNT)
            {
                sU8SetCounter = DISPLAY_Policysettings_ALL_COUNT - 1;
            }
            gCurrentMenu.eCurrentDisplayMenuType = nowDisplayType;
        break;
        case KEYACTION_ESC://在系统设置界面下，ESC键按下，返回设置界面
            gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_SET;
        break;
        case KEYACTION_NULL://无操作刷新主界面数据
        default:
            gCurrentMenu.eCurrentDisplayMenuType = nowDisplayType;                
        break;
    }
    if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_ENGLISH) //系统设置界面SystemSet 英文界面组装
    { 
        updateDisplayPolicySettings_English(sU8SetCounter);                    
    }
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_CHINESE)//系统设置界面SystemSet 中文界面组装
    {
        updateDisplayPolicySettings_Chinese(sU8SetCounter);
    }
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_SPANISH)//系统设置界面SystemSet 西班牙界面组装 
    {
        updateDisplayPolicySettings_Spanish(sU8SetCounter);  
    } 
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_GERMAN)//系统设置界面SystemSet 德语界面组装
    {
        updateDisplayPolicySettings_German(sU8SetCounter);  
    } 
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_FRENCH)//系统设置界面SystemSet 法语界面组装
    {
        updateDisplayPolicySettings_French(sU8SetCounter);    
    }
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_POLISH)//系统设置界面SystemSet 波兰界面组装
    {
        updateDisplayPolicySettings_Polish(sU8SetCounter); 
    } 
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_ITALIAN)//系统设置界面SystemSet 意大利界面组装
    {
        updateDisplayPolicySettings_Italian(sU8SetCounter);  
    }   
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_CZECH)//系统设置界面SystemSet 捷克界面组装
    {
        updateDisplayPolicySettings_Czech(sU8SetCounter);   
    }  
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_DUTCH)//系统设置界面SystemSet 荷兰界面组装
    {
        updateDisplayPolicySettings_Dutch(sU8SetCounter);   
    }
    else
    { 
        updateDisplayPolicySettings_English(sU8SetCounter);        
    }
}
/***************************************************************************
 功能:策略设置 英文界面
****************************************************************************/
void updateDisplayPolicySettings_English(uint8_t u8SetIndex)
{
    memset(tab_display,0,DISPLAY_CACHE_SIZE);
    // 策略设置
    if(u8SetIndex == SET_PeakLoadShifting_Index)
    {
        sprintf(tab_display,"    Policy Set       \n->TVTP   Set         \nSELF Set             \nBackup Set           \n");
    }
    // 自发自用
    else if (u8SetIndex == SET_SpontaneousSelfUse_Index)
    {
        sprintf(tab_display,"    Policy Set       \nTVTP   Set           \n->SELF Set           \nBackup Set           \n");
    }
    // 备电
    else if (u8SetIndex == SET_Backup_Index)
    {
        sprintf(tab_display,"    Policy Set       \nTVTP   Set           \nSELF Set             \n->Backup Set         \n");
    }
    // 策略设置
    else if (u8SetIndex == SET_TimingChargingDischarging_Index)
    {
        sprintf(tab_display,"    Policy Set       \nSELF Set             \nBackup Set           \n->Regular Set        \n");
    }
    GUI_Display(tab_display, 0, 0);
}
/***************************************************************************
 功能:策略设置 中文页面
****************************************************************************/
void updateDisplayPolicySettings_Chinese(uint8_t u8SetIndex)
{

}
/***************************************************************************
 功能:策略设置 西班牙界面
****************************************************************************/
void updateDisplayPolicySettings_Spanish(uint8_t u8SetIndex)
{

}
/***************************************************************************
 功能:策略设置 德语界面
****************************************************************************/
void updateDisplayPolicySettings_German(uint8_t u8SetIndex)
{

}
/***************************************************************************
 功能:策略设置 法语界面
****************************************************************************/
void updateDisplayPolicySettings_French(uint8_t u8SetIndex)
{

}
/***************************************************************************
 功能:策略设置 波兰界面
****************************************************************************/
void updateDisplayPolicySettings_Polish(uint8_t u8SetIndex)
{

}
/***************************************************************************
 功能:策略设置意大利界面
****************************************************************************/
void updateDisplayPolicySettings_Italian(uint8_t u8SetIndex)
{

}
/***************************************************************************
 功能:策略设置 捷克界面
****************************************************************************/
void updateDisplayPolicySettings_Czech(uint8_t u8SetIndex)
{

}
/***************************************************************************
 功能:策略设置 荷兰界面
****************************************************************************/
void updateDisplayPolicySettings_Dutch(uint8_t u8SetIndex)
{

}

/***************************************************************************
 功能:削峰填谷 荷兰界面
****************************************************************************/
void updateDisplayPeakLoadShiftingSetData(KeyAction_TypeDef nowActionType,DisplayAction_TypeDef nowDisplayType)
{
    //本次界面操作类型
    static uint8_t sU8SetCounter = 0;
    gLastMenu.eLastDisplayMenuType = DISPLAY_SET_SYSTEM_STRATEGY_TPFV;          //当前页面为削峰填谷
    switch(nowActionType) 
    {
        case KEYACTION_ENTER://在系统设置界面下，Enter键按下，进入选择对应的设置项
        {
            // 峰段时间 1
            if(sU8SetCounter == STRATEGY_TPFV_PEAK_PERIOD_ONE)
            {
                gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_SET_SYSTEM_STRATEGY_TPFV_PEAK_PERIOD_ONE;
            }
            // 峰段时间 2
            else if(sU8SetCounter == STRATEGY_TPFV_PEAK_PERIOD_TWO)
            {
                gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_SET_SYSTEM_STRATEGY_TPFV_PEAK_PERIOD_TWO;
            }
            // 峰段时间 3
            else if(sU8SetCounter == STRATEGY_TPFV_PEAK_PERIOD_THREE)
            {
                gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_SET_SYSTEM_STRATEGY_TPFV_PEAK_PERIOD_THREE;
            }
            // 谷段时间1
            else if(sU8SetCounter == STRATEGY_TPFV_VALLEY_PERIOD_ONE)
            {
                gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_SET_SYSTEM_STRATEGY_TPFV_VALLEY_PERIOD_ONE;
            }
            // 谷段时间2
            else if(sU8SetCounter == STRATEGY_TPFV_VALLEY_PERIOD_TWO)
            {
                gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_SET_SYSTEM_STRATEGY_TPFV_VALLEY_PERIOD_TWO;
            }
            // 谷段时间3
            else if(sU8SetCounter == STRATEGY_TPFV_VALLEY_PERIOD_THREE)
            {
                gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_SET_SYSTEM_STRATEGY_TPFV_VALLEY_PERIOD_THREE;
            }
        }
        break;
        case KEYACTION_DOWN://在系统设置界面下，UP键按下，选择对应的设置项
            {
                sU8SetCounter++;
                if(sU8SetCounter>=DISPLAY_SET_ITEM_COUNT)
                {
                    sU8SetCounter = 0;
                }
                gCurrentMenu.eCurrentDisplayMenuType = nowDisplayType;
            }
            break;
        case KEYACTION_UP://在系统设置界面下，DOWN键按下，选择对应的设置项
            {
                sU8SetCounter--;
                if(sU8SetCounter>=DISPLAY_SET_ITEM_COUNT)
                {
                    sU8SetCounter = DISPLAY_SET_ITEM_COUNT - 1;
                }
                gCurrentMenu.eCurrentDisplayMenuType = nowDisplayType;
            }
        break;
            case KEYACTION_ESC://在系统设置界面下，ESC键按下，返回至策略设置界面
            {
                sU8SetCounter = 0;
                gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_SET_SYSTEM_STRATEGY;
            }
            break;
        case KEYACTION_NULL://无操作刷新主界面数据
        default:
            {
                gCurrentMenu.eCurrentDisplayMenuType = nowDisplayType;                
            }
        break;
    }
    if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_ENGLISH) //系统设置界面SystemSet 英文界面组装
    { 
        updateDisplayPeakLoadShiftingSetData_English(sU8SetCounter);                    
    }
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_CHINESE)//系统设置界面SystemSet 中文界面组装
    {
        updateDisplayPeakLoadShiftingSetData_Chinese(sU8SetCounter);
    }
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_SPANISH)//系统设置界面SystemSet 西班牙界面组装 
    {
        updateDisplayPeakLoadShiftingSetData_Spanish(sU8SetCounter);  
    } 
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_GERMAN)//系统设置界面SystemSet 德语界面组装
    {
        updateDisplayPeakLoadShiftingSetData_German(sU8SetCounter);  
    } 
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_FRENCH)//系统设置界面SystemSet 法语界面组装
    {
        updateDisplayPeakLoadShiftingSetData_French(sU8SetCounter);    
    }
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_POLISH)//系统设置界面SystemSet 波兰界面组装
    {
        updateDisplayPeakLoadShiftingSetData_Polish(sU8SetCounter); 
    } 
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_ITALIAN)//系统设置界面SystemSet 意大利界面组装
    {
       updateDisplayPeakLoadShiftingSetData_Italian(sU8SetCounter);  
    }   
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_CZECH)//系统设置界面SystemSet 捷克界面组装
    {
        updateDisplayPeakLoadShiftingSetData_Czech(sU8SetCounter);   
    }  
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_DUTCH)//系统设置界面SystemSet 荷兰界面组装
    {
        updateDisplayPeakLoadShiftingSetData_Dutch(sU8SetCounter);   
    }
    else
    { 
        updateDisplayPeakLoadShiftingSetData_English(sU8SetCounter);        
    }
}
/***************************************************************************
 功能: 削峰填谷  英文界面
****************************************************************************/
void updateDisplayPeakLoadShiftingSetData_English(uint8_t u8SetIndex)
{
    memset(tab_display,0,DISPLAY_CACHE_SIZE);
    // 峰段时间1
    if(u8SetIndex == STRATEGY_TPFV_PEAK_PERIOD_ONE)
    {
        sprintf(tab_display,"    TPFV Strategy    \n->Peak  Time 1       \nPeak Time 2          \nPeak Time 3          \n");
    }
    // 峰段时间2
    else if(u8SetIndex == STRATEGY_TPFV_PEAK_PERIOD_TWO)
    {
        sprintf(tab_display,"    TPFV Strategy    \nPeak  Time 1         \n->Peak Time 2        \nPeak Time 3          \n");
    }
    // 峰段时间3
    else if(u8SetIndex == STRATEGY_TPFV_PEAK_PERIOD_THREE)
    {
        sprintf(tab_display,"    TPFV Strategy    \nPeak  Time 1         \nPeak Time 2          \n->Peak Time 3        \n");
    }
    // 谷段时间1
    else if(u8SetIndex == STRATEGY_TPFV_VALLEY_PERIOD_ONE)
    {
        sprintf(tab_display,"    TPFV Strategy    \nPeak Time 2          \nPeak Time 3          \n->VALLEY Time 1      \n");
    }
    // 谷段时间2
    else if(u8SetIndex == STRATEGY_TPFV_VALLEY_PERIOD_TWO)
    {
        sprintf(tab_display,"    TPFV Strategy    \nPeak Time 3          \nVALLEY Time 1        \n->VALLEY Time 2      \n");
    }
    // 谷段时间3
    else if(u8SetIndex == STRATEGY_TPFV_VALLEY_PERIOD_THREE)
    {
        sprintf(tab_display,"    TPFV Strategy    \nVALLEY Time 1        \nVALLEY Time 2        \n->VALLEY Time 3      \n");
    }
    GUI_Display(tab_display, 0, 0);
}

/***************************************************************************
 功能:削峰填谷 中文界面
****************************************************************************/
void updateDisplayPeakLoadShiftingSetData_Chinese(uint8_t u8SetIndex)
{

}
/***************************************************************************
 功能:削峰填谷 西班牙界面
****************************************************************************/
void updateDisplayPeakLoadShiftingSetData_Spanish(uint8_t u8SetIndex)
{

}
/***************************************************************************
 功能:削峰填谷 德语SET界面
****************************************************************************/
void updateDisplayPeakLoadShiftingSetData_German(uint8_t u8SetIndex)
{

}
/***************************************************************************
 功能:削峰填谷 法语SET界面
****************************************************************************/
void updateDisplayPeakLoadShiftingSetData_French(uint8_t u8SetIndex)
{

}
/***************************************************************************
 功能:削峰填谷 波兰SET界面
****************************************************************************/
void updateDisplayPeakLoadShiftingSetData_Polish(uint8_t u8SetIndex)
{

}
/***************************************************************************
 功能:削峰填谷 意大利SET界面
****************************************************************************/
void updateDisplayPeakLoadShiftingSetData_Italian(uint8_t u8SetIndex)
{

}
/***************************************************************************
 功能:削峰填谷 捷克SET界面
****************************************************************************/
void updateDisplayPeakLoadShiftingSetData_Czech(uint8_t u8SetIndex)
{

}
/***************************************************************************
 功能:削峰填谷 荷兰SET界面
****************************************************************************/
void updateDisplayPeakLoadShiftingSetData_Dutch(uint8_t u8SetIndex)
{

}

/***************************************************************************
 根据上一次界面操作类型和本次操作类型判断本次SET界面切换 削峰填谷策略时间
****************************************************************************/
void updateDisplayPeakLoadShiftingPEAKVALLEYSetData(KeyAction_TypeDef nowActionType,DisplayAction_TypeDef nowDisplayType,PeaksValleys_TypeDef enum_tpfv)
{
    //本次界面操作类型
    static uint8_t sU8SetCounter = 0;
    static uint8_t Su8cursorCounter = 0;                    //光标
    static uint8_t sU8TPFVCounter  = 0;                     // 数值指示位
    static bool_t  Flag_confirm  = STATUS_FALSE;           //确认标志
    static uint8_t confirm = 0;                             //确认保存
    gLastMenu.eLastDisplayMenuType = DISPLAY_SET_SYSTEM_STRATEGY_TPFV;          
    switch(nowActionType) 
    {
        case KEYACTION_ENTER://在系统设置界面下，Enter键按下，进入选择对应的设置项
        {
            if(!Flag_confirm)
            {
                sU8TPFVCounter = 0;    // 从0开始
                // 开始时间
                if(sU8SetCounter == PeakloadShifting_StartTime)
                {
                    Su8cursorCounter++; //光标选择 第一次进来为1  
                    if(Su8cursorCounter > 6)
                    {
                        Su8cursorCounter = 1;   
                    }
                    Display_Set_UnderLine_Blink_Position(STATUS_TRUE,arrayFixPeakPeriodStartTimeParaFlicker[Su8cursorCounter -1].u8StartPos,arrayFixPeakPeriodStartTimeParaFlicker[Su8cursorCounter -1].u8EndPos);
                    gbEditFlag = STATUS_TRUE; //进入编辑模式
                }
                // 结束时间
                else if(sU8SetCounter == PeakloadShifting_EndTime)
                {
                    Su8cursorCounter++; //光标选择 
                    if(Su8cursorCounter > 6)
                    {
                        Su8cursorCounter = 1;
                    }
                    Display_Set_UnderLine_Blink_Position(STATUS_TRUE,arrayFixPeakPeriodEndTimeParaFlicker[Su8cursorCounter -1].u8StartPos,arrayFixPeakPeriodEndTimeParaFlicker[Su8cursorCounter -1].u8EndPos);
                    gbEditFlag = STATUS_TRUE; //进入编辑模式
                }
                // 停止SOC
                else if(sU8SetCounter == STRATEGY_TPFV_PEAK_PERIOD_THREE)
                {
                    Su8cursorCounter++; //光标选择 
                    //Display_Set_UnderLine_Blink_Position(STATUS_TRUE,,71);
                    if(Su8cursorCounter > 3)
                    {
                        Su8cursorCounter = 1;
                    }
                    Display_Set_UnderLine_Blink_Position(STATUS_TRUE,arrayFixStrategySOCFlicker[Su8cursorCounter -1].u8StartPos,arrayFixStrategySOCFlicker[Su8cursorCounter -1].u8EndPos);
                    gbEditFlag = STATUS_TRUE; //进入编辑模式
                }
                // 限制功率
                else if(sU8SetCounter == STRATEGY_TPFV_VALLEY_PERIOD_ONE)
                { 
                    Su8cursorCounter++; //光标选择 
                    //Display_Set_UnderLine_Blink_Position(STATUS_TRUE,,71); 
                    if(Su8cursorCounter>5)
                    {
                        Su8cursorCounter = 1;
                    }
                    Display_Set_UnderLine_Blink_Position(STATUS_TRUE,arrayFixStrategyPowerFlicker[Su8cursorCounter -1].u8StartPos,arrayFixStrategyPowerFlicker[Su8cursorCounter -1].u8EndPos);
                    gbEditFlag = STATUS_FALSE; //进入编辑模式
                }
            }
            else
            {
                if(confirm == 1)
                {   
                    //开始时间的保存数据
                    if(sU8SetCounter == PeakloadShifting_StartTime)
                    {
                        //保存数据
                        gDisplay.stDisplaySet.stStrategy.stTimerStrategy.stChargePeriod.stPeriod1.u8StopSOC = atoi(tab_RegularStop_SOC_modify);
                        char tabTempTime[3] = {""};
                        tabTempTime[0] = tab_PeakLoadShifting_Time_Start[0];
                        tabTempTime[1] = tab_PeakLoadShifting_Time_Start[1];
                        uint16_t u16StartHour = atoi(tabTempTime); 

                        tabTempTime[0] = tab_PeakLoadShifting_Time_Start[3];
                        tabTempTime[1] = tab_PeakLoadShifting_Time_Start[4];
                        uint16_t u16StartMin = atoi(tabTempTime); 

                        tabTempTime[0] = tab_PeakLoadShifting_Time_Start[6];
                        tabTempTime[1] = tab_PeakLoadShifting_Time_Start[7];
                        uint16_t u16StartSec = atoi(tabTempTime); 
                        if(enum_tpfv ==  STRATEGY_TPFV_PEAK_PERIOD_ONE)
                        {
                            gDisplay.stDisplaySet.stStrategy.stTPFVStrategy.stPeakPeriod.stPeriod1.stPeriod.u8EndHour = u16StartHour;
                            gDisplay.stDisplaySet.stStrategy.stTPFVStrategy.stPeakPeriod.stPeriod1.stPeriod.u8StartMin = u16StartMin;
                            gDisplay.stDisplaySet.stStrategy.stTPFVStrategy.stPeakPeriod.stPeriod1.stPeriod.u8StartSec = u16StartSec;
                            generateOperationRecord(RECORD_SET_TPFV_PEAK_PERIOD_ONE); 
                        }
                        else if(enum_tpfv ==  STRATEGY_TPFV_PEAK_PERIOD_TWO)
                        {
                            gDisplay.stDisplaySet.stStrategy.stTPFVStrategy.stPeakPeriod.stPeriod2.stPeriod.u8EndHour = u16StartHour;
                            gDisplay.stDisplaySet.stStrategy.stTPFVStrategy.stPeakPeriod.stPeriod2.stPeriod.u8StartMin = u16StartMin;
                            gDisplay.stDisplaySet.stStrategy.stTPFVStrategy.stPeakPeriod.stPeriod2.stPeriod.u8StartSec = u16StartSec;
                            generateOperationRecord(RECORD_SET_TPFV_PEAK_PERIOD_TWO); 
                        }
                        else if(enum_tpfv ==  STRATEGY_TPFV_PEAK_PERIOD_THREE)
                        {
                            gDisplay.stDisplaySet.stStrategy.stTPFVStrategy.stPeakPeriod.stPeriod3.stPeriod.u8EndHour = u16StartHour;
                            gDisplay.stDisplaySet.stStrategy.stTPFVStrategy.stPeakPeriod.stPeriod3.stPeriod.u8StartMin = u16StartMin;
                            gDisplay.stDisplaySet.stStrategy.stTPFVStrategy.stPeakPeriod.stPeriod3.stPeriod.u8StartSec = u16StartSec;
                            generateOperationRecord(RECORD_SET_TPFV_PEAK_PERIOD_THREE); 
                        }
                        if(enum_tpfv ==  STRATEGY_TPFV_VALLEY_PERIOD_ONE)
                        {
                            gDisplay.stDisplaySet.stStrategy.stTPFVStrategy.stValleyPeriod.stPeriod1.stPeriod.u8EndHour = u16StartHour;
                            gDisplay.stDisplaySet.stStrategy.stTPFVStrategy.stValleyPeriod.stPeriod1.stPeriod.u8StartMin = u16StartMin;
                            gDisplay.stDisplaySet.stStrategy.stTPFVStrategy.stValleyPeriod.stPeriod1.stPeriod.u8StartSec = u16StartSec;
                            generateOperationRecord(RECORD_SET_TPFV_VALLEY_PERIOD_ONE); 
                        }
                        else if(enum_tpfv ==  STRATEGY_TPFV_VALLEY_PERIOD_TWO)
                        {
                            gDisplay.stDisplaySet.stStrategy.stTPFVStrategy.stValleyPeriod.stPeriod2.stPeriod.u8EndHour = u16StartHour;
                            gDisplay.stDisplaySet.stStrategy.stTPFVStrategy.stValleyPeriod.stPeriod2.stPeriod.u8StartMin = u16StartMin;
                            gDisplay.stDisplaySet.stStrategy.stTPFVStrategy.stValleyPeriod.stPeriod2.stPeriod.u8StartSec = u16StartSec;
                            generateOperationRecord(RECORD_SET_TPFV_VALLEY_PERIOD_TWO); 
                        }
                        else if(enum_tpfv ==  STRATEGY_TPFV_VALLEY_PERIOD_THREE)
                        {
                            gDisplay.stDisplaySet.stStrategy.stTPFVStrategy.stValleyPeriod.stPeriod3.stPeriod.u8EndHour = u16StartHour;
                            gDisplay.stDisplaySet.stStrategy.stTPFVStrategy.stValleyPeriod.stPeriod3.stPeriod.u8StartMin = u16StartMin;
                            gDisplay.stDisplaySet.stStrategy.stTPFVStrategy.stValleyPeriod.stPeriod3.stPeriod.u8StartSec = u16StartSec;
                            generateOperationRecord(RECORD_SET_TPFV_VALLEY_PERIOD_THREE); 
                        }
                        else
                        {
                            //None
                        }

                        Display_Set_UnderLine_Blink_Position(STATUS_FALSE,arrayVarConfirmFlicker[confirm].u8StartPos,arrayVarConfirmFlicker[confirm].u8EndPos);
                        Flag_confirm = STATUS_FALSE;// 关闭编辑模式
                    }
                    else if(sU8SetCounter == PeakloadShifting_EndTime)
                    {
                    
                        char tabTempTime[3] = {""};
                        tabTempTime[0] = tab_PeakLoadShifting_Time_End[0];
                        tabTempTime[1] = tab_PeakLoadShifting_Time_End[1];
                        uint16_t u16EndHour = atoi(tabTempTime); 
                        
                        tabTempTime[0] = tab_PeakLoadShifting_Time_End[3];
                        tabTempTime[1] = tab_PeakLoadShifting_Time_End[4];
                        uint16_t u16EndMin = atoi(tabTempTime); 
                        
                        tabTempTime[0] = tab_PeakLoadShifting_Time_End[6];
                        tabTempTime[1] = tab_PeakLoadShifting_Time_End[7];
                        uint16_t u16EndSec = atoi(tabTempTime);
                        if(enum_tpfv ==  STRATEGY_TPFV_PEAK_PERIOD_ONE)
                        {
                            gDisplay.stDisplaySet.stStrategy.stTPFVStrategy.stPeakPeriod.stPeriod1.stPeriod.u8EndHour = u16EndHour;
                            gDisplay.stDisplaySet.stStrategy.stTPFVStrategy.stPeakPeriod.stPeriod1.stPeriod.u8StartMin = u16EndMin;
                            gDisplay.stDisplaySet.stStrategy.stTPFVStrategy.stPeakPeriod.stPeriod1.stPeriod.u8StartSec = u16EndSec;
                            generateOperationRecord(RECORD_SET_TPFV_PEAK_PERIOD_ONE); 
                        }
                        else if(enum_tpfv ==  STRATEGY_TPFV_PEAK_PERIOD_TWO)
                        {
                            gDisplay.stDisplaySet.stStrategy.stTPFVStrategy.stPeakPeriod.stPeriod2.stPeriod.u8EndHour = u16EndHour;
                            gDisplay.stDisplaySet.stStrategy.stTPFVStrategy.stPeakPeriod.stPeriod2.stPeriod.u8StartMin = u16EndMin;
                            gDisplay.stDisplaySet.stStrategy.stTPFVStrategy.stPeakPeriod.stPeriod2.stPeriod.u8StartSec = u16EndSec;
                            generateOperationRecord(RECORD_SET_TPFV_PEAK_PERIOD_ONE); 

                        }
                        else if(enum_tpfv ==  STRATEGY_TPFV_PEAK_PERIOD_THREE)
                        {
                            gDisplay.stDisplaySet.stStrategy.stTPFVStrategy.stPeakPeriod.stPeriod3.stPeriod.u8EndHour = u16EndHour;
                            gDisplay.stDisplaySet.stStrategy.stTPFVStrategy.stPeakPeriod.stPeriod3.stPeriod.u8StartMin = u16EndMin;
                            gDisplay.stDisplaySet.stStrategy.stTPFVStrategy.stPeakPeriod.stPeriod3.stPeriod.u8StartSec = u16EndSec;
                            generateOperationRecord(RECORD_SET_TPFV_PEAK_PERIOD_THREE); 
                        }
                        if(enum_tpfv ==  STRATEGY_TPFV_VALLEY_PERIOD_ONE)
                        {
                            gDisplay.stDisplaySet.stStrategy.stTPFVStrategy.stValleyPeriod.stPeriod1.stPeriod.u8EndHour = u16EndHour;
                            gDisplay.stDisplaySet.stStrategy.stTPFVStrategy.stValleyPeriod.stPeriod1.stPeriod.u8StartMin = u16EndMin;
                            gDisplay.stDisplaySet.stStrategy.stTPFVStrategy.stValleyPeriod.stPeriod1.stPeriod.u8StartSec = u16EndSec;
                            generateOperationRecord(RECORD_SET_TPFV_VALLEY_PERIOD_ONE); 
                        }
                        else if(enum_tpfv ==  STRATEGY_TPFV_VALLEY_PERIOD_TWO)
                        {
                            gDisplay.stDisplaySet.stStrategy.stTPFVStrategy.stValleyPeriod.stPeriod2.stPeriod.u8EndHour = u16EndHour;
                            gDisplay.stDisplaySet.stStrategy.stTPFVStrategy.stValleyPeriod.stPeriod2.stPeriod.u8StartMin = u16EndMin;
                            gDisplay.stDisplaySet.stStrategy.stTPFVStrategy.stValleyPeriod.stPeriod2.stPeriod.u8StartSec = u16EndSec;
                            generateOperationRecord(RECORD_SET_TPFV_VALLEY_PERIOD_TWO); 
                        }
                        else if(enum_tpfv ==  STRATEGY_TPFV_VALLEY_PERIOD_THREE)
                        {
                            gDisplay.stDisplaySet.stStrategy.stTPFVStrategy.stValleyPeriod.stPeriod3.stPeriod.u8EndHour = u16EndHour;
                            gDisplay.stDisplaySet.stStrategy.stTPFVStrategy.stValleyPeriod.stPeriod3.stPeriod.u8StartMin = u16EndMin;
                            gDisplay.stDisplaySet.stStrategy.stTPFVStrategy.stValleyPeriod.stPeriod3.stPeriod.u8StartSec = u16EndSec;
                            generateOperationRecord(RECORD_SET_TPFV_VALLEY_PERIOD_THREE); 
                        }
                        else
                        {
                            //None
                        }
                        Display_Set_UnderLine_Blink_Position(STATUS_FALSE,arrayVarConfirmFlicker[confirm-1].u8StartPos,arrayVarConfirmFlicker[confirm-1].u8EndPos);
                        gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_SET_SYSTEM_STRATEGY_TPFV;

                    }
                    else if(sU8SetCounter == PeakloadShifting_EndSOC)
                    {    
                        // 削峰填谷 峰段时间1 
                        if(enum_tpfv ==  STRATEGY_TPFV_PEAK_PERIOD_ONE)
                        {
                            gDisplay.stDisplaySet.stStrategy.stTPFVStrategy.stPeakPeriod.stPeriod1.s16Power = atoi(tab_PeakLoadShifting_SOC) * 1;
                            generateOperationRecord(RECORD_SET_TPFV_PEAK_PERIOD_ONE); 
                        }
                        // 削峰填谷 峰段时间2
                        else if(enum_tpfv ==  STRATEGY_TPFV_PEAK_PERIOD_TWO)
                        {
                            gDisplay.stDisplaySet.stStrategy.stTPFVStrategy.stPeakPeriod.stPeriod2.s16Power = atoi(tab_PeakLoadShifting_SOC) * 1;
                            generateOperationRecord(RECORD_SET_TPFV_PEAK_PERIOD_TWO); 
                        }
                        // 削峰填谷 峰段时间3
                        else if(enum_tpfv ==  STRATEGY_TPFV_PEAK_PERIOD_THREE)
                        {
                            gDisplay.stDisplaySet.stStrategy.stTPFVStrategy.stPeakPeriod.stPeriod3.s16Power = atoi(tab_PeakLoadShifting_SOC) * 1;
                            generateOperationRecord(RECORD_SET_TPFV_PEAK_PERIOD_THREE); 
                        }
                        // 削峰填谷 谷段时间1
                        if(enum_tpfv ==  STRATEGY_TPFV_VALLEY_PERIOD_ONE)
                        {
                            gDisplay.stDisplaySet.stStrategy.stTPFVStrategy.stValleyPeriod.stPeriod3.s16Power = atoi(tab_PeakLoadShifting_SOC) * 1;
                            generateOperationRecord(RECORD_SET_TPFV_VALLEY_PERIOD_ONE);
                        }
                        // 削峰填谷 谷段时间2
                        else if(enum_tpfv ==  STRATEGY_TPFV_VALLEY_PERIOD_TWO)
                        {
                            gDisplay.stDisplaySet.stStrategy.stTPFVStrategy.stValleyPeriod.stPeriod3.s16Power = atoi(tab_PeakLoadShifting_SOC) * 1;
                            generateOperationRecord(RECORD_SET_TPFV_VALLEY_PERIOD_TWO);
                        }
                        // 削峰填谷 谷段时间3
                        else if(enum_tpfv ==  STRATEGY_TPFV_VALLEY_PERIOD_THREE)
                        {
                            gDisplay.stDisplaySet.stStrategy.stTPFVStrategy.stValleyPeriod.stPeriod3.s16Power = atoi(tab_PeakLoadShifting_SOC) * 1;
                            generateOperationRecord(RECORD_SET_TPFV_VALLEY_PERIOD_THREE);
                        }
                        else
                        {
                            //None
                        } 
                        Display_Set_UnderLine_Blink_Position(STATUS_FALSE,arrayVarConfirmFlicker[confirm-1].u8StartPos,arrayVarConfirmFlicker[confirm-1].u8EndPos);
                        gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_SET_SYSTEM_STRATEGY_TPFV;
                    }
                    else if(sU8SetCounter == PeakloadShifting_EndPower)
                    {
                        // 峰段时间1
                        if(enum_tpfv ==  STRATEGY_TPFV_PEAK_PERIOD_ONE)
                        {
                            gDisplay.stDisplaySet.stStrategy.stTPFVStrategy.stPeakPeriod.stPeriod1.s16Power = atoi(tab_PeakLoadShifting_Power) * 1;
                            generateOperationRecord(RECORD_SET_TPFV_PEAK_PERIOD_ONE); 
                        }
                        // 峰段时间2 
                        else if(enum_tpfv ==  STRATEGY_TPFV_PEAK_PERIOD_TWO)
                        {
                            gDisplay.stDisplaySet.stStrategy.stTPFVStrategy.stPeakPeriod.stPeriod2.s16Power = atoi(tab_PeakLoadShifting_Power) * 1;
                            generateOperationRecord(RECORD_SET_TPFV_PEAK_PERIOD_TWO); 
                        }
                        // 峰段时间3
                        else if(enum_tpfv ==  STRATEGY_TPFV_PEAK_PERIOD_THREE)
                        {
                            gDisplay.stDisplaySet.stStrategy.stTPFVStrategy.stPeakPeriod.stPeriod3.s16Power = atoi(tab_PeakLoadShifting_Power) * 1;
                            generateOperationRecord(RECORD_SET_TPFV_PEAK_PERIOD_THREE); 
                        }
                        // 谷段时间1
                        if(enum_tpfv ==  STRATEGY_TPFV_VALLEY_PERIOD_ONE)
                        {
                            gDisplay.stDisplaySet.stStrategy.stTPFVStrategy.stValleyPeriod.stPeriod1.s16Power = atoi(tab_PeakLoadShifting_Power) * 1;
                            generateOperationRecord(RECORD_SET_TPFV_PEAK_PERIOD_ONE); 
                        }
                        // 谷段时间2
                        else if(enum_tpfv ==  STRATEGY_TPFV_VALLEY_PERIOD_TWO)
                        {
                            gDisplay.stDisplaySet.stStrategy.stTPFVStrategy.stValleyPeriod.stPeriod2.s16Power = atoi(tab_PeakLoadShifting_Power) * 1;
                            generateOperationRecord(RECORD_SET_TPFV_PEAK_PERIOD_TWO); 
                        }
                        else if(enum_tpfv ==  STRATEGY_TPFV_VALLEY_PERIOD_THREE)
                        {
                            gDisplay.stDisplaySet.stStrategy.stTPFVStrategy.stValleyPeriod.stPeriod3.s16Power = atoi(tab_PeakLoadShifting_Power) * 1;
                            generateOperationRecord(RECORD_SET_TPFV_PEAK_PERIOD_THREE); 
                        }
                        else
                        {
                            //None
                        } 
                        Display_Set_UnderLine_Blink_Position(STATUS_FALSE,arrayVarConfirmFlicker[confirm-1].u8StartPos,arrayVarConfirmFlicker[confirm-1].u8EndPos);
                        gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_SET_SYSTEM_STRATEGY_TPFV;
                    }    
                    else
                    {
                        Display_Set_UnderLine_Blink_Position(STATUS_FALSE,arrayVarConfirmFlicker[confirm-1].u8StartPos,arrayVarConfirmFlicker[confirm-1].u8EndPos);
                        gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_SET_SYSTEM_STRATEGY_TPFV;
                        //取消
                    }     
                    gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_SET_SYSTEM_STRATEGY_TPFV;
                    gbEditFlag = STATUS_TRUE;                                  //进入编辑模式
                    confirm = 0;
                }
            }
        break;
        case KEYACTION_DOWN:                                                                 //在系统设置界面下，DOWN键按下，选择对应的设置项
            if(!gbEditFlag)                                                                  //不在编辑模式下
            {                 
                sU8SetCounter++;
                if(sU8SetCounter>=DISPLAY_SET_ITEM_COUNT)
                {
                    sU8SetCounter = 0;
                }
                gCurrentMenu.eCurrentDisplayMenuType = nowDisplayType;
            }
            else            //在编辑模式下
            {
                if(!Flag_confirm)
                {
                    switch(sU8SetCounter)
                    {
                        case PeakloadShifting_StartTime:
                            sU8TPFVCounter++;
                            // 起始时间第一位
                            if(Su8cursorCounter == 1)                                       
                            {
                                if(sU8TPFVCounter <= 2)
                                {
                                    tab_PeakLoadShifting_Time_Start[0] =  '0' + sU8TPFVCounter;
                                }
                                else
                                {
                                    sU8TPFVCounter = 0;
                                    tab_PeakLoadShifting_Time_Start[0] = '0';
                                }
                            }
                            // 起始时间第二位
                            else if(Su8cursorCounter == 2)
                            {
                                if(tab_PeakLoadShifting_Time_Start[0] == '2')
                                {
                                    if(sU8TPFVCounter <= 4)
                                    {
                                        tab_PeakLoadShifting_Time_Start[1] =  '0' + sU8TPFVCounter;
                                    }
                                    else
                                    {
                                        sU8TPFVCounter = 0;
                                        tab_PeakLoadShifting_Time_Start[1] = '0';
                                    }
                                }
                                else 
                                {
                                    if(sU8TPFVCounter <= 9)
                                    {
                                        tab_PeakLoadShifting_Time_Start[1] =  '0' + sU8TPFVCounter;
                                    }
                                    else
                                    {
                                        sU8TPFVCounter = 0;
                                        tab_PeakLoadShifting_Time_Start[1] = '0';
                                    }
                                }
                            }
                            // 起始时间的第三个数字
                            else if(Su8cursorCounter == 3)
                            {
                                if(sU8TPFVCounter <= 5)
                                {
                                    tab_PeakLoadShifting_Time_Start[3] =  '0' + sU8TPFVCounter;
                                }
                                else
                                {
                                    sU8TPFVCounter = 0;
                                    tab_PeakLoadShifting_Time_Start[3] = '0';
                                }
                            }
                            // 起始时间的第四个数字
                            else if(Su8cursorCounter == 4)
                            {
                                if(sU8TPFVCounter <= 9)
                                {
                                       tab_PeakLoadShifting_Time_Start[4] =  '0' + sU8TPFVCounter;
                                }
                                else
                                {
                                   sU8TPFVCounter = 0;
                                   tab_PeakLoadShifting_Time_Start[4] = '0';
                                }
                            }
                            // 起始时间的第五个数字
                            else if(Su8cursorCounter == 5)
                            {
                                if(sU8TPFVCounter <= 5)
                                {
                                   tab_PeakLoadShifting_Time_Start[6] =  '0' + sU8TPFVCounter;
                                }
                                else
                                {
                                   sU8TPFVCounter = 0;
                                   tab_PeakLoadShifting_Time_Start[6] = '0';
                                }
                            }
                            // 起始时间的第六个数字
                            else if(Su8cursorCounter == 6)
                            {
                                if(sU8TPFVCounter <= 9)
                                {
                                   tab_PeakLoadShifting_Time_Start[7] =  '0' + sU8TPFVCounter;
                                }
                                else
                                {
                                   sU8TPFVCounter = 0;
                                   tab_PeakLoadShifting_Time_Start[7] = '0';
                                }
                            }
                        break;
                        case PeakloadShifting_EndTime:
                            sU8TPFVCounter++;
                            //结束时间起始时间的第一个数字
                            if(Su8cursorCounter == 1) 
                            {
                                if(sU8TPFVCounter <= 2)
                                {
                                    tab_PeakLoadShifting_Time_End[0] =  '0' + sU8TPFVCounter;
                                }
                                else
                                {
                                    sU8TPFVCounter = 0;
                                    tab_PeakLoadShifting_Time_End[0] = '0';
                                }
                            }
                            //结束时间起始时间的第二个数字
                            else if(Su8cursorCounter == 2)     
                            {
                                if(tab_PeakLoadShifting_Time_End[0] == '2')
                                {
                                    if(sU8TPFVCounter <= 4)
                                    {
                                    }
                                    else
                                    {
                                        sU8TPFVCounter = 0;
                                    }
                                    tab_PeakLoadShifting_Time_End[1] =  '0' + sU8TPFVCounter;
                                }
                                else 
                                {
                                    if(sU8TPFVCounter <= 9)
                                    {
                                    }
                                    else
                                    {
                                        sU8TPFVCounter = 0;
                                    }
                                    tab_PeakLoadShifting_Time_End[1] =  '0' + sU8TPFVCounter;
                                }
                            }
                            // 结束时间第三个数字
                            else if(Su8cursorCounter == 3)
                            {
                                if(sU8TPFVCounter <= 5)
                                {
                                }
                                else
                                {
                                    sU8TPFVCounter = 0;
                                }
                                tab_PeakLoadShifting_Time_End[3] =  '0' + sU8TPFVCounter;
                            }
                            // 结束时间第4个数字
                            else if(Su8cursorCounter == 4)
                            {
                                if(sU8TPFVCounter <= 9)
                                {
                                    tab_PeakLoadShifting_Time_End[4] =  '0' + sU8TPFVCounter;
                                }
                                else
                                {
                                    sU8TPFVCounter = 0;
                                    tab_PeakLoadShifting_Time_End[4] = '0';
                                }
                            }
                            // 结束时间第5个数字
                            else if(Su8cursorCounter == 5)
                            {
                                if(sU8TPFVCounter <= 5)
                                {
                                }
                                else
                                {
                                    sU8TPFVCounter = 0;
                                }
                                tab_PeakLoadShifting_Time_End[6] =  '0' + sU8TPFVCounter;
                            }
                            // 结束时间第6个数字
                            else if(Su8cursorCounter == 6)
                            {
                                if(sU8TPFVCounter <= 9)
                                {
                                }
                                else
                                {
                                    sU8TPFVCounter = 0;
                                }
                                tab_PeakLoadShifting_Time_End[7] =  '0' + sU8TPFVCounter;
                            }                    
                        break;
                        case PeakloadShifting_EndSOC:
                            sU8TPFVCounter++;
                            if(Su8cursorCounter == 1)//SOC第一个数字
                            {
                                if(tab_PeakLoadShifting_SOC[0] != '1')
                                {
                                    if(sU8TPFVCounter > 1)
                                    {
                                        sU8TPFVCounter = 0;
                                    }
                                }
                                else
                                {
                                    sU8TPFVCounter = 0;
                                }
                                tab_PeakLoadShifting_SOC[0] =  '0' + sU8TPFVCounter;
                            
                                if(tab_PeakLoadShifting_SOC[0] == '1')
                                {
                                   tab_PeakLoadShifting_SOC[1] =  '0';
                                   tab_PeakLoadShifting_SOC[2] =  '0';
                                }
                            }
                            

                            else if(Su8cursorCounter == 2)//SOC第一个数字
                            {
                                if(tab_PeakLoadShifting_SOC[0] != '1')
                                {
                                    if(sU8TPFVCounter > 9)
                                    {
                                        sU8TPFVCounter = 0;
                                    }
                                }
                                else
                                {
                                    sU8TPFVCounter = 0;
                                }
                                tab_PeakLoadShifting_SOC[1] =  '0' + sU8TPFVCounter;
                            }
                            else if(Su8cursorCounter == 3)//SOC第二个数字
                            {
                                if(tab_PeakLoadShifting_SOC[0] != '1')
                                {
                                    if(sU8TPFVCounter > 9)
                                    {
                                        sU8TPFVCounter = 0;
                                    }
                                }
                                else
                                {
                                    sU8TPFVCounter = 0;
                                }
                                tab_PeakLoadShifting_SOC[2] =  '0' + sU8TPFVCounter;
                            }
                            else if(Su8cursorCounter == 0)//SOC第三个数字
                            {
                            
                                if(tab_PeakLoadShifting_SOC[0] != '1')
                                {
                                    if(sU8TPFVCounter > 9)
                                    {
                                        sU8TPFVCounter = 0;
                                    }    
                                }
                                else
                                {
                                    sU8TPFVCounter = 0;
                                }
                                tab_PeakLoadShifting_SOC[3] =  '0' + sU8TPFVCounter;
                            }
                        break;
                        case PeakloadShifting_EndPower:
                            sU8TPFVCounter++;
                            if(Su8cursorCounter == 1)   //功率第一个数字
                            {
                                if(sU8TPFVCounter > 1)
                                {
                                    tab_PeakLoadShifting_Power[0] =  '-' ;
                                    sU8TPFVCounter = 0;
                                }
                                else
                                {
                                    tab_PeakLoadShifting_Power[0] =  '+' ;
                                }
                            }
                            else if(Su8cursorCounter == 2)//功率第二个数字
                            {
                                if(tab_PeakLoadShifting_Power[1] != '6')
                                {
                                    if(sU8TPFVCounter > 9)
                                    {
                                        sU8TPFVCounter = 0;
                                    }
                                }
                                else
                                {
                                    sU8TPFVCounter = 0;
                                }
                                tab_PeakLoadShifting_Power[1] =  '0' + sU8TPFVCounter;
                            }
                            else if(Su8cursorCounter == 3)//功率第三个数字
                            {
                                if(tab_PeakLoadShifting_Power[1] != '6')
                                {
                                    if(sU8TPFVCounter > 9)
                                    {
                                        sU8TPFVCounter = 0;
                                    }
                                }
                                else
                                {
                                    sU8TPFVCounter = 0;
                                }
                                tab_PeakLoadShifting_Power[2] =  '0' + sU8TPFVCounter;
                            }
                            else if(Su8cursorCounter == 4)//功率第四个数字
                            {
                                if(tab_PeakLoadShifting_Power[1] != '6')
                                {
                                    if(sU8TPFVCounter > 9)
                                    {
                                        sU8TPFVCounter = 0;
                                    }
                                }
                                else
                                {
                                    sU8TPFVCounter = 0;
                                }
                                tab_PeakLoadShifting_Power[3] =  '0' + sU8TPFVCounter;
                            }
                            else if(Su8cursorCounter == 5)//功率第5个数字
                            {
                                if(tab_PeakLoadShifting_Power[1] != '6')
                                {
                                    if(sU8TPFVCounter > 9)
                                    {
                                        sU8TPFVCounter = 0;
                                    }
                                }
                                else
                                {
                                    sU8TPFVCounter = 0;
                                }
                                tab_PeakLoadShifting_Power[4] =  '0' + sU8TPFVCounter;
                            }
                        break;
                        default:
                            //None
                        break;
                       }
                }
                else
                {
                     ++confirm;
                    if(confirm > 1) 
                    {
                        confirm =0;
                        Display_Set_UnderLine_Blink_Position(STATUS_TRUE,arrayVarConfirmFlicker[confirm].u8StartPos,arrayVarConfirmFlicker[confirm].u8EndPos);
                    }
                    else
                    {
                        Display_Set_UnderLine_Blink_Position(STATUS_TRUE,arrayVarConfirmFlicker[confirm].u8StartPos,arrayVarConfirmFlicker[confirm].u8EndPos);
                    }
                }
            }
        break;

        case KEYACTION_UP://在系统设置界面下，UP键按下，选择对应的设置项
        if(!gbEditFlag)                                                                  //不在编辑模式下
        {                 
            sU8SetCounter--;
            if(!(sU8SetCounter>=DISPLAY_SET_ITEM_COUNT))
            {
                sU8SetCounter = DISPLAY_SET_ITEM_COUNT;
            }
            gCurrentMenu.eCurrentDisplayMenuType = nowDisplayType;
        }
        else            //在编辑模式下
        {
            if(!Flag_confirm)
            {
                switch(sU8SetCounter)
                {
                    case PeakloadShifting_StartTime:
                        sU8TPFVCounter--;
                        // 起始时间第一位
                        if(Su8cursorCounter == 1)                                       
                        {
                            if(!(sU8TPFVCounter <3))
                            {
                                sU8TPFVCounter = 2;
                            }
                            tab_PeakLoadShifting_Time_Start[0] =  '0' + sU8TPFVCounter;
                        }
                        // 起始时间第二位
                        else if(Su8cursorCounter == 2)
                        {
                            if(tab_PeakLoadShifting_Time_Start[0] == '2')
                            {
                                if(!(sU8TPFVCounter <= 4))
                                {
                                    sU8TPFVCounter = 4;
                                }
                                else
                                {
                                }
                            }
                            else 
                            {
                                if(!(sU8TPFVCounter <= 9))
                                {
                                    sU8TPFVCounter = 9;
                                }
                            }
                            tab_PeakLoadShifting_Time_Start[1] = '0' +sU8TPFVCounter;
                        }
                        // 起始时间的第三个数字
                        else if(Su8cursorCounter == 3)
                        {
                            if(!(sU8TPFVCounter <= 5))
                            {
                                sU8TPFVCounter = 5;
                            }                             
                            tab_PeakLoadShifting_Time_Start[3] =  '0' + sU8TPFVCounter;
                        }
                        // 起始时间的第四个数字
                        else if(Su8cursorCounter == 4)
                        {
                            if(!(sU8TPFVCounter <= 9))
                            {
                                sU8TPFVCounter = 9;
                            }
                            tab_PeakLoadShifting_Time_Start[4] =  '0' + sU8TPFVCounter;
                        }
                        // 起始时间的第五个数字
                        else if(Su8cursorCounter == 5)
                        {
                            if(!(sU8TPFVCounter <= 5))
                            {
                                sU8TPFVCounter = 5;
                            }
                            tab_PeakLoadShifting_Time_Start[6] =  '0' + sU8TPFVCounter;
                        }
                        // 起始时间的第六个数字
                        else if(Su8cursorCounter == 6)
                        {
                            if(!(sU8TPFVCounter <= 9))
                            {
                                sU8TPFVCounter = 9;
                            }
                            tab_PeakLoadShifting_Time_Start[7] =  '0' + sU8TPFVCounter;
                        }
                    break;
                    case PeakloadShifting_EndTime:
                        sU8TPFVCounter--;
                        // 结束时间第一位
                        if(Su8cursorCounter == 1)                                       
                        {
                            if(!(sU8TPFVCounter <3))
                            {
                                sU8TPFVCounter = 2;
                            }
                            tab_PeakLoadShifting_Time_End[0] =  '0' + sU8TPFVCounter;
                        }
                        // 结束时间第二位
                        else if(Su8cursorCounter == 2)
                        {
                            if(tab_PeakLoadShifting_Time_End[0] == '2')
                            {
                                if(!(sU8TPFVCounter <= 4))
                                {
                                    sU8TPFVCounter = 4;
                                }
                                else
                                {
                                }
                            }
                            else 
                            {
                                if(!(sU8TPFVCounter <= 9))
                                {
                                    sU8TPFVCounter = 9;
                                }
                            }
                            tab_PeakLoadShifting_Time_End[1] = '0' +sU8TPFVCounter;
                        }
                        // 结束时间的第三个数字
                        else if(Su8cursorCounter == 3)
                        {
                            if(!(sU8TPFVCounter <= 5))
                            {
                                sU8TPFVCounter = 5;
                            }                             
                            tab_PeakLoadShifting_Time_End[3] =  '0' + sU8TPFVCounter;
                        }
                        // 结束时间的第四个数字
                        else if(Su8cursorCounter == 4)
                        {
                            if(!(sU8TPFVCounter <= 9))
                            {
                                sU8TPFVCounter = 9;
                            }
                            tab_PeakLoadShifting_Time_End[4] =  '0' + sU8TPFVCounter;
                        }
                        // 结束时间的第五个数字
                        else if(Su8cursorCounter == 5)
                        {
                            if(!(sU8TPFVCounter <= 5))
                            {
                                sU8TPFVCounter = 5;
                            }
                            tab_PeakLoadShifting_Time_End[6] =  '0' + sU8TPFVCounter;
                        }
                        // 结束时间的第六个数字
                        else if(Su8cursorCounter == 6)
                        {
                            if(!(sU8TPFVCounter <= 9))
                            {
                                sU8TPFVCounter = 9;
                            }
                            tab_PeakLoadShifting_Time_End[7] =  '0' + sU8TPFVCounter;
                        }                            
                    break;
                    case PeakloadShifting_EndSOC:
                        sU8TPFVCounter--;
                        // SOC第一位
                        if(Su8cursorCounter == 1)                                       
                        {
                            if(!(sU8TPFVCounter <1))
                            {
                                sU8TPFVCounter = 1;
                            }
                            tab_PeakLoadShifting_SOC[0] =  '0' + sU8TPFVCounter;
                        }
                        // SOC第2位
                        else if(Su8cursorCounter == 2)
                        {
                            if(tab_PeakLoadShifting_SOC[0] == '1')
                            {
                                    sU8TPFVCounter = 0;
                            }
                            else 
                            {
                                if(!(sU8TPFVCounter <= 9))
                                {
                                    sU8TPFVCounter = 9;
                                }
                            }
                            tab_PeakLoadShifting_SOC[1] = '0' +sU8TPFVCounter;
                        }
                        else if(Su8cursorCounter == 3)
                        {
                            if(tab_PeakLoadShifting_SOC[0] == '1')
                            {
                                    sU8TPFVCounter = 0;
                            }
                            else 
                            {
                                if(!(sU8TPFVCounter <= 9))
                                {
                                    sU8TPFVCounter = 9;
                                }
                            }
                            tab_PeakLoadShifting_SOC[2] = '0' +sU8TPFVCounter;
                        }
                    break;
                    case PeakloadShifting_EndPower:
                        sU8TPFVCounter--;
                        // SOC第一位
                        if(Su8cursorCounter == 1)                                       
                        {
                            if(!(sU8TPFVCounter < 2))
                            {
                                sU8TPFVCounter = 1;
                                tab_PeakLoadShifting_Power[0] =  '+';
                            }
                            else
                            {
                                tab_PeakLoadShifting_Power[0] =  '-';
                            }
                        }
                        // SOC第2位
                        else if(Su8cursorCounter == 2)
                        {
                            if(!(sU8TPFVCounter <= 6))
                            {
                                sU8TPFVCounter = 6;
                            }
                            tab_PeakLoadShifting_Power[1] = '0' +sU8TPFVCounter;
                        }
                        else if(Su8cursorCounter == 3)
                        {
                            if(tab_PeakLoadShifting_Power[1] == '6')
                            {
                                    sU8TPFVCounter = 0;
                            }
                            else 
                            {
                                if(!(sU8TPFVCounter <= 9))
                                {
                                    sU8TPFVCounter = 9;
                                }
                            }
                            tab_PeakLoadShifting_Power[2] = '0' +sU8TPFVCounter;
                        }
                        else if(Su8cursorCounter == 4)
                        {
                            if(tab_PeakLoadShifting_Power[1] == '6')
                            {
                                    sU8TPFVCounter = 0;
                            }
                            else 
                            {
                                if(!(sU8TPFVCounter <= 9))
                                {
                                    sU8TPFVCounter = 9;
                                }
                            }
                            tab_PeakLoadShifting_Power[3] = '0' +sU8TPFVCounter;
                        }
                        else if(Su8cursorCounter == 5)
                        {
                            if(tab_PeakLoadShifting_Power[1] == '6')
                            {
                                    sU8TPFVCounter = 0;
                            }
                            else 
                            {
                                if(!(sU8TPFVCounter <= 9))
                                {
                                    sU8TPFVCounter = 9;
                                }
                            }
                            tab_PeakLoadShifting_Power[4] = '0' +sU8TPFVCounter;
                        }
                    break;
                    default:
                    {
                        gCurrentMenu.eCurrentDisplayMenuType = nowDisplayType;                
                    }
                }
            }
            else
            {
                confirm++;
                if(confirm > 1) 
                {
                    confirm =0;
                    Display_Set_UnderLine_Blink_Position(STATUS_TRUE,arrayVarConfirmFlicker[confirm].u8StartPos,arrayVarConfirmFlicker[confirm].u8EndPos);
                }
                else
                {
                    Display_Set_UnderLine_Blink_Position(STATUS_TRUE,arrayVarConfirmFlicker[confirm].u8StartPos,arrayVarConfirmFlicker[confirm].u8EndPos);
                }
            }
                 
        }
        break;
        case KEYACTION_ESC://在系统设置界面下，ESC键按下，返回设置界面
        {
            if(!gbEditFlag)  
            {
                //本次界面操作类型
                sU8SetCounter = 0;      
                Su8cursorCounter = 0; //光标    
                sU8TPFVCounter  = 0;  // 数值指示位     
                Flag_confirm  = STATUS_FALSE;           //确认标志     
                confirm = 0;              //确认保存
                gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_SET_SYSTEM_STRATEGY_TPFV;
            }
            else
            {
                //进入确认模式
                Flag_confirm = STATUS_TRUE;
                confirm = 1;
                // 关闭输入光标
                Display_Set_UnderLine_Blink_Position(STATUS_FALSE,arrayTPFVStartegyFlicker[Su8cursorCounter].u8StartPos,arrayTPFVStartegyFlicker[Su8cursorCounter].u8EndPos);
                // 开启选择光标
                Display_Set_UnderLine_Blink_Position(STATUS_TRUE,arrayVarConfirmFlicker[0].u8StartPos,arrayVarConfirmFlicker[0].u8EndPos);
            }
        }
        break;
        case KEYACTION_NULL://无操作刷新主界面数据
        default:
        {
               gCurrentMenu.eCurrentDisplayMenuType = nowDisplayType;                
        }
        break;
        }
    }
    if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_ENGLISH) //系统设置界面SystemSet 英文界面组装
    { 
        if(Flag_confirm)
        {
            memset(tab_display,0,DISPLAY_CACHE_SIZE);
            sprintf(tab_display,"                     \n   Sure Or Cancel ?  \n                    \n                    \n");
            //GUI_DispStringAt((uint8_t*)tab_display, 0, 0);  
            GUI_Display(tab_display, 0, 0);
        }
        else
        {
            updateDisplayPeakLoadShiftingPEAKVALLEYSetData_English(sU8SetCounter,enum_tpfv);        
        }
    }
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_CHINESE)//系统设置界面SystemSet 中文界面组装
    {
       updateDisplayPeakLoadShiftingPEAKVALLEYSetData_Chinese(sU8SetCounter,enum_tpfv);
    }
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_SPANISH)//系统设置界面SystemSet 西班牙界面组装 
    {
       updateDisplayPeakLoadShiftingPEAKVALLEYSetData_Spanish(sU8SetCounter,enum_tpfv);  
    } 
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_GERMAN)//系统设置界面SystemSet 德语界面组装
    {
       updateDisplayPeakLoadShiftingPEAKVALLEYSetData_German(sU8SetCounter,enum_tpfv);  
    } 
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_FRENCH)//系统设置界面SystemSet 法语界面组装
    {
       updateDisplayPeakLoadShiftingPEAKVALLEYSetData_French(sU8SetCounter,enum_tpfv);    
    }
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_POLISH)//系统设置界面SystemSet 波兰界面组装
    {
       updateDisplayPeakLoadShiftingPEAKVALLEYSetData_Polish(sU8SetCounter,enum_tpfv); 
    } 
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_ITALIAN)//系统设置界面SystemSet 意大利界面组装
    {
      updateDisplayPeakLoadShiftingPEAKVALLEYSetData_Italian(sU8SetCounter,enum_tpfv);  
    }   
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_CZECH)//系统设置界面SystemSet 捷克界面组装
    {
       updateDisplayPeakLoadShiftingPEAKVALLEYSetData_Czech(sU8SetCounter,enum_tpfv);   
    }  
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_DUTCH)//系统设置界面SystemSet 荷兰界面组装
    {
       updateDisplayPeakLoadShiftingPEAKVALLEYSetData_Dutch(sU8SetCounter,enum_tpfv);   
    }
    else
    { 
       updateDisplayPeakLoadShiftingPEAKVALLEYSetData_English(sU8SetCounter,enum_tpfv);        
    }
}
/***************************************************************************
 功能:削峰填谷 中文界面
****************************************************************************/
void updateDisplayPeakLoadShiftingPEAKVALLEYSetData_Chinese(uint8_t u8SetIndex,PeaksValleys_TypeDef enum_tpfv)
{

}
/***************************************************************************
 功能:削峰填谷 英文界面
****************************************************************************/
void updateDisplayPeakLoadShiftingPEAKVALLEYSetData_English(uint8_t u8SetIndex,PeaksValleys_TypeDef enum_tpfv)
{
    memset(tab_display,0,DISPLAY_CACHE_SIZE);
    
    if(enum_tpfv ==  STRATEGY_TPFV_PEAK_PERIOD_ONE)
    {
        // 开始时间
        if(u8SetIndex == PeakloadShifting_StartTime)
        {
                sprintf(tab_display,"    PEAK Time 1      \n->Start T:%s   \nEnd T:%s       \nSOC:%s           \n",tab_PeakLoadShifting_Time_Start,tab_PeakLoadShifting_Time_End,tab_PeakLoadShifting_SOC); 
        }
        // 结束时间
        else if(u8SetIndex == PeakloadShifting_EndTime)
        {
                sprintf(tab_display,"    PEAK Time 1      \nStart T:%s     \n->End T:%s     \nSOC:%s            \n",tab_PeakLoadShifting_Time_Start,tab_PeakLoadShifting_Time_End,tab_PeakLoadShifting_SOC); 
        }
        // 停止SOC
        else if(u8SetIndex == PeakloadShifting_EndSOC)
        {
                sprintf(tab_display,"    PEAK Time 1      \nStart T:%s     \nEnd T:%s       \n->SOC:%s           \n",tab_PeakLoadShifting_Time_Start,tab_PeakLoadShifting_Time_End,tab_PeakLoadShifting_SOC); 
        }
        // 限制功率
        else if(u8SetIndex == PeakloadShifting_EndPower)
        {
                sprintf(tab_display,"    PEAK Time 1      \nEnd T:%s       \nSOC:%s              \n->Power:%s   \n",tab_PeakLoadShifting_Time_End,tab_PeakLoadShifting_SOC,tab_PeakLoadShifting_Power); 
        }

    }
    else if(enum_tpfv ==  STRATEGY_TPFV_PEAK_PERIOD_TWO)
    {
        // 开始时间
        if(u8SetIndex == PeakloadShifting_StartTime)
        {
                sprintf(tab_display,"    PEAK Time 2      \n->Start T:%s   \nEnd T:%s       \nSOC:%s           \n",tab_PeakLoadShifting_Time_Start,tab_PeakLoadShifting_Time_End,tab_PeakLoadShifting_SOC); 
        }
        // 结束时间
        else if(u8SetIndex == PeakloadShifting_EndTime)
        {
                sprintf(tab_display,"    PEAK Time 2      \nStart T:%s     \n->End T:%s     \nSOC:%s            \n",tab_PeakLoadShifting_Time_Start,tab_PeakLoadShifting_Time_End,tab_PeakLoadShifting_SOC); 
        }
        // 停止SOC
        else if(u8SetIndex == PeakloadShifting_EndSOC)
        {
                sprintf(tab_display,"    PEAK Time 2      \nStart T:%s     \nEnd T:%s       \n->SOC:%s           \n",tab_PeakLoadShifting_Time_Start,tab_PeakLoadShifting_Time_End,tab_PeakLoadShifting_SOC); 
        }
        // 限制功率
        else if(u8SetIndex == PeakloadShifting_EndPower)
        {
                sprintf(tab_display,"    PEAK Time 2      \nEnd T:%s       \nSOC:%s              \n->Power:%s   \n",tab_PeakLoadShifting_Time_End,tab_PeakLoadShifting_SOC,tab_PeakLoadShifting_Power); 
        }
    }
    else if(enum_tpfv ==  STRATEGY_TPFV_PEAK_PERIOD_THREE)
    {
        // 开始时间
        if(u8SetIndex == PeakloadShifting_StartTime)
        {
        		sprintf(tab_display,"    PEAK Time 3      \n->Start T:%s   \nEnd T:%s       \nSOC:%s           \n",tab_PeakLoadShifting_Time_Start,tab_PeakLoadShifting_Time_End,tab_PeakLoadShifting_SOC); 
        }
        // 结束时间
        else if(u8SetIndex == PeakloadShifting_EndTime)
        {
        		sprintf(tab_display,"    PEAK Time 3      \nStart T:%s     \n->End T:%s     \nSOC:%s            \n",tab_PeakLoadShifting_Time_Start,tab_PeakLoadShifting_Time_End,tab_PeakLoadShifting_SOC); 
        }
        // 停止SOC
        else if(u8SetIndex == PeakloadShifting_EndSOC)
        {
        		sprintf(tab_display,"    PEAK Time 3      \nStart T:%s     \nEnd T:%s       \n->SOC:%s           \n",tab_PeakLoadShifting_Time_Start,tab_PeakLoadShifting_Time_End,tab_PeakLoadShifting_SOC); 
        }
        // 限制功率
        else if(u8SetIndex == PeakloadShifting_EndPower)
        {
        		sprintf(tab_display,"    PEAK Time 3      \nEnd T:%s       \nSOC:%s              \n->Power:%s   \n",tab_PeakLoadShifting_Time_End,tab_PeakLoadShifting_SOC,tab_PeakLoadShifting_Power); 
        }
    }
    else if(enum_tpfv ==  STRATEGY_TPFV_VALLEY_PERIOD_ONE)
    {
        // 开始时间
        if(u8SetIndex == PeakloadShifting_StartTime)
        {
                sprintf(tab_display,"    VALLEY Time 1    \n->Start T:%s   \nEnd T:%s       \nSOC:%s           \n",tab_PeakLoadShifting_Time_Start,tab_PeakLoadShifting_Time_End,tab_PeakLoadShifting_SOC); 
        }
        // 结束时间
        else if(u8SetIndex == PeakloadShifting_EndTime)
        {
                sprintf(tab_display,"    VALLEY Time 1    \nStart T:%s     \n->End T:%s     \nSOC:%s            \n",tab_PeakLoadShifting_Time_Start,tab_PeakLoadShifting_Time_End,tab_PeakLoadShifting_SOC); 
        }
        // 停止SOC
        else if(u8SetIndex == PeakloadShifting_EndSOC)
        {
                sprintf(tab_display,"    VALLEY Time 1    \nStart T:%s     \nEnd T:%s       \n->SOC:%s           \n",tab_PeakLoadShifting_Time_Start,tab_PeakLoadShifting_Time_End,tab_PeakLoadShifting_SOC); 
        }
        // 限制功率
        else if(u8SetIndex == PeakloadShifting_EndPower)
        {
                sprintf(tab_display,"    VALLEY Time 1    \nEnd T:%s       \nSOC:%s              \n->Power:%s   \n",tab_PeakLoadShifting_Time_End,tab_PeakLoadShifting_SOC,tab_PeakLoadShifting_Power); 
        }
    }
    else if(enum_tpfv ==  STRATEGY_TPFV_VALLEY_PERIOD_TWO)
    {
        // 开始时间
        if(u8SetIndex == PeakloadShifting_StartTime)
        {
                sprintf(tab_display,"    VALLEY Time 2    \n->Start T:%s   \nEnd T:%s       \nSOC:%s           \n",tab_PeakLoadShifting_Time_Start,tab_PeakLoadShifting_Time_End,tab_PeakLoadShifting_SOC); 
        }
        // 结束时间
        else if(u8SetIndex == PeakloadShifting_EndTime)
        {
                sprintf(tab_display,"    VALLEY Time 2    \nStart T:%s     \n->End T:%s     \nSOC:%s            \n",tab_PeakLoadShifting_Time_Start,tab_PeakLoadShifting_Time_End,tab_PeakLoadShifting_SOC); 
        }
        // 停止SOC
        else if(u8SetIndex == PeakloadShifting_EndSOC)
        {
                sprintf(tab_display,"    VALLEY Time 2    \nStart T:%s     \nEnd T:%s       \n->SOC:%s           \n",tab_PeakLoadShifting_Time_Start,tab_PeakLoadShifting_Time_End,tab_PeakLoadShifting_SOC); 
        }
        // 限制功率
        else if(u8SetIndex == PeakloadShifting_EndPower)
        {
                sprintf(tab_display,"    VALLEY Time 2    \nEnd T:%s       \nSOC:%s              \n->Power:%s   \n",tab_PeakLoadShifting_Time_End,tab_PeakLoadShifting_SOC,tab_PeakLoadShifting_Power); 
        }

    }
    else if(enum_tpfv ==  STRATEGY_TPFV_VALLEY_PERIOD_THREE)
    {
        // 开始时间
        if(u8SetIndex == PeakloadShifting_StartTime)
        {
                sprintf(tab_display,"    VALLEY Time 3    \n->Start T:%s   \nEnd T:%s       \nSOC:%s           \n",tab_PeakLoadShifting_Time_Start,tab_PeakLoadShifting_Time_End,tab_PeakLoadShifting_SOC); 
        }
        // 结束时间
        else if(u8SetIndex == PeakloadShifting_EndTime)
        {
                sprintf(tab_display,"    VALLEY Time 3    \nStart T:%s     \n->End T:%s     \nSOC:%s            \n",tab_PeakLoadShifting_Time_Start,tab_PeakLoadShifting_Time_End,tab_PeakLoadShifting_SOC); 
        }
        // 停止SOC
        else if(u8SetIndex == PeakloadShifting_EndSOC)
        {
                sprintf(tab_display,"    VALLEY Time 3    \nStart T:%s     \nEnd T:%s       \n->SOC:%s           \n",tab_PeakLoadShifting_Time_Start,tab_PeakLoadShifting_Time_End,tab_PeakLoadShifting_SOC); 
        }
        // 限制功率
        else if(u8SetIndex == PeakloadShifting_EndPower)
        {
                sprintf(tab_display,"    VALLEY Time 3    \nEnd T:%s       \nSOC:%s              \n->Power:%s   \n",tab_PeakLoadShifting_Time_End,tab_PeakLoadShifting_SOC,tab_PeakLoadShifting_Power); 
        }

    }
    else
    {
        //None
    } 
    GUI_Display(tab_display, 0, 0);
}
/***************************************************************************
 功能:峰谷时间1 西班牙界面 
****************************************************************************/
void updateDisplayPeakLoadShiftingPEAKVALLEYSetData_Spanish(uint8_t u8SetIndex,PeaksValleys_TypeDef enum_tpfv)
{

}
/***************************************************************************
 功能:峰谷时间1 德语SET界面 
****************************************************************************/
void updateDisplayPeakLoadShiftingPEAKVALLEYSetData_German(uint8_t u8SetIndex,PeaksValleys_TypeDef enum_tpfv)
{

}
/***************************************************************************
 功能:峰谷时间1 法语界面
****************************************************************************/
void updateDisplayPeakLoadShiftingPEAKVALLEYSetData_French(uint8_t u8SetIndex,PeaksValleys_TypeDef enum_tpfv)
{

}
/***************************************************************************
 功能:峰谷时间1 波兰SET界面
****************************************************************************/
void updateDisplayPeakLoadShiftingPEAKVALLEYSetData_Polish(uint8_t u8SetIndex,PeaksValleys_TypeDef enum_tpfv)
{

}
/***************************************************************************
 功能:峰谷时间1 意大利SET界面
****************************************************************************/
void updateDisplayPeakLoadShiftingPEAKVALLEYSetData_Italian(uint8_t u8SetIndex,PeaksValleys_TypeDef enum_tpfv)
{

}
/***************************************************************************
 功能:峰谷时间1 捷克SET界面
****************************************************************************/
void updateDisplayPeakLoadShiftingPEAKVALLEYSetData_Czech(uint8_t u8SetIndex,PeaksValleys_TypeDef enum_tpfv)
{

}
/***************************************************************************
 功能:峰谷时间1 荷兰SET界面
****************************************************************************/
void updateDisplayPeakLoadShiftingPEAKVALLEYSetData_Dutch(uint8_t u8SetIndex,PeaksValleys_TypeDef enum_tpfv)
{

}

/***************************************************************************
 功能:定时充放电 
****************************************************************************/
void updateDisplayRegularChargingandDischargingSetData(KeyAction_TypeDef nowActionType,DisplayAction_TypeDef nowDisplayType,PeaksValleys_TypeDef enum_tpfv)
{
    //本次界面操作类型
    static uint8_t sU8SetCounter = 0;
    static uint8_t Su8cursorCounter = 0;                    //光标
    static uint8_t sU8TPFVCounter  = 0;                     // 数值指示位
    static bool_t  Flag_confirm  = STATUS_FALSE;           //确认标志
    static uint8_t confirm = 0;                             //确认保存
    gLastMenu.eLastDisplayMenuType = DISPLAY_SET_SYSTEM_STRATEGY_REGULAR;          
    switch(nowActionType) 
    {
        case KEYACTION_ENTER://在系统设置界面下，Enter键按下，进入选择对应的设置项
        {
            if(!Flag_confirm)
            {
                sU8TPFVCounter = 0;    // 从0开始
                // 开始时间
                if(sU8SetCounter == RegularTiming_StartTime)
                {
                    Su8cursorCounter++; //光标选择 第一次进来为1  
                    if(Su8cursorCounter > 6)
                    {
                        Su8cursorCounter = 1;   
                    }
                    Display_Set_UnderLine_Blink_Position(STATUS_TRUE,arrayFixPeakPeriodStartTimeParaFlicker[Su8cursorCounter -1].u8StartPos,arrayFixPeakPeriodStartTimeParaFlicker[Su8cursorCounter -1].u8EndPos);
                    gbEditFlag = STATUS_TRUE; //进入编辑模式
                }
                // 结束时间
                else if(sU8SetCounter == RegularTiming_StartTime)
                {
                    Su8cursorCounter++; //光标选择 
                    if(Su8cursorCounter > 6)
                    {
                        Su8cursorCounter = 1;
                    }
                    Display_Set_UnderLine_Blink_Position(STATUS_TRUE,arrayFixPeakPeriodEndTimeParaFlicker[Su8cursorCounter -1].u8StartPos,arrayFixPeakPeriodEndTimeParaFlicker[Su8cursorCounter -1].u8EndPos);
                    gbEditFlag = STATUS_TRUE; //进入编辑模式
                }
            }
            else
            {
                if(confirm == 1)
                {   
                    //开始时间的保存数据
                    if(sU8SetCounter == RegularTiming_StartTime)
                    {
                        //保存数据
                        gDisplay.stDisplaySet.stStrategy.stTimerStrategy.stChargePeriod.stPeriod1.u8StopSOC = atoi(tab_RegularStop_SOC_modify);
                        char tabTempTime[3] = {""};
                        tabTempTime[0] = tab_PeakLoadShifting_Time_Start[0];
                        tabTempTime[1] = tab_PeakLoadShifting_Time_Start[1];
                        uint16_t u16StartHour = atoi(tabTempTime); 

                        tabTempTime[0] = tab_PeakLoadShifting_Time_Start[3];
                        tabTempTime[1] = tab_PeakLoadShifting_Time_Start[4];
                        uint16_t u16StartMin = atoi(tabTempTime); 

                        tabTempTime[0] = tab_PeakLoadShifting_Time_Start[6];
                        tabTempTime[1] = tab_PeakLoadShifting_Time_Start[7];
                        uint16_t u16StartSec = atoi(tabTempTime); 
                        if(enum_tpfv ==  STRATEGY_TIMERSTRATEGY_CHARGE_ONE)
                        {
                            gDisplay.stDisplaySet.stStrategy.stTimerStrategy.stChargePeriod.stPeriod1.stPeriod.u8EndHour = u16StartHour;
                            gDisplay.stDisplaySet.stStrategy.stTimerStrategy.stChargePeriod.stPeriod1.stPeriod.u8StartMin = u16StartMin;
                            gDisplay.stDisplaySet.stStrategy.stTimerStrategy.stChargePeriod.stPeriod1.stPeriod.u8StartSec = u16StartSec;
                            generateOperationRecord(RECORD_SET_TPFV_PEAK_PERIOD_ONE); 
                        }
                        else if(enum_tpfv ==  STRATEGY_TIMERSTRATEGY_CHARGE_TWO)
                        {
                            gDisplay.stDisplaySet.stStrategy.stTimerStrategy.stChargePeriod.stPeriod2.stPeriod.u8EndHour = u16StartHour;
                            gDisplay.stDisplaySet.stStrategy.stTimerStrategy.stChargePeriod.stPeriod2.stPeriod.u8StartMin = u16StartMin;
                            gDisplay.stDisplaySet.stStrategy.stTimerStrategy.stChargePeriod.stPeriod2.stPeriod.u8StartSec = u16StartSec;
                            generateOperationRecord(RECORD_SET_TPFV_PEAK_PERIOD_TWO); 
                        }
                        else if(enum_tpfv ==  STRATEGY_TIMERSTRATEGY_CHARGE_THREE)
                        {
                            gDisplay.stDisplaySet.stStrategy.stTimerStrategy.stChargePeriod.stPeriod3.stPeriod.u8EndHour = u16StartHour;
                            gDisplay.stDisplaySet.stStrategy.stTimerStrategy.stChargePeriod.stPeriod3.stPeriod.u8StartMin = u16StartMin;
                            gDisplay.stDisplaySet.stStrategy.stTimerStrategy.stChargePeriod.stPeriod3.stPeriod.u8StartSec = u16StartSec;
                            generateOperationRecord(RECORD_SET_TPFV_PEAK_PERIOD_THREE); 
                        }
                        else
                        {
                            //None
                        }
                        Display_Set_UnderLine_Blink_Position(STATUS_FALSE,arrayVarConfirmFlicker[confirm].u8StartPos,arrayVarConfirmFlicker[confirm].u8EndPos);
                        gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_SET_SYSTEM_STRATEGY_TPFV;
                        // 关闭编辑模式
                    }
                    else if(sU8SetCounter == RegularTiming_EndTime)
                    {
                    
                        char tabTempTime[3] = {""};
                        tabTempTime[0] = tab_PeakLoadShifting_Time_End[0];
                        tabTempTime[1] = tab_PeakLoadShifting_Time_End[1];
                        uint16_t u16EndHour = atoi(tabTempTime); 
                        
                        tabTempTime[0] = tab_PeakLoadShifting_Time_End[3];
                        tabTempTime[1] = tab_PeakLoadShifting_Time_End[4];
                        uint16_t u16EndMin = atoi(tabTempTime); 
                        
                        tabTempTime[0] = tab_PeakLoadShifting_Time_End[6];
                        tabTempTime[1] = tab_PeakLoadShifting_Time_End[7];
                        
                        uint16_t u16EndSec = atoi(tabTempTime);
                        if(enum_tpfv ==  STRATEGY_TPFV_PEAK_PERIOD_ONE)
                        {
                            gDisplay.stDisplaySet.stStrategy.stTimerStrategy.stDisChargePeriod.stPeriod1.stPeriod.u8EndHour = u16EndHour;
                            gDisplay.stDisplaySet.stStrategy.stTimerStrategy.stDisChargePeriod.stPeriod1.stPeriod.u8StartMin = u16EndMin;
                            gDisplay.stDisplaySet.stStrategy.stTimerStrategy.stDisChargePeriod.stPeriod1.stPeriod.u8StartSec = u16EndSec;
                            generateOperationRecord(RECORD_SET_TPFV_PEAK_PERIOD_ONE); 
                        }
                        else if(enum_tpfv ==  STRATEGY_TPFV_PEAK_PERIOD_TWO)
                        {
                            gDisplay.stDisplaySet.stStrategy.stTimerStrategy.stDisChargePeriod.stPeriod2.stPeriod.u8EndHour = u16EndHour;
                            gDisplay.stDisplaySet.stStrategy.stTimerStrategy.stDisChargePeriod.stPeriod2.stPeriod.u8StartMin = u16EndMin;
                            gDisplay.stDisplaySet.stStrategy.stTimerStrategy.stDisChargePeriod.stPeriod2.stPeriod.u8StartSec = u16EndSec;
                            generateOperationRecord(RECORD_SET_TPFV_PEAK_PERIOD_TWO); 
                        }
                        else if(enum_tpfv ==  STRATEGY_TPFV_PEAK_PERIOD_THREE)
                        {
                            gDisplay.stDisplaySet.stStrategy.stTimerStrategy.stDisChargePeriod.stPeriod3.stPeriod.u8EndHour = u16EndHour;
                            gDisplay.stDisplaySet.stStrategy.stTimerStrategy.stDisChargePeriod.stPeriod3.stPeriod.u8StartMin = u16EndMin;
                            gDisplay.stDisplaySet.stStrategy.stTimerStrategy.stDisChargePeriod.stPeriod3.stPeriod.u8StartSec = u16EndSec;
                            generateOperationRecord(RECORD_SET_TPFV_PEAK_PERIOD_THREE); 
                        }
                        if(enum_tpfv ==  STRATEGY_TPFV_VALLEY_PERIOD_ONE)
                        {
                            gDisplay.stDisplaySet.stStrategy.stTimerStrategy.stDisChargePeriod.stPeriod1.stPeriod.u8EndHour = u16EndHour;
                            gDisplay.stDisplaySet.stStrategy.stTimerStrategy.stDisChargePeriod.stPeriod1.stPeriod.u8StartMin = u16EndMin;
                            gDisplay.stDisplaySet.stStrategy.stTimerStrategy.stDisChargePeriod.stPeriod1.stPeriod.u8StartSec = u16EndSec;
                            generateOperationRecord(RECORD_SET_TPFV_VALLEY_PERIOD_ONE); 
                        }
                        else if(enum_tpfv ==  STRATEGY_TPFV_VALLEY_PERIOD_TWO)
                        {
                            gDisplay.stDisplaySet.stStrategy.stTimerStrategy.stDisChargePeriod.stPeriod2.stPeriod.u8EndHour = u16EndHour;
                            gDisplay.stDisplaySet.stStrategy.stTimerStrategy.stDisChargePeriod.stPeriod2.stPeriod.u8StartMin = u16EndMin;
                            gDisplay.stDisplaySet.stStrategy.stTimerStrategy.stDisChargePeriod.stPeriod2.stPeriod.u8StartSec = u16EndSec;
                            generateOperationRecord(RECORD_SET_TPFV_VALLEY_PERIOD_TWO); 
                        }
                        else if(enum_tpfv ==  STRATEGY_TPFV_VALLEY_PERIOD_THREE)
                        {
                            gDisplay.stDisplaySet.stStrategy.stTimerStrategy.stDisChargePeriod.stPeriod3.stPeriod.u8EndHour = u16EndHour;
                            gDisplay.stDisplaySet.stStrategy.stTimerStrategy.stDisChargePeriod.stPeriod3.stPeriod.u8StartMin = u16EndMin;
                            gDisplay.stDisplaySet.stStrategy.stTimerStrategy.stDisChargePeriod.stPeriod3.stPeriod.u8StartSec = u16EndSec;
                            generateOperationRecord(RECORD_SET_TPFV_VALLEY_PERIOD_THREE); 
                        }
                        else
                        {
                            //None
                        } 
                        Display_Set_UnderLine_Blink_Position(STATUS_FALSE,arrayVarConfirmFlicker[confirm-1].u8StartPos,arrayVarConfirmFlicker[confirm-1].u8EndPos);
                        gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_SET_SYSTEM_STRATEGY_TPFV;

                    }
                    else if(sU8SetCounter == PeakloadShifting_EndSOC)
                    {
                        if(enum_tpfv ==  STRATEGY_TPFV_PEAK_PERIOD_ONE)
                        {
                            gDisplay.stDisplaySet.stStrategy.stTimerStrategy.stChargePeriod.stPeriod1.s16Power = atoi(tab_PeakLoadShifting_SOC) * 1;
                            // 生成一条操作记录
                            generateOperationRecord(RECORD_SET_TPFV_PEAK_PERIOD_ONE); 
                        }
                        else if(enum_tpfv ==  STRATEGY_TPFV_PEAK_PERIOD_TWO)
                        {

                        }
                        else if(enum_tpfv ==  STRATEGY_TPFV_PEAK_PERIOD_THREE)
                        {

                        }
                        if(enum_tpfv ==  STRATEGY_TPFV_VALLEY_PERIOD_ONE)
                        {

                        }
                        else if(enum_tpfv ==  STRATEGY_TPFV_VALLEY_PERIOD_TWO)
                        {

                        }
                        else if(enum_tpfv ==  STRATEGY_TPFV_VALLEY_PERIOD_THREE)
                        {

                        }
                        else
                        {
                            //None
                        } 
                        Display_Set_UnderLine_Blink_Position(STATUS_FALSE,arrayVarConfirmFlicker[confirm-1].u8StartPos,arrayVarConfirmFlicker[confirm-1].u8EndPos);
                        gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_SET_SYSTEM_STRATEGY_TPFV;
                    }
                    else if(sU8SetCounter == PeakloadShifting_EndPower)
                    {
                        gDisplay.stDisplaySet.stStrategy.stTimerStrategy.stChargePeriod.stPeriod1.s16Power = atoi(tab_PeakLoadShifting_Power) * 1;
                        // 生成一条操作记录
                        generateOperationRecord(RECORD_SET_TPFV_PEAK_PERIOD_ONE); 
                        Display_Set_UnderLine_Blink_Position(STATUS_FALSE,arrayVarConfirmFlicker[confirm-1].u8StartPos,arrayVarConfirmFlicker[confirm-1].u8EndPos);
                        gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_SET_SYSTEM_STRATEGY_TPFV;
                    }    
                    else
                    {
                        Display_Set_UnderLine_Blink_Position(STATUS_FALSE,arrayVarConfirmFlicker[confirm-1].u8StartPos,arrayVarConfirmFlicker[confirm-1].u8EndPos);
                        gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_SET_SYSTEM_STRATEGY_TPFV;
                        //取消
                    }                  
                    gbEditFlag = STATUS_FALSE;                                  //进入编辑模式
                }
            }
        break;
        case KEYACTION_DOWN:                                                                 //在系统设置界面下，DOWN键按下，选择对应的设置项
            if(!gbEditFlag)                                                                  //不在编辑模式下
            {                 
                sU8SetCounter++;
                if(sU8SetCounter>=DISPLAY_SET_ITEM_COUNT)
                {
                    sU8SetCounter = 1;
                }
                gCurrentMenu.eCurrentDisplayMenuType = nowDisplayType;
            }
            else            //在编辑模式下
            {
                if(!Flag_confirm)
                {
                    switch(sU8SetCounter)
                    {
                        case PeakloadShifting_StartTime:
                            sU8TPFVCounter++;
                            // 起始时间第一位
                            if(Su8cursorCounter == 1)                                       
                            {
                                if(sU8TPFVCounter <= 2)
                                {
                                    tab_PeakLoadShifting_Time_Start[0] =  '0' + sU8TPFVCounter;
                                }
                                else
                                {
                                    sU8TPFVCounter = 0;
                                    tab_PeakLoadShifting_Time_Start[0] = '0';
                                }
                            }
                            // 起始时间第二位
                            else if(Su8cursorCounter == 2)
                            {
                                if(tab_PeakLoadShifting_Time_Start[0] == '2')
                                {
                                    if(sU8TPFVCounter <= 4)
                                    {
                                        tab_PeakLoadShifting_Time_Start[1] =  '0' + sU8TPFVCounter;
                                    }
                                    else
                                    {
                                        sU8TPFVCounter = 0;
                                        tab_PeakLoadShifting_Time_Start[1] = '0';
                                    }
                                }
                                else 
                                {
                                    if(sU8TPFVCounter <= 9)
                                    {
                                        tab_PeakLoadShifting_Time_Start[1] =  '0' + sU8TPFVCounter;
                                    }
                                    else
                                    {
                                        sU8TPFVCounter = 0;
                                        tab_PeakLoadShifting_Time_Start[1] = '0';
                                    }
                                }
                            }
                            // 起始时间的第三个数字
                            else if(Su8cursorCounter == 3)
                            {
                                if(sU8TPFVCounter <= 5)
                                {
                                    tab_PeakLoadShifting_Time_Start[3] =  '0' + sU8TPFVCounter;
                                }
                                else
                                {
                                    sU8TPFVCounter = 0;
                                    tab_PeakLoadShifting_Time_Start[3] = '0';
                                }
                            }
                            // 起始时间的第四个数字
                            else if(Su8cursorCounter == 4)
                            {
                                if(sU8TPFVCounter <= 9)
                                {
                                       tab_PeakLoadShifting_Time_Start[4] =  '0' + sU8TPFVCounter;
                                }
                                else
                                {
                                   sU8TPFVCounter = 0;
                                   tab_PeakLoadShifting_Time_Start[4] = '0';
                                }
                            }
                            // 起始时间的第五个数字
                            else if(Su8cursorCounter == 5)
                            {
                                if(sU8TPFVCounter <= 5)
                                {
                                   tab_PeakLoadShifting_Time_Start[6] =  '0' + sU8TPFVCounter;
                                }
                                else
                                {
                                   sU8TPFVCounter = 0;
                                   tab_PeakLoadShifting_Time_Start[6] = '0';
                                }
                            }
                            // 起始时间的第六个数字
                            else if(Su8cursorCounter == 6)
                            {
                                if(sU8TPFVCounter <= 9)
                                {
                                   tab_PeakLoadShifting_Time_Start[7] =  '0' + sU8TPFVCounter;
                                }
                                else
                                {
                                   sU8TPFVCounter = 0;
                                   tab_PeakLoadShifting_Time_Start[7] = '0';
                                }
                            }
                        break;
                        case PeakloadShifting_EndTime:
                            sU8TPFVCounter++;
                            //结束时间起始时间的第一个数字
                            if(Su8cursorCounter == 1) 
                            {
                                if(sU8TPFVCounter <= 2)
                                {
                                    tab_PeakLoadShifting_Time_End[0] =  '0' + sU8TPFVCounter;
                                }
                                else
                                {
                                    sU8TPFVCounter = 0;
                                    tab_PeakLoadShifting_Time_End[0] = '0';
                                }
                            }
                            //结束时间起始时间的第二个数字
                            else if(Su8cursorCounter == 2)     
                            {
                                if(tab_PeakLoadShifting_Time_End[0] == '2')
                                {
                                    if(sU8TPFVCounter <= 4)
                                    {
                                    }
                                    else
                                    {
                                        sU8TPFVCounter = 0;
                                    }
                                    tab_PeakLoadShifting_Time_End[1] =  '0' + sU8TPFVCounter;
                                }
                                else 
                                {
                                    if(sU8TPFVCounter <= 9)
                                    {
                                    }
                                    else
                                    {
                                        sU8TPFVCounter = 0;
                                    }
                                    tab_PeakLoadShifting_Time_End[1] =  '0' + sU8TPFVCounter;
                                }
                            }
                            // 结束时间第三个数字
                            else if(Su8cursorCounter == 3)
                            {
                                if(sU8TPFVCounter <= 5)
                                {
                                }
                                else
                                {
                                    sU8TPFVCounter = 0;
                                }
                                tab_PeakLoadShifting_Time_End[3] =  '0' + sU8TPFVCounter;
                            }
                            // 结束时间第4个数字
                            else if(Su8cursorCounter == 4)
                            {
                                if(sU8TPFVCounter <= 9)
                                {
                                    tab_PeakLoadShifting_Time_End[4] =  '0' + sU8TPFVCounter;
                                }
                                else
                                {
                                    sU8TPFVCounter = 0;
                                    tab_PeakLoadShifting_Time_End[4] = '0';
                                }
                            }
                            // 结束时间第5个数字
                            else if(Su8cursorCounter == 5)
                            {
                                if(sU8TPFVCounter <= 5)
                                {
                                }
                                else
                                {
                                    sU8TPFVCounter = 0;
                                }
                                tab_PeakLoadShifting_Time_End[6] =  '0' + sU8TPFVCounter;
                            }
                            // 结束时间第6个数字
                            else if(Su8cursorCounter == 6)
                            {
                                if(sU8TPFVCounter <= 9)
                                {
                                }
                                else
                                {
                                    sU8TPFVCounter = 0;
                                }
                                tab_PeakLoadShifting_Time_End[7] =  '0' + sU8TPFVCounter;
                            }                    
                        break;
                        default:
                            //None
                        break;
                       }
                }
                else
                {
                     ++confirm;
                    if(confirm > 1) 
                    {
                        confirm =0;
                        Display_Set_UnderLine_Blink_Position(STATUS_TRUE,arrayVarConfirmFlicker[confirm].u8StartPos,arrayVarConfirmFlicker[confirm].u8EndPos);
                    }
                    else
                    {
                        Display_Set_UnderLine_Blink_Position(STATUS_TRUE,arrayVarConfirmFlicker[confirm].u8StartPos,arrayVarConfirmFlicker[confirm].u8EndPos);
                    }
                }
            }
        break;

        case KEYACTION_UP://在系统设置界面下，UP键按下，选择对应的设置项
        if(!gbEditFlag)                                                                  //不在编辑模式下
        {                 
            sU8SetCounter--;
            if(!(sU8SetCounter>=DISPLAY_SET_ITEM_COUNT))
            {
                sU8SetCounter = DISPLAY_SET_ITEM_COUNT;
            }
            gCurrentMenu.eCurrentDisplayMenuType = nowDisplayType;
        }
        else            //在编辑模式下
        {
            if(!Flag_confirm)
            {
                switch(sU8SetCounter)
                {
                    case PeakloadShifting_StartTime:
                        sU8TPFVCounter--;
                        // 起始时间第一位
                        if(Su8cursorCounter == 1)                                       
                        {
                            if(!(sU8TPFVCounter <3))
                            {
                                sU8TPFVCounter = 2;
                            }
                            tab_PeakLoadShifting_Time_Start[0] =  '0' + sU8TPFVCounter;
                        }
                        // 起始时间第二位
                        else if(Su8cursorCounter == 2)
                        {
                            if(tab_PeakLoadShifting_Time_Start[0] == '2')
                            {
                                if(!(sU8TPFVCounter <= 4))
                                {
                                    sU8TPFVCounter = 4;
                                }
                                else
                                {
                                }
                            }
                            else 
                            {
                                if(!(sU8TPFVCounter <= 9))
                                {
                                    sU8TPFVCounter = 9;
                                }
                            }
                            tab_PeakLoadShifting_Time_Start[1] = '0' +sU8TPFVCounter;
                        }
                        // 起始时间的第三个数字
                        else if(Su8cursorCounter == 3)
                        {
                            if(!(sU8TPFVCounter <= 5))
                            {
                                sU8TPFVCounter = 5;
                            }                             
                            tab_PeakLoadShifting_Time_Start[3] =  '0' + sU8TPFVCounter;
                        }
                        // 起始时间的第四个数字
                        else if(Su8cursorCounter == 4)
                        {
                            if(!(sU8TPFVCounter <= 9))
                            {
                                sU8TPFVCounter = 9;
                            }
                            tab_PeakLoadShifting_Time_Start[4] =  '0' + sU8TPFVCounter;
                        }
                        // 起始时间的第五个数字
                        else if(Su8cursorCounter == 5)
                        {
                            if(!(sU8TPFVCounter <= 5))
                            {
                                sU8TPFVCounter = 5;
                            }
                            tab_PeakLoadShifting_Time_Start[6] =  '0' + sU8TPFVCounter;
                        }
                        // 起始时间的第六个数字
                        else if(Su8cursorCounter == 6)
                        {
                            if(!(sU8TPFVCounter <= 9))
                            {
                                sU8TPFVCounter = 9;
                            }
                            tab_PeakLoadShifting_Time_Start[7] =  '0' + sU8TPFVCounter;
                        }
                    break;
                    case PeakloadShifting_EndTime:
                        sU8TPFVCounter--;
                        // 结束时间第一位
                        if(Su8cursorCounter == 1)                                       
                        {
                            if(!(sU8TPFVCounter <3))
                            {
                                sU8TPFVCounter = 2;
                            }
                            tab_PeakLoadShifting_Time_End[0] =  '0' + sU8TPFVCounter;
                        }
                        // 结束时间第二位
                        else if(Su8cursorCounter == 2)
                        {
                            if(tab_PeakLoadShifting_Time_End[0] == '2')
                            {
                                if(!(sU8TPFVCounter <= 4))
                                {
                                    sU8TPFVCounter = 4;
                                }
                                else
                                {
                                }
                            }
                            else 
                            {
                                if(!(sU8TPFVCounter <= 9))
                                {
                                    sU8TPFVCounter = 9;
                                }
                            }
                            tab_PeakLoadShifting_Time_End[1] = '0' +sU8TPFVCounter;
                        }
                        // 结束时间的第三个数字
                        else if(Su8cursorCounter == 3)
                        {
                            if(!(sU8TPFVCounter <= 5))
                            {
                                sU8TPFVCounter = 5;
                            }                             
                            tab_PeakLoadShifting_Time_End[3] =  '0' + sU8TPFVCounter;
                        }
                        // 结束时间的第四个数字
                        else if(Su8cursorCounter == 4)
                        {
                            if(!(sU8TPFVCounter <= 9))
                            {
                                sU8TPFVCounter = 9;
                            }
                            tab_PeakLoadShifting_Time_End[4] =  '0' + sU8TPFVCounter;
                        }
                        // 结束时间的第五个数字
                        else if(Su8cursorCounter == 5)
                        {
                            if(!(sU8TPFVCounter <= 5))
                            {
                                sU8TPFVCounter = 5;
                            }
                            tab_PeakLoadShifting_Time_End[6] =  '0' + sU8TPFVCounter;
                        }
                        // 结束时间的第六个数字
                        else if(Su8cursorCounter == 6)
                        {
                            if(!(sU8TPFVCounter <= 9))
                            {
                                sU8TPFVCounter = 9;
                            }
                            tab_PeakLoadShifting_Time_End[7] =  '0' + sU8TPFVCounter;
                        }                            
                    break;
                    default:
                    {
                        gCurrentMenu.eCurrentDisplayMenuType = nowDisplayType;                
                    }
                }
            }
            else
            {
                confirm++;
                if(confirm > 1) 
                {
                    confirm =0;
                    Display_Set_UnderLine_Blink_Position(STATUS_TRUE,arrayVarConfirmFlicker[confirm].u8StartPos,arrayVarConfirmFlicker[confirm].u8EndPos);
                }
                else
                {
                    Display_Set_UnderLine_Blink_Position(STATUS_TRUE,arrayVarConfirmFlicker[confirm].u8StartPos,arrayVarConfirmFlicker[confirm].u8EndPos);
                }
            }
                 
        }
        break;
        case KEYACTION_ESC://在系统设置界面下，ESC键按下，返回设置界面
        {
            if(!gbEditFlag)  
            {
                //本次界面操作类型
                sU8SetCounter = 0;      
                Su8cursorCounter = 0; //光标    
                sU8TPFVCounter  = 0;  // 数值指示位     
                Flag_confirm  = STATUS_FALSE;           //确认标志     
                confirm = 0;              //确认保存
                gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_SET_SYSTEM_STRATEGY_TPFV;
            }
            else
            {
                //进入确认模式
                Flag_confirm = STATUS_TRUE;
                confirm = 1;
                // 关闭输入光标
                Display_Set_UnderLine_Blink_Position(STATUS_FALSE,arrayTPFVStartegyFlicker[Su8cursorCounter].u8StartPos,arrayTPFVStartegyFlicker[Su8cursorCounter].u8EndPos);
                // 开启选择光标
                Display_Set_UnderLine_Blink_Position(STATUS_TRUE,arrayVarConfirmFlicker[0].u8StartPos,arrayVarConfirmFlicker[0].u8EndPos);
            }
        }
        break;
        case KEYACTION_NULL://无操作刷新主界面数据
        default:
        {
               gCurrentMenu.eCurrentDisplayMenuType = nowDisplayType;                
        }
        break;
        }
    }
    if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_ENGLISH) //系统设置界面SystemSet 英文界面组装
    { 
        if(Flag_confirm)
        {
            memset(tab_display,0,DISPLAY_CACHE_SIZE);
            sprintf(tab_display,"                     \n   Sure Or Cancel ?  \n                    \n                    \n");
            //GUI_DispStringAt((uint8_t*)tab_display, 0, 0);  
            GUI_Display(tab_display, 0, 0);
        }
        else
        {
            //updateDisplayRegularChargingandDischargingSetData_English(sU8SetCounter,stPeriod);        
        }
    }
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_CHINESE)//系统设置界面SystemSet 中文界面组装
    {
      // updateDisplayRegularChargingandDischargingSetData_Chinese(sU8SetCounter);
    }
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_SPANISH)//系统设置界面SystemSet 西班牙界面组装 
    {
      // updateDisplayRegularChargingandDischargingSetData_Spanish(sU8SetCounter);  
    } 
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_GERMAN)//系统设置界面SystemSet 德语界面组装
    {
       //updateDisplayRegularChargingandDischargingSetData_German(sU8SetCounter);  
    } 
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_FRENCH)//系统设置界面SystemSet 法语界面组装
    {
      // updateDisplayRegularChargingandDischargingSetData_French(sU8SetCounter);    
    }
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_POLISH)//系统设置界面SystemSet 波兰界面组装
    {
      // updateDisplayRegularChargingandDischargingSetData_Polish(sU8SetCounter); 
    } 
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_ITALIAN)//系统设置界面SystemSet 意大利界面组装
    {
      //updateDisplayRegularChargingandDischargingSetData_Italian(sU8SetCounter);  
    }   
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_CZECH)//系统设置界面SystemSet 捷克界面组装
    {
      // updateDisplayRegularChargingandDischargingSetData_Czech(sU8SetCounter);   
    }  
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_DUTCH)//系统设置界面SystemSet 荷兰界面组装
    {
       // updateDisplayRegularChargingandDischargingSetData_Dutch(sU8SetCounter);   
    }
    else
    { 
      // updateDisplayRegularChargingandDischargingSetData_English(sU8SetCounter);        
    }
}
/***************************************************************************
 功能:功率设置 接口
****************************************************************************/
void updateDisplayPowerSettingsData(KeyAction_TypeDef nowActionType,DisplayAction_TypeDef nowDisplayType,PowerType_TypeDef nowPowertype)
{
    //本次界面操作类型
    static uint8_t sU8SetCounter = 0;
    static uint8_t Su8cursorCounter = 0; //光标
    static uint8_t sU8TPFVCounter  = 0;  // 数值指示位
    static bool_t  Flag_confirm  = STATUS_FALSE;           //确认标志
    static uint8_t confirm = 0;              //确认保存
    gLastMenu.eLastDisplayMenuType = nowDisplayType;     
    switch(nowActionType) 
    {
        case KEYACTION_ENTER://在系统设置界面下，Enter键按下，进入选择对应的设置项
            // 开始时间
            if(!Flag_confirm)
            {
                Su8cursorCounter++; //光标选择 第一次进来为1  
                if(Su8cursorCounter > 6)
                {
                    Su8cursorCounter = 1;   
                }
                Display_Set_UnderLine_Blink_Position(STATUS_TRUE,arrayFixBackupPowerFlicker[Su8cursorCounter -1].u8StartPos,arrayFixBackupPowerFlicker[Su8cursorCounter -1].u8EndPos);
                gbEditFlag = STATUS_TRUE; //进入编辑模式
            }  
            else
            {
				// 备电策略功率
				if(nowPowertype == Power_Backup_Index)
				{
				
					gDisplay.stDisplaySet.stStrategy.stBackupStrategy.s16RatedPower = atoi(tab_PeakLoadShifting_Power) * 1;
	                generateOperationRecord(RECORD_SET_STRATEGY_BACKUP); 	                // 生成一条操作记录
	                gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_SET_SYSTEM_STRATEGY; 	// 返回至 策略界面
				}
				// 并网功率
				else if(nowPowertype == Power_ON_GRID_Index)
				{
					//gDisplay.stDisplaySet.stGrid. = atoi(tab_PeakLoadShifting_Power) * 1;
					generateOperationRecord(RECORD_SET_STRATEGY_BACKUP);					// 生成一条操作记录
					gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_SET_SYSTEM_STRATEGY; 	// 返回至 策略界面
				}
				Display_Set_UnderLine_Blink_Position(STATUS_FALSE,arrayFixBackupPowerFlicker[confirm].u8StartPos,arrayFixBackupPowerFlicker[confirm].u8EndPos);
                sU8SetCounter = 0;
                Su8cursorCounter = 0;                                       //光标
                sU8TPFVCounter  = 0;                                        // 数值指示位            
                Flag_confirm  = STATUS_FALSE;                               //确认标志
                confirm = 0;                                                //确认保存
                gbEditFlag = STATUS_FALSE;                                  //进入编辑模式
            }
        break;
        case KEYACTION_DOWN:  
            if(!gbEditFlag)                                                                  //不在编辑模式下
            {                 
                sU8SetCounter++;
                if(sU8SetCounter>=DISPLAY_SET_ITEM_COUNT)
                {
                    sU8SetCounter = 1;
                }
                gCurrentMenu.eCurrentDisplayMenuType = nowDisplayType;
            }
            else
            {
                sU8TPFVCounter++;
                if(Su8cursorCounter == 1)   //功率第一个数字
                {
                    if(sU8TPFVCounter > 1)
                    {
                        tab_PeakLoadShifting_Power[0] =  '-' ;
                        sU8TPFVCounter = 0;
                    }
                    else
                    {
                        tab_PeakLoadShifting_Power[0] =  '+' ;
                    }
                }
                else if(Su8cursorCounter == 2)//功率第二个数字
                {
                    if(tab_PeakLoadShifting_Power[1] != '6')
                    {
                        if(sU8TPFVCounter > 9)
                        {
                            sU8TPFVCounter = 0;
                        }
                    }
                    else
                    {
                        sU8TPFVCounter = 0;
                    }
                    tab_PeakLoadShifting_Power[1] =  '0' + sU8TPFVCounter;
                }
                else if(Su8cursorCounter == 3)//功率第三个数字
                {
                    if(tab_PeakLoadShifting_Power[1] != '6')
                    {
                        if(sU8TPFVCounter > 9)
                        {
                            sU8TPFVCounter = 0;
                        }
                    }
                    else
                    {
                        sU8TPFVCounter = 0;
                    }
                    tab_PeakLoadShifting_Power[2] =  '0' + sU8TPFVCounter;
                }
                else if(Su8cursorCounter == 4)//功率第四个数字
                {
                    if(tab_PeakLoadShifting_Power[1] != '6')
                    {
                        if(sU8TPFVCounter > 9)
                        {
                            sU8TPFVCounter = 0;
                        }
                    }
                    else
                    {
                        sU8TPFVCounter = 0;
                    }
                    tab_PeakLoadShifting_Power[3] =  '0' + sU8TPFVCounter;
                }
                else if(Su8cursorCounter == 5)//功率第5个数字
                {
                    if(tab_PeakLoadShifting_Power[1] != '6')
                    {
                        if(sU8TPFVCounter > 9)
                        {
                            sU8TPFVCounter = 0;
                        }
                    }
                    else
                    {
                        sU8TPFVCounter = 0;
                    }
                    tab_PeakLoadShifting_Power[4] =  '0' + sU8TPFVCounter;
                }
            }
            break;   
        case KEYACTION_UP://在系统设置界面下，UP键按下，选择对应的设置项
        if(!gbEditFlag)                                                                  //不在编辑模式下
        {                 
            sU8SetCounter--;
            if(!(sU8SetCounter>=DISPLAY_SET_ITEM_COUNT))
            {
                sU8SetCounter = DISPLAY_SET_ITEM_COUNT;
            }
            gCurrentMenu.eCurrentDisplayMenuType = nowDisplayType;
        }
        else
        {
            sU8TPFVCounter--;
            // SOC第一位
            if(Su8cursorCounter == 1)                                       
            {
                if(!(sU8TPFVCounter < 2))
                {
                    sU8TPFVCounter = 1;
                    tab_PeakLoadShifting_Power[0] =  '+';
                }
                else
                {
                    tab_PeakLoadShifting_Power[0] =  '-';
                }
            }
            // SOC第2位
            else if(Su8cursorCounter == 2)
            {
                if(!(sU8TPFVCounter <= 6))
                {
                    sU8TPFVCounter = 6;
                }
                tab_PeakLoadShifting_Power[1] = '0' +sU8TPFVCounter;
            }
            else if(Su8cursorCounter == 3)
            {
                if(tab_PeakLoadShifting_Power[1] == '6')
                {
                        sU8TPFVCounter = 0;
                }
                else 
                {
                    if(!(sU8TPFVCounter <= 9))
                    {
                        sU8TPFVCounter = 9;
                    }
                }
                tab_PeakLoadShifting_Power[2] = '0' +sU8TPFVCounter;
            }
            else if(Su8cursorCounter == 4)
            {
                if(tab_PeakLoadShifting_Power[1] == '6')
                {
                    sU8TPFVCounter = 0;
                }
                else 
                {
                    if(!(sU8TPFVCounter <= 9))
                    {
                        sU8TPFVCounter = 9;
                    }
                }
                tab_PeakLoadShifting_Power[3] = '0' +sU8TPFVCounter;
            }
            else if(Su8cursorCounter == 5)
            {
                if(tab_PeakLoadShifting_Power[1] == '6')
                {
                        sU8TPFVCounter = 0;
                }
                else 
                {
                    if(!(sU8TPFVCounter <= 9))
                    {
                        sU8TPFVCounter = 9;
                    }
                }
                tab_PeakLoadShifting_Power[4] = '0' +sU8TPFVCounter;
            }
        }
        break;
        case KEYACTION_ESC://在系统设置界面下，ESC键按下，返回设置界面
        	{
	            if(!gbEditFlag)  
	            {
	            	gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_SET_SYSTEM_STRATEGY;
	            }
	            else
	            {
	           		//进入确认模式
	            	Flag_confirm = STATUS_TRUE;
	            	confirm = 1;
	            	// 关闭输入光标
	          		Display_Set_UnderLine_Blink_Position(STATUS_FALSE,arrayFixBackupPowerFlicker[Su8cursorCounter].u8StartPos,arrayFixBackupPowerFlicker[Su8cursorCounter].u8EndPos);
	            	// 开启选择光标
	            	Display_Set_UnderLine_Blink_Position(STATUS_TRUE,arrayVarConfirmFlicker[0].u8StartPos,arrayVarConfirmFlicker[0].u8EndPos);
	            }
        	}
        break;    
    }
    if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_ENGLISH) //系统设置界面SystemSet 英文界面组装
    { 
        if(Flag_confirm)
        {
            memset(tab_display,0,DISPLAY_CACHE_SIZE);
            sprintf(tab_display,"                     \n   Sure Or Cancel ?  \n                    \n                    \n");
            GUI_Display(tab_display, 0, 0);
        }
        else
        {
            updateDisplayBackupPowerSetData_English(sU8SetCounter);        
        }
    }
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_CHINESE)//系统设置界面SystemSet 中文界面组装
    {
        //updateDisplayBackupPowerSetData_Chinese(sU8SetCounter);
    }
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_SPANISH)//系统设置界面SystemSet 西班牙界面组装 
    {
        updateDisplayBackupPowerSetData_Spanish(sU8SetCounter);  
    } 
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_GERMAN)//系统设置界面SystemSet 德语界面组装
    {
        updateDisplayBackupPowerSetData_German(sU8SetCounter);  
    } 
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_FRENCH)//系统设置界面SystemSet 法语界面组装
    {
        updateDisplayBackupPowerSetData_French(sU8SetCounter);    
    }
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_POLISH)//系统设置界面SystemSet 波兰界面组装
    {
        updateDisplayBackupPowerSetData_Polish(sU8SetCounter); 
    } 
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_ITALIAN)//系统设置界面SystemSet 意大利界面组装
    {
        updateDisplayBackupPowerSetData_Italian(sU8SetCounter);  
    }   
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_CZECH)//系统设置界面SystemSet 捷克界面组装
    {
        updateDisplayBackupPowerSetData_Czech(sU8SetCounter);   
    }  
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_DUTCH)//系统设置界面SystemSet 荷兰界面组装
    {
        updateDisplayBackupPowerSetData_Dutch(sU8SetCounter);   
    }
    else
    { 
       updateDisplayBackupPowerSetData_English(sU8SetCounter);        
    }
}
/***************************************************************************
 功能:英文 系统SELF策略设置界面信息
****************************************************************************/
void updateDisplayBackupPowerSetData_English(uint8_t u8SetIndex)
{  
    memset(tab_display,0,DISPLAY_CACHE_SIZE);  
    sprintf(tab_display,"   BACKUP Strategy   \n                     \nRate Power:%s\n                     \n",tab_PeakLoadShifting_Power);                                                                                                                                                              
    //GUI_DispStringAt((uint8_t*)tab_display, 0, 0);  
    GUI_Display(tab_display, 0, 0);
}


/***************************************************************************
 功能:西班牙 系统SELF策略设置界面信息
****************************************************************************/
void updateDisplayBackupPowerSetData_Spanish(uint8_t u8SetIndex)
{  
    
}

/***************************************************************************
 功能:德语 系统SELF策略设置界面信息
****************************************************************************/
void updateDisplayBackupPowerSetData_German(uint8_t u8SetIndex)
{   
    
}

/***************************************************************************
 功能:法语 系统SELF策略设置界面信息
****************************************************************************/
void updateDisplayBackupPowerSetData_French(uint8_t u8SetIndex)
{  
    
}

/***************************************************************************
 功能:波兰语 系统SELF策略设置界面信息
****************************************************************************/
void updateDisplayBackupPowerSetData_Polish(uint8_t u8SetIndex)
{  
    
}

/***************************************************************************
 功能:意大利语 系统SELF策略设置界面信息
****************************************************************************/
void updateDisplayBackupPowerSetData_Italian(uint8_t u8SetIndex)
{  
    
}

/***************************************************************************
 功能:捷克语 系统SELF策略设置界面信息
****************************************************************************/
void updateDisplayBackupPowerSetData_Czech(uint8_t u8SetIndex)
{
    
}

/***************************************************************************
 功能:荷兰语 系统SELF策略设置界面信息
****************************************************************************/
void updateDisplayBackupPowerSetData_Dutch(uint8_t u8SetIndex)
{  
    
}


/***************************************************************************
 功能:根据上一次界面操作类型和本次操作类型判断本次SET界面切换
****************************************************************************/
void updateDisplaySystemSetData(KeyAction_TypeDef nowActionType,DisplayAction_TypeDef nowDisplayType)
{
    static uint8_t sU8SetSystemCounter = 0;
    gLastMenu.eLastDisplayMenuType = DISPLAY_SET_SYSTEM;
    switch(nowActionType) //本次界面操作类型
    {
        case KEYACTION_ENTER://在设置界面下，Enter键按下，进入选择对应的设置项
        {
            // 语言设置
            if(sU8SetSystemCounter == SYS_SET_LANGUAGE_INDEX)
            {       
                gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_SET_SYSTEM_LANGUAGE;
            }
            // 时间设置
            else if(sU8SetSystemCounter == SYS_SET_TIME_INDEX)
            {
                gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_SET_SYSTEM_TIME;
            }
            // 密码修改
            else if(sU8SetSystemCounter == SYS_SET_TIME_INDEX)
            {
                gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_SET_SYSTEM_PASSWORD;
            }
            // 清除故障
            else if(sU8SetSystemCounter == SYS_SET_ClearFault_INDEX)
            {
                gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_SET_SYSTEM_CLEARFAULT;
            }
            // 清除记录
            else if(sU8SetSystemCounter == SYS_SET_ClearRecord_INDEX)
            {
                gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_SET_SYSTEM_CLEARRECORD;
            }
            // 出厂设置
            else if(sU8SetSystemCounter == SYS_SET_FACTORY_INDEX)
            {
                gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_SET_SYSTEM_FACTORY;
            }
            // 远程设置
            else if(sU8SetSystemCounter == SYS_SET_REMOTECONTROL_INDEX)
            {
                    gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_SET_SYSTEM_REMOTECONTROL;
            }
            // 保护使能
            else if(sU8SetSystemCounter == SYS_SET_PROTECT_INDEX)
            {
                    gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_SET_SYSTEM_PROTECT;
            }
            // 低功耗使能
            else if(sU8SetSystemCounter == SYS_SET_LOW_POWER)
            {
                    gCurrentMenu.eCurrentDisplayMenuType = DISPAY_SET_SYSTEM_LOWPOWER;
            }
        }
        break;
        case KEYACTION_DOWN://在设置界面下，Up同时键按下，选择对应的设置项
            {
                sU8SetSystemCounter++;
                if(sU8SetSystemCounter >= DISPLAY_SET_SYSTEM_ITEM_COUNT)
                {
                    sU8SetSystemCounter = 0;
                }
                gCurrentMenu.eCurrentDisplayMenuType = nowDisplayType;
            }
            break;
        case KEYACTION_UP://在设置界面下，Down同时键按下，选择对应的设置项
            {
                sU8SetSystemCounter--;
                if(sU8SetSystemCounter >= DISPLAY_SET_SYSTEM_ITEM_COUNT)
                {
                    sU8SetSystemCounter = DISPLAY_SET_SYSTEM_ITEM_COUNT;
                }
                gCurrentMenu.eCurrentDisplayMenuType = nowDisplayType;
            }
            break;
        case KEYACTION_ESC://在设置界面下，Esc键按下，返回到主界面
            {
                gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_SET;
            }
            break;
        case KEYACTION_NULL://无操作刷新主界面数据
        default:
            {
                gCurrentMenu.eCurrentDisplayMenuType = nowDisplayType;
            }
            break;
    }
    
    if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_ENGLISH) //系统设置界面Set 中文界面组装
    { 
        updateDisplaySystemSetData_English(sU8SetSystemCounter);                    
    }
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_CHINESE)//系统设置界面Set 英文界面组装
    {
        updateDisplaySystemSetData_Chinese(sU8SetSystemCounter);
    } 
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_SPANISH)//系统设置界面Set 西班牙界面组装
    {
        updateDisplaySystemSetData_Spanish(sU8SetSystemCounter);  
    } 
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_GERMAN)//系统设置界面Set 德语界面组装
    {
        updateDisplaySystemSetData_German(sU8SetSystemCounter);  
    }
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_FRENCH)//系统设置界面Set 法语界面组装
    {
        updateDisplaySystemSetData_French(sU8SetSystemCounter);    
    }
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_POLISH) //系统设置界面Set 波兰界面组装
    {
        updateDisplaySystemSetData_Polish(sU8SetSystemCounter); 
    }
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_ITALIAN)//系统设置界面Set 意大利界面组装
    {
        updateDisplaySystemSetData_Italian(sU8SetSystemCounter);  
    } 
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_CZECH)//系统设置界面Set 捷克界面组装
    {
        updateDisplaySystemSetData_Czech(sU8SetSystemCounter);   
    }
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_DUTCH)//系统设置界面Set 荷兰界面组装c
    {
        updateDisplaySystemSetData_Dutch(sU8SetSystemCounter);   
    }
    else
    { 
        updateDisplaySystemSetData_English(sU8SetSystemCounter);        
    }
}
/***************************************************************************
 功能:出厂设置SET英文界面
****************************************************************************/
void updateDisplaySystemSetData_English(uint8_t u8SetIndex)
{
    memset(tab_display,0,DISPLAY_CACHE_SIZE);
    // 语言设置
    if(u8SetIndex == SYS_SET_LANGUAGE_INDEX)
    {
        sprintf(tab_display,"     System Set      \n->Language Set       \nTime Set             \nPassword Set         \n");
    }
    // 时间设置
    else if(u8SetIndex == SYS_SET_TIME_INDEX)
    {
        sprintf(tab_display,"     System Set      \nLanguage Set         \n->Time Set           \nPassword Set         \n");
    }
    // 密码修改
    else if(u8SetIndex == SYS_SET_PASSWORD_INDEX)
    {
        sprintf(tab_display,"     System Set      \nLanguage Set         \nTime Set             \n->Password Set       \n");
    }
    // 清除故障
    else if(u8SetIndex == SYS_SET_ClearFault_INDEX)
    {
        sprintf(tab_display,"     System Set      \nTime Set             \nPassword Set         \n->ClearFault Set     \n");
    }
    // 清除记录
    else if(u8SetIndex == SYS_SET_ClearRecord_INDEX)
    {
        sprintf(tab_display,"     System Set      \nPassword Set         \nClearFault Set       \n->ClearRecord Set    \n");
    }
    // 出厂设置
    else if(u8SetIndex == SYS_SET_FACTORY_INDEX)
    {
        sprintf(tab_display,"     System Set      \nClearFault Set       \nClearRecord Set      \n->FACTORY Set        \n");
    }
    // 远程控制
    else if(u8SetIndex == SYS_SET_REMOTECONTROL_INDEX)
    {
        sprintf(tab_display,"     System Set      \nClearRecord Set      \nRemote Control Set   \n->Remote Control Set \n");
    }  
    // 保护使能
    else if(u8SetIndex == SYS_SET_PROTECT_INDEX)
    {
        sprintf(tab_display,"     System Set      \nRemote Control Set   \nRemote Control Set   \n->Protect Set        \n");
    }
    // 低功耗使能
    else if(u8SetIndex == SYS_SET_LOW_POWER)
    {
        sprintf(tab_display,"     System Set      \nRemote Control Set   \nProtect Set          \n->Low Power          \n");
    }

            
    //GUI_DispStringAt((uint8_t*)tab_display, 0, 0); 
    GUI_Display(tab_display, 0, 0);
}

/***************************************************************************
 功能:系统设置 SET西班牙界面
****************************************************************************/
void updateDisplaySystemSetData_Spanish(uint8_t u8SetIndex)
{
    
}

/***************************************************************************
 功能:系统设置 SET德语界面
****************************************************************************/
void updateDisplaySystemSetData_German(uint8_t u8SetIndex)
{
    
}

/***************************************************************************
 功能:系统设置        SET法语界面
****************************************************************************/
void updateDisplaySystemSetData_French(uint8_t u8SetIndex)
{
    
}

/***************************************************************************
 功能:系统设置        SET波兰界面
****************************************************************************/
void updateDisplaySystemSetData_Polish(uint8_t u8SetIndex)
{
    
}

/***************************************************************************
 功能:系统设置       意大利界面
****************************************************************************/
void updateDisplaySystemSetData_Italian(uint8_t u8SetIndex)
{
    
}

/***************************************************************************
 功能:系统设置        SET捷克界面
****************************************************************************/
void updateDisplaySystemSetData_Czech(uint8_t u8SetIndex)
{
    
}

/***************************************************************************
 功能:系统设置        荷兰界面
****************************************************************************/
void updateDisplaySystemSetData_Dutch(uint8_t u8SetIndex)
{
    
}
    

/***************************************************************************
 功能:根据上一次界面操作类型和本次操作类型判断（统计信息）
 *当日统计数据
 *当月累计统计数据
 *当年累计统计数据
 *累计统计数据
****************************************************************************/
void updateDisplayStatistics(KeyAction_TypeDef nowActionType,DisplayAction_TypeDef nowDisplayType)
{
    static uint8_t sU8SetSystemCounter = 0;
    gLastMenu.eLastDisplayMenuType = DISPLAY_STATISTICS;          //当前页面统计
    switch(nowActionType) //本次界面操作类型
    {
        case KEYACTION_ENTER://在设置界面下，Enter键按下，进入选择对应的设置项
        {
            // 当日统计索引
            if(sU8SetSystemCounter == Statistics_Day_Index)
            {       
                gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_STATISTICS_DAY;
            }
            // 当月统计索引
            else if(sU8SetSystemCounter == Statistics_Month_Index)
            {
                gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_STATISTICS_MONTH;
            }
            // 当年统计索引
            else if(sU8SetSystemCounter == Statistics_Year_Index)
            {
                gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_STATISTICS_YEAR;
            }
            // 累计统计索引
            else if(sU8SetSystemCounter == Statistics_All_Index)
            {
                gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_STATISTICS_ALL;
            }
        }
        break;
        case KEYACTION_DOWN :  //在设置界面下，Down同时键按下，选择对应的设置项
            sU8SetSystemCounter++;
            if(sU8SetSystemCounter >= DISPLAY_STATISTICS_COUNT)
            {
                sU8SetSystemCounter = 0;
            }
            gCurrentMenu.eCurrentDisplayMenuType = nowDisplayType;
        break;
        case KEYACTION_UP :
          sU8SetSystemCounter--;
          if(sU8SetSystemCounter >= DISPLAY_STATISTICS_COUNT)
          {
              sU8SetSystemCounter = DISPLAY_STATISTICS_COUNT;
          }
          gCurrentMenu.eCurrentDisplayMenuType = nowDisplayType;
        break;
        case KEYACTION_ESC://在设置界面下，Esc键按下，返回到菜单页面
            {
                sU8SetSystemCounter = 0;
                gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_MENU;
            }
        break;
        default:
        {
          gCurrentMenu.eCurrentDisplayMenuType = nowDisplayType;
        }
        break;
    }
    if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_ENGLISH) //统计信息 中文界面组装
    { 
        updateDisplayStatistics_English(sU8SetSystemCounter);

    }
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_CHINESE)//统计信息 英文界面组装
    {
        updateDisplayStatistics_Chinese(sU8SetSystemCounter);                    
    } 
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_SPANISH)//统计信息 西班牙界面组装
    {
        updateDisplayStatistics_Spanish(sU8SetSystemCounter);  
    } 
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_GERMAN)//统计信息 德语界面组装
    {
        updateDisplayStatistics_German(sU8SetSystemCounter);  
    }
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_FRENCH)//统计信息 法语界面组装
    {
        updateDisplayStatistics_French(sU8SetSystemCounter);    
    }
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_POLISH) //统计信息 波兰界面组装
    {
        updateDisplayStatistics_Polish(sU8SetSystemCounter); 
    }
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_ITALIAN)//统计信息 意大利界面组装
    {
        updateDisplayStatistics_Italian(sU8SetSystemCounter);  
    } 
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_CZECH)//统计信息 捷克界面组装
    {
        updateDisplayStatistics_Czech(sU8SetSystemCounter);   
    }
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_DUTCH)//统计信息 荷兰界面组装
    {
        updateDisplayStatistics_Dutch(sU8SetSystemCounter);   
    }
    else
    { 
        updateDisplayStatistics_English(sU8SetSystemCounter);        
    }
}
/***************************************************************************
 * 功能:统计数据 英文界面
****************************************************************************/
void updateDisplayStatistics_English(uint8_t u8SetIndex)
{
    memset(tab_display,0,DISPLAY_CACHE_SIZE);
    // 当日统计
    if(u8SetIndex == Statistics_Day_Index)
    {
        sprintf(tab_display,"      Statistics     \n->Day Statistics     \nMonth Statistics     \nYear Statistics      \n");
    }
    // 当月统计
    else if(u8SetIndex == Statistics_Month_Index)
    {
        sprintf(tab_display,"      Statistics     \nDay Statistics       \n->Month Statistics   \nYear Statistics      \n");
    }
    // 当年统计
    else if(u8SetIndex == Statistics_Year_Index)
    {
        sprintf(tab_display,"      Statistics     \nDay Statistics       \nMonth Statistics     \n->Year Statistics    \n");
    }
    // 累计统计
    else if(u8SetIndex == Statistics_All_Index)
    {
        sprintf(tab_display,"      Statistics     \nMonth Statistics     \nYear Statistics      \n->Total Statistics   \n");
    }
    GUI_Display(tab_display, 0, 0);

}
/***************************************************************************
 * 功能:统计数据 中文界面
****************************************************************************/
void updateDisplayStatistics_Chinese(uint8_t u8SetIndex)
{

}
/***************************************************************************
 * 功能:统计数据 西班牙语界面
****************************************************************************/
void updateDisplayStatistics_Spanish(uint8_t u8SetIndex)
{

}
/***************************************************************************
 * 功能:统计数据 德语界面
****************************************************************************/
void updateDisplayStatistics_German(uint8_t u8SetIndex)
{

}
/***************************************************************************
 * 功能:统计数据 法语界面
****************************************************************************/
void updateDisplayStatistics_French(uint8_t u8SetIndex)
{

}
/***************************************************************************
 * 功能:统计数据 波兰语界面
****************************************************************************/
void updateDisplayStatistics_Polish(uint8_t u8SetIndex)
{

}
/***************************************************************************
 * 功能:统计数据 意大利语界面
****************************************************************************/
void updateDisplayStatistics_Italian(uint8_t u8SetIndex)
{

}
/***************************************************************************
 * 功能:统计数据 捷克语界面
****************************************************************************/
void updateDisplayStatistics_Czech(uint8_t u8SetIndex)
{

}
/***************************************************************************
 * 功能:统计数据 荷兰语界面
****************************************************************************/
void updateDisplayStatistics_Dutch(uint8_t u8SetIndex)
{

}
/***************************************************************************
 * 根据上一次界面操作类型和本次操作类型判断本次LOGIN界面切换   （当日统计数据）
****************************************************************************/
void updateDisplayStatistics_Day(KeyAction_TypeDef nowActionType,DisplayAction_TypeDef nowDisplayType)
{
    static uint8_t sU8SetSystemCounter = 0;
    gLastMenu.eLastDisplayMenuType = DISPLAY_STATISTICS_DAY;                               //当前页面为当日统计数据
    switch(nowActionType)
    {
      case KEYACTION_DOWN :           
      {
          sU8SetSystemCounter++;
          if(sU8SetSystemCounter == DISPLAY_STATISTICS_DAY_COUNT)
          {
              sU8SetSystemCounter = 0;  
          }
             gCurrentMenu.eCurrentDisplayMenuType = nowDisplayType;
     }
     break;
     case KEYACTION_UP:              
     {
         sU8SetSystemCounter--;
         sU8SetSystemCounter = 0 ;
         if(sU8SetSystemCounter >= DISPLAY_STATISTICS_DAY_COUNT)
         {
             sU8SetSystemCounter = sU8SetSystemCounter - 1;  
         }
         gCurrentMenu.eCurrentDisplayMenuType = nowDisplayType;                
     }
     break;
     case KEYACTION_ESC:             
     {
         sU8SetSystemCounter = 0;
         gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_STATISTICS;
     }
     break;
     case KEYACTION_NULL://无操作
     default:
     {
         // 其他不响应
     }                            
     break;
    }

    if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_ENGLISH)          //当日统计数据界面 英文界面组装
    { 
        updateDisplayStatistics_Day_English(sU8SetSystemCounter);
    }
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_CHINESE)     //当日统计数据界面 中文界面组装
    {
        updateDisplayStatistics_Day_Chinese(sU8SetSystemCounter);
    }    
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_SPANISH)     //当日统计数据界面 西班牙界面组装
    { 
        updateDisplayStatistics_Day_Spanish(sU8SetSystemCounter);
    } 
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_GERMAN)      //当日统计数据界面 德语界面组装
    { 
        updateDisplayStatistics_Day_German(sU8SetSystemCounter);
    } 
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_FRENCH)      //当日统计数据界面 法语界面组装
    { 
        updateDisplayStatistics_Day_French(sU8SetSystemCounter);
    }   
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_POLISH)      //当日统计数据界面 波兰界面组装
    {
        updateDisplayStatistics_Day_Polish(sU8SetSystemCounter);
    }    
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_ITALIAN)     //当日统计数据界面 意大利界面组装
    {
        updateDisplayStatistics_Day_Italian(sU8SetSystemCounter);
    } 
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_CZECH)       //当日统计数据界面 捷克界面组装
    { 
        updateDisplayStatistics_Day_Czech(sU8SetSystemCounter);
    }
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_DUTCH)       //当日统计数据界面 荷兰界面组装
    { 
        updateDisplayStatistics_Day_Dutch(sU8SetSystemCounter);
    }
    else
    {   
        updateDisplayStatistics_Day_English(sU8SetSystemCounter);
    }
    GUI_Display(tab_display, 0, 0);

}
/***************************************************************************
 * 功能:当日统计数据界面 荷兰语界面
****************************************************************************/
void updateDisplayStatistics_Day_English(uint8_t u8SetIndex)
{
    memset(tab_display,0,DISPLAY_CACHE_SIZE);
    
    if(u8SetIndex == PAGE_ONE)
    {
        float fPvData = gDisplay.stDisplayData.stStatistical.stMonthStatisticaldata.stPVPowerGeneration / 10.0;        //后续优化除法
        float fInputData = gDisplay.stDisplayData.stStatistical.stMonthStatisticaldata.stInputPowerGeneration / 10.0;        //后续优化除法
        float fOutputData = gDisplay.stDisplayData.stStatistical.stMonthStatisticaldata.stOutputPowerGeneration / 10.0;        //后续优化除法
        sprintf(tab_display,"    Day Statistics   \nPV:       %8.1fkWh\nSell:     %8.1fkWh\nBuy:      %8.1fkWh\n",fPvData,fInputData,fOutputData);
    }
    else if(u8SetIndex == PAGE_TWO)                                                              
    {
        float fChargeData = gDisplay.stDisplayData.stStatistical.stMonthStatisticaldata.stChagePowerGeneration / 10.0;       //后续优化除法
        float fDisChargeData = gDisplay.stDisplayData.stStatistical.stMonthStatisticaldata.stDisChagePowerGeneration / 10.0; //后续优化除法
        float fLoadData = gDisplay.stDisplayData.stStatistical.stMonthStatisticaldata.stLoadPowerGeneration / 10.0;    //后续优化除法
        sprintf(tab_display,"    Day Statistics   \nCharge:   %8.1fkWh\nDisCharge:%8.1fkWh\nLoad:     %8.1fkWh\n",fChargeData,fDisChargeData,fLoadData);
    }  

}
/***************************************************************************
 * 功能:当日统计数据界面 中文界面
****************************************************************************/
void updateDisplayStatistics_Day_Chinese(uint8_t u8SetIndex)
{

}
/***************************************************************************
 * 功能:当日统计数据界面 西班牙语界面
****************************************************************************/
void updateDisplayStatistics_Day_Spanish(uint8_t u8SetIndex)
{

}
/***************************************************************************
 * 功能:当日统计数据界面 德语界面
****************************************************************************/
void updateDisplayStatistics_Day_German(uint8_t u8SetIndex)
{

}
/***************************************************************************
 * 功能:当日统计数据界面 法语界面
****************************************************************************/
void updateDisplayStatistics_Day_French(uint8_t u8SetIndex)
{

}
/***************************************************************************
 * 功能:当日统计数据界面 波兰语界面
****************************************************************************/
void updateDisplayStatistics_Day_Polish(uint8_t u8SetIndex)
{

}
/***************************************************************************
 * 功能:当日统计数据界面 意大利语界面
****************************************************************************/
void updateDisplayStatistics_Day_Italian(uint8_t u8SetIndex)
{

}
/***************************************************************************
 * 功能:当日统计数据界面 捷克语界面
****************************************************************************/
void updateDisplayStatistics_Day_Czech(uint8_t u8SetIndex)
{

}
/***************************************************************************
 * 功能:当日统计数据界面 荷兰语界面
****************************************************************************/
void updateDisplayStatistics_Day_Dutch(uint8_t u8SetIndex)
{

}


/***************************************************************************
 * 根据上一次界面操作类型和本次操作类型判断本次LOGIN界面切换   （当月统计数据）
****************************************************************************/
void updateDisplayStatistics_Month(KeyAction_TypeDef nowActionType,DisplayAction_TypeDef nowDisplayType)
{
    static uint8_t sU8SetSystemCounter = 0;
    gLastMenu.eLastDisplayMenuType = DISPLAY_STATISTICS_MONTH;                             
    switch(nowActionType)
    {
      case KEYACTION_DOWN :            //当月统计界面下 ，UP键按下，页面数字加一
      {
          sU8SetSystemCounter++;
          if(sU8SetSystemCounter == DISPLAY_STATISTICS_MONTH_COUNT)
          {
              sU8SetSystemCounter = 0;  
          }
             gCurrentMenu.eCurrentDisplayMenuType = nowDisplayType;
     }
     break;
     case KEYACTION_UP:              //当月统计界面下，Down键按下，页面数字减一
     {
         sU8SetSystemCounter--;
         sU8SetSystemCounter = 0 ;
         if(sU8SetSystemCounter >= DISPLAY_STATISTICS_MONTH_COUNT)
         {
             sU8SetSystemCounter = sU8SetSystemCounter - 1;  
         }
         gCurrentMenu.eCurrentDisplayMenuType = nowDisplayType;                
     }
     break;
     case KEYACTION_ESC:              //当日统计界面下，Esc键按下，回退到统计页面
     {
         sU8SetSystemCounter = 0;
         gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_STATISTICS;
     }
     break;
     case KEYACTION_NULL://无操作
     default:
     {
         // 其他不响应
     }                            
     break;
    }

    if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_ENGLISH)         
    { 
        updateDisplayStatistics_Month_English(sU8SetSystemCounter);
    }
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_CHINESE)   
    {
        updateDisplayStatistics_Month_Chinese(sU8SetSystemCounter);
    }    
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_SPANISH)    
    { 
        updateDisplayStatistics_Month_Spanish(sU8SetSystemCounter);
    } 
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_GERMAN)     
    { 
        updateDisplayStatistics_Month_German(sU8SetSystemCounter);
    } 
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_FRENCH)     
    { 
        updateDisplayStatistics_Month_French(sU8SetSystemCounter);
    }   
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_POLISH)     
    {
        updateDisplayStatistics_Month_Polish(sU8SetSystemCounter);
    }    
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_ITALIAN)    
    {
        updateDisplayStatistics_Month_Italian(sU8SetSystemCounter);
    } 
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_CZECH)      
    { 
        updateDisplayStatistics_Month_Czech(sU8SetSystemCounter);
    }
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_DUTCH)     
    { 
        updateDisplayStatistics_Month_Dutch(sU8SetSystemCounter);
    }
    else
    {   
        updateDisplayStatistics_Month_English(sU8SetSystemCounter);
    }
    GUI_Display(tab_display, 0, 0);

}
/***************************************************************************
 * 功能:当月统计数据界面 荷兰语界面
****************************************************************************/
void updateDisplayStatistics_Month_English(uint8_t u8SetIndex)
{
    memset(tab_display,0,DISPLAY_CACHE_SIZE);
    
    if(u8SetIndex == PAGE_ONE)
    {
        float fPvData = gDisplay.stDisplayData.stStatistical.stMonthStatisticaldata.stPVPowerGeneration / 10.0;        //后续优化除法
        float fInputData = gDisplay.stDisplayData.stStatistical.stMonthStatisticaldata.stInputPowerGeneration / 10.0;        //后续优化除法
        float fOutputData = gDisplay.stDisplayData.stStatistical.stMonthStatisticaldata.stOutputPowerGeneration / 10.0;        //后续优化除法
        sprintf(tab_display,"    Month Statistics \nPV:       %8.1fkWh\nSell:     %8.1fkWh\nBuy:      %8.1fkWh\n",fPvData,fInputData,fOutputData);
    }
    else if(u8SetIndex == PAGE_TWO)                                                              
    {
        float fChargeData = gDisplay.stDisplayData.stStatistical.stMonthStatisticaldata.stChagePowerGeneration / 10.0;       //后续优化除法
        float fDisChargeData = gDisplay.stDisplayData.stStatistical.stMonthStatisticaldata.stDisChagePowerGeneration / 10.0; //后续优化除法
        float fLoadData = gDisplay.stDisplayData.stStatistical.stMonthStatisticaldata.stLoadPowerGeneration / 10.0;    //后续优化除法
        sprintf(tab_display,"    Month Statistics \nCharge:   %8.1fkWh\nDisCharge:%8.1fkWh\nLoad:     %8.1fkWh\n",fChargeData,fDisChargeData,fLoadData);
    }  

}
/***************************************************************************
 * 功能:当月统计数据界面 中文界面
****************************************************************************/
void updateDisplayStatistics_Month_Chinese(uint8_t u8SetIndex)
{

}
/***************************************************************************
 * 功能:当月统计数据界面 西班牙语界面
****************************************************************************/
void updateDisplayStatistics_Month_Spanish(uint8_t u8SetIndex)
{

}
/***************************************************************************
 * 功能:当月统计数据界面 德语界面
****************************************************************************/
void updateDisplayStatistics_Month_German(uint8_t u8SetIndex)
{

}
/***************************************************************************
 * 功能:当月统计数据界面 法语界面
****************************************************************************/
void updateDisplayStatistics_Month_French(uint8_t u8SetIndex)
{

}
/***************************************************************************
 * 功能:当月统计数据界面 波兰语界面
****************************************************************************/
void updateDisplayStatistics_Month_Polish(uint8_t u8SetIndex)
{

}
/***************************************************************************
 * 功能:当月统计数据界面 意大利语界面
****************************************************************************/
void updateDisplayStatistics_Month_Italian(uint8_t u8SetIndex)
{

}
/***************************************************************************
 * 功能:当月统计数据界面 捷克语界面
****************************************************************************/
void updateDisplayStatistics_Month_Czech(uint8_t u8SetIndex)
{

}
/***************************************************************************
 * 功能:当月统计数据界面 荷兰语界面
****************************************************************************/
void updateDisplayStatistics_Month_Dutch(uint8_t u8SetIndex)
{

}


/***************************************************************************
 * 根据上一次界面操作类型和本次操作类型判断本次LOGIN界面切换   （当年统计数据）
****************************************************************************/
void updateDisplayStatistics_Year(KeyAction_TypeDef nowActionType,DisplayAction_TypeDef nowDisplayType)
{
    static uint8_t sU8SetSystemCounter = 0;
    gLastMenu.eLastDisplayMenuType = DISPLAY_STATISTICS_DAY;                               
    switch(nowActionType)
    {
      case KEYACTION_DOWN :           
      {
          sU8SetSystemCounter++;
          if(sU8SetSystemCounter == DISPLAY_STATISTICS_YEAR_COUNT)
          {
              sU8SetSystemCounter = 0;  
          }
             gCurrentMenu.eCurrentDisplayMenuType = nowDisplayType;
     }
     break;
     case KEYACTION_UP:            
     {
         sU8SetSystemCounter--;
         sU8SetSystemCounter = 0 ;
         if(sU8SetSystemCounter >= DISPLAY_STATISTICS_YEAR_COUNT)
         {
             sU8SetSystemCounter = sU8SetSystemCounter - 1;  
         }
         gCurrentMenu.eCurrentDisplayMenuType = nowDisplayType;                
     }
     break;
     case KEYACTION_ESC:            
     {
         sU8SetSystemCounter = 0;
         gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_STATISTICS;
     }
     break;
     case KEYACTION_NULL://无操作
     default:
     {
         // 其他不响应
     }                            
     break;
    }

    if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_ENGLISH)          
    { 
        updateDisplayStatistics_Year_English(sU8SetSystemCounter);
    }
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_CHINESE)    
    {
        updateDisplayStatistics_Year_Chinese(sU8SetSystemCounter);
    }    
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_SPANISH)   
    { 
        updateDisplayStatistics_Year_Spanish(sU8SetSystemCounter);
    } 
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_GERMAN)     
    { 
        updateDisplayStatistics_Year_German(sU8SetSystemCounter);
    } 
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_FRENCH)    
    { 
        updateDisplayStatistics_Year_French(sU8SetSystemCounter);
    }   
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_POLISH)     
    {
        updateDisplayStatistics_Year_Polish(sU8SetSystemCounter);
    }    
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_ITALIAN)   
    {
        updateDisplayStatistics_Year_Italian(sU8SetSystemCounter);
    } 
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_CZECH)       //当日统计数据界面 捷克界面组装
    { 
        updateDisplayStatistics_Year_Czech(sU8SetSystemCounter);
    }
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_DUTCH)       //当日统计数据界面 荷兰界面组装
    { 
        updateDisplayStatistics_Year_Dutch(sU8SetSystemCounter);
    }
    else
    {   
        updateDisplayStatistics_Year_English(sU8SetSystemCounter);
    }
    GUI_Display(tab_display, 0, 0);

}
/***************************************************************************
 * 功能:当年统计数据界面 荷兰语界面
****************************************************************************/
void updateDisplayStatistics_Year_English(uint8_t u8SetIndex)
{
    memset(tab_display,0,DISPLAY_CACHE_SIZE);
    
    if(u8SetIndex == PAGE_ONE)
    {
        float fPvData = gDisplay.stDisplayData.stStatistical.stYearStatisticaldata.stPVPowerGeneration / 10.0;        //后续优化除法
        float fInputData = gDisplay.stDisplayData.stStatistical.stYearStatisticaldata.stInputPowerGeneration / 10.0;        //后续优化除法
        float fOutputData = gDisplay.stDisplayData.stStatistical.stYearStatisticaldata.stOutputPowerGeneration / 10.0;        //后续优化除法
        sprintf(tab_display,"    Year Statistics  \nPV:       %8.1fkWh\nSell:     %8.1fkWh\nBuy:      %8.1fkWh\n",fPvData,fInputData,fOutputData);
    }
    else if(u8SetIndex == PAGE_TWO)                                                              
    {
        float fChargeData = gDisplay.stDisplayData.stStatistical.stYearStatisticaldata.stChagePowerGeneration / 10.0;       //后续优化除法
        float fDisChargeData = gDisplay.stDisplayData.stStatistical.stYearStatisticaldata.stDisChagePowerGeneration / 10.0; //后续优化除法
        float fLoadData = gDisplay.stDisplayData.stStatistical.stYearStatisticaldata.stLoadPowerGeneration / 10.0;    //后续优化除法
        sprintf(tab_display,"    Year Statistics  \nCharge:   %8.1fkWh\nDisCharge:%8.1fkWh\nLoad:     %8.1fkWh\n",fChargeData,fDisChargeData,fLoadData);
    }  

}
/***************************************************************************
 * 功能:当日统计数据界面 中文界面
****************************************************************************/
void updateDisplayStatistics_Year_Chinese(uint8_t u8SetIndex)
{

}
/***************************************************************************
 * 功能:当日统计数据界面 西班牙语界面
****************************************************************************/
void updateDisplayStatistics_Year_Spanish(uint8_t u8SetIndex)
{

}
/***************************************************************************
 * 功能:当日统计数据界面 德语界面
****************************************************************************/
void updateDisplayStatistics_Year_German(uint8_t u8SetIndex)
{

}
/***************************************************************************
 * 功能:当日统计数据界面 法语界面
****************************************************************************/
void updateDisplayStatistics_Year_French(uint8_t u8SetIndex)
{

}
/***************************************************************************
 * 功能:当日统计数据界面 波兰语界面
****************************************************************************/
void updateDisplayStatistics_Year_Polish(uint8_t u8SetIndex)
{

}
/***************************************************************************
 * 功能:当日统计数据界面 意大利语界面
****************************************************************************/
void updateDisplayStatistics_Year_Italian(uint8_t u8SetIndex)
{

}
/***************************************************************************
 * 功能:当日统计数据界面 捷克语界面
****************************************************************************/
void updateDisplayStatistics_Year_Czech(uint8_t u8SetIndex)
{

}
/***************************************************************************
 * 功能:当日统计数据界面 荷兰语界面
****************************************************************************/
void updateDisplayStatistics_Year_Dutch(uint8_t u8SetIndex)
{

}

/***************************************************************************
 * 根据上一次界面操作类型和本次操作类型判断本次LOGIN界面切换   （累计统计数据）
****************************************************************************/
void updateDisplayStatistics_All(KeyAction_TypeDef nowActionType,DisplayAction_TypeDef nowDisplayType)
{
    static uint8_t sU8SetSystemCounter = 0;
    gLastMenu.eLastDisplayMenuType = DISPLAY_STATISTICS_ALL;                              
    switch(nowActionType)
    {
      case KEYACTION_DOWN :       
      {
          sU8SetSystemCounter++;
          if(sU8SetSystemCounter == DISPLAY_STATISTICS_ALL_COUNT)
          {
              sU8SetSystemCounter = 0;  
          }
             gCurrentMenu.eCurrentDisplayMenuType = nowDisplayType;
     }
     break;
     case KEYACTION_UP:         
     {
         sU8SetSystemCounter--;
         sU8SetSystemCounter = 0 ;
         if(sU8SetSystemCounter >= DISPLAY_STATISTICS_ALL_COUNT)
         {
             sU8SetSystemCounter = sU8SetSystemCounter - 1;  
         }
         gCurrentMenu.eCurrentDisplayMenuType = nowDisplayType;                
     }
     break;
     case KEYACTION_ESC:           
     {
         sU8SetSystemCounter = 0;
         gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_STATISTICS;
     }
     break;
     case KEYACTION_NULL://无操作
     default:
     {
         // 其他不响应
     }                            
     break;
    }

    if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_ENGLISH)        
    { 
        updateDisplayStatistics_All_English(sU8SetSystemCounter);
    }
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_CHINESE)   
    {
        updateDisplayStatistics_All_Chinese(sU8SetSystemCounter);
    }    
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_SPANISH)     
    { 
        updateDisplayStatistics_All_Spanish(sU8SetSystemCounter);
    } 
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_GERMAN)    
    { 
        updateDisplayStatistics_All_German(sU8SetSystemCounter);
    } 
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_FRENCH)      
    { 
        updateDisplayStatistics_All_French(sU8SetSystemCounter);
    }   
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_POLISH)    
    {
        updateDisplayStatistics_All_Polish(sU8SetSystemCounter);
    }    
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_ITALIAN)     
    {
        updateDisplayStatistics_All_Italian(sU8SetSystemCounter);
    } 
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_CZECH)     
    { 
        updateDisplayStatistics_All_Czech(sU8SetSystemCounter);
    }
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_DUTCH)   
    { 
        updateDisplayStatistics_All_Dutch(sU8SetSystemCounter);
    }
    else
    {   
        updateDisplayStatistics_All_English(sU8SetSystemCounter);
    }
    GUI_Display(tab_display, 0, 0);

}
/***************************************************************************
 * 功能:累计统计数据界面 荷兰语界面
****************************************************************************/
void updateDisplayStatistics_All_English(uint8_t u8SetIndex)
{
    memset(tab_display,0,DISPLAY_CACHE_SIZE);
    if(u8SetIndex == PAGE_ONE)
    {
        float fPvData = gDisplay.stDisplayData.stStatistical.stTotalStatisticaldata.stPVPowerGeneration / 10.0;        //后续优化除法
        float fInputData = gDisplay.stDisplayData.stStatistical.stTotalStatisticaldata.stInputPowerGeneration / 10.0;        //后续优化除法
        float fOutputData = gDisplay.stDisplayData.stStatistical.stTotalStatisticaldata.stOutputPowerGeneration / 10.0;        //后续优化除法
        sprintf(tab_display,"    Total Statistics \nPV:       %8.1fkWh\nSell:     %8.1fkWh\nBuy:      %8.1fkWh\n",fPvData,fInputData,fOutputData);
    }
    else if(u8SetIndex == PAGE_TWO)                                                              
    {
        float fChargeData = gDisplay.stDisplayData.stStatistical.stTotalStatisticaldata.stChagePowerGeneration / 10.0;       //后续优化除法
        float fDisChargeData = gDisplay.stDisplayData.stStatistical.stTotalStatisticaldata.stDisChagePowerGeneration / 10.0; //后续优化除法
        float fLoadData = gDisplay.stDisplayData.stStatistical.stTotalStatisticaldata.stLoadPowerGeneration / 10.0;    //后续优化除法
        sprintf(tab_display,"    Total Statistics \nCharge:   %8.1fkWh\nDisCharge:%8.1fkWh\nLoad:     %8.1fkWh\n",fChargeData,fDisChargeData,fLoadData);
    }  
}
/***************************************************************************
 * 功能:累计统计数据界面 中文界面
****************************************************************************/
void updateDisplayStatistics_All_Chinese(uint8_t u8SetIndex)
{

}
/***************************************************************************
 * 功能:累计统计数据界面 西班牙语界面
****************************************************************************/
void updateDisplayStatistics_All_Spanish(uint8_t u8SetIndex)
{

}
/***************************************************************************
 * 功能:累计统计数据界面 德语界面
****************************************************************************/
void updateDisplayStatistics_All_German(uint8_t u8SetIndex)
{

}
/***************************************************************************
 * 功能:累计统计数据界面 法语界面
****************************************************************************/
void updateDisplayStatistics_All_French(uint8_t u8SetIndex)
{

}
/***************************************************************************
 * 功能:累计统计数据界面 波兰语界面
****************************************************************************/
void updateDisplayStatistics_All_Polish(uint8_t u8SetIndex)
{

}
/***************************************************************************
 * 功能:累计统计数据界面 意大利语界面
****************************************************************************/
void updateDisplayStatistics_All_Italian(uint8_t u8SetIndex)
{

}
/***************************************************************************
 * 功能:累计统计数据界面 捷克语界面
****************************************************************************/
void updateDisplayStatistics_All_Czech(uint8_t u8SetIndex)
{

}
/***************************************************************************
 * 功能:累计统计数据界面 荷兰语界面
****************************************************************************/
void updateDisplayStatistics_All_Dutch(uint8_t u8SetIndex)
{

}

/***************************************************************************
 功能:根据上一次界面操作类型和本次操作类型判断本次 SET界面切换
****************************************************************************/
void updateDisplaySetData(KeyAction_TypeDef nowActionType,DisplayAction_TypeDef nowDisplayType)
{    
     //本次界面操作类型
    static uint8_t sU8SetCounter = 0;

    gLastMenu.eLastDisplayMenuType = DISPLAY_SET;
    switch(nowActionType) 
    {
        case KEYACTION_ENTER://在系统设置界面下，Enter键按下，进入选择对应的设置项
        {
            if(sU8SetCounter == SET_SYSTEM_Index)
            {
                gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_SET_SYSTEM;
            }
            else if(sU8SetCounter == SET_PV_Index)
            {
                gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_SET_PV;
            }
            else if(sU8SetCounter == SET_BATTERY_Index)
            {
                gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_SET_BATTERY;
            }
            else if(sU8SetCounter == SET_GRID_Index)
            {
                gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_SET_GRID;
            }
            else if(sU8SetCounter == SET_GEN_Index)
            {
                gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_SET_GEN;
            }
//                else if(sU8SetCounter == SET_UPGRADE_Index)
//                {
//                    gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_SET_UPGRADE;
//                } 
        }
        break;
        case KEYACTION_DOWN://在系统设置界面下，UP键按下，选择对应的设置项
            {
                sU8SetCounter++;
                if(sU8SetCounter>=DISPLAY_SET_ITEM_COUNT)
                {
                    sU8SetCounter = 0;
                }
                gCurrentMenu.eCurrentDisplayMenuType = nowDisplayType;
            }
            break;
        case KEYACTION_UP://在系统设置界面下，DOWN键按下，选择对应的设置项
            {
                sU8SetCounter--;
                if(sU8SetCounter>=DISPLAY_SET_ITEM_COUNT)
                {
                    sU8SetCounter = DISPLAY_SET_ITEM_COUNT - 1;
                }
                gCurrentMenu.eCurrentDisplayMenuType = nowDisplayType;
                
            }
            break;
        case KEYACTION_ESC://在系统设置界面下，ESC键按下，返回设置界面
            {
                gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_HOME;
            }
            break;
        case KEYACTION_NULL://无操作刷新主界面数据
        default:
            {
                gCurrentMenu.eCurrentDisplayMenuType = nowDisplayType;                
            }
            break;
    }
    
    if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_ENGLISH) //系统设置界面SystemSet 英文界面组装
    { 
        updateDisplaySetData_English(sU8SetCounter);                    
    }
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_CHINESE)//系统设置界面SystemSet 中文界面组装
    {
        updateDisplaySetData_Chinese(sU8SetCounter);
    }
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_SPANISH)//系统设置界面SystemSet 西班牙界面组装 
    {
        updateDisplaySetData_Spanish(sU8SetCounter);  
    } 
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_GERMAN)//系统设置界面SystemSet 德语界面组装
    {
        updateDisplaySetData_German(sU8SetCounter);  
    } 
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_FRENCH)//系统设置界面SystemSet 法语界面组装
    {
        updateDisplaySetData_French(sU8SetCounter);    
    }
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_POLISH)//系统设置界面SystemSet 波兰界面组装
    {
        updateDisplaySetData_Polish(sU8SetCounter); 
    } 
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_ITALIAN)//系统设置界面SystemSet 意大利界面组装
    {
       updateDisplaySetData_Italian(sU8SetCounter);  
    }   
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_CZECH)//系统设置界面SystemSet 捷克界面组装
    {
        updateDisplaySetData_Czech(sU8SetCounter);   
    }  
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_DUTCH)//系统设置界面SystemSet 荷兰界面组装
    {
        updateDisplaySetData_Dutch(sU8SetCounter);   
    }
    else
    { 
        updateDisplaySetData_English(sU8SetCounter);        
    }
}

/***************************************************************************
 功能:根据上一次界面操作类型和本次操作类型判断本次光伏 SET界面切换
****************************************************************************/
void updateDisplayPVSetData(KeyAction_TypeDef nowActionType,DisplayAction_TypeDef nowDisplayType)
{ 
    static uint8_t sU8PVSetCounter = 0;
    
    switch(nowActionType) 
    {
        case KEYACTION_ENTER://在光伏设置界面下，Enter键按下，进入选择对应的设置项
            {
                if(sU8PVSetCounter == SET_PV_CONTROLWAY_Index)
                {
                    gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_SET_PV_CONTROLWAY;
                }
                else if(sU8PVSetCounter == SET_PV_CURVESCAN_Index)
                {
                    gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_SET_PV_SCAN;
                }
				else if (sU8PVSetCounter == SET_PV_VOC_Index)
				{
					gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_SET_PV_VOC;
				}
				else
				{
					//None
				}
            }
            break;
        case KEYACTION_DOWN://在光伏设置界面下，UP键按下，选择对应的设置项
            {
                sU8PVSetCounter++;
                if(sU8PVSetCounter == DISPLAY_SET_SYSTEM_PV_ITEM_COUNT)
                {
                    sU8PVSetCounter = 0;  
                }
				else
				{
					//None
				}
                gCurrentMenu.eCurrentDisplayMenuType = nowDisplayType; 
            }
            break;
        case KEYACTION_UP://在光伏设置界面下，DOWN键按下，选择对应的设置项
            {
                sU8PVSetCounter--;
                if(sU8PVSetCounter >= DISPLAY_SET_SYSTEM_PV_ITEM_COUNT)
                {
                    sU8PVSetCounter = DISPLAY_SET_SYSTEM_PV_ITEM_COUNT - 1;  
                }
                gCurrentMenu.eCurrentDisplayMenuType = nowDisplayType;                
            }
            break;
        case KEYACTION_ESC://在光伏设置界面下，ESC键按下，返回设置界面
            {
                sU8PVSetCounter = 0;
                gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_SET;               
            }
            break;
        case KEYACTION_NULL://无操作刷新主界面数据
        default:
            {
               gCurrentMenu.eCurrentDisplayMenuType = nowDisplayType; 
            }
            break;
    }
    
    if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_ENGLISH) //光伏设置界面PVSet 英文界面组装
    { 
        updateDisplayPVSetData_English(sU8PVSetCounter);                    
    }
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_CHINESE)//光伏设置界面PVSet 中文界面组装
    {
        updateDisplayPVSetData_Chinese(sU8PVSetCounter);
    }
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_SPANISH)//光伏设置界面PVSet 西班牙界面组装 
    {
        updateDisplayPVSetData_Spanish(sU8PVSetCounter);  
    } 
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_GERMAN)//光伏设置界面PVSet 德语界面组装
    {
        updateDisplayPVSetData_German(sU8PVSetCounter);  
    } 
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_FRENCH)//光伏设置界面PVSet 法语界面组装
    {
        updateDisplayPVSetData_French(sU8PVSetCounter);    
    }
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_POLISH)//光伏设置界面PVSet 波兰界面组装
    {
        updateDisplayPVSetData_Polish(sU8PVSetCounter); 
    } 
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_ITALIAN)//光伏设置界面PVSet 意大利界面组装
    {
        updateDisplayPVSetData_Italian(sU8PVSetCounter);  
    }   
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_CZECH)//光伏设置界面PVSet 捷克界面组装
    {
        updateDisplayPVSetData_Czech(sU8PVSetCounter);   
    }  
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_DUTCH)//光伏设置界面PVSet 荷兰界面组装
    {
        updateDisplayPVSetData_Dutch(sU8PVSetCounter);   
    }
    else
    { 
        updateDisplayPVSetData_English(sU8PVSetCounter);        
    }
}

/***************************************************************************
 功能:光伏设置PVSET英文界面
****************************************************************************/
void updateDisplayPVSetData_English(uint8_t u8PVSetIndex)
{    
    memset(tab_display,0,DISPLAY_CACHE_SIZE);
    if(u8PVSetIndex == SET_PV_CONTROLWAY_Index)
    {
        sprintf(tab_display,"       PV SET        \n->PV Control Way     \nIV Curve Scan        \nPV VOC               \n");
    }
    else if(u8PVSetIndex == SET_PV_CURVESCAN_Index)
    {
        sprintf(tab_display,"       PV SET        \nPV Control Way       \n->IV Curve Scan      \nPV VOC               \n");
    }
    else if(u8PVSetIndex == SET_PV_VOC_Index)
    {
        sprintf(tab_display,"       PV SET        \nPV Control Way       \nIV Curve Scan        \n->PV VOC             \n");
    }
    else
    {
                    
    }
    GUI_Display(tab_display, 0, 0);
}
/***************************************************************************
 功能:光伏设置PVSET西班牙界面
****************************************************************************/
void updateDisplayPVSetData_Spanish(uint8_t u8PVSetIndex)
{
    
}
/***************************************************************************
 功能:光伏设置PVSET德语界面
****************************************************************************/
void updateDisplayPVSetData_German(uint8_t u8PVSetIndex)
{
    
}
/***************************************************************************
 功能:光伏设置PVSET法语界面
****************************************************************************/
void updateDisplayPVSetData_French(uint8_t u8PVSetIndex)
{
    
}
/***************************************************************************
 功能:光伏设置PVSET波兰语界面
****************************************************************************/
void updateDisplayPVSetData_Polish(uint8_t u8PVSetIndex)
{
    
}
/***************************************************************************
 功能:光伏设置PVSET意大利语界面
****************************************************************************/
void updateDisplayPVSetData_Italian(uint8_t u8PVSetIndex)
{
    
}
/***************************************************************************
 功能:光伏设置PVSET捷克语界面
****************************************************************************/
void updateDisplayPVSetData_Czech(uint8_t u8PVSetIndex)
{
    
}
/***************************************************************************
 功能:光伏设置PVSET荷兰语界面
****************************************************************************/
void updateDisplayPVSetData_Dutch(uint8_t u8PVSetIndex)
{
    
}
/***************************************************************************
 功能:根据上一次界面操作类型和本次操作类型判断本次PV控制方式界面切换
****************************************************************************/
void updateDisplayPVControlWaySetData(KeyAction_TypeDef nowActionType,DisplayAction_TypeDef nowDisplayType)
{
    static uint8_t sU8PVControlWayCounter = 0;
    
    switch(nowActionType)
    {
        case KEYACTION_ENTER://在PV控制方式设置界面下，Enter键按下，保存设置值
            {
                gDisplay.stDisplaySet.stPV.u8PVControlWay = PV_WAY_ALONE;
 
                gCurrentMenu.stTip.eOccurTipAction = DISPLAY_SET_PV_CONTROLWAY;
                gCurrentMenu.stTip.eTipType = TIP_PASSED;
                gCurrentMenu.stTip.u8PromptTime = 20;
                gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_PROMPT;
                
                sU8PVControlWayCounter = 0;
                generateOperationRecord(RECORD_SET_PV_CONTROLWAY);
            }
            break;
        case KEYACTION_ESC://在PV控制方式设置界面下，Esc键按下，进入上一级目录
            {
               gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_SET_PV; 
            }
            break;
        case KEYACTION_DOWN://在PV控制方式设置界面下，Up键按下，设置向下翻页
            {
                sU8PVControlWayCounter++;
                if(sU8PVControlWayCounter == DISPLAY_SET_SYSTEM_PVCONTROLEAY_ITEM_COUNT)
                {
                    sU8PVControlWayCounter = 0;
                }
                gCurrentMenu.eCurrentDisplayMenuType = nowDisplayType;
            }
            break;
        case KEYACTION_UP://在PV控制方式设置界面下，Enter键按下，设置向上翻页
            {
                sU8PVControlWayCounter--;
                if(sU8PVControlWayCounter >= DISPLAY_SET_SYSTEM_PVCONTROLEAY_ITEM_COUNT)
                {
                    sU8PVControlWayCounter = DISPLAY_SET_SYSTEM_PVCONTROLEAY_ITEM_COUNT-1;
                }
                gCurrentMenu.eCurrentDisplayMenuType = nowDisplayType;
            }
            break;
        case KEYACTION_NULL://无操作刷新界面数据
        default:
            {      
                gCurrentMenu.eCurrentDisplayMenuType = nowDisplayType;
            }
            break; 
    }
    
    if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_ENGLISH)//在PV控制方式设置界面下 英文界面组装 
    { 
        updateDisplayPVControlWaySetData_English(sU8PVControlWayCounter);                    
    }         
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_CHINESE)//在PV控制方式设置界面下 中文界面组装
    {
        updateDisplayPVControlWaySetData_Chinese(sU8PVControlWayCounter);
    }
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_SPANISH)//在PV控制方式设置界面下 西班牙界面组装 
    {
        updateDisplayPVControlWaySetData_Spanish(sU8PVControlWayCounter);  
    }   
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_GERMAN)//在PV控制方式设置界面下 德语界面组装
    {
        updateDisplayPVControlWaySetData_German(sU8PVControlWayCounter);  
    }   
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_FRENCH)//在PV控制方式设置界面下 法语界面组装 
    {
       updateDisplayPVControlWaySetData_French(sU8PVControlWayCounter);    
    } 
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_POLISH)//在PV控制方式设置界面下 波兰界面组装
    {
        updateDisplayPVControlWaySetData_Polish(sU8PVControlWayCounter); 
    }  
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_ITALIAN)//在PV控制方式设置界面下 意大利界面组装
    {
        updateDisplayPVControlWaySetData_Italian(sU8PVControlWayCounter);  
    } 
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_CZECH)//在PV控制方式设置界面下 捷克界面组装 
    {
        updateDisplayPVControlWaySetData_Czech(sU8PVControlWayCounter);   
    }        
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_DUTCH)//在PV控制方式设置界面下 荷兰界面组装 
    {
        updateDisplayPVControlWaySetData_Dutch(sU8PVControlWayCounter);   
    }
    else
    {  
        updateDisplayPVControlWaySetData_English(sU8PVControlWayCounter);        
    }    
}
/***************************************************************************
 功能:光伏设置PVSET英文界面
****************************************************************************/
void updateDisplayPVControlWaySetData_English(uint8_t u8PVContWaySetIndex)
{    
    memset(tab_display,0,DISPLAY_CACHE_SIZE);
    
    if(u8PVContWaySetIndex == PV_WAY_ALONE)
    {
        sprintf(tab_display,"    PV Control Way   \n->Alone              \nParallel             \n                     \n");
    }
    else if(u8PVContWaySetIndex == PV_WAY_PARAL)
    {
        sprintf(tab_display,"    PV Control Way   \nAlone                \n->Parallel           \n                     \n");
    }
    else
    {
                    
    }
    
    //GUI_DispStringAt((uint8_t*)tab_display, 0, 0); 
    GUI_Display(tab_display, 0, 0);
}
/***************************************************************************
 功能:光伏控制方式设置PVCONTROLWAYSET西班牙界面
****************************************************************************/
void updateDisplayPVControlWaySetData_Spanish(uint8_t u8PVContWaySetIndex)
{
    
}
/***************************************************************************
 功能:光伏控制方式设置PVCONTROLWAYSET德语界面
****************************************************************************/
void updateDisplayPVControlWaySetData_German(uint8_t u8PVContWaySetIndex)
{
    
}
/***************************************************************************
 功能:光伏控制方式设置PVCONTROLWAYSET法语界面
****************************************************************************/
void updateDisplayPVControlWaySetData_French(uint8_t u8PVContWaySetIndex)
{
    
}
/***************************************************************************
 功能:光伏控制方式设置PVCONTROLWAYSET波兰语界面
****************************************************************************/
void updateDisplayPVControlWaySetData_Polish(uint8_t u8PVContWaySetIndex)
{
    
}
/***************************************************************************
 功能:光伏控制方式设置PVCONTROLWAYSET意大利语界面
****************************************************************************/
void updateDisplayPVControlWaySetData_Italian(uint8_t u8PVContWaySetIndex)
{
    
}
/***************************************************************************
 功能:光伏控制方式设置PVCONTROLWAYSET捷克语界面
****************************************************************************/
void updateDisplayPVControlWaySetData_Czech(uint8_t u8PVContWaySetIndex)
{
    
}
/***************************************************************************
 功能:光伏控制方式设置PVCONTROLWAYSET荷兰语界面
****************************************************************************/
void updateDisplayPVControlWaySetData_Dutch(uint8_t u8PVContWaySetIndex)
{
    
}
/***************************************************************************
 功能:根据上一次界面操作类型和本次操作类型判断本次电池 SET界面切换
****************************************************************************/
void updateDisplayBMSSetData(KeyAction_TypeDef nowActionType,DisplayAction_TypeDef nowDisplayType)
{
    static uint8_t sU8BMSSetCounter = 0;
    
    switch(nowActionType) 
    {
        case KEYACTION_ENTER://在电池设置界面下，Enter键按下，进入选择对应的设置项
            {
                if(sU8BMSSetCounter == BMS_CLASS_BMS)
                {
                    gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_SET_BATTERY_ENABLE;
                }
                //else if(sU8BMSSetCounter == BMS_CLASS_WAKEUP)
                //{
                //    gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_SET_BATTERY_WAKEUP;   
                //}
                //else if(sU8BMSSetCounter == BMS_CLASS_MANUFACTURER)
                //{
                //    gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_SET_BATTERY_MANUFACTURER;  
                //}
                else if(sU8BMSSetCounter == BMS_CLASS_TYPE)
                {
                    gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_SET_BATTERY_TYPE;  
                }
            }
            break;
        case KEYACTION_DOWN://在电池设置界面下，UP键按下，向下选择对应的设置项
            {
                sU8BMSSetCounter++;
                if(sU8BMSSetCounter == DISPLAY_SET_BMS_ITEM_COUNT)
                {
                    sU8BMSSetCounter = 0;  
                }
                gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_SET_BATTERY;  
            }
            break;
        case KEYACTION_UP://在系统设置界面下，DOWN键按下，向上选择对应的设置项
            {
                sU8BMSSetCounter--;
                if(sU8BMSSetCounter >= DISPLAY_SET_BMS_ITEM_COUNT)
                {
                    sU8BMSSetCounter = DISPLAY_SET_BMS_ITEM_COUNT - 1;  
                }
                gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_SET_BATTERY;   
            }
            break;
        case KEYACTION_ESC://在系统设置界面下，ESC键按下，返回设置界面
            {
                gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_SET;               
            }
            break;
        case KEYACTION_NULL://无操作刷新主界面数据
        default:
            {
                gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_SET_BATTERY; 
            }
            break;
    }
    
    if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_ENGLISH) //电池设置数据显示 英文界面组装
    { 
        updateDisplayBMSSetData_English(sU8BMSSetCounter);                    
    }
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_CHINESE)//电池设置数据显示 中文界面组装
    {
        updateDisplayBMSSetData_Chinese(sU8BMSSetCounter);
    }    
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_SPANISH)//电池设置数据显示 西班牙界面组装
    { 
        updateDisplayBMSSetData_Spanish(sU8BMSSetCounter);
    } 
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_GERMAN)//电池设置数据显示 德语界面组装
    { 
        updateDisplayBMSSetData_German(sU8BMSSetCounter);
    } 
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_FRENCH)//电池设置数据显示 法语界面组装
    { 
        updateDisplayBMSSetData_French(sU8BMSSetCounter);                     
    }   
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_POLISH)//电池设置数据显示 波兰界面组装
    {
        updateDisplayBMSSetData_Polish(sU8BMSSetCounter);
    }    
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_ITALIAN)//电池设置数据显示 意大利界面组装
    {
        updateDisplayBMSSetData_Italian(sU8BMSSetCounter);                   
    } 
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_CZECH)//电池设置数据显示 捷克界面组装
    { 
        updateDisplayBMSSetData_Czech(sU8BMSSetCounter);                  
    }   
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_DUTCH)//电池设置数据显示 荷兰界面组装
    { 
        updateDisplayBMSSetData_Dutch(sU8BMSSetCounter);                 
    }
    else
    {   
        updateDisplayBMSSetData_English(sU8BMSSetCounter);                
    }
}

/***************************************************************************
功能:电池设置数据显示 英文界面信息
****************************************************************************/
void updateDisplayBMSSetData_English(uint8_t sU8BMSSetCounter)    
{
    memset(tab_display,0,DISPLAY_CACHE_SIZE);
       
    if(sU8BMSSetCounter == BMS_CLASS_BMS)
    {
        sprintf(tab_display,"     Battery Set     \n->Enable             \nType                 \n                     \n"); 
    }
    //else if(sU8BMSSetCounter == BMS_CLASS_WAKEUP)
    //{
    //    sprintf(tab_display,"     Battery Set     \nEnable               \n->Wake-up            \nManufacturer         \n");   
    //}
    //else if(sU8BMSSetCounter == BMS_CLASS_MANUFACTURER)
    //{
    //    sprintf(tab_display,"     Battery Set     \nEnable               \nWake-up              \n->Manufacturer       \n");  
    //}
    else if(sU8BMSSetCounter == BMS_CLASS_TYPE)
    {
        sprintf(tab_display,"     Battery Set     \nEnable               \n->Type               \n                     \n");  
    }
                  
    //GUI_DispStringAt((uint8_t*)tab_display, 0, 0); 
    GUI_Display(tab_display, 0, 0);
}


/***************************************************************************
 功能:电池设置数据显示 西班牙界面信息
****************************************************************************/
void updateDisplayBMSSetData_Spanish(uint8_t sU8BMSSetCounter)
{
    
}

/***************************************************************************
 功能:电池设置数据显示 德语界面信息
****************************************************************************/
void updateDisplayBMSSetData_German(uint8_t sU8BMSSetCounter)
{
    
}

/***************************************************************************
 功能:电池设置数据显示 法语界面信息
****************************************************************************/
void updateDisplayBMSSetData_French(uint8_t sU8BMSSetCounter)
{
    
}

/***************************************************************************
 功能:电池设置数据显示 波兰语界面信息
****************************************************************************/
void updateDisplayBMSSetData_Polish(uint8_t sU8BMSSetCounter)
{
    
}

/***************************************************************************
 功能:电池设置数据显示 意大利语界面信息
****************************************************************************/
void updateDisplayBMSSetData_Italian(uint8_t sU8BMSSetCounter)
{
    
}

/***************************************************************************
 功能:电池设置数据显示 捷克语界面信息
****************************************************************************/
void updateDisplayBMSSetData_Czech(uint8_t sU8BMSSetCounter)
{
    
}

/***************************************************************************
 功能:电池设置数据显示 荷兰语界面信息
****************************************************************************/
void updateDisplayBMSSetData_Dutch(uint8_t sU8BMSSetCounter)
{
    
}

/***************************************************************************
 功能:根据上一次界面操作类型和本次操作类型判断本次电池厂商SET界面切换
****************************************************************************/
void updateDisplayBatteryManufacturerSetData(KeyAction_TypeDef nowActionType,DisplayAction_TypeDef nowDisplayType)
{
    static uint8_t sU8BatteryManufacturerCounter = 0;
    
    switch(nowActionType)
    {
        case KEYACTION_ENTER://在电池厂商界面下，Enter键按下，进入选择对应的设置项
            {
                if(gbEditFlag != STATUS_FALSE)
                {
                    SetBmsProtocolType((BMS_Manu_TypeDef)gU8BatteryManufacturerCounter_modify); //发给BMS通信
                    setBatteryManufacturerItem((BMS_Manu_TypeDef)gU8BatteryManufacturerCounter_modify); //写到FLASH，需要预留FLASH接口
                    gbEditFlag = STATUS_FALSE;
                    sU8BatteryManufacturerCounter = gU8BatteryManufacturerCounter_modify;
                    gU8BatteryManufacturerCounter_modify = 0;
                    generateOperationRecord(RECORD_SET_BATTERY_MANUFACT);
                }
            }
            break;
        case KEYACTION_DOWN://在电池厂商界面下，UP键按下，页面数字加一
            {
                if(gbEditFlag != STATUS_TRUE) //进入编辑模式  
                {
                    gbEditFlag = STATUS_TRUE;
                    gU8BatteryManufacturerCounter_modify = sU8BatteryManufacturerCounter;
                }
                gU8BatteryManufacturerCounter_modify++;
                if(gU8BatteryManufacturerCounter_modify == DISPLAY_SET_BMS_MANUFACTURER_COUNT)
                {
                    gU8BatteryManufacturerCounter_modify = 0;
                }
                gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_SET_BATTERY_TYPE_LI_ION_MANUFACTURER;
                
            }
            break; 
        case KEYACTION_UP://在电池厂商界面下，UP键按下，页面数字加一
            {
                if(gbEditFlag != STATUS_TRUE) //进入编辑模式  
                {
                    gbEditFlag = STATUS_TRUE;
                    gU8BatteryManufacturerCounter_modify = sU8BatteryManufacturerCounter;
                }
                gU8BatteryManufacturerCounter_modify--;
                if(gU8BatteryManufacturerCounter_modify >= DISPLAY_SET_BMS_MANUFACTURER_COUNT)
                {
                    gU8BatteryManufacturerCounter_modify = DISPLAY_SET_BMS_MANUFACTURER_COUNT - 1;
                }
                gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_SET_BATTERY_TYPE_LI_ION_MANUFACTURER;
                
            }
            break; 
        case KEYACTION_ESC://在电池厂商界面下，Esc键按下，回退到电池设置界面
            {
                gbEditFlag = STATUS_FALSE;
                sU8BatteryManufacturerCounter = 0;
                gU8BatteryManufacturerCounter_modify = 0;
                gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_SET_BATTERY_TYPE_LI_ION;
            }
            break;
        case KEYACTION_NULL://无操作
        default:
                {
                if(gbEditFlag == STATUS_FALSE)
                {
                    sU8BatteryManufacturerCounter = getBatteryManufacturerItem();
                }
                gCurrentMenu.eCurrentDisplayMenuType = nowDisplayType;
            }
            break;            
    }
    
    if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_ENGLISH)//在绝缘检测使能设置界面下 英文界面组装 
    { 
        if(gbEditFlag == STATUS_TRUE)
        {
            updateDisplayBatteryManufacturerSetData_English(gU8BatteryManufacturerCounter_modify);
        }
        else
        {
        updateDisplayBatteryManufacturerSetData_English(sU8BatteryManufacturerCounter);                    
        }
    }         
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_CHINESE)//在绝缘检测使能设置界面下 中文界面组装
    {
        updateDisplayBatteryManufacturerSetData_Chinese(sU8BatteryManufacturerCounter);
    }
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_SPANISH)//在绝缘检测使能设置界面下 西班牙界面组装 
    {
        updateDisplayBatteryManufacturerSetData_Spanish(sU8BatteryManufacturerCounter);  
    }   
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_GERMAN)//在绝缘检测使能设置界面下 德语界面组装
    {
        updateDisplayBatteryManufacturerSetData_German(sU8BatteryManufacturerCounter);  
    }   
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_FRENCH)//在绝缘检测使能设置界面下 法语界面组装 
    {
        updateDisplayBatteryManufacturerSetData_French(sU8BatteryManufacturerCounter);    
    } 
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_POLISH)//在绝缘检测使能设置界面下 波兰界面组装
    {
        updateDisplayBatteryManufacturerSetData_Polish(sU8BatteryManufacturerCounter); 
    }  
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_ITALIAN)//在绝缘检测使能设置界面下 意大利界面组装
    {
        updateDisplayBatteryManufacturerSetData_Italian(sU8BatteryManufacturerCounter);  
    } 
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_CZECH)//在绝缘检测使能设置界面下 捷克界面组装 
    {
        updateDisplayBatteryManufacturerSetData_Czech(sU8BatteryManufacturerCounter);   
    }        
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_DUTCH)//在绝缘检测使能设置界面下 荷兰界面组装 
    {
        updateDisplayBatteryManufacturerSetData_Dutch(sU8BatteryManufacturerCounter);   
    }
    else
    {  
        updateDisplayBatteryManufacturerSetData_English(sU8BatteryManufacturerCounter);        
    }  
}

/***************************************************************************
功能:电池设置数据显示 英文界面信息
****************************************************************************/
void updateDisplayBatteryManufacturerSetData_English(uint8_t sU8BatteryManufacturerCounter)    
{
    memset(tab_display,0,DISPLAY_CACHE_SIZE);
       
    if(sU8BatteryManufacturerCounter == BMS_MANU_CVTE)
    {
        sprintf(tab_display,"   BMS Manufacturer  \n->CVTE               \nPylon                \n                     \n"); 
    }
    //else if(sU8BatteryManufacturerCounter == BMS_MANU_LG)
    //{
    //    sprintf(tab_display,"   BMS Manufacturer  \nCVTE                 \n->LG                 \nPylon                \n");   
    //}
    else if(sU8BatteryManufacturerCounter == BMS_MANU_Pylon)
    {
        sprintf(tab_display,"   BMS Manufacturer  \nCVTE                 \n->Pylon              \n                     \n");  
    }
                  
    //GUI_DispStringAt((uint8_t*)tab_display, 0, 0); 
    GUI_Display(tab_display, 0, 0);
}


/***************************************************************************
 功能:电池设置数据显示 西班牙界面信息
****************************************************************************/
void updateDisplayBatteryManufacturerSetData_Spanish(uint8_t sU8BatteryManufacturerCounter)
{
    
}

/***************************************************************************
 功能:电池设置数据显示 德语界面信息
****************************************************************************/
void updateDisplayBatteryManufacturerSetData_German(uint8_t sU8BatteryManufacturerCounter)
{
    
}

/***************************************************************************
 功能:电池设置数据显示 法语界面信息
****************************************************************************/
void updateDisplayBatteryManufacturerSetData_French(uint8_t sU8BatteryManufacturerCounter)
{
    
}

/***************************************************************************
 功能:电池设置数据显示 波兰语界面信息
****************************************************************************/
void updateDisplayBatteryManufacturerSetData_Polish(uint8_t sU8BatteryManufacturerCounter)
{
    
}

/***************************************************************************
 功能:电池设置数据显示 意大利语界面信息
****************************************************************************/
void updateDisplayBatteryManufacturerSetData_Italian(uint8_t sU8BatteryManufacturerCounter)
{
    
}

/***************************************************************************
 功能:电池设置数据显示 捷克语界面信息
****************************************************************************/
void updateDisplayBatteryManufacturerSetData_Czech(uint8_t sU8BatteryManufacturerCounter)
{
    
}

/***************************************************************************
 功能:电池设置数据显示 荷兰语界面信息
****************************************************************************/
void updateDisplayBatteryManufacturerSetData_Dutch(uint8_t sU8BatteryManufacturerCounter)
{
    
}

/***************************************************************************
 功能:设置电池厂商到Flash
****************************************************************************/
BMS_Manu_TypeDef getBatteryManufacturerItem(void)
{
    Flash_Device_BMSInfo_Read(&gDisplay.stDisplaySet.stBMS,sizeof(Display_SET_BMS));
    return (BMS_Manu_TypeDef)gDisplay.stDisplaySet.stBMS.u8ProtocolType;
}

/***************************************************************************
 功能:设置当前系统的电池厂商
****************************************************************************/
void setBatteryManufacturerItem(BMS_Manu_TypeDef BMSManuItem)
{
    Flash_Device_BMSInfo_Read(&gDisplay.stDisplaySet.stBMS,sizeof(Display_SET_BMS));
    gDisplay.stDisplayData.stSystemData.u8BatteryManufacturer = BMSManuItem;
    gDisplay.stDisplaySet.stBMS.u8ProtocolType = BMSManuItem;
    Flash_Device_BMSInfo_Write(&gDisplay.stDisplaySet.stBMS,sizeof(Display_SET_BMS));
}

/***************************************************************************
 功能:根据上一次界面操作类型和本次操作类型判断本次锂电电池SET界面切换
****************************************************************************/
void updateDisplayBatteryLiIonParaSetData(KeyAction_TypeDef nowActionType,DisplayAction_TypeDef nowDisplayType)
{
    static uint8_t sU8BatteryLiParaCounter = 0;
    
    switch(nowActionType)
    {
        case KEYACTION_ENTER://在锂电电池设置界面下，Enter键按下，进入选择对应的设置项
            {
               if(sU8BatteryLiParaCounter == BMS_LI_ION_PARASET_MANUFACT)
                {
                    gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_SET_BATTERY_TYPE_LI_ION_MANUFACTURER;
                }
                else if(sU8BatteryLiParaCounter == BMS_LI_ION_PARASET_COM_WAY)
                {
                    gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_SET_BATTERY_TYPE_LI_ION_COMWAY;
                }   
                else if(sU8BatteryLiParaCounter == BMS_LI_ION_PARASET_ENDOF_SOC)
                {
                    gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_SET_BATTERY_TYPE_LI_ION_ENDOF_SOC;
                } 
                else if(sU8BatteryLiParaCounter == BMS_LI_ION_PARASET_CURRENT)
                    {
                        gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_SET_BATTERY_TYPE_LI_ION_CURRENT;
                    } 
                    //else if(sU8BatteryLiParaCounter == BMS_LI_ION_PARASET_OVERPROCTECT)
                    //{
                    //    gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_SET_BATTERY_TYPE_LI_ION_OVERPROCTECT;
                    //}
            }
            break;
        case KEYACTION_DOWN://在锂电电池界面下，UP键按下，页面数字加一
            {
                sU8BatteryLiParaCounter++;
                if(sU8BatteryLiParaCounter == DISPLAY_SET_BMS_TYPE_COUNT_LI_ION_PARASET)
                {
                    sU8BatteryLiParaCounter = 0;  
                }
                gCurrentMenu.eCurrentDisplayMenuType = nowDisplayType;        
            
            }
            break; 
        case KEYACTION_UP://在锂电电池界面下，UP键按下，页面数字加一
            {
                sU8BatteryLiParaCounter--;
                if(sU8BatteryLiParaCounter >= DISPLAY_SET_BMS_TYPE_COUNT_LI_ION_PARASET)
                {
                    sU8BatteryLiParaCounter = DISPLAY_SET_BMS_TYPE_COUNT_LI_ION_PARASET - 1;  
                }      
                gCurrentMenu.eCurrentDisplayMenuType = nowDisplayType;
            }
            break; 
        case KEYACTION_ESC://在锂电电池界面下，Esc键按下，回退到电池设置界面
            {
                gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_SET_BATTERY_TYPE;
            }
            break;
        case KEYACTION_NULL://无操作
        default:
            {
                gCurrentMenu.eCurrentDisplayMenuType = nowDisplayType;  
            }
            break;            
    }
    
    if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_ENGLISH)//在锂电电池设置界面下 英文界面组装 
    { 
        updateDisplayBatteryLiIonParaSetData_English(sU8BatteryLiParaCounter);                    
    }
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_CHINESE)//在锂电电池设置界面下 中文界面组装
    {
        updateDisplayBatteryLiIonParaSetData_Chinese(sU8BatteryLiParaCounter);
    }
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_SPANISH)//在锂电电池设置界面下 西班牙界面组装 
    {
        updateDisplayBatteryLiIonParaSetData_Spanish(sU8BatteryLiParaCounter);  
    }   
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_GERMAN)//在锂电电池设置界面下 德语界面组装
    {
        updateDisplayBatteryLiIonParaSetData_German(sU8BatteryLiParaCounter);  
    }   
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_FRENCH)//在锂电电池设置界面下 法语界面组装 
    {
        updateDisplayBatteryLiIonParaSetData_French(sU8BatteryLiParaCounter);    
    } 
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_POLISH)//在锂电电池设置界面下 波兰界面组装
    {
        updateDisplayBatteryLiIonParaSetData_Polish(sU8BatteryLiParaCounter); 
    }  
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_ITALIAN)//在锂电电池设置界面下 意大利界面组装
    {
        updateDisplayBatteryLiIonParaSetData_Italian(sU8BatteryLiParaCounter);  
    } 
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_CZECH)//在锂电电池设置界面下 捷克界面组装 
    {
        updateDisplayBatteryLiIonParaSetData_Czech(sU8BatteryLiParaCounter);   
    }        
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_DUTCH)//在锂电电池设置界面下 荷兰界面组装 
    {
        updateDisplayBatteryLiIonParaSetData_Dutch(sU8BatteryLiParaCounter);   
    }
    else
    {  
        updateDisplayBatteryLiIonParaSetData_English(sU8BatteryLiParaCounter);        
    }   
}

/***************************************************************************
功能:电池设置数据显示 英文界面信息
****************************************************************************/
void updateDisplayBatteryLiIonParaSetData_English(uint8_t sU8BatteryLiParaCounter)    
{
    memset(tab_display,0,DISPLAY_CACHE_SIZE);
       
   if(sU8BatteryLiParaCounter == BMS_LI_ION_PARASET_MANUFACT)
    {
        sprintf(tab_display,"   LI.ION ParaSet    \n->Manufacturer       \nComWay               \nEndofSOC             \n"); 
    }
    else if(sU8BatteryLiParaCounter == BMS_LI_ION_PARASET_COM_WAY)
    {
        sprintf(tab_display,"   LI.ION ParaSet    \nManufacturer         \n->ComWay             \nEndofSOC             \n");   
    }   
    else if(sU8BatteryLiParaCounter == BMS_LI_ION_PARASET_ENDOF_SOC)
    {
        sprintf(tab_display,"   LI.ION ParaSet    \nManufacturer         \nComWay               \n->EndofSOC           \n");    
    }
    else if(sU8BatteryLiParaCounter == BMS_LI_ION_PARASET_CURRENT)
    {
        sprintf(tab_display,"   LI.ION ParaSet    \n->MaxCurrent         \n                     \n                     \n");   
    } 
   //else if(sU8BatteryLiParaCounter == BMS_LI_ION_PARASET_OVERPROCTECT)
   //{
   //    sprintf(tab_display,"   LI.ION ParaSet    \n->OverProctect       \n                     \n                     \n");   
   //}                       
    //GUI_DispStringAt((uint8_t*)tab_display, 0, 0); 
    GUI_Display(tab_display, 0, 0);
}

/***************************************************************************
 功能:电池设置数据显示 中文界面信息
****************************************************************************/
void updateDisplayBatteryLiIonParaSetData_Spanish(uint8_t sU8BatteryLiParaCounter)
{
    
}
/***************************************************************************
 功能:电池设置数据显示 西班牙界面信息
****************************************************************************/
void updateDisplayBatteryLiIonParaSetData_Chinese(uint8_t sU8BatteryLiParaCounter)
{
    
}

/***************************************************************************
 功能:电池设置数据显示 德语界面信息
****************************************************************************/
void updateDisplayBatteryLiIonParaSetData_German(uint8_t sU8BatteryLiParaCounter)
{
    
}

/***************************************************************************
 功能:电池设置数据显示 法语界面信息
****************************************************************************/
void updateDisplayBatteryLiIonParaSetData_French(uint8_t sU8BatteryLiParaCounter)
{
    
}

/***************************************************************************
 功能:电池设置数据显示 波兰语界面信息
****************************************************************************/
void updateDisplayBatteryLiIonParaSetData_Polish(uint8_t sU8BatteryLiParaCounter)
{
    
}

/***************************************************************************
 功能:电池设置数据显示 意大利语界面信息
****************************************************************************/
void updateDisplayBatteryLiIonParaSetData_Italian(uint8_t sU8BatteryLiParaCounter)
{
    
}

/***************************************************************************
 功能:电池设置数据显示 捷克语界面信息
****************************************************************************/
void updateDisplayBatteryLiIonParaSetData_Czech(uint8_t sU8BatteryLiParaCounter)
{
    
}

/***************************************************************************
 功能:电池设置数据显示 荷兰语界面信息
****************************************************************************/
void updateDisplayBatteryLiIonParaSetData_Dutch(uint8_t sU8BatteryLiParaCounter)
{
    
}

/***************************************************************************
 功能:根据上一次界面操作类型和本次操作类型判断本次电池厂商SET界面切换
****************************************************************************/
void updateDisplayBatteryLiIonComWaySetData(KeyAction_TypeDef nowActionType,DisplayAction_TypeDef nowDisplayType)
{
    static uint8_t sU8BatteryComWayCounter = 0;
    
    switch(nowActionType)
    {
        case KEYACTION_ENTER://在电池厂商界面下，Enter键按下，进入选择对应的设置项
            {
                if(gbEditFlag != STATUS_FALSE)
                {               
                    gbEditFlag = STATUS_FALSE;
                    //gDisplay.stDisplaySet.stBMS.stHMISetBMSLiIonParas.u8ComWayFlag = gU8BatteryComWayCounter_modify;
                    sU8BatteryComWayCounter = gU8BatteryComWayCounter_modify;
                    SetBmsComWayType((BMS_COMWAY_TypeDef)gU8BatteryComWayCounter_modify);   //发送给BMS通信
                    setLiIonComWayFlagData(sU8BatteryComWayCounter);
                    gU8BatteryComWayCounter_modify = 0;
                    //generateOperationRecord(RECORD_SET_BATTERY_MANUFACT);
                }
            }
            break;
        case KEYACTION_DOWN://在电池厂商界面下，UP键按下，页面数字加一
            {
                if(gbEditFlag != STATUS_TRUE) //进入编辑模式  
                {
                    gbEditFlag = STATUS_TRUE;
                    gU8BatteryComWayCounter_modify = sU8BatteryComWayCounter;
                }
                gU8BatteryComWayCounter_modify++;
                if(gU8BatteryComWayCounter_modify == DISPLAY_SET_BMS_TYPE_COUNT_LI_COM_WAY)
                {
                    gU8BatteryComWayCounter_modify = 0;
                }
                gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_SET_BATTERY_TYPE_LI_ION_COMWAY;
                
            }
            break; 
        case KEYACTION_UP://在电池厂商界面下，UP键按下，页面数字加一
            {
                if(gbEditFlag != STATUS_TRUE) //进入编辑模式  
                {
                    gbEditFlag = STATUS_TRUE;
                    gU8BatteryComWayCounter_modify = sU8BatteryComWayCounter;
                }
                gU8BatteryComWayCounter_modify--;
                if(gU8BatteryComWayCounter_modify >= DISPLAY_SET_BMS_TYPE_COUNT_LI_COM_WAY)
                {
                    gU8BatteryComWayCounter_modify = DISPLAY_SET_BMS_TYPE_COUNT_LI_COM_WAY - 1;
                }
                gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_SET_BATTERY_TYPE_LI_ION_COMWAY;
                
            }
            break; 
        case KEYACTION_ESC://在电池厂商界面下，Esc键按下，回退到电池设置界面
            {
                gbEditFlag = STATUS_FALSE;
                sU8BatteryComWayCounter = 0;
                gU8BatteryComWayCounter_modify = 0;
                gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_SET_BATTERY_TYPE_LI_ION;
            }
            break;
        case KEYACTION_NULL://无操作
        default:
            {
                if(gbEditFlag == STATUS_FALSE)
                {
                    Display_SET_BMS_LiIon_Paras *pStBmsPara = getLiIonParasData();
                    uint8_t s8ComWay = pStBmsPara->u8ComWayFlag;                    
                    sU8BatteryComWayCounter = s8ComWay;

                    //sU8BatteryComWayCounter = gDisplay.stDisplaySet.stBMS.stHMISetBMSLiIonParas.u8ComWayFlag;
                }
                gCurrentMenu.eCurrentDisplayMenuType = nowDisplayType;
            }
            break;            
    }
    
    if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_ENGLISH)//在绝缘检测使能设置界面下 英文界面组装 
    { 
        if(gbEditFlag == STATUS_TRUE)
        {
            updateDisplayBatteryLiIonComWaySetData_English(gU8BatteryComWayCounter_modify);
        }
        else
        {
            updateDisplayBatteryLiIonComWaySetData_English(sU8BatteryComWayCounter);                    
        }
    }
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_CHINESE)//在锂电电池通信方式设置界面下 中文界面组装
    {
        updateDisplayBatteryLiIonComWaySetData_Chinese(gU8BatteryComWayCounter_modify);
    }
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_SPANISH)//在锂电电池通信方式设置界面下 西班牙界面组装 
    {
        updateDisplayBatteryLiIonComWaySetData_Spanish(gU8BatteryComWayCounter_modify);  
    }   
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_GERMAN)//在锂电电池通信方式设置界面下 德语界面组装
    {
        updateDisplayBatteryLiIonComWaySetData_German(gU8BatteryComWayCounter_modify);  
    }   
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_FRENCH)//在锂电电池通信方式设置界面下 法语界面组装 
    {
        updateDisplayBatteryLiIonComWaySetData_French(gU8BatteryComWayCounter_modify);    
    } 
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_POLISH)//在锂电电池通信方式设置界面下 波兰界面组装
    {
        updateDisplayBatteryLiIonComWaySetData_Polish(gU8BatteryComWayCounter_modify); 
    }  
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_ITALIAN)//在锂电电池通信方式设置界面下 意大利界面组装
    {
        updateDisplayBatteryLiIonComWaySetData_Italian(gU8BatteryComWayCounter_modify);  
    } 
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_CZECH)//在锂电电池通信方式设置界面下 捷克界面组装 
    {
        updateDisplayBatteryLiIonComWaySetData_Czech(gU8BatteryComWayCounter_modify);   
    }        
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_DUTCH)//在锂电电池通信方式设置界面下 荷兰界面组装 
    {
        updateDisplayBatteryLiIonComWaySetData_Dutch(gU8BatteryComWayCounter_modify);   
    }
    else
    {  
        updateDisplayBatteryLiIonComWaySetData_English(gU8BatteryComWayCounter_modify);        
    }           

}



/***************************************************************************
功能:电池设置数据显示 英文界面信息
****************************************************************************/
void updateDisplayBatteryLiIonComWaySetData_English(uint8_t sU8BatteryComWayCounter)    
{
    memset(tab_display,0,DISPLAY_CACHE_SIZE);
       
    if(sU8BatteryComWayCounter == BMS_LI_ION_CAN)
    {
        sprintf(tab_display,"      BMS ComWay     \n->CAN                \n485                  \n                     \n"); 
    }
    else if(sU8BatteryComWayCounter == BMS_LI_ION_485)
    {
        sprintf(tab_display,"      BMS ComWay     \nCAN                  \n->485                \n                     \n");   
    }
                  
    //GUI_DispStringAt((uint8_t*)tab_display, 0, 0); 
    GUI_Display(tab_display, 0, 0);
}

/***************************************************************************
 功能:电池设置数据显示 中文界面信息
****************************************************************************/
void updateDisplayBatteryLiIonComWaySetData_Spanish(uint8_t sU8BatteryComWayCounter)
{
    
}
/***************************************************************************
 功能:电池设置数据显示 西班牙界面信息
****************************************************************************/
void updateDisplayBatteryLiIonComWaySetData_Chinese(uint8_t sU8BatteryComWayCounter)
{
    
}

/***************************************************************************
 功能:电池设置数据显示 德语界面信息
****************************************************************************/
void updateDisplayBatteryLiIonComWaySetData_German(uint8_t sU8BatteryComWayCounter)
{
    
}

/***************************************************************************
 功能:电池设置数据显示 法语界面信息
****************************************************************************/
void updateDisplayBatteryLiIonComWaySetData_French(uint8_t sU8BatteryComWayCounter)
{
    
}

/***************************************************************************
 功能:电池设置数据显示 波兰语界面信息
****************************************************************************/
void updateDisplayBatteryLiIonComWaySetData_Polish(uint8_t sU8BatteryComWayCounter)
{
    
}

/***************************************************************************
 功能:电池设置数据显示 意大利语界面信息
****************************************************************************/
void updateDisplayBatteryLiIonComWaySetData_Italian(uint8_t sU8BatteryComWayCounter)
{
    
}

/***************************************************************************
 功能:电池设置数据显示 捷克语界面信息
****************************************************************************/
void updateDisplayBatteryLiIonComWaySetData_Czech(uint8_t sU8BatteryComWayCounter)
{
    
}

/***************************************************************************
 功能:电池设置数据显示 荷兰语界面信息
****************************************************************************/
void updateDisplayBatteryLiIonComWaySetData_Dutch(uint8_t sU8BatteryComWayCounter)
{
    
}

/***************************************************************************
 功能:保存通信方式到Flash
****************************************************************************/
void setLiIonComWayFlagData(uint8_t u8ComWayFlag)
{
   Flash_Device_BMSInfo_Read(&gDisplay.stDisplaySet.stBMS,sizeof(Display_SET_BMS));
   gDisplay.stDisplaySet.stBMS.stHMISetBMSLiIonParas.u8ComWayFlag = u8ComWayFlag;
   Flash_Device_BMSInfo_Write(&gDisplay.stDisplaySet.stBMS,sizeof(Display_SET_BMS));
}
/***************************************************************************
 功能:根据上一次界面操作类型和本次操作类型判断本次电池厂商SET界面切换
****************************************************************************/

void updateDisplayBatteryLiIonParaSetEndofSOCData(KeyAction_TypeDef nowActionType,DisplayAction_TypeDef nowDisplayType)
{
    static uint8_t sU8SetBmsCounter = 0;
    static uint8_t sU8NumberCounter = 0;
    
    switch(nowActionType) 
    {
        case KEYACTION_ENTER://在时间设置界面下，Enter键按下，在系统设置对应的时间
            {
                if(gbEditFlag != STATUS_FALSE)//退出编辑模式
                {
                    uint8_t u8BmsCharSOC = atoi(tab_BMS_LiIon_Endof_CharSOC_modify); 
                    //gDisplay.stDisplaySet.stBMS.stHMISetBMSLiIonParas.u8EndOfCharSOC = u8BmsCharSOC;
                    uint8_t u8BmsDisCharSOC = atoi(tab_BMS_LiIon_Endof_DisCharSOC_modify); 
                    //gDisplay.stDisplaySet.stBMS.stHMISetBMSLiIonParas.u8EndOfDisCharSOC = u8BmsDisCharSOC;
                    
                    sprintf(tab_BMS_LiIon_Endof_CharSOC,"%s",tab_BMS_LiIon_Endof_CharSOC_modify);
                    sprintf(tab_BMS_LiIon_Endof_DisCharSOC,"%s",tab_BMS_LiIon_Endof_DisCharSOC_modify);


                    setLiIonEndofSOCData(u8BmsCharSOC, u8BmsDisCharSOC);
                    sU8SetBmsCounter = 0;
                    sU8NumberCounter = 0;
                    gCurrentMenu.eCurrentDisplayMenuType = nowDisplayType;
                    gbEditFlag = STATUS_FALSE;
                    Display_Set_UnderLine_Blink_Position(STATUS_FALSE,0,0);
                } 
            }
            break;
            case KEYACTION_ESC:
            {
                sU8SetBmsCounter = 0;
                sU8NumberCounter = 0;
                gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_SET_BATTERY_TYPE_LI_ION;
                gbEditFlag = STATUS_FALSE;
                Display_Set_UnderLine_Blink_Position(STATUS_FALSE,0,0);
            }
            break;
        case KEYACTION_DOWN://在系统设置界面下，UP键按下，选择对应的设置项
            {
                if(gbEditFlag != STATUS_TRUE)
                {
                    gbEditFlag = STATUS_TRUE;
                    sprintf(tab_BMS_LiIon_Endof_CharSOC_modify,"%s",tab_BMS_LiIon_Endof_CharSOC);
                    sprintf(tab_BMS_LiIon_Endof_DisCharSOC_modify,"%s",tab_BMS_LiIon_Endof_DisCharSOC);
                }                
                sU8NumberCounter++; 
                              
                if(sU8SetBmsCounter == 0) 
                {
                    if(sU8NumberCounter > 1)
                    {
                        sU8NumberCounter = 0;
                    } 
                    
                    tab_BMS_LiIon_Endof_CharSOC_modify[0] =  '0' + sU8NumberCounter;
                    
                    if(tab_BMS_LiIon_Endof_CharSOC_modify[0] == '1')
                    {
                       tab_BMS_LiIon_Endof_CharSOC_modify[1] =  '0';
                       tab_BMS_LiIon_Endof_CharSOC_modify[2] =  '0';
                    } 
                } 
                else if(sU8SetBmsCounter == 1)
                {
                    if(tab_BMS_LiIon_Endof_CharSOC_modify[0] == '1')
                    {
                        sU8NumberCounter = 0;
                    }
                    else
                    {
                        if(sU8NumberCounter > 9)
                        {
                            sU8NumberCounter = 0;
                        }
                    }
                    tab_BMS_LiIon_Endof_CharSOC_modify[1] =  '0' + sU8NumberCounter;
                }
                else if(sU8SetBmsCounter == 2)
                {
                    if(tab_BMS_LiIon_Endof_CharSOC_modify[0] == '1')
                    {
                        sU8NumberCounter = 0;
                    }
                    else
                    {
                        if(sU8NumberCounter > 9)
                        {
                            sU8NumberCounter = 0;
                        }
                    } 
                    tab_BMS_LiIon_Endof_CharSOC_modify[2] =  '0' + sU8NumberCounter;  
                }
                else if(sU8SetBmsCounter == 3)
                {
                    if(sU8NumberCounter > 1)
                    {
                        sU8NumberCounter = 0;
                    }
                    tab_BMS_LiIon_Endof_DisCharSOC_modify[0] =  '0' + sU8NumberCounter;  

                    if(tab_BMS_LiIon_Endof_DisCharSOC_modify[0] == '1')
                    {
                       tab_BMS_LiIon_Endof_DisCharSOC_modify[1] =  '0';
                       tab_BMS_LiIon_Endof_DisCharSOC_modify[2] =  '0';
                    }
                }
                else if(sU8SetBmsCounter == 4)
                {
                    if(tab_BMS_LiIon_Endof_DisCharSOC_modify[0] == '1')
                    {
                        sU8NumberCounter = 0;
                    }
                    else
                    {
                        if(sU8NumberCounter > 9)
                        {
                            sU8NumberCounter = 1;
                        }
                    } 
                    tab_BMS_LiIon_Endof_DisCharSOC_modify[1] =  '0' + sU8NumberCounter;
                }
                else if(sU8SetBmsCounter == 5)
                {
                    if(tab_BMS_LiIon_Endof_DisCharSOC_modify[0] == '1')
                    {
                        sU8NumberCounter = 0;
                    }
                    else
                    {
                        if(sU8NumberCounter > 9)
                        {
                            sU8NumberCounter = 0;
                        }
                    } 
                    tab_BMS_LiIon_Endof_DisCharSOC_modify[2] =  '0' + sU8NumberCounter;  
                }
                gCurrentMenu.eCurrentDisplayMenuType = nowDisplayType;                
            }
            break;
        case KEYACTION_UP://在系统设置界面下，DOWN键按下，选择对应的设置项
            {
                if(gbEditFlag != STATUS_TRUE)//进入编辑模式 
                {
                    gbEditFlag = STATUS_TRUE;   
                    sprintf(tab_BMS_LiIon_Endof_CharSOC_modify,"%s",tab_BMS_LiIon_Endof_CharSOC);
                    sprintf(tab_BMS_LiIon_Endof_DisCharSOC_modify,"%s",tab_BMS_LiIon_Endof_DisCharSOC);
                }
                
                sU8NumberCounter--;
                
                if(sU8SetBmsCounter == 0)
                {
                    if(!(sU8NumberCounter <= 1))
                    {
                        sU8NumberCounter = 1;
                    }
                    tab_BMS_LiIon_Endof_CharSOC_modify[0] =  '0' + sU8NumberCounter;
                    
                    if(tab_BMS_LiIon_Endof_CharSOC_modify[0] == '1')
                    {
                       tab_BMS_LiIon_Endof_CharSOC_modify[1] =  '0';
                       tab_BMS_LiIon_Endof_CharSOC_modify[2] =  '0';
                    }
                }
                else if(sU8SetBmsCounter == 1)
                {
                    if(tab_BMS_LiIon_Endof_CharSOC_modify[0] == '1')
                    {
                       sU8NumberCounter = 0;
                    }
                    else
                    {
                        if(!(sU8NumberCounter<=9))
                        {
                            sU8NumberCounter = 9;
                        }
                    }  
                        tab_BMS_LiIon_Endof_CharSOC_modify[1] =  '0' + sU8NumberCounter;
                }
                else if(sU8SetBmsCounter == 2)
                {
                    if(tab_BMS_LiIon_Endof_CharSOC_modify[0] == '1')
                    {
                       sU8NumberCounter = 0; 
                    }
                    else
                    {
                        if(!(sU8NumberCounter<=9))
                        {
                            sU8NumberCounter = 9;
                        }  
                    } 
                    tab_BMS_LiIon_Endof_CharSOC_modify[2] =  '0' + sU8NumberCounter;
                }
                else if(sU8SetBmsCounter == 3)
                {
                    if(!(sU8NumberCounter <= 1))
                    {
                        sU8NumberCounter = 1;
                    }
                    tab_BMS_LiIon_Endof_DisCharSOC_modify[0] =  '0' + sU8NumberCounter;
                    
                    if(tab_BMS_LiIon_Endof_DisCharSOC_modify[0] == '1')
                    {
                       tab_BMS_LiIon_Endof_DisCharSOC_modify[1] =  '0';
                       tab_BMS_LiIon_Endof_DisCharSOC_modify[2] =  '0';
                    }  
                }
                else if(sU8SetBmsCounter == 4)
                {
                    if(tab_BMS_LiIon_Endof_DisCharSOC_modify[0] == '1')
                    {
                       sU8NumberCounter = 0; 
                    }
                    else
                    {
                        if(!(sU8NumberCounter<=9))
                        {
                            sU8NumberCounter = 9;
                        }  
                    } 
                    tab_BMS_LiIon_Endof_DisCharSOC_modify[1] =  '0' + sU8NumberCounter;
                }
                else if(sU8SetBmsCounter == 5)
                {
                    if(tab_BMS_LiIon_Endof_DisCharSOC_modify[0] == '1')
                    {
                       sU8NumberCounter = 0; 
                    }
                    else
                    {
                        if(!(sU8NumberCounter<=9))
                        {
                            sU8NumberCounter = 9;
                        }  
                    } 
                    tab_BMS_LiIon_Endof_DisCharSOC_modify[2] =  '0' + sU8NumberCounter;
                }
                gCurrentMenu.eCurrentDisplayMenuType = nowDisplayType;
            }
            break;
        case KEYACTION_UPDOWN://在系统设置界面下，UP键 + DOWN键同时按下，切换设置下一个数据
            {
                sU8NumberCounter = 0;
                sU8SetBmsCounter++;
                if(sU8SetBmsCounter == DISPLAY_SET_BMS_TYPE_COUNT_LI_SOC_COUNT)
                {
                    sU8SetBmsCounter = 0;
                }
                gCurrentMenu.eCurrentDisplayMenuType = nowDisplayType;
            }
            break;
        case KEYACTION_NULL://无操作刷新主界面数据
        default:
            {
                if(gbEditFlag == STATUS_FALSE)
                {
                    Display_SET_BMS_LiIon_Paras *pStBmsPara = getLiIonParasData();
                    
                    uint8_t s8CharSOC = pStBmsPara->u8EndOfCharSOC;                    
                    sprintf(tab_BMS_LiIon_Endof_CharSOC,"%03d",s8CharSOC);

                    uint8_t s8DisCharSOC = pStBmsPara->u8EndOfDisCharSOC;                    
                    sprintf(tab_BMS_LiIon_Endof_DisCharSOC,"%03d",s8DisCharSOC);
                    
                    //sprintf(tab_BMS_LiIon_Endof_CharSOC,"%03d",gDisplay.stDisplaySet.stBMS.stHMISetBMSLiIonParas.u8EndOfCharSOC);
                    //sprintf(tab_BMS_LiIon_Endof_DisCharSOC,"%03d",gDisplay.stDisplaySet.stBMS.stHMISetBMSLiIonParas.u8EndOfDisCharSOC);
                }
                gCurrentMenu.eCurrentDisplayMenuType = nowDisplayType;
            }
            break;
    }
    
    if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_ENGLISH)  //Li电池充放电截止SOC设置界面 英文界面组装
    { 
        if(gbEditFlag == STATUS_TRUE)
        {
            Display_Set_UnderLine_Blink_Position(STATUS_TRUE,arrayBMSLiIonEndOfSOCFlicker[sU8SetBmsCounter].u8StartPos,arrayBMSLiIonEndOfSOCFlicker[sU8SetBmsCounter].u8EndPos);
            updateDisplayBatteryLiIonParaSetEndofSOCData_English(tab_BMS_LiIon_Endof_CharSOC_modify,tab_BMS_LiIon_Endof_DisCharSOC_modify); 
        }
        else 
        {
            updateDisplayBatteryLiIonParaSetEndofSOCData_English(tab_BMS_LiIon_Endof_CharSOC,tab_BMS_LiIon_Endof_DisCharSOC);
        }
    }
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_CHINESE)//Li电池充放电截止SOC设置界面 中文界面组装
    {
        updateDisplayBatteryLiIonParaSetEndofSOCData_Chinese(tab_BMS_LiIon_Endof_CharSOC_modify,tab_BMS_LiIon_Endof_DisCharSOC_modify);
    }
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_SPANISH)//Li电池充放电截止SOC设置界面 西班牙界面组装 
    {
        updateDisplayBatteryLiIonParaSetEndofSOCData_Spanish(tab_BMS_LiIon_Endof_CharSOC_modify,tab_BMS_LiIon_Endof_DisCharSOC_modify);  
    }   
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_GERMAN)//Li电池充放电截止SOC设置界面 德语界面组装
    {
        updateDisplayBatteryLiIonParaSetEndofSOCData_German(tab_BMS_LiIon_Endof_CharSOC_modify,tab_BMS_LiIon_Endof_DisCharSOC_modify);  
    }   
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_FRENCH)//Li电池充放电截止SOC设置界面 法语界面组装 
    {
        updateDisplayBatteryLiIonParaSetEndofSOCData_French(tab_BMS_LiIon_Endof_CharSOC_modify,tab_BMS_LiIon_Endof_DisCharSOC_modify);    
    } 
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_POLISH)//Li电池充放电截止SOC设置界面 波兰界面组装
    {
        updateDisplayBatteryLiIonParaSetEndofSOCData_Polish(tab_BMS_LiIon_Endof_CharSOC_modify,tab_BMS_LiIon_Endof_DisCharSOC_modify); 
    }  
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_ITALIAN)//Li电池充放电截止SOC设置界面 意大利界面组装
    {
        updateDisplayBatteryLiIonParaSetEndofSOCData_Italian(tab_BMS_LiIon_Endof_CharSOC_modify,tab_BMS_LiIon_Endof_DisCharSOC_modify);  
    } 
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_CZECH)//Li电池充放电截止SOC设置界面 捷克界面组装 
    {
        updateDisplayBatteryLiIonParaSetEndofSOCData_Czech(tab_BMS_LiIon_Endof_CharSOC_modify,tab_BMS_LiIon_Endof_DisCharSOC_modify);   
    }        
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_DUTCH)//Li电池充放电截止SOC设置界面 荷兰界面组装 
    {
        updateDisplayBatteryLiIonParaSetEndofSOCData_Dutch(tab_BMS_LiIon_Endof_CharSOC_modify,tab_BMS_LiIon_Endof_DisCharSOC_modify);   
    }
    else
    {  
        updateDisplayBatteryLiIonParaSetEndofSOCData_English(tab_BMS_LiIon_Endof_CharSOC_modify,tab_BMS_LiIon_Endof_DisCharSOC_modify);        
    }   
}


/***************************************************************************
 功能:Li电池充放电截止SOC设置界面 英文界面信息
****************************************************************************/
void updateDisplayBatteryLiIonParaSetEndofSOCData_English(char* strCharSOC,char* strDisCharSOC)
 {
    memset(tab_display,0,DISPLAY_CACHE_SIZE);
    sprintf(tab_display,"   LI.ION EndofSOC   \nCharEndofSOC:%s     \nDisCharEndofSOC:%s  \n                     \n",strCharSOC,strDisCharSOC);
    //GUI_DispStringAt((uint8_t*)tab_display, 0, 0);
    GUI_Display(tab_display, 0, 0);
}

/***************************************************************************
 功能:Li电池充放电截止SOC设置界面 中文界面信息
****************************************************************************/
void updateDisplayBatteryLiIonParaSetEndofSOCData_Spanish(char* strCharSOC,char* strDisCharSOC)
{
    
}
/***************************************************************************
 功能:Li电池充放电截止SOC设置界面 西班牙界面信息
****************************************************************************/
void updateDisplayBatteryLiIonParaSetEndofSOCData_Chinese(char* strCharSOC,char* strDisCharSOC)
{
    
}

/***************************************************************************
 功能:Li电池充放电截止SOC设置界面 德语界面信息
****************************************************************************/
void updateDisplayBatteryLiIonParaSetEndofSOCData_German(char* strCharSOC,char* strDisCharSOC)
{
    
}

/***************************************************************************
 功能:Li电池充放电截止SOC设置界面 法语界面信息
****************************************************************************/
void updateDisplayBatteryLiIonParaSetEndofSOCData_French(char* strCharSOC,char* strDisCharSOC)
{
    
}

/***************************************************************************
 功能:Li电池充放电截止SOC设置界面 波兰语界面信息
****************************************************************************/
void updateDisplayBatteryLiIonParaSetEndofSOCData_Polish(char* strCharSOC,char* strDisCharSOC)
{
    
}

/***************************************************************************
 功能:Li电池充放电截止SOC设置界面 意大利语界面信息
****************************************************************************/
void updateDisplayBatteryLiIonParaSetEndofSOCData_Italian(char* strCharSOC,char* strDisCharSOC)
{
    
}

/***************************************************************************
 功能:Li电池充放电截止SOC设置界面 捷克语界面信息
****************************************************************************/
void updateDisplayBatteryLiIonParaSetEndofSOCData_Czech(char* strCharSOC,char* strDisCharSOC)
{
    
}

/***************************************************************************
 功能:Li电池充放电截止SOC设置界面 荷兰语界面信息
****************************************************************************/
void updateDisplayBatteryLiIonParaSetEndofSOCData_Dutch(char* strCharSOC,char* strDisCharSOC)
{
    
}
/***************************************************************************
 功能:从Flash获取锂电池参数
****************************************************************************/
Display_SET_BMS_LiIon_Paras * getLiIonParasData(void)
{
   Flash_Device_BMSInfo_Read(&gDisplay.stDisplaySet.stBMS,sizeof(Display_SET_BMS));
   return &gDisplay.stDisplaySet.stBMS.stHMISetBMSLiIonParas; 
}


/***************************************************************************
 功能:保存截止SOC到Flash
****************************************************************************/
void setLiIonEndofSOCData(uint8_t u8EndOfCharSOC,uint8_t u8EndOfDisCharSOC)
{
   Flash_Device_BMSInfo_Read(&gDisplay.stDisplaySet.stBMS,sizeof(Display_SET_BMS));
   gDisplay.stDisplaySet.stBMS.stHMISetBMSLiIonParas.u8EndOfCharSOC = u8EndOfCharSOC;
   gDisplay.stDisplaySet.stBMS.stHMISetBMSLiIonParas.u8EndOfDisCharSOC = u8EndOfDisCharSOC;
   Flash_Device_BMSInfo_Write(&gDisplay.stDisplaySet.stBMS,sizeof(Display_SET_BMS));
}

/***************************************************************************
 功能:根据上一次界面操作类型和本次操作类型判断本次电池厂商SET界面切换
****************************************************************************/

void updateDisplayBatteryLiIonParaSetCurrentData(KeyAction_TypeDef nowActionType,DisplayAction_TypeDef nowDisplayType)
{
    static uint8_t sU8SetBmsCounter = 0;
    static uint8_t sU8NumberCounter = 0;
    
    switch(nowActionType) 
    {
        case KEYACTION_ENTER://在时间设置界面下，Enter键按下，在系统设置对应的时间
            {
                if(gbEditFlag != STATUS_FALSE)//退出编辑模式
                {
                    float f16BmsCharCur = atof(tab_BMS_CharCur_modify);
                    int16 s16BmsCharCur = (int16)(f16BmsCharCur * 10);  
                    //gDisplay.stDisplaySet.stBMS.stHMISetBMSLiIonParas.u16MaxCharCurrent = s16BmsCharCur;

                    float f16BmsDisCharCur = atof(tab_BMS_DisCharCur_modify);
                    int16 s16BmsDisCharCur = (int16)(f16BmsDisCharCur * 10);  
                    //gDisplay.stDisplaySet.stBMS.stHMISetBMSLiIonParas.u16MaxDisCharCurrent = s16BmsDisCharCur;
                    
                    sprintf(tab_BMS_CharCur,"%s",tab_BMS_CharCur_modify);
                    sprintf(tab_BMS_DisCharCur,"%s",tab_BMS_DisCharCur_modify);

                    setLiIonMaxCharCurData(s16BmsCharCur, s16BmsDisCharCur);
                    sU8SetBmsCounter = 0;
                    sU8NumberCounter = 0;
                    gCurrentMenu.eCurrentDisplayMenuType = nowDisplayType;
                    gbEditFlag = STATUS_FALSE;
                    Display_Set_UnderLine_Blink_Position(STATUS_FALSE,0,0);
                } 
            }
            break;
        case KEYACTION_ESC:
            {
                sU8SetBmsCounter = 0;
                sU8NumberCounter = 0;
                gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_SET_BATTERY_TYPE_LI_ION;
                gbEditFlag = STATUS_FALSE;
                Display_Set_UnderLine_Blink_Position(STATUS_FALSE,0,0);
            }
            break;
        case KEYACTION_DOWN://在系统设置界面下，UP键按下，选择对应的设置项
            {
                if(gbEditFlag != STATUS_TRUE)
                {
                    gbEditFlag = STATUS_TRUE;
                    sprintf(tab_BMS_CharCur_modify,"%s",tab_BMS_CharCur);
                    sprintf(tab_BMS_DisCharCur_modify,"%s",tab_BMS_DisCharCur);
                }                
                sU8NumberCounter++; 
                              
                if(sU8SetBmsCounter == 0) //充电电流第一个数字
                {
                    if(sU8NumberCounter <= 1)
                    {
                        /*最大为120,当第二位数字大于2时，第一位只能是0*/
                        if(((tab_BMS_CharCur_modify[1] - '0') > 2)&&
                        ((((tab_BMS_CharCur_modify[1] - '0') == 2)&&((tab_BMS_CharCur_modify[2] - '0') != 0))))
                        {
                            tab_BMS_CharCur_modify[0] =  '0';
                        }
                        else
                        {
                            tab_BMS_CharCur_modify[0] =  '0' + sU8NumberCounter;
                        }
                    }
                    else
                    {
                       sU8NumberCounter = 0;
                       tab_BMS_CharCur_modify[0] = '0';
                    }
                } 
                else if(sU8SetBmsCounter == 1)//充电电流第二个数字
                {
                    if(tab_BMS_CharCur_modify[0] == '1')
                    {
                        if(sU8NumberCounter <= 2)
                        {
                            tab_BMS_CharCur_modify[1] =  '0' + sU8NumberCounter;
                        }
                        else
                        {
                            sU8NumberCounter = 0;
                            tab_BMS_CharCur_modify[1] = '0';
                        }
                    }
                    else
                    {
                        if(sU8NumberCounter <= 9)
                        {
                            tab_BMS_CharCur_modify[1] =  '0' + sU8NumberCounter;
                        }
                        else
                        {
                            sU8NumberCounter = 0;
                            tab_BMS_CharCur_modify[1] = '0';
                        }
                    }
                }
                else if(sU8SetBmsCounter == 2)//充电电流第三个数字
                {
                    if((tab_BMS_CharCur_modify[0] == '1')&&(tab_BMS_CharCur_modify[1] == '2'))
                    {
                        tab_BMS_CharCur_modify[2] =  '0';
                    }
                    else
                    {
                        if(sU8NumberCounter <= 9)
                        {
                            tab_BMS_CharCur_modify[2] =  '0' + sU8NumberCounter;
                        }
                        else
                        {
                            sU8NumberCounter = 0;
                            tab_BMS_CharCur_modify[2] = '0';
                        }
                    }
                }
                else if(sU8SetBmsCounter == 3)//充电电流第四个符号
                {
                    tab_BMS_CharCur_modify[3] = '.';
                }
                else if(sU8SetBmsCounter == 4)//充电电流第五个数字
                {
                    if((tab_BMS_CharCur_modify[0] == '1')&&(tab_BMS_CharCur_modify[1] == '2')
                    &&(tab_BMS_CharCur_modify[2] == '0'))
                    {
                        tab_BMS_CharCur_modify[4] = '0';
                    }
                    else
                    {
                        if(sU8NumberCounter <= 9)
                        {
                            tab_BMS_CharCur_modify[4] = '0' + sU8NumberCounter;
                        }
                        else
                        {
                            sU8NumberCounter = 0;
                            tab_BMS_CharCur_modify[4] = '0';
                        }
                    }
                }
                else if(sU8SetBmsCounter == 5)//放电电流第一个数字
                {
                    if(sU8NumberCounter <= 1)
                    {
                        /*最大为120,当第二位数字大于2时，第一位只能是0*/
                        if(((tab_BMS_DisCharCur_modify[1] - '0') > 2)&&
                        ((((tab_BMS_DisCharCur_modify[1] - '0') == 2)&&((tab_BMS_DisCharCur_modify[2] - '0') != 0))))
                        {
                            tab_BMS_DisCharCur_modify[0] =  '0';
                        }
                        else
                        {
                            tab_BMS_DisCharCur_modify[0] =  '0' + sU8NumberCounter;
                        }
                    }
                    else
                    {
                       sU8NumberCounter = 0;
                       tab_BMS_DisCharCur_modify[0] = '0';
                    }
                }
                else if(sU8SetBmsCounter == 6)//放电电流第二个数字
                {
                    if(tab_BMS_DisCharCur_modify[0] == '1')
                    {
                        if(sU8NumberCounter <= 2)
                        {
                            tab_BMS_DisCharCur_modify[1] =  '0' + sU8NumberCounter;
                        }
                        else
                        {
                            sU8NumberCounter = 0;
                            tab_BMS_DisCharCur_modify[1] = '0';
                        }
                    }
                    else
                    {
                        if(sU8NumberCounter <= 9)
                        {
                            tab_BMS_DisCharCur_modify[1] =  '0' + sU8NumberCounter;
                        }
                        else
                        {
                            sU8NumberCounter = 0;
                            tab_BMS_DisCharCur_modify[1] = '0';
                        }
                    }
                }
                else if(sU8SetBmsCounter == 7)//放电电流第三个数字
                {
                    if((tab_BMS_DisCharCur_modify[0] == '1')&&(tab_BMS_DisCharCur_modify[1] == '2'))
                    {
                        tab_BMS_DisCharCur_modify[2] =  '0';
                    }
                    else
                    {
                        if(sU8NumberCounter <= 9)
                        {
                            tab_BMS_DisCharCur_modify[2] =  '0' + sU8NumberCounter;
                        }
                        else
                        {
                            sU8NumberCounter = 0;
                            tab_BMS_DisCharCur_modify[2] = '0';
                        }
                    }
                }
                else if(sU8SetBmsCounter == 8)//放电电流第四个符号
                {
                    tab_BMS_DisCharCur_modify[3] = '.';
                }
                else if(sU8SetBmsCounter == 9)//放电电流第五个数字
                {
                    if((tab_BMS_DisCharCur_modify[0] == '1')&&(tab_BMS_DisCharCur_modify[1] == '2')
                    &&(tab_BMS_DisCharCur_modify[2] == '0'))
                    {
                        tab_BMS_DisCharCur_modify[4] = '0';
                    }
                    else
                    {
                        if(sU8NumberCounter <= 9)
                        {
                            tab_BMS_DisCharCur_modify[4] = '0' + sU8NumberCounter;
                        }
                        else
                        {
                            sU8NumberCounter = 0;
                            tab_BMS_DisCharCur_modify[4] = '0';
                        }
                    }
                }
                gCurrentMenu.eCurrentDisplayMenuType = nowDisplayType;                
            }
            break;
        case KEYACTION_UP://在系统设置界面下，DOWN键按下，选择对应的设置项
            {
                if(gbEditFlag != STATUS_TRUE)//进入编辑模式 
                {
                    gbEditFlag = STATUS_TRUE;   
                    sprintf(tab_BMS_CharCur_modify,"%s",tab_BMS_CharCur);
                    sprintf(tab_BMS_DisCharCur_modify,"%s",tab_BMS_DisCharCur);
                }
                
                sU8NumberCounter--;
                
                if(sU8SetBmsCounter == 0)//充电电流第一个数字
                {
                   if(!(sU8NumberCounter <= 1))
                    {
                        if(((tab_BMS_CharCur_modify[1] - '0') > 2)||
                        (((tab_BMS_CharCur_modify[1] - '0') == 2)&&((tab_BMS_CharCur_modify[2] - '0') != 0)))
                        {
                            sU8NumberCounter = 0;
                        }
                        else
                        { 
                            sU8NumberCounter = 1;
                        }
                        tab_BMS_CharCur_modify[0] = '0';
                    }
                    tab_BMS_CharCur_modify[0] =  '0' + sU8NumberCounter;
                }
                else if(sU8SetBmsCounter == 1)//充电电流第二个数字
                {
                    if(tab_BMS_CharCur_modify[0] == '1')
                    {
                        if(!(sU8NumberCounter <= 2))
                        {                            
                            if((tab_BMS_CharCur_modify[2] - '0') != 0)
                            {
                                sU8NumberCounter = 1;
                            }
                            else
                            {
                                sU8NumberCounter = 2;
                            }
                            tab_BMS_CharCur_modify[1] = '0';
                        }
                    }
                    else
                    {
                        if(!(sU8NumberCounter <= 9))
                        {
                            sU8NumberCounter = 9;
                            tab_BMS_CharCur_modify[1] = '0';
                        }
                    }
                    tab_BMS_CharCur_modify[1] =  '0' + sU8NumberCounter;
                }
                else if(sU8SetBmsCounter == 2)//充电电流第三个数字
                {
                    if((tab_BMS_CharCur_modify[0] == '1')&&(tab_BMS_CharCur_modify[1] == '2'))
                    {
                        tab_BMS_CharCur_modify[2] = '0';
                    }
                    else
                    {
                        if(!(sU8NumberCounter <= 9))
                        {
                            sU8NumberCounter = 9;
                            tab_BMS_CharCur_modify[2] = '0';
                        }
                        tab_BMS_CharCur_modify[2] =  '0' + sU8NumberCounter;
                    }                   
                }
                else if(sU8SetBmsCounter == 3)//充电电流第四个符号
                {
                    tab_BMS_CharCur_modify[3] = '.';
                }
                else if(sU8SetBmsCounter == 4)//充电电流第五个数字
                {
                    
                    if((tab_BMS_CharCur_modify[0] == '1')&&(tab_BMS_CharCur_modify[1] == '2')
                    &&(tab_BMS_CharCur_modify[2] == '0'))
                    {
                        tab_BMS_CharCur_modify[4] = '0';
                    }
                    else
                    {
                        if(!(sU8NumberCounter <= 9))
                        {
                            sU8NumberCounter = 9;
                            tab_BMS_CharCur_modify[4] = '0';
                        }
                        tab_BMS_CharCur_modify[4] =  '0' + sU8NumberCounter;
                    }
                }
                else if(sU8SetBmsCounter == 5)//放电电流第一个数字
                {
                    if(!(sU8NumberCounter <= 1))
                    {
                        if(((tab_BMS_DisCharCur_modify[1] - '0') > 2)||
                        (((tab_BMS_DisCharCur_modify[1] - '0') == 2)&&((tab_BMS_DisCharCur_modify[2] - '0') != 0)))
                        {
                            sU8NumberCounter = 0;
                        }
                        else
                        { 
                            sU8NumberCounter = 1;
                        }
                        tab_BMS_DisCharCur_modify[0] = '0';
                    }
                    tab_BMS_DisCharCur_modify[0] =  '0' + sU8NumberCounter;
                }
                else if(sU8SetBmsCounter == 6)//放电电流第二个数字
                {
                    if(tab_BMS_DisCharCur_modify[0] == '1')
                    {
                        if(!(sU8NumberCounter <= 2))
                        {                            
                            if((tab_BMS_DisCharCur_modify[2] - '0') != 0)
                            {
                                sU8NumberCounter = 1;
                            }
                            else
                            {
                                sU8NumberCounter = 2;
                            }
                            tab_BMS_DisCharCur_modify[1] = '0';
                        }
                    }
                    else
                    {
                        if(!(sU8NumberCounter <= 9))
                        {
                            sU8NumberCounter = 9;
                            tab_BMS_DisCharCur_modify[1] = '0';
                        }
                    }
                    tab_BMS_DisCharCur_modify[1] =  '0' + sU8NumberCounter;

                }
                else if(sU8SetBmsCounter == 7)//放电电流第三个数字
                {
                    if((tab_BMS_DisCharCur_modify[0] == '1')&&(tab_BMS_DisCharCur_modify[1] == '2'))
                    {
                        tab_BMS_DisCharCur_modify[2] = '0';
                    }
                    else
                    {
                        if(!(sU8NumberCounter <= 9))
                        {
                            sU8NumberCounter = 9;
                            tab_BMS_DisCharCur_modify[2] = '0';
                        }
                        tab_BMS_DisCharCur_modify[2] =  '0' + sU8NumberCounter;   
                    }              
                }
                else if(sU8SetBmsCounter == 8)//放电电流第四个符号
                {
                    tab_BMS_DisCharCur_modify[3] = '.';
                }
                else if(sU8SetBmsCounter == 9)//放电电流第五个数字
                {
                    if((tab_BMS_DisCharCur_modify[0] == '1')&&(tab_BMS_DisCharCur_modify[1] == '2')
                    &&(tab_BMS_DisCharCur_modify[2] == '0'))
                    {
                        tab_BMS_DisCharCur_modify[4] = '0';
                    }
                    else
                    {
                        if(!(sU8NumberCounter <= 9))
                        {
                            sU8NumberCounter = 9;
                            tab_BMS_DisCharCur_modify[4] = '0';
                        }
                        tab_BMS_DisCharCur_modify[4] =  '0' + sU8NumberCounter;
                    }
                }
                gCurrentMenu.eCurrentDisplayMenuType = nowDisplayType;
            }
            break;
        case KEYACTION_UPDOWN://在系统设置界面下，UP键 + DOWN键同时按下，切换设置下一个数据
            {
                sU8NumberCounter = 0;
                sU8SetBmsCounter++;
                if(sU8SetBmsCounter == DISPLAY_SET_BMS_TYPE_COUNT_LI_CURRENT_COUNT)
                {
                    sU8SetBmsCounter = 0;
                }
                gCurrentMenu.eCurrentDisplayMenuType = nowDisplayType;
            }
            break;
        case KEYACTION_NULL://无操作刷新主界面数据
        default:
            {
                if(gbEditFlag == STATUS_FALSE)
                {
                    Display_SET_BMS_LiIon_Paras *pStBmsPara = getLiIonParasData();          
                    
                    int16 s16CharCur = pStBmsPara->u16MaxCharCurrent;
                    float f16CharCur = s16CharCur / 10.0;
                    sprintf(tab_BMS_CharCur,"%05.1f",f16CharCur);

                    int16 s16DisCharCur = pStBmsPara->u16MaxDisCharCurrent;
                    float f16DisCharCur = s16DisCharCur / 10.0;
                    sprintf(tab_BMS_DisCharCur,"%05.1f",f16DisCharCur);
                }
                gCurrentMenu.eCurrentDisplayMenuType = nowDisplayType;
            }
            break;
    }
    
    if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_ENGLISH)  //Li电池最大充放电电流设置界面 英文界面组装
    { 
        if(gbEditFlag == STATUS_TRUE)
        {
            Display_Set_UnderLine_Blink_Position(STATUS_TRUE,arrayBMSLiIonMaxCurrentFlicker[sU8SetBmsCounter].u8StartPos,arrayBMSLiIonMaxCurrentFlicker[sU8SetBmsCounter].u8EndPos);
            updateDisplayBatteryLiIonParaSetCurrentData_English(tab_BMS_CharCur_modify,tab_BMS_DisCharCur_modify); 
        }
        else 
        {
            updateDisplayBatteryLiIonParaSetCurrentData_English(tab_BMS_CharCur,tab_BMS_DisCharCur);
        }
    }
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_CHINESE)//Li电池最大充放电电流设置界面 中文界面组装
    {
        updateDisplayBatteryLiIonParaSetCurrentData_Chinese(tab_BMS_CharCur_modify,tab_BMS_DisCharCur_modify);
    }
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_SPANISH)//Li电池最大充放电电流设置界面 西班牙界面组装 
    {
        updateDisplayBatteryLiIonParaSetCurrentData_Spanish(tab_BMS_CharCur_modify,tab_BMS_DisCharCur_modify);  
    }   
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_GERMAN)//Li电池最大充放电电流设置界面 德语界面组装
    {
        updateDisplayBatteryLiIonParaSetCurrentData_German(tab_BMS_CharCur_modify,tab_BMS_DisCharCur_modify);  
    }   
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_FRENCH)//Li电池最大充放电电流设置界面 法语界面组装 
    {
        updateDisplayBatteryLiIonParaSetCurrentData_French(tab_BMS_CharCur_modify,tab_BMS_DisCharCur_modify);    
    } 
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_POLISH)//Li电池最大充放电电流设置界面 波兰界面组装
    {
        updateDisplayBatteryLiIonParaSetCurrentData_Polish(tab_BMS_CharCur_modify,tab_BMS_DisCharCur_modify); 
    }  
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_ITALIAN)//Li电池最大充放电电流设置界面 意大利界面组装
    {
        updateDisplayBatteryLiIonParaSetCurrentData_Italian(tab_BMS_CharCur_modify,tab_BMS_DisCharCur_modify);  
    } 
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_CZECH)//Li电池最大充放电电流设置界面 捷克界面组装 
    {
        updateDisplayBatteryLiIonParaSetCurrentData_Czech(tab_BMS_CharCur_modify,tab_BMS_DisCharCur_modify);   
    }        
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_DUTCH)//Li电池最大充放电电流设置界面 荷兰界面组装 
    {
        updateDisplayBatteryLiIonParaSetCurrentData_Dutch(tab_BMS_CharCur_modify,tab_BMS_DisCharCur_modify);   
    }
    else
    {  
        updateDisplayBatteryLiIonParaSetCurrentData_English(tab_BMS_CharCur_modify,tab_BMS_DisCharCur_modify);        
    }   
}


/***************************************************************************
 功能:英文 Li电池最大充放电电流设置界面
****************************************************************************/
void updateDisplayBatteryLiIonParaSetCurrentData_English(char* strCharCur,char* strDisCharCur)
{
    memset(tab_display,0,DISPLAY_CACHE_SIZE);
    sprintf(tab_display,"   BMS Current Set   \nMaxCharCur:%s     \nMaxDisCharCur:%s  \n                     \n",strCharCur,strDisCharCur);
    //GUI_DispStringAt((uint8_t*)tab_display, 0, 0);
    GUI_Display(tab_display, 0, 0);
}

/***************************************************************************
 功能:Li电池最大充放电电流设置界面 中文界面信息
****************************************************************************/
void updateDisplayBatteryLiIonParaSetCurrentData_Spanish(char* strCharSOC,char* strDisCharSOC)
{
    
}
/***************************************************************************
 功能:Li电池最大充放电电流设置界面 西班牙界面信息
****************************************************************************/
void updateDisplayBatteryLiIonParaSetCurrentData_Chinese(char* strCharSOC,char* strDisCharSOC)
{
    
}

/***************************************************************************
 功能:Li电池最大充放电电流设置界面 德语界面信息
****************************************************************************/
void updateDisplayBatteryLiIonParaSetCurrentData_German(char* strCharSOC,char* strDisCharSOC)
{
    
}

/***************************************************************************
 功能:Li电池最大充放电电流设置界面 法语界面信息
****************************************************************************/
void updateDisplayBatteryLiIonParaSetCurrentData_French(char* strCharSOC,char* strDisCharSOC)
{
    
}

/***************************************************************************
 功能:Li电池最大充放电电流设置界面 波兰语界面信息
****************************************************************************/
void updateDisplayBatteryLiIonParaSetCurrentData_Polish(char* strCharSOC,char* strDisCharSOC)
{
    
}

/***************************************************************************
 功能:Li电池最大充放电电流设置界面 意大利语界面信息
****************************************************************************/
void updateDisplayBatteryLiIonParaSetCurrentData_Italian(char* strCharSOC,char* strDisCharSOC)
{
    
}

/***************************************************************************
 功能:Li电池最大充放电电流设置界面 捷克语界面信息
****************************************************************************/
void updateDisplayBatteryLiIonParaSetCurrentData_Czech(char* strCharSOC,char* strDisCharSOC)
{
    
}

/***************************************************************************
 功能:Li电池最大充放电电流设置界面 荷兰语界面信息
****************************************************************************/
void updateDisplayBatteryLiIonParaSetCurrentData_Dutch(char* strCharSOC,char* strDisCharSOC)
{
    
}

/***************************************************************************
 功能:保存容量和最大充放电流到Flash
****************************************************************************/
void setLiIonMaxCharCurData(int16 s16MaxCharCur, int16 s16MaxDisCharCur)
{
   Flash_Device_BMSInfo_Read(&gDisplay.stDisplaySet.stBMS,sizeof(Display_SET_BMS));
   gDisplay.stDisplaySet.stBMS.stHMISetBMSLiIonParas.u16MaxCharCurrent = s16MaxCharCur;
   gDisplay.stDisplaySet.stBMS.stHMISetBMSLiIonParas.u16MaxDisCharCurrent = s16MaxDisCharCur;
   Flash_Device_BMSInfo_Write(&gDisplay.stDisplaySet.stBMS,sizeof(Display_SET_BMS));
}


#if 0
/***************************************************************************
 功能:根据上一次界面操作类型和本次操作类型判断本次电池厂商SET界面切换
****************************************************************************/

void updateDisplayBatteryLiIonParaSetOverProctectData(KeyAction_TypeDef nowActionType,DisplayAction_TypeDef nowDisplayType)
{
    static uint8_t sU8SetBmsCounter = 0;
    static uint8_t sU8NumberCounter = 0;
    
    switch(nowActionType) 
    {
        case KEYACTION_ENTER://在时间设置界面下，Enter键按下，在系统设置对应的时间
            {
                if(gbEditFlag != STATUS_FALSE)//退出编辑模式
                {
                    uint8_t u8BmsCharProct = atoi(tab_BMS_OverCharProct_modify); 
                    gDisplay.stDisplaySet.stBMS.stHMISetBMSLiIonParas.u16OverCharProtect = u8BmsCharProct;
                    uint8_t u8BmsDisCharProct = atoi(tab_BMS_OverDisCharProct_modify); 
                    gDisplay.stDisplaySet.stBMS.stHMISetBMSLiIonParas.u16OverDisCharProtect = u8BmsDisCharProct;
                    
                    sprintf(tab_BMS_OverCharProct,"%s",tab_BMS_OverCharProct_modify);
                    sprintf(tab_BMS_OverDisCharProct,"%s",tab_BMS_OverDisCharProct_modify);
                    sU8SetBmsCounter = 0;
                    sU8NumberCounter = 0;
                    gCurrentMenu.eCurrentDisplayMenuType = nowDisplayType;
                    gbEditFlag = STATUS_FALSE;
                } 
            }
            break;
        case KEYACTION_ESC:
            {
                sU8SetBmsCounter = 0;
                sU8NumberCounter = 0;
                gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_SET_BATTERY_TYPE_LI_ION;
                gbEditFlag = STATUS_FALSE;
            }
            break;
        case KEYACTION_DOWN://在系统设置界面下，UP键按下，选择对应的设置项
            {
                if(gbEditFlag != STATUS_TRUE)
                {
                    gbEditFlag = STATUS_TRUE;
                    sprintf(tab_BMS_OverCharProct_modify,"%s",tab_BMS_OverCharProct);
                    sprintf(tab_BMS_OverDisCharProct_modify,"%s",tab_BMS_OverDisCharProct);
                }                
                sU8NumberCounter++; 
                              
                if(sU8SetBmsCounter == 0) //充电电流第一个数字
                {
                    if(sU8NumberCounter <= 2)
                    {
                        if(((tab_BMS_OverCharProct_modify[1] - '0') > 5)||
                        (((tab_BMS_OverCharProct_modify[1] - '0') == 5)&&((tab_BMS_OverCharProct_modify[2] - '0')> 5)))
                        {
                            tab_BMS_OverCharProct_modify[0] =  '0' + sU8NumberCounter - 1;
                        }
                        else
                        {
                            tab_BMS_OverCharProct_modify[0] =  '0' + sU8NumberCounter;
                        }
                    }
                    else
                    {
                       sU8NumberCounter = 0;
                       tab_BMS_OverCharProct_modify[0] = '0';
                    }
                } 
                else if(sU8SetBmsCounter == 1)//充电电流第二个数字
                {
                    if(tab_BMS_OverCharProct_modify[0] == '2')
                    {
                        if(sU8NumberCounter <= 5)
                        {
                            if((tab_BMS_OverCharProct_modify[2] - '0') > 5)
                            {
                                tab_BMS_OverCharProct_modify[1] =  '0' + sU8NumberCounter - 1;
                            }
                            else
                            {
                                tab_BMS_OverCharProct_modify[1] =  '0' + sU8NumberCounter;
                            }
                        }
                        else
                        {
                            sU8NumberCounter = 0;
                            tab_BMS_OverCharProct_modify[1] = '0';
                        }
                    }
                    else
                    {
                        if(sU8NumberCounter <= 9)
                        {
                            tab_BMS_OverCharProct_modify[1] =  '0' + sU8NumberCounter;
                        }
                        else
                        {
                            sU8NumberCounter = 0;
                            tab_BMS_OverCharProct_modify[1] = '0';
                        }
                    }
                }
                else if(sU8SetBmsCounter == 2)//充电电流第三个数字
                {
                    if((tab_BMS_OverCharProct_modify[0] == '2')&&(tab_BMS_OverCharProct_modify[1] == '5'))
                    {
                        if(sU8NumberCounter <= 5)
                        {
                            tab_BMS_OverCharProct_modify[2] =  '0' + sU8NumberCounter;
                        }
                        else
                        {
                            sU8NumberCounter = 0;
                            tab_BMS_OverCharProct_modify[2] = '0';
                        }
                    }
                    else
                    {
                        if(sU8NumberCounter <= 9)
                        {
                            tab_BMS_OverCharProct_modify[2] =  '0' + sU8NumberCounter;
                        }
                        else
                        {
                            sU8NumberCounter = 0;
                            tab_BMS_OverCharProct_modify[2] = '0';
                        }
                    }
                }
                else if(sU8SetBmsCounter == 3)//放电电流第一个数字
                {
                    if(sU8NumberCounter <= 2)
                    {
                         if(((tab_BMS_OverDisCharProct_modify[1] - '0') > 5)||
                        (((tab_BMS_OverDisCharProct_modify[1] - '0') == 5)&&((tab_BMS_OverDisCharProct_modify[2] - '0')> 5)))
                        {
                            tab_BMS_OverDisCharProct_modify[0] =  '0' + sU8NumberCounter - 1;
                        }
                        else
                        {
                            tab_BMS_OverDisCharProct_modify[0] =  '0' + sU8NumberCounter;
                        }
                    }
                    else
                    {
                       sU8NumberCounter = 0;
                       tab_BMS_OverDisCharProct_modify[0] = '0';
                    }
                }
                else if(sU8SetBmsCounter == 4)//放电电流第二个数字
                {
                    if(tab_BMS_OverDisCharProct_modify[0] == '2')
                    {
                        if(sU8NumberCounter <= 5)
                        {
                            if((tab_BMS_OverDisCharProct_modify[2] - '0') > 5)
                            {
                                tab_BMS_OverDisCharProct_modify[1] =  '0' + sU8NumberCounter - 1;
                            }
                            else
                            {
                                tab_BMS_OverDisCharProct_modify[1] =  '0' + sU8NumberCounter;
                            }
                        }
                        else
                        {
                            sU8NumberCounter = 0;
                            tab_BMS_OverDisCharProct_modify[1] = '0';
                        }
                    }
                    else
                    {
                        if(sU8NumberCounter <= 9)
                        {
                            tab_BMS_OverDisCharProct_modify[1] =  '0' + sU8NumberCounter;
                        }
                        else
                        {
                            sU8NumberCounter = 0;
                            tab_BMS_OverDisCharProct_modify[1] = '0';
                        }
                    }
                }
                else if(sU8SetBmsCounter == 5)//放电电流第三个数字
                {
                    if((tab_BMS_OverDisCharProct_modify[0] == '2')&&(tab_BMS_OverDisCharProct_modify[1] == '5'))
                    {
                        if(sU8NumberCounter <= 5)
                        {
                            tab_BMS_OverDisCharProct_modify[2] =  '0' + sU8NumberCounter;
                        }
                        else
                        {
                            sU8NumberCounter = 0;
                            tab_BMS_OverDisCharProct_modify[2] = '0';
                        }
                    }
                    else
                    {
                        if(sU8NumberCounter <= 9)
                        {
                            tab_BMS_OverDisCharProct_modify[2] =  '0' + sU8NumberCounter;
                        }
                        else
                        {
                            sU8NumberCounter = 0;
                            tab_BMS_OverDisCharProct_modify[2] = '0';
                        }
                    }
                }
                gCurrentMenu.eCurrentDisplayMenuType = nowDisplayType;                
            }
            break;
        case KEYACTION_UP://在系统设置界面下，DOWN键按下，选择对应的设置项
            {
                if(gbEditFlag != STATUS_TRUE)//进入编辑模式 
                {
                    gbEditFlag = STATUS_TRUE;   
                    sprintf(tab_BMS_OverCharProct_modify,"%s",tab_BMS_OverCharProct);
                    sprintf(tab_BMS_OverDisCharProct_modify,"%s",tab_BMS_OverDisCharProct);
                }
                
                sU8NumberCounter--;
                
                if(sU8SetBmsCounter == 0)//充电电流第一个数字
                {
                   if(!(sU8NumberCounter <= 2))
                    {
                        if(((tab_BMS_OverCharProct_modify[1] - '0') > 5)||
                        (((tab_BMS_OverCharProct_modify[1] - '0') == 5)&&((tab_BMS_OverCharProct_modify[2] - '0')> 5)))
                        {
                            sU8NumberCounter = 1;
                        }
                        else
                        { 
                            sU8NumberCounter = 2;
                        }
                        tab_BMS_OverCharProct_modify[0] = '0';
                    }
                    tab_BMS_OverCharProct_modify[0] =  '0' + sU8NumberCounter;
                }
                else if(sU8SetBmsCounter == 1)//充电电流第二个数字
                {
                    if(tab_BMS_OverCharProct_modify[0] == '2')
                    {
                        if(!(sU8NumberCounter <= 5))
                        {                            
                            if((tab_BMS_OverCharProct_modify[2] - '0') > 5)
                            {
                                sU8NumberCounter = 4;
                            }
                            else
                            {
                                sU8NumberCounter = 5;
                            }
                            tab_BMS_OverCharProct_modify[1] = '0';
                        }
                    }
                    else
                    {
                        if(!(sU8NumberCounter <= 9))
                        {
                            sU8NumberCounter = 9;
                            tab_BMS_OverCharProct_modify[1] = '0';
                        }
                    }
                    tab_BMS_OverCharProct_modify[1] =  '0' + sU8NumberCounter;
                }
                else if(sU8SetBmsCounter == 2)//充电电流第三个数字
                {
                    if((tab_BMS_OverCharProct_modify[0] == '2')&&(tab_BMS_OverCharProct_modify[1] == '5'))
                    {
                        if(!(sU8NumberCounter <= 5))
                        {
                            sU8NumberCounter = 5;
                            tab_BMS_OverCharProct_modify[2] = '0';
                        }
                    }
                    else
                    {
                        if(!(sU8NumberCounter <= 9))
                        {
                            sU8NumberCounter = 9;
                            tab_BMS_OverCharProct_modify[2] = '0';
                        }
                    }
                    tab_BMS_OverCharProct_modify[2] =  '0' + sU8NumberCounter;                   
                }
                else if(sU8SetBmsCounter == 3)//放电电流第一个数字
                {
                    if(!(sU8NumberCounter <= 2))
                    {
                        if(((tab_BMS_OverDisCharProct_modify[1] - '0') > 5)||
                        (((tab_BMS_OverDisCharProct_modify[1] - '0') == 5)&&((tab_BMS_OverDisCharProct_modify[2] - '0')> 5)))
                        {
                            sU8NumberCounter = 1;
                        }
                        else
                        { 
                            sU8NumberCounter = 2;
                        }
                        tab_BMS_OverDisCharProct_modify[0] = '0';
                    }
                    tab_BMS_OverDisCharProct_modify[0] =  '0' + sU8NumberCounter;
                }
                else if(sU8SetBmsCounter == 4)//放电电流第二个数字
                {
                    if(tab_BMS_OverDisCharProct_modify[0] == '2')
                    {
                        if(!(sU8NumberCounter <= 5))
                        {                            
                            if((tab_BMS_OverDisCharProct_modify[2] - '0') > 5)
                            {
                                sU8NumberCounter = 4;
                            }
                            else
                            {
                                sU8NumberCounter = 5;
                            }
                            tab_BMS_OverDisCharProct_modify[1] = '0';
                        }
                    }
                    else
                    {
                        if(!(sU8NumberCounter <= 9))
                        {
                            sU8NumberCounter = 9;
                            tab_BMS_OverDisCharProct_modify[1] = '0';
                        }
                    }
                    tab_BMS_OverDisCharProct_modify[1] =  '0' + sU8NumberCounter;
                }
                else if(sU8SetBmsCounter == 5)//放电电流第三个数字
                {
                    if((tab_BMS_OverDisCharProct_modify[0] == '2')&&(tab_BMS_OverDisCharProct_modify[1] == '5'))
                    {
                        if(!(sU8NumberCounter <= 5))
                        {
                            sU8NumberCounter = 5;
                            tab_BMS_OverDisCharProct_modify[2] = '0';
                        }
                    }
                    else
                    {
                        if(!(sU8NumberCounter <= 9))
                        {
                            sU8NumberCounter = 9;
                            tab_BMS_OverDisCharProct_modify[2] = '0';
                        }
                    }
                    tab_BMS_OverDisCharProct_modify[2] =  '0' + sU8NumberCounter;   
                }
                gCurrentMenu.eCurrentDisplayMenuType = nowDisplayType;
            }
            break;
        case KEYACTION_UPDOWN://在系统设置界面下，UP键 + DOWN键同时按下，切换设置下一个数据
            {
                sU8NumberCounter = 0;
                sU8SetBmsCounter++;
                if(sU8SetBmsCounter == DISPLAY_SET_BMS_TYPE_COUNT_LI_SOC_COUNT)
                {
                    sU8SetBmsCounter = 0;
                }
                gCurrentMenu.eCurrentDisplayMenuType = nowDisplayType;
            }
            break;
        case KEYACTION_NULL://无操作刷新主界面数据
        default:
            {
                if(gbEditFlag == STATUS_FALSE)
                {
                    sprintf(tab_BMS_OverCharProct,"%03d",gDisplay.stDisplaySet.stBMS.stHMISetBMSLiIonParas.u16OverCharProtect);
                    sprintf(tab_BMS_OverDisCharProct,"%03d", gDisplay.stDisplaySet.stBMS.stHMISetBMSLiIonParas.u16OverDisCharProtect);
                }
                gCurrentMenu.eCurrentDisplayMenuType = nowDisplayType;
            }
            break;
    }
    
    if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_ENGLISH)  //系统时间设置界面TimeSystemSet 中文界面组装
    { 
        if(gbEditFlag == STATUS_TRUE)
        {
            //Display_Set_UnderLine_Blink_Position(STATUS_TRUE,arrayGENStartegyFlicker[sU8GenStrategyCounter].u8StartPos,arrayGENStartegyFlicker[sU8GenStrategyCounter].u8EndPos);
            updateDisplayBatteryLiIonParaSetOverProctectData_English(tab_BMS_OverCharProct_modify,tab_BMS_OverDisCharProct_modify); 
        }
        else 
        {
            updateDisplayBatteryLiIonParaSetOverProctectData_English(tab_BMS_OverCharProct,tab_BMS_OverDisCharProct);
        }
    }
}

/***************************************************************************
 功能:英文 系统发电机策略设置界面信息
****************************************************************************/
void updateDisplayBatteryLiIonParaSetOverProctectData_English(char* strCharProct,char* strDisCharProct)
{
    memset(tab_display,0,DISPLAY_CACHE_SIZE);
    sprintf(tab_display,"     BMS Proctect    \nCharProct:%s        \nDisCharProct:%s     \n                     \n",strCharProct,strDisCharProct);
    //GUI_DispStringAt((uint8_t*)tab_display, 0, 0);
    GUI_Display(tab_display, 0, 0);
}
#endif
/***************************************************************************
 功能:根据上一次界面操作类型和本次操作类型判断本次电池厂商SET界面切换
****************************************************************************/
void updateDisplayLeadAcidBatteryTypeSetData(KeyAction_TypeDef nowActionType,DisplayAction_TypeDef nowDisplayType)
{
    static uint8_t sU8BatteryLeadParaCounter = 0;
    
    switch(nowActionType)
    {
        case KEYACTION_ENTER://在电池厂商界面下，Enter键按下，进入选择对应的设置项
            {
               if(sU8BatteryLeadParaCounter == BMS_LEAD_ACID_PARASET_CAPACITY_CURRENT)
                    {
                        gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_SET_BATTERY_TYPE_LEAD_ACID_CAPANDCUR;
                    }  
                    else if(sU8BatteryLeadParaCounter == BMS_LEAD_ACID_PARASET_ENDOF_SOC)
                    {
                        gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_SET_BATTERY_TYPE_LEAD_ACID_ENDOF_SOC;
                    } 
                    //else if(sU8BatteryLeadParaCounter == BMS_LEAD_ACID_PARASET_OVERPROCTECT)
                    //{
                    //    gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_SET_BATTERY_TYPE_LEAD_ACID_OVERPROCTECT;
                    //}
                    else if(sU8BatteryLeadParaCounter == BMS_LEAD_ACID_PARASET_VOLTPOINT)
                    {
                        gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_SET_BATTERY_TYPE_LEAD_ACID_VOLTPOINT;
                    } 
            }
            break;
        case KEYACTION_DOWN://在电池厂商界面下，UP键按下，页面数字加一
            {
                sU8BatteryLeadParaCounter++;
                if(sU8BatteryLeadParaCounter == DISPLAY_SET_BMS_TYPE_COUNT_LEAD_ACID_PARASET)
                {
                    sU8BatteryLeadParaCounter = 0;  
                }
                gCurrentMenu.eCurrentDisplayMenuType = nowDisplayType;        
            
            }
            break; 
        case KEYACTION_UP://在电池厂商界面下，UP键按下，页面数字加一
            {
                sU8BatteryLeadParaCounter--;
                if(sU8BatteryLeadParaCounter >= DISPLAY_SET_BMS_TYPE_COUNT_LEAD_ACID_PARASET)
                {
                    sU8BatteryLeadParaCounter = DISPLAY_SET_BMS_TYPE_COUNT_LEAD_ACID_PARASET - 1;  
                }      
                gCurrentMenu.eCurrentDisplayMenuType = nowDisplayType;
            }
            break; 
        case KEYACTION_ESC://在电池厂商界面下，Esc键按下，回退到电池设置界面
            {
                gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_SET_BATTERY_TYPE;
            }
            break;
        case KEYACTION_NULL://无操作
        default:
            {
                gCurrentMenu.eCurrentDisplayMenuType = nowDisplayType;  
            }
            break;            
    }
    
    if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_ENGLISH)//铅酸电池类型设置界面 英文界面组装 
    { 
        updateDisplayLeadAcidBatteryTypeSetData_English(sU8BatteryLeadParaCounter);                    
    }
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_CHINESE)//铅酸电池类型设置界面 中文界面组装
    {
        updateDisplayLeadAcidBatteryTypeSetData_Chinese(sU8BatteryLeadParaCounter);
    }
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_SPANISH)//铅酸电池类型设置界面 西班牙界面组装 
    {
        updateDisplayLeadAcidBatteryTypeSetData_Spanish(sU8BatteryLeadParaCounter);  
    }   
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_GERMAN)//铅酸电池类型设置界面 德语界面组装
    {
        updateDisplayLeadAcidBatteryTypeSetData_German(sU8BatteryLeadParaCounter);  
    }   
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_FRENCH)//铅酸电池类型设置界面 法语界面组装 
    {
        updateDisplayLeadAcidBatteryTypeSetData_French(sU8BatteryLeadParaCounter);    
    } 
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_POLISH)//铅酸电池类型设置界面 波兰界面组装
    {
        updateDisplayLeadAcidBatteryTypeSetData_Polish(sU8BatteryLeadParaCounter); 
    }  
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_ITALIAN)//铅酸电池类型设置界面 意大利界面组装
    {
        updateDisplayLeadAcidBatteryTypeSetData_Italian(sU8BatteryLeadParaCounter);  
    } 
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_CZECH)//铅酸电池类型设置界面 捷克界面组装 
    {
        updateDisplayLeadAcidBatteryTypeSetData_Czech(sU8BatteryLeadParaCounter);   
    }        
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_DUTCH)//铅酸电池类型设置界面 荷兰界面组装 
    {
        updateDisplayLeadAcidBatteryTypeSetData_Dutch(sU8BatteryLeadParaCounter);   
    }
    else
    {  
        updateDisplayLeadAcidBatteryTypeSetData_English(sU8BatteryLeadParaCounter);        
    }    
}

/***************************************************************************
功能:铅酸电池类型设置界面 英文界面信息
****************************************************************************/
void updateDisplayLeadAcidBatteryTypeSetData_English(uint8_t sU8BatteryLeadParaCounter)    
{
    memset(tab_display,0,DISPLAY_CACHE_SIZE);
       
   if(sU8BatteryLeadParaCounter == BMS_LEAD_ACID_PARASET_CAPACITY_CURRENT)
   {
        sprintf(tab_display,"  LEAD.ACID ParaSet  \n->CapacityAndCurrent \nEndofSOC             \nVoltPoint            \n"); 
   }
   else if(sU8BatteryLeadParaCounter == BMS_LEAD_ACID_PARASET_ENDOF_SOC)
   {
        sprintf(tab_display,"  LEAD.ACID ParaSet  \nCapacityAndCurrent   \n->EndofSOC           \nVoltPoint            \n");    
   }
   //else if(sU8BatteryLeadParaCounter == BMS_LEAD_ACID_PARASET_OVERPROCTECT)
   //{
   //    sprintf(tab_display,"  LEAD.ACID ParaSet  \nCapacityAndCurrent   \nEndofSOC             \n->OverProctect       \n");   
   //} 
   else if(sU8BatteryLeadParaCounter == BMS_LEAD_ACID_PARASET_VOLTPOINT)
   {
        sprintf(tab_display,"  LEAD.ACID ParaSet  \nCapacityAndCurrent   \nEndofSOC             \n->VoltPoint          \n");   
   }                       
    //GUI_DispStringAt((uint8_t*)tab_display, 0, 0); 
    GUI_Display(tab_display, 0, 0);
}

/***************************************************************************
 功能:铅酸电池类型设置界面 中文界面信息
****************************************************************************/
void updateDisplayLeadAcidBatteryTypeSetData_Spanish(uint8_t sU8BatteryLeadParaCounter)
{
    
}
/***************************************************************************
 功能:铅酸电池类型设置界面 西班牙界面信息
****************************************************************************/
void updateDisplayLeadAcidBatteryTypeSetData_Chinese(uint8_t sU8BatteryLeadParaCounter)
{
    
}

/***************************************************************************
 功能:铅酸电池类型设置界面 德语界面信息
****************************************************************************/
void updateDisplayLeadAcidBatteryTypeSetData_German(uint8_t sU8BatteryLeadParaCounter)
{
    
}

/***************************************************************************
 功能:铅酸电池类型设置界面 法语界面信息
****************************************************************************/
void updateDisplayLeadAcidBatteryTypeSetData_French(uint8_t sU8BatteryLeadParaCounter)
{
    
}

/***************************************************************************
 功能:铅酸电池类型设置界面 波兰语界面信息
****************************************************************************/
void updateDisplayLeadAcidBatteryTypeSetData_Polish(uint8_t sU8BatteryLeadParaCounter)
{
    
}

/***************************************************************************
 功能:铅酸电池类型设置界面 意大利语界面信息
****************************************************************************/
void updateDisplayLeadAcidBatteryTypeSetData_Italian(uint8_t sU8BatteryLeadParaCounter)
{
    
}

/***************************************************************************
 功能:铅酸电池类型设置界面 捷克语界面信息
****************************************************************************/
void updateDisplayLeadAcidBatteryTypeSetData_Czech(uint8_t sU8BatteryLeadParaCounter)
{
    
}

/***************************************************************************
 功能:铅酸电池类型设置界面 荷兰语界面信息
****************************************************************************/
void updateDisplayLeadAcidBatteryTypeSetData_Dutch(uint8_t sU8BatteryLeadParaCounter)
{
    
}


/***************************************************************************
 功能:根据上一次界面操作类型和本次操作类型判断本次LeadAcid电池容量设置界面切换
****************************************************************************/

void updateDisplayLeadAcidBatteryParaSetCapacityData(KeyAction_TypeDef nowActionType,DisplayAction_TypeDef nowDisplayType)
{
    static uint8_t sU8SetBmsCounter = 0;
    static uint8_t sU8NumberCounter = 0;

    switch(nowActionType) 
    {
        case KEYACTION_ENTER://在时间设置界面下，Enter键按下，在系统设置对应的时间
            {
                if(gbEditFlag != STATUS_FALSE)//退出编辑模式
                {
                    uint16_t u16BmsCapacity = atoi(tab_BMS_Capacity_modify); 
                    //gDisplay.stDisplaySet.stBMS.stHMISetBMSLeadAcidParas.u16BatteryCapacity = u16BmsCapacity;
                    
                    float f16BmsChar = atof(tab_BMS_LeadAcid_CharCur_modify);
                    int16 s16BmsChar = (int16)(f16BmsChar * 10);  
                    //gDisplay.stDisplaySet.stBMS.stHMISetBMSLeadAcidParas.u16MaxCharCurrent = s16BmsChar;

                    float f16BmsDisChar = atof(tab_BMS_LeadAcid_DisCharCur_modify);
                    int16 s16BmsDisChar = (int16)(f16BmsDisChar * 10);
                    //gDisplay.stDisplaySet.stBMS.stHMISetBMSLeadAcidParas.u16MaxDisCharCurrent = s16BmsDisChar;
                    
                    sprintf(tab_BMS_Capacity,"%s",tab_BMS_Capacity_modify);
                    sprintf(tab_BMS_LeadAcid_CharCur,"%s",tab_BMS_LeadAcid_CharCur_modify);
                    sprintf(tab_BMS_LeadAcid_DisCharCur,"%s",tab_BMS_LeadAcid_DisCharCur_modify);

                    setLeadAcidCapacityAndMaxCharCurData(u16BmsCapacity,s16BmsChar,s16BmsDisChar);
                    sU8SetBmsCounter = 0;
                    sU8NumberCounter = 0;
                    gCurrentMenu.eCurrentDisplayMenuType = nowDisplayType;
                    gbEditFlag = STATUS_FALSE;
                    Display_Set_UnderLine_Blink_Position(STATUS_FALSE,0,0);
                } 
            }
            break;
        case KEYACTION_ESC:
            {
                sU8SetBmsCounter = 0;
                sU8NumberCounter = 0;
                gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_SET_BATTERY_TYPE_LEAD_ACID;
                gbEditFlag = STATUS_FALSE;
                Display_Set_UnderLine_Blink_Position(STATUS_FALSE,0,0);
            }
            break;
        case KEYACTION_DOWN://在系统设置界面下，UP键按下，选择对应的设置项
            {
                if(gbEditFlag != STATUS_TRUE)
                {
                    gbEditFlag = STATUS_TRUE;
                    sprintf(tab_BMS_Capacity_modify,"%s",tab_BMS_Capacity);
                    sprintf(tab_BMS_LeadAcid_CharCur_modify,"%s",tab_BMS_LeadAcid_CharCur);
                    sprintf(tab_BMS_LeadAcid_DisCharCur_modify,"%s",tab_BMS_LeadAcid_DisCharCur);
                }                
                sU8NumberCounter++; 
                              
                if(sU8SetBmsCounter == 0) //电池容量第一个数字
                {
                    if(sU8NumberCounter <= 2)
                    {
                        if(((tab_BMS_Capacity_modify[1] - '0') > 5)||
                        (((tab_BMS_Capacity_modify[1] - '0') == 5)&&((tab_BMS_Capacity_modify[2] - '0')> 5)))
                        {
                            if(sU8NumberCounter >=1)
                            {
                                tab_BMS_Capacity_modify[0] =  '0' + sU8NumberCounter - 1;
                            }
                            else
                            {
                                tab_BMS_Capacity_modify[0] =  '0';
                            }
                        }
                        else
                        {
                            tab_BMS_Capacity_modify[0] =  '0' + sU8NumberCounter;
                        }
                    }
                    else
                    {
                       sU8NumberCounter = 0;
                       tab_BMS_Capacity_modify[0] = '0';
                    }
                } 
                else if(sU8SetBmsCounter == 1)//电池容量第二个数字
                {
                    if(tab_BMS_Capacity_modify[0] == '2')
                    {
                        if(sU8NumberCounter <= 5)
                        {
                            if((tab_BMS_Capacity_modify[2] - '0') > 5)
                            {
                                if(sU8NumberCounter >=1)
                                {
                                    tab_BMS_Capacity_modify[1] =  '0' + sU8NumberCounter - 1;
                                }
                                else
                                {
                                    tab_BMS_Capacity_modify[0] =  '0';
                                }
                            }
                            else
                            {
                                tab_BMS_Capacity_modify[1] =  '0' + sU8NumberCounter;
                            }
                        }
                        else
                        {
                            sU8NumberCounter = 0;
                            tab_BMS_Capacity_modify[1] = '0';
                        }
                    }
                    else
                    {
                        if(sU8NumberCounter <= 9)
                        {
                            tab_BMS_Capacity_modify[1] =  '0' + sU8NumberCounter;
                        }
                        else
                        {
                            sU8NumberCounter = 0;
                            tab_BMS_Capacity_modify[1] = '0';
                        }
                    }
                }
                else if(sU8SetBmsCounter == 2)//电池容量第三个数字
                {
                    if((tab_BMS_Capacity_modify[0] == '2')&&(tab_BMS_Capacity_modify[1] == '5'))
                    {
                        if(sU8NumberCounter <= 5)
                        {
                            tab_BMS_Capacity_modify[2] =  '0' + sU8NumberCounter;
                        }
                        else
                        {
                            sU8NumberCounter = 0;
                            tab_BMS_Capacity_modify[2] = '0';
                        }
                    }
                    else
                    {
                        if(sU8NumberCounter <= 9)
                        {
                            tab_BMS_Capacity_modify[2] =  '0' + sU8NumberCounter;
                        }
                        else
                        {
                            sU8NumberCounter = 0;
                            tab_BMS_Capacity_modify[2] = '0';
                        }
                    }
                }
                else if(sU8SetBmsCounter == 3)//充电电流第一个数字
                {
                    if(sU8NumberCounter <= 2)
                    {
                         if(((tab_BMS_LeadAcid_CharCur_modify[1] - '0') > 5)||
                        (((tab_BMS_LeadAcid_CharCur_modify[1] - '0') == 5)&&((tab_BMS_LeadAcid_CharCur_modify[2] - '0')> 5)))
                        {
                            tab_BMS_LeadAcid_CharCur_modify[0] =  '0' + sU8NumberCounter - 1;
                        }
                        else
                        {
                            tab_BMS_LeadAcid_CharCur_modify[0] =  '0' + sU8NumberCounter;
                        }
                    }
                    else
                    {
                       sU8NumberCounter = 0;
                       tab_BMS_LeadAcid_CharCur_modify[0] = '0';
                    }
                }
                else if(sU8SetBmsCounter == 4)//充电电流第二个数字
                {
                    if(tab_BMS_LeadAcid_CharCur_modify[0] == '2')
                    {
                        if(sU8NumberCounter <= 5)
                        {
                            if((tab_BMS_LeadAcid_CharCur_modify[2] - '0') > 5)
                            {
                                tab_BMS_LeadAcid_CharCur_modify[1] =  '0' + sU8NumberCounter - 1;
                            }
                            else
                            {
                                tab_BMS_LeadAcid_CharCur_modify[1] =  '0' + sU8NumberCounter;
                            }
                        }
                        else
                        {
                            sU8NumberCounter = 0;
                            tab_BMS_LeadAcid_CharCur_modify[1] = '0';
                        }
                    }
                    else
                    {
                        if(sU8NumberCounter <= 9)
                        {
                            tab_BMS_LeadAcid_CharCur_modify[1] =  '0' + sU8NumberCounter;
                        }
                        else
                        {
                            sU8NumberCounter = 0;
                            tab_BMS_LeadAcid_CharCur_modify[1] = '0';
                        }
                    }
                }
                else if(sU8SetBmsCounter == 5)//充电电流第三个数字
                {
                    if((tab_BMS_LeadAcid_CharCur_modify[0] == '2')&&(tab_BMS_LeadAcid_CharCur_modify[1] == '5'))
                    {
                        if(sU8NumberCounter <= 5)
                        {
                            tab_BMS_LeadAcid_CharCur_modify[2] =  '0' + sU8NumberCounter;
                        }
                        else
                        {
                            sU8NumberCounter = 0;
                            tab_BMS_LeadAcid_CharCur_modify[2] = '0';
                        }
                    }
                    else
                    {
                        if(sU8NumberCounter <= 9)
                        {
                            tab_BMS_LeadAcid_CharCur_modify[2] =  '0' + sU8NumberCounter;
                        }
                        else
                        {
                            sU8NumberCounter = 0;
                            tab_BMS_LeadAcid_CharCur_modify[2] = '0';
                        }
                    }
                }
                else if(sU8SetBmsCounter == 6)//充电电流第四个符号
                {
                    tab_BMS_LeadAcid_CharCur_modify[3] = '.';
                }
                else if(sU8SetBmsCounter == 7)//充电电流第五个数字
                {
                    if((tab_BMS_LeadAcid_CharCur_modify[0] == '2')&&(tab_BMS_LeadAcid_CharCur_modify[1] == '5')
                    &&(tab_BMS_LeadAcid_CharCur_modify[2] == '5'))
                    {
                        tab_BMS_LeadAcid_CharCur_modify[4] = '0';
                    }
                    else
                    {
                        if(sU8NumberCounter <= 9)
                        {
                            tab_BMS_LeadAcid_CharCur_modify[4] = '0' + sU8NumberCounter;
                        }
                        else
                        {
                            sU8NumberCounter = 0;
                            tab_BMS_LeadAcid_CharCur_modify[4] = '0';
                        }
                    }
                }
                else if(sU8SetBmsCounter == 8)//放电电流第一个数字
                {
                    if(sU8NumberCounter <= 2)
                    {
                         if(((tab_BMS_LeadAcid_DisCharCur_modify[1] - '0') > 5)||
                        (((tab_BMS_LeadAcid_DisCharCur_modify[1] - '0') == 5)&&((tab_BMS_LeadAcid_DisCharCur_modify[2] - '0')> 5)))
                        {
                            tab_BMS_LeadAcid_DisCharCur_modify[0] =  '0' + sU8NumberCounter - 1;
                        }
                        else
                        {
                            tab_BMS_LeadAcid_DisCharCur_modify[0] =  '0' + sU8NumberCounter;
                        }
                    }
                    else
                    {
                       sU8NumberCounter = 0;
                       tab_BMS_LeadAcid_DisCharCur_modify[0] = '0';
                    }
                }
                else if(sU8SetBmsCounter == 9)//放电电流第二个数字
                {
                    if(tab_BMS_LeadAcid_DisCharCur_modify[0] == '2')
                    {
                        if(sU8NumberCounter <= 5)
                        {
                            if((tab_BMS_LeadAcid_DisCharCur_modify[2] - '0') > 5)
                            {
                                tab_BMS_LeadAcid_DisCharCur_modify[1] =  '0' + sU8NumberCounter - 1;
                            }
                            else
                            {
                                tab_BMS_LeadAcid_DisCharCur_modify[1] =  '0' + sU8NumberCounter;
                            }
                        }
                        else
                        {
                            sU8NumberCounter = 0;
                            tab_BMS_LeadAcid_DisCharCur_modify[1] = '0';
                        }
                    }
                    else
                    {
                        if(sU8NumberCounter <= 9)
                        {
                            tab_BMS_LeadAcid_DisCharCur_modify[1] =  '0' + sU8NumberCounter;
                        }
                        else
                        {
                            sU8NumberCounter = 0;
                            tab_BMS_LeadAcid_DisCharCur_modify[1] = '0';
                        }
                    }
                }
                else if(sU8SetBmsCounter == 10)//放电电流第三个数字
                {
                    if((tab_BMS_LeadAcid_DisCharCur_modify[0] == '2')&&(tab_BMS_LeadAcid_DisCharCur_modify[1] == '5'))
                    {
                        if(sU8NumberCounter <= 5)
                        {
                            tab_BMS_LeadAcid_DisCharCur_modify[2] =  '0' + sU8NumberCounter;
                        }
                        else
                        {
                            sU8NumberCounter = 0;
                            tab_BMS_LeadAcid_DisCharCur_modify[2] = '0';
                        }
                    }
                    else
                    {
                        if(sU8NumberCounter <= 9)
                        {
                            tab_BMS_LeadAcid_DisCharCur_modify[2] =  '0' + sU8NumberCounter;
                        }
                        else
                        {
                            sU8NumberCounter = 0;
                            tab_BMS_LeadAcid_DisCharCur_modify[2] = '0';
                        }
                    }
                }
                else if(sU8SetBmsCounter == 11)//放电电流第四个符号
                {
                    tab_BMS_LeadAcid_DisCharCur_modify[3] = '.';
                }
                else if(sU8SetBmsCounter == 12)//放电电流第五个数字
                {
                    if((tab_BMS_LeadAcid_DisCharCur_modify[0] == '2')&&(tab_BMS_LeadAcid_DisCharCur_modify[1] == '5')
                    &&(tab_BMS_LeadAcid_DisCharCur_modify[2] == '5'))
                    {
                        tab_BMS_LeadAcid_DisCharCur_modify[4] = '0';
                    }
                    else
                    {
                        if(sU8NumberCounter <= 9)
                        {
                            tab_BMS_LeadAcid_DisCharCur_modify[4] = '0' + sU8NumberCounter;
                        }
                        else
                        {
                            sU8NumberCounter = 0;
                            tab_BMS_LeadAcid_DisCharCur_modify[4] = '0';
                        }
                    }
                }
                gCurrentMenu.eCurrentDisplayMenuType = nowDisplayType;                
            }
            break;
        case KEYACTION_UP://在系统设置界面下，DOWN键按下，选择对应的设置项
            {
                if(gbEditFlag != STATUS_TRUE)//进入编辑模式 
                {
                    gbEditFlag = STATUS_TRUE;   
                    sprintf(tab_BMS_Capacity_modify,"%s",tab_BMS_Capacity);
                    sprintf(tab_BMS_LeadAcid_CharCur_modify,"%s",tab_BMS_LeadAcid_CharCur);
                    sprintf(tab_BMS_LeadAcid_DisCharCur_modify,"%s",tab_BMS_LeadAcid_DisCharCur);
                }
                
                sU8NumberCounter--;
                
                if(sU8SetBmsCounter == 0)//电池容量第一个数字
                {
                   if(!(sU8NumberCounter <= 2))
                    {
                        if(((tab_BMS_Capacity_modify[1] - '0') > 5)||
                        (((tab_BMS_Capacity_modify[1] - '0') == 5)&&((tab_BMS_Capacity_modify[2] - '0')> 5)))
                        {
                            sU8NumberCounter = 1;
                        }
                        else
                        { 
                            sU8NumberCounter = 2;
                        }
                        tab_BMS_Capacity_modify[0] = '0';
                    }
                    tab_BMS_Capacity_modify[0] =  '0' + sU8NumberCounter;
                }
                else if(sU8SetBmsCounter == 1)//电池容量第二个数字
                {
                    if(tab_BMS_Capacity_modify[0] == '2')
                    {
                        if(!(sU8NumberCounter <= 5))
                        {                            
                            if((tab_BMS_Capacity_modify[2] - '0') > 5)
                            {
                                sU8NumberCounter = 4;
                            }
                            else
                            {
                                sU8NumberCounter = 5;
                            }
                            tab_BMS_Capacity_modify[1] = '0';
                        }
                    }
                    else
                    {
                        if(!(sU8NumberCounter <= 9))
                        {
                            sU8NumberCounter = 9;
                            tab_BMS_Capacity_modify[1] = '0';
                        }
                    }
                    tab_BMS_Capacity_modify[1] =  '0' + sU8NumberCounter;
                }
                else if(sU8SetBmsCounter == 2)//电池容量第三个数字
                {
                    if((tab_BMS_Capacity_modify[0] == '2')&&(tab_BMS_Capacity_modify[1] == '5'))
                    {
                        if(!(sU8NumberCounter <= 5))
                        {
                            sU8NumberCounter = 5;
                            tab_BMS_Capacity_modify[2] = '0';
                        }
                    }
                    else
                    {
                        if(!(sU8NumberCounter <= 9))
                        {
                            sU8NumberCounter = 9;
                            tab_BMS_Capacity_modify[2] = '0';
                        }
                    }
                    tab_BMS_Capacity_modify[2] =  '0' + sU8NumberCounter;                   
                }
                else if(sU8SetBmsCounter == 3)//充电电流第一个数字
                {
                    if(!(sU8NumberCounter <= 2))
                    {
                        if(((tab_BMS_LeadAcid_CharCur_modify[1] - '0') > 5)||
                        (((tab_BMS_LeadAcid_CharCur_modify[1] - '0') == 5)&&((tab_BMS_LeadAcid_CharCur_modify[2] - '0')> 5)))
                        {
                            sU8NumberCounter = 1;
                        }
                        else
                        { 
                            sU8NumberCounter = 2;
                        }
                        tab_BMS_LeadAcid_CharCur_modify[0] = '0';
                    }
                    tab_BMS_LeadAcid_CharCur_modify[0] =  '0' + sU8NumberCounter;
                }
                else if(sU8SetBmsCounter == 4)//充电电流第二个数字
                {
                    if(tab_BMS_LeadAcid_CharCur_modify[0] == '2')
                    {
                        if(!(sU8NumberCounter <= 5))
                        {                            
                            if((tab_BMS_LeadAcid_CharCur_modify[2] - '0') > 5)
                            {
                                sU8NumberCounter = 4;
                            }
                            else
                            {
                                sU8NumberCounter = 5;
                            }
                            tab_BMS_LeadAcid_CharCur_modify[1] = '0';
                        }
                    }
                    else
                    {
                        if(!(sU8NumberCounter <= 9))
                        {
                            sU8NumberCounter = 9;
                            tab_BMS_LeadAcid_CharCur_modify[1] = '0';
                        }
                    }
                    tab_BMS_LeadAcid_CharCur_modify[1] =  '0' + sU8NumberCounter;
                }
                else if(sU8SetBmsCounter == 5)//充电电流第三个数字
                {
                    if((tab_BMS_LeadAcid_CharCur_modify[0] == '2')&&(tab_BMS_LeadAcid_CharCur_modify[1] == '5'))
                    {
                        if(!(sU8NumberCounter <= 5))
                        {
                            sU8NumberCounter = 5;
                            tab_BMS_LeadAcid_CharCur_modify[2] = '0';
                        }
                    }
                    else
                    {
                        if(!(sU8NumberCounter <= 9))
                        {
                            sU8NumberCounter = 9;
                            tab_BMS_LeadAcid_CharCur_modify[2] = '0';
                        }
                    }
                    tab_BMS_LeadAcid_CharCur_modify[2] =  '0' + sU8NumberCounter; 
                }
                else if(sU8SetBmsCounter == 6)//充电电流第四个符号
                {
                    tab_BMS_LeadAcid_CharCur_modify[3] = '.';
                }
                else if(sU8SetBmsCounter == 7)//充电电流第五个数字
                {
                    
                    if((tab_BMS_LeadAcid_CharCur_modify[0] == '2')&&(tab_BMS_LeadAcid_CharCur_modify[1] == '5')
                    &&(tab_BMS_LeadAcid_CharCur_modify[2] == '5'))
                    {
                        tab_BMS_LeadAcid_CharCur_modify[4] = '0';
                    }
                    else
                    {
                        if(!(sU8NumberCounter <= 9))
                        {
                            sU8NumberCounter = 9;
                            tab_BMS_LeadAcid_CharCur_modify[4] = '0';
                        }
                        tab_BMS_LeadAcid_CharCur_modify[4] =  '0' + sU8NumberCounter;
                    }
                }
                else if(sU8SetBmsCounter == 8)//放电电流第一个数字
                {
                    if(!(sU8NumberCounter <= 2))
                    {
                        if(((tab_BMS_LeadAcid_DisCharCur_modify[1] - '0') > 5)||
                        (((tab_BMS_LeadAcid_DisCharCur_modify[1] - '0') == 5)&&((tab_BMS_LeadAcid_DisCharCur_modify[2] - '0')> 5)))
                        {
                            sU8NumberCounter = 1;
                        }
                        else
                        { 
                            sU8NumberCounter = 2;
                        }
                        tab_BMS_LeadAcid_DisCharCur_modify[0] = '0';
                    }
                    tab_BMS_LeadAcid_DisCharCur_modify[0] =  '0' + sU8NumberCounter;
                }
                else if(sU8SetBmsCounter == 9)//放电电流第二个数字
                {
                    if(tab_BMS_LeadAcid_DisCharCur_modify[0] == '2')
                    {
                        if(!(sU8NumberCounter <= 5))
                        {                            
                            if((tab_BMS_LeadAcid_DisCharCur_modify[2] - '0') > 5)
                            {
                                sU8NumberCounter = 4;
                            }
                            else
                            {
                                sU8NumberCounter = 5;
                            }
                            tab_BMS_LeadAcid_DisCharCur_modify[1] = '0';
                        }
                    }
                    else
                    {
                        if(!(sU8NumberCounter <= 9))
                        {
                            sU8NumberCounter = 9;
                            tab_BMS_LeadAcid_DisCharCur_modify[1] = '0';
                        }
                    }
                    tab_BMS_LeadAcid_DisCharCur_modify[1] =  '0' + sU8NumberCounter;
                }
                else if(sU8SetBmsCounter == 10)//放电电流第三个数字
                {
                    if((tab_BMS_LeadAcid_DisCharCur_modify[0] == '2')&&(tab_BMS_LeadAcid_DisCharCur_modify[1] == '5'))
                    {
                        if(!(sU8NumberCounter <= 5))
                        {
                            sU8NumberCounter = 5;
                            tab_BMS_LeadAcid_DisCharCur_modify[2] = '0';
                        }
                    }
                    else
                    {
                        if(!(sU8NumberCounter <= 9))
                        {
                            sU8NumberCounter = 9;
                            tab_BMS_LeadAcid_DisCharCur_modify[2] = '0';
                        }
                    }
                    tab_BMS_LeadAcid_DisCharCur_modify[2] =  '0' + sU8NumberCounter; 
                }
                else if(sU8SetBmsCounter == 11)//放电电流第四个符号
                {
                    tab_BMS_LeadAcid_DisCharCur_modify[3] = '.';
                }
                else if(sU8SetBmsCounter == 12)//放电电流第五个数字
                {
                    
                    if((tab_BMS_LeadAcid_DisCharCur_modify[0] == '2')&&(tab_BMS_LeadAcid_DisCharCur_modify[1] == '5')
                    &&(tab_BMS_LeadAcid_DisCharCur_modify[2] == '5'))
                    {
                        tab_BMS_LeadAcid_DisCharCur_modify[4] = '0';
                    }
                    else
                    {
                        if(!(sU8NumberCounter <= 9))
                        {
                            sU8NumberCounter = 9;
                            tab_BMS_LeadAcid_DisCharCur_modify[4] = '0';
                        }
                        tab_BMS_LeadAcid_DisCharCur_modify[4] =  '0' + sU8NumberCounter;
                    }
                }
                gCurrentMenu.eCurrentDisplayMenuType = nowDisplayType;
            }
            break;
        case KEYACTION_UPDOWN://在系统设置界面下，UP键 + DOWN键同时按下，切换设置下一个数据
            {
                sU8NumberCounter = 0;
                sU8SetBmsCounter++;
                if(sU8SetBmsCounter == DISPLAY_SET_BMS_TYPE_COUNT_LEAD_CAPANDCUR_COUNT)
                {
                    sU8SetBmsCounter = 0;
                }
                gCurrentMenu.eCurrentDisplayMenuType = nowDisplayType;
            }
            break;
        case KEYACTION_NULL://无操作刷新主界面数据
        default:
            {
                if(gbEditFlag == STATUS_FALSE)
                {
                    Display_SET_BMS_LeadAcid_Paras *pStBmsPara = getLeadAcidParasData();
                    
                    uint16_t  u16Capacity = pStBmsPara->u16BatteryCapacity;                    
                    sprintf(tab_BMS_Capacity,"%03d",u16Capacity);

                    int16 s16MaxCharCur = pStBmsPara->u16MaxCharCurrent;
                    float f16MaxCharCur = s16MaxCharCur / 10.0;
                    sprintf(tab_BMS_LeadAcid_CharCur,"%05.1f",f16MaxCharCur);

                    int16 s16MaxDisCharCur = pStBmsPara->u16MaxDisCharCurrent;
                    float f16MaxDisCharCur = s16MaxDisCharCur / 10.0;
                    sprintf(tab_BMS_LeadAcid_DisCharCur,"%05.1f",f16MaxDisCharCur);
                }
                gCurrentMenu.eCurrentDisplayMenuType = nowDisplayType;
            }
            break;
    }
    
    if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_ENGLISH)  //铅酸电池类型容量和最大电流设置界面 英文界面组装
    { 
        if(gbEditFlag == STATUS_TRUE)
        {
            Display_Set_UnderLine_Blink_Position(STATUS_TRUE,arrayBMSLiIonCapacityAndCurrentFlicker[sU8SetBmsCounter].u8StartPos,arrayBMSLiIonCapacityAndCurrentFlicker[sU8SetBmsCounter].u8EndPos);
            updateDisplayLeadAcidBatteryParaSetCapacityData_English(tab_BMS_Capacity_modify,tab_BMS_LeadAcid_CharCur_modify,tab_BMS_LeadAcid_DisCharCur_modify); 
        }
        else 
        {
            updateDisplayLeadAcidBatteryParaSetCapacityData_English(tab_BMS_Capacity,tab_BMS_LeadAcid_CharCur,tab_BMS_LeadAcid_DisCharCur);
        }
    }
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_CHINESE)//铅酸电池类型容量和最大电流设置界面 中文界面组装
    {
        updateDisplayLeadAcidBatteryParaSetCapacityData_Chinese(tab_BMS_Capacity_modify,tab_BMS_LeadAcid_CharCur_modify,tab_BMS_LeadAcid_DisCharCur_modify);
    }
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_SPANISH)//铅酸电池类型容量和最大电流设置界面 西班牙界面组装 
    {
        updateDisplayLeadAcidBatteryParaSetCapacityData_Spanish(tab_BMS_Capacity_modify,tab_BMS_LeadAcid_CharCur_modify,tab_BMS_LeadAcid_DisCharCur_modify);  
    }   
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_GERMAN)//铅酸电池类型容量和最大电流设置界面 德语界面组装
    {
        updateDisplayLeadAcidBatteryParaSetCapacityData_German(tab_BMS_Capacity_modify,tab_BMS_LeadAcid_CharCur_modify,tab_BMS_LeadAcid_DisCharCur_modify);  
    }   
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_FRENCH)//铅酸电池类型容量和最大电流设置界面 法语界面组装 
    {
        updateDisplayLeadAcidBatteryParaSetCapacityData_French(tab_BMS_Capacity_modify,tab_BMS_LeadAcid_CharCur_modify,tab_BMS_LeadAcid_DisCharCur_modify);    
    } 
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_POLISH)//铅酸电池类型容量和最大电流设置界面 波兰界面组装
    {
        updateDisplayLeadAcidBatteryParaSetCapacityData_Polish(tab_BMS_Capacity_modify,tab_BMS_LeadAcid_CharCur_modify,tab_BMS_LeadAcid_DisCharCur_modify); 
    }  
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_ITALIAN)//铅酸电池类型容量和最大电流设置界面 意大利界面组装
    {
        updateDisplayLeadAcidBatteryParaSetCapacityData_Italian(tab_BMS_Capacity_modify,tab_BMS_LeadAcid_CharCur_modify,tab_BMS_LeadAcid_DisCharCur_modify);  
    } 
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_CZECH)//铅酸电池类型容量和最大电流设置界面 捷克界面组装 
    {
        updateDisplayLeadAcidBatteryParaSetCapacityData_Czech(tab_BMS_Capacity_modify,tab_BMS_LeadAcid_CharCur_modify,tab_BMS_LeadAcid_DisCharCur_modify);   
    }        
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_DUTCH)//铅酸电池类型容量和最大电流设置界面 荷兰界面组装 
    {
        updateDisplayLeadAcidBatteryParaSetCapacityData_Dutch(tab_BMS_Capacity_modify,tab_BMS_LeadAcid_CharCur_modify,tab_BMS_LeadAcid_DisCharCur_modify);   
    }
    else
    {  
        updateDisplayLeadAcidBatteryParaSetCapacityData_English(tab_BMS_Capacity_modify,tab_BMS_LeadAcid_CharCur_modify,tab_BMS_LeadAcid_DisCharCur_modify);        
    } 
}


/***************************************************************************
 功能:铅酸电池类型容量和最大电流设置界面 英文界面信息
****************************************************************************/
void updateDisplayLeadAcidBatteryParaSetCapacityData_English(char* strBmsCapacity,char* strMaxCharCur,char* strMaxDisCharCur)
{
    memset(tab_display,0,DISPLAY_CACHE_SIZE);
    sprintf(tab_display,"  CapacityAndCurrent \nCapacity:%s         \nMaxCharCur:%s     \nMaxDisCharCur:%s  \n",strBmsCapacity,strMaxCharCur,strMaxDisCharCur);
    //GUI_DispStringAt((uint8_t*)tab_display, 0, 0);
    GUI_Display(tab_display, 0, 0);
}

/***************************************************************************
 功能:铅酸电池类型容量和最大电流设置界面 中文界面信息
****************************************************************************/
void updateDisplayLeadAcidBatteryParaSetCapacityData_Chinese(char* strBmsCapacity,char* strMaxCharCur,char* strMaxDisCharCur)
{
    
}
/***************************************************************************
 功能:铅酸电池类型容量和最大电流设置界面 西班牙界面信息
****************************************************************************/
void updateDisplayLeadAcidBatteryParaSetCapacityData_Spanish(char* strBmsCapacity,char* strMaxCharCur,char* strMaxDisCharCur)
{
    
}

/***************************************************************************
 功能:铅酸电池类型容量和最大电流设置界面 德语界面信息
****************************************************************************/
void updateDisplayLeadAcidBatteryParaSetCapacityData_German(char* strBmsCapacity,char* strMaxCharCur,char* strMaxDisCharCur)
{
    
}

/***************************************************************************
 功能:铅酸电池类型容量和最大电流设置界面 法语界面信息
****************************************************************************/
void updateDisplayLeadAcidBatteryParaSetCapacityData_French(char* strBmsCapacity,char* strMaxCharCur,char* strMaxDisCharCur)
{
    
}

/***************************************************************************
 功能:铅酸电池类型容量和最大电流设置界面 波兰语界面信息
****************************************************************************/
void updateDisplayLeadAcidBatteryParaSetCapacityData_Polish(char* strBmsCapacity,char* strMaxCharCur,char* strMaxDisCharCur)
{
    
}

/***************************************************************************
 功能:铅酸电池类型容量和最大电流设置界面 意大利语界面信息
****************************************************************************/
void updateDisplayLeadAcidBatteryParaSetCapacityData_Italian(char* strBmsCapacity,char* strMaxCharCur,char* strMaxDisCharCur)
{
    
}

/***************************************************************************
 功能:铅酸电池类型容量和最大电流设置界面 捷克语界面信息
****************************************************************************/
void updateDisplayLeadAcidBatteryParaSetCapacityData_Czech(char* strBmsCapacity,char* strMaxCharCur,char* strMaxDisCharCur)
{
    
}

/***************************************************************************
 功能:铅酸电池类型容量和最大电流设置界面 荷兰语界面信息
****************************************************************************/
void updateDisplayLeadAcidBatteryParaSetCapacityData_Dutch(char* strBmsCapacity,char* strMaxCharCur,char* strMaxDisCharCur)
{
    
}


/***************************************************************************
 功能:保存容量和最大充放电流到Flash
****************************************************************************/
void setLeadAcidCapacityAndMaxCharCurData(uint16_t u16Capacity, int16 s16MaxCharCur, int16 s16MaxDisCharCur)
{
   Flash_Device_BMSInfo_Read(&gDisplay.stDisplaySet.stBMS,sizeof(Display_SET_BMS));
   gDisplay.stDisplaySet.stBMS.stHMISetBMSLeadAcidParas.u16BatteryCapacity = u16Capacity;
   gDisplay.stDisplaySet.stBMS.stHMISetBMSLeadAcidParas.u16MaxCharCurrent = s16MaxCharCur;
   gDisplay.stDisplaySet.stBMS.stHMISetBMSLeadAcidParas.u16MaxDisCharCurrent = s16MaxDisCharCur;
   Flash_Device_BMSInfo_Write(&gDisplay.stDisplaySet.stBMS,sizeof(Display_SET_BMS));
}

/***************************************************************************
 功能:根据上一次界面操作类型和本次操作类型判断本次电池厂商SET界面切换
****************************************************************************/

void updateDisplayBatteryLeadAcidParaSetEndofSOCData(KeyAction_TypeDef nowActionType,DisplayAction_TypeDef nowDisplayType)
{
    static uint8_t sU8SetBmsCounter = 0;
    static uint8_t sU8NumberCounter = 0;

    switch(nowActionType) 
    {
        case KEYACTION_ENTER://在时间设置界面下，Enter键按下，在系统设置对应的时间
            {
                if(gbEditFlag != STATUS_FALSE)//退出编辑模式
                {
                    uint8_t u8BmsCharSOC = atoi(tab_BMS_LeadAcid_Endof_CharSOC_modify); 
                    //gDisplay.stDisplaySet.stBMS.stHMISetBMSLeadAcidParas.u8EndOfCharSOC = u8BmsCharSOC;
                    uint8_t u8BmsDisCharSOC = atoi(tab_BMS_LeadAcid_Endof_DisCharSOC_modify); 
                    //gDisplay.stDisplaySet.stBMS.stHMISetBMSLeadAcidParas.u8EndOfDisCharSOC = u8BmsDisCharSOC;
                    
                    sprintf(tab_BMS_LeadAcid_Endof_CharSOC,"%s",tab_BMS_LeadAcid_Endof_CharSOC_modify);
                    sprintf(tab_BMS_LeadAcid_Endof_DisCharSOC,"%s",tab_BMS_LeadAcid_Endof_DisCharSOC_modify);
                    
                    setLeadAcidEndofSOCData(u8BmsCharSOC,u8BmsDisCharSOC);
                    sU8SetBmsCounter = 0;
                    sU8NumberCounter = 0;
                    gCurrentMenu.eCurrentDisplayMenuType = nowDisplayType;
                    gbEditFlag = STATUS_FALSE;
                    Display_Set_UnderLine_Blink_Position(STATUS_FALSE,0,0);
                } 
            }
            break;
            case KEYACTION_ESC:
            {
                sU8SetBmsCounter = 0;
                sU8NumberCounter = 0;
                gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_SET_BATTERY_TYPE_LEAD_ACID;
                gbEditFlag = STATUS_FALSE;
                Display_Set_UnderLine_Blink_Position(STATUS_FALSE,0,0);
            }
            break;
        case KEYACTION_DOWN://在系统设置界面下，UP键按下，选择对应的设置项
            {
                if(gbEditFlag != STATUS_TRUE)
                {
                    gbEditFlag = STATUS_TRUE;
                    sprintf(tab_BMS_LeadAcid_Endof_CharSOC_modify,"%s",tab_BMS_LeadAcid_Endof_CharSOC);
                    sprintf(tab_BMS_LeadAcid_Endof_DisCharSOC_modify,"%s",tab_BMS_LeadAcid_Endof_DisCharSOC);
                }                
                sU8NumberCounter++; 
                              
                if(sU8SetBmsCounter == 0) 
                {
                    if(sU8NumberCounter > 1)
                    {
                        sU8NumberCounter = 0;
                    } 
                    
                    tab_BMS_LeadAcid_Endof_CharSOC_modify[0] =  '0' + sU8NumberCounter;
                    
                    if(tab_BMS_LeadAcid_Endof_CharSOC_modify[0] == '1')
                    {
                       tab_BMS_LeadAcid_Endof_CharSOC_modify[1] =  '0';
                       tab_BMS_LeadAcid_Endof_CharSOC_modify[2] =  '0';
                    } 
                } 
                else if(sU8SetBmsCounter == 1)
                {
                    if(tab_BMS_LeadAcid_Endof_CharSOC_modify[0] == '1')
                    {
                        sU8NumberCounter = 0;
                    }
                    else
                    {
                        if(sU8NumberCounter > 9)
                        {
                            sU8NumberCounter = 0;
                        }
                    }
                    tab_BMS_LeadAcid_Endof_CharSOC_modify[1] =  '0' + sU8NumberCounter;
                }
                else if(sU8SetBmsCounter == 2)
                {
                    if(tab_BMS_LeadAcid_Endof_CharSOC_modify[0] == '1')
                    {
                        sU8NumberCounter = 0;
                    }
                    else
                    {
                        if(sU8NumberCounter > 9)
                        {
                            sU8NumberCounter = 0;
                        }
                    } 
                    tab_BMS_LeadAcid_Endof_CharSOC_modify[2] =  '0' + sU8NumberCounter;  
                }
                else if(sU8SetBmsCounter == 3)
                {
                    if(sU8NumberCounter > 1)
                    {
                        sU8NumberCounter = 0;
                    }
                    tab_BMS_LeadAcid_Endof_DisCharSOC_modify[0] =  '0' + sU8NumberCounter;  

                    if(tab_BMS_LeadAcid_Endof_DisCharSOC_modify[0] == '1')
                    {
                       tab_BMS_LeadAcid_Endof_DisCharSOC_modify[1] =  '0';
                       tab_BMS_LeadAcid_Endof_DisCharSOC_modify[2] =  '0';
                    }
                }
                else if(sU8SetBmsCounter == 4)
                {
                    if(tab_BMS_LeadAcid_Endof_DisCharSOC_modify[0] == '1')
                    {
                        sU8NumberCounter = 0;
                    }
                    else
                    {
                        if(sU8NumberCounter > 9)
                        {
                            sU8NumberCounter = 1;
                        }
                    } 
                    tab_BMS_LeadAcid_Endof_DisCharSOC_modify[1] =  '0' + sU8NumberCounter;
                }
                else if(sU8SetBmsCounter == 5)
                {
                    if(tab_BMS_LeadAcid_Endof_DisCharSOC_modify[0] == '1')
                    {
                        sU8NumberCounter = 0;
                    }
                    else
                    {
                        if(sU8NumberCounter > 9)
                        {
                            sU8NumberCounter = 0;
                        }
                    } 
                    tab_BMS_LeadAcid_Endof_DisCharSOC_modify[2] =  '0' + sU8NumberCounter;  
                }
                gCurrentMenu.eCurrentDisplayMenuType = nowDisplayType;                
            }
            break;
        case KEYACTION_UP://在系统设置界面下，DOWN键按下，选择对应的设置项
            {
                if(gbEditFlag != STATUS_TRUE)//进入编辑模式 
                {
                    gbEditFlag = STATUS_TRUE;   
                    sprintf(tab_BMS_LeadAcid_Endof_CharSOC_modify,"%s",tab_BMS_LeadAcid_Endof_CharSOC);
                    sprintf(tab_BMS_LeadAcid_Endof_DisCharSOC_modify,"%s",tab_BMS_LeadAcid_Endof_DisCharSOC);
                }
                
                sU8NumberCounter--;
                
                if(sU8SetBmsCounter == 0)
                {
                    if(!(sU8NumberCounter <= 1))
                    {
                        sU8NumberCounter = 1;
                    }
                    tab_BMS_LeadAcid_Endof_CharSOC_modify[0] =  '0' + sU8NumberCounter;
                    
                    if(tab_BMS_LeadAcid_Endof_CharSOC_modify[0] == '1')
                    {
                       tab_BMS_LeadAcid_Endof_CharSOC_modify[1] =  '0';
                       tab_BMS_LeadAcid_Endof_CharSOC_modify[2] =  '0';
                    }
                }
                else if(sU8SetBmsCounter == 1)
                {
                    if(tab_BMS_LeadAcid_Endof_CharSOC_modify[0] == '1')
                    {
                       sU8NumberCounter = 0;
                    }
                    else
                    {
                        if(!(sU8NumberCounter<=9))
                        {
                            sU8NumberCounter = 9;
                        }
                    }  
                        tab_BMS_LeadAcid_Endof_CharSOC_modify[1] =  '0' + sU8NumberCounter;
                }
                else if(sU8SetBmsCounter == 2)
                {
                    if(tab_BMS_LeadAcid_Endof_CharSOC_modify[0] == '1')
                    {
                       sU8NumberCounter = 0; 
                    }
                    else
                    {
                        if(!(sU8NumberCounter<=9))
                        {
                            sU8NumberCounter = 9;
                        }  
                    } 
                    tab_BMS_LeadAcid_Endof_CharSOC_modify[2] =  '0' + sU8NumberCounter;
                }
                else if(sU8SetBmsCounter == 3)
                {
                    if(!(sU8NumberCounter <= 1))
                    {
                        sU8NumberCounter = 1;
                    }
                    tab_BMS_LeadAcid_Endof_DisCharSOC_modify[0] =  '0' + sU8NumberCounter;
                    
                    if(tab_BMS_LeadAcid_Endof_DisCharSOC_modify[0] == '1')
                    {
                       tab_BMS_LeadAcid_Endof_DisCharSOC_modify[1] =  '0';
                       tab_BMS_LeadAcid_Endof_DisCharSOC_modify[2] =  '0';
                    }  
                }
                else if(sU8SetBmsCounter == 4)
                {
                    if(tab_BMS_LeadAcid_Endof_DisCharSOC_modify[0] == '1')
                    {
                       sU8NumberCounter = 0; 
                    }
                    else
                    {
                        if(!(sU8NumberCounter<=9))
                        {
                            sU8NumberCounter = 9;
                        }  
                    } 
                    tab_BMS_LeadAcid_Endof_DisCharSOC_modify[1] =  '0' + sU8NumberCounter;
                }
                else if(sU8SetBmsCounter == 5)
                {
                    if(tab_BMS_LeadAcid_Endof_DisCharSOC_modify[0] == '1')
                    {
                       sU8NumberCounter = 0; 
                    }
                    else
                    {
                        if(!(sU8NumberCounter<=9))
                        {
                            sU8NumberCounter = 9;
                        }  
                    } 
                    tab_BMS_LeadAcid_Endof_DisCharSOC_modify[2] =  '0' + sU8NumberCounter;
                }
                gCurrentMenu.eCurrentDisplayMenuType = nowDisplayType;
            }
            break;
        case KEYACTION_UPDOWN://在系统设置界面下，UP键 + DOWN键同时按下，切换设置下一个数据
            {
                sU8NumberCounter = 0;
                sU8SetBmsCounter++;
                if(sU8SetBmsCounter == DISPLAY_SET_BMS_TYPE_COUNT_LEAD_SOC_COUNT)
                {
                    sU8SetBmsCounter = 0;
                }
                gCurrentMenu.eCurrentDisplayMenuType = nowDisplayType;
            }
            break;
        case KEYACTION_NULL://无操作刷新主界面数据
        default:
            {
                if(gbEditFlag == STATUS_FALSE)
                {
                    Display_SET_BMS_LeadAcid_Paras *pStBmsPara = getLeadAcidParasData();
                    
                    uint8_t s8CharSOC = pStBmsPara->u8EndOfCharSOC;                    
                    sprintf(tab_BMS_LeadAcid_Endof_CharSOC,"%03d",s8CharSOC);
                    uint8_t s8DisCharSOC = pStBmsPara->u8EndOfDisCharSOC;
                    sprintf(tab_BMS_LeadAcid_Endof_DisCharSOC,"%03d",s8DisCharSOC);
                }
                gCurrentMenu.eCurrentDisplayMenuType = nowDisplayType;
            }
            break;
    }
    
    if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_ENGLISH)  //系统时间设置界面TimeSystemSet 中文界面组装
    { 
        if(gbEditFlag == STATUS_TRUE)
        {
            Display_Set_UnderLine_Blink_Position(STATUS_TRUE,arrayBMSLeadAcidEndOfSOCFlicker[sU8SetBmsCounter].u8StartPos,arrayBMSLeadAcidEndOfSOCFlicker[sU8SetBmsCounter].u8EndPos);
            updateDisplayBatteryLeadAcidParaSetEndofSOCData_English(tab_BMS_LeadAcid_Endof_CharSOC_modify,tab_BMS_LeadAcid_Endof_DisCharSOC_modify); 
        }
        else 
        {
            updateDisplayBatteryLeadAcidParaSetEndofSOCData_English(tab_BMS_LeadAcid_Endof_CharSOC,tab_BMS_LeadAcid_Endof_DisCharSOC);
        }
    }
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_CHINESE)//铅酸电池类型截止SOC设置界面 中文界面组装
    {
        updateDisplayBatteryLeadAcidParaSetEndofSOCData_Chinese(tab_BMS_LeadAcid_Endof_CharSOC_modify,tab_BMS_LeadAcid_Endof_DisCharSOC_modify);
    }
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_SPANISH)//铅酸电池类型截止SOC设置界面 西班牙界面组装 
    {
        updateDisplayBatteryLeadAcidParaSetEndofSOCData_Spanish(tab_BMS_LeadAcid_Endof_CharSOC_modify,tab_BMS_LeadAcid_Endof_DisCharSOC_modify);  
    }   
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_GERMAN)//铅酸电池类型截止SOC设置界面 德语界面组装
    {
        updateDisplayBatteryLeadAcidParaSetEndofSOCData_German(tab_BMS_LeadAcid_Endof_CharSOC_modify,tab_BMS_LeadAcid_Endof_DisCharSOC_modify);  
    }   
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_FRENCH)//铅酸电池类型截止SOC设置界面 法语界面组装 
    {
        updateDisplayBatteryLeadAcidParaSetEndofSOCData_French(tab_BMS_LeadAcid_Endof_CharSOC_modify,tab_BMS_LeadAcid_Endof_DisCharSOC_modify);    
    } 
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_POLISH)//铅酸电池类型截止SOC设置界面 波兰界面组装
    {
        updateDisplayBatteryLeadAcidParaSetEndofSOCData_Polish(tab_BMS_LeadAcid_Endof_CharSOC_modify,tab_BMS_LeadAcid_Endof_DisCharSOC_modify); 
    }  
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_ITALIAN)//铅酸电池类型截止SOC设置界面 意大利界面组装
    {
        updateDisplayBatteryLeadAcidParaSetEndofSOCData_Italian(tab_BMS_LeadAcid_Endof_CharSOC_modify,tab_BMS_LeadAcid_Endof_DisCharSOC_modify);  
    } 
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_CZECH)//铅酸电池类型截止SOC设置界面 捷克界面组装 
    {
        updateDisplayBatteryLeadAcidParaSetEndofSOCData_Czech(tab_BMS_LeadAcid_Endof_CharSOC_modify,tab_BMS_LeadAcid_Endof_DisCharSOC_modify);   
    }        
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_DUTCH)//铅酸电池类型截止SOC设置界面 荷兰界面组装 
    {
        updateDisplayBatteryLeadAcidParaSetEndofSOCData_Dutch(tab_BMS_LeadAcid_Endof_CharSOC_modify,tab_BMS_LeadAcid_Endof_DisCharSOC_modify);   
    }
    else
    {  
        updateDisplayBatteryLeadAcidParaSetEndofSOCData_English(tab_BMS_LeadAcid_Endof_CharSOC_modify,tab_BMS_LeadAcid_Endof_DisCharSOC_modify);        
    } 
}



/***************************************************************************
 功能:铅酸电池类型截止SOC设置界面 英文界面信息
****************************************************************************/
void updateDisplayBatteryLeadAcidParaSetEndofSOCData_English(char* strCharSOC,char* strDisCharSOC)
 {
    memset(tab_display,0,DISPLAY_CACHE_SIZE);
    sprintf(tab_display," LEAD.ACID EndofSOC  \nCharEndofSOC:%s     \nDisCharEndofSOC:%s  \n                     \n",strCharSOC,strDisCharSOC);
    //GUI_DispStringAt((uint8_t*)tab_display, 0, 0);
    GUI_Display(tab_display, 0, 0);
}

/***************************************************************************
 功能:铅酸电池类型截止SOC设置界面 中文界面信息
****************************************************************************/
void updateDisplayBatteryLeadAcidParaSetEndofSOCData_Chinese(char* strCharSOC,char* strDisCharSOC)
{
    
}
/***************************************************************************
 功能:铅酸电池类型截止SOC设置界面 西班牙界面信息
****************************************************************************/
void updateDisplayBatteryLeadAcidParaSetEndofSOCData_Spanish(char* strCharSOC,char* strDisCharSOC)
{
    
}

/***************************************************************************
 功能:铅酸电池类型截止SOC设置界面 德语界面信息
****************************************************************************/
void updateDisplayBatteryLeadAcidParaSetEndofSOCData_German(char* strCharSOC,char* strDisCharSOC)
{
    
}

/***************************************************************************
 功能:铅酸电池类型截止SOC设置界面 法语界面信息
****************************************************************************/
void updateDisplayBatteryLeadAcidParaSetEndofSOCData_French(char* strCharSOC,char* strDisCharSOC)
{
    
}

/***************************************************************************
 功能:铅酸电池类型截止SOC设置界面 波兰语界面信息
****************************************************************************/
void updateDisplayBatteryLeadAcidParaSetEndofSOCData_Polish(char* strCharSOC,char* strDisCharSOC)
{
    
}

/***************************************************************************
 功能:铅酸电池类型截止SOC设置界面 意大利语界面信息
****************************************************************************/
void updateDisplayBatteryLeadAcidParaSetEndofSOCData_Italian(char* strCharSOC,char* strDisCharSOC)
{
    
}

/***************************************************************************
 功能:铅酸电池类型截止SOC设置界面 捷克语界面信息
****************************************************************************/
void updateDisplayBatteryLeadAcidParaSetEndofSOCData_Czech(char* strCharSOC,char* strDisCharSOC)
{
    
}

/***************************************************************************
 功能:铅酸电池类型截止SOC设置界面 荷兰语界面信息
****************************************************************************/
void updateDisplayBatteryLeadAcidParaSetEndofSOCData_Dutch(char* strCharSOC,char* strDisCharSOC)
{
    
}

/***************************************************************************
 功能:保存截止SOC到Flash
****************************************************************************/
void setLeadAcidEndofSOCData(uint8_t u8EndOfCharSOC,uint8_t u8EndOfDisCharSOC)
{
   Flash_Device_BMSInfo_Read(&gDisplay.stDisplaySet.stBMS,sizeof(Display_SET_BMS));
   gDisplay.stDisplaySet.stBMS.stHMISetBMSLeadAcidParas.u8EndOfCharSOC = u8EndOfCharSOC;
   gDisplay.stDisplaySet.stBMS.stHMISetBMSLeadAcidParas.u8EndOfDisCharSOC = u8EndOfDisCharSOC;
   Flash_Device_BMSInfo_Write(&gDisplay.stDisplaySet.stBMS,sizeof(Display_SET_BMS));
}


/***************************************************************************
 功能:根据上一次界面操作类型和本次操作类型判断本次LeadAcid电池电压点设置界面切换
****************************************************************************/

void updateDisplayLeadAcidBatteryParaSetVoltPointData(KeyAction_TypeDef nowActionType,DisplayAction_TypeDef nowDisplayType)
{
    static uint8_t sU8SetBmsCounter = 0;
    static uint8_t sU8NumberCounter = 0;

    switch(nowActionType) 
    {
        case KEYACTION_ENTER://在时间设置界面下，Enter键按下，在系统设置对应的时间
            {
                if(gbEditFlag != STATUS_FALSE)//退出编辑模式
                {
                    float f16ShutPoint = atof(tab_BMS_LowVolt_ShutPoint_modify);
                    int16 s16ShutPoint = (int16)(f16ShutPoint * 10); 
                    //gDisplay.stDisplaySet.stBMS.stHMISetBMSLeadAcidParas.u16LowVoltShutPoint = s16ShutPoint;
                    
                    float f16FloatVolt = atof(tab_BMS_FloatVolt_Point_modify);
                    int16 s16FloatVolt = (int16)(f16FloatVolt * 10);  
                    //gDisplay.stDisplaySet.stBMS.stHMISetBMSLeadAcidParas.u16FloatVoltPoint = s16FloatVolt;

                    float f16ConstVolt = atof(tab_BMS_ConstVolt_Point_modify);
                    int16 s16ConstVolt = (int16)(f16ConstVolt * 10);  
                    //gDisplay.stDisplaySet.stBMS.stHMISetBMSLeadAcidParas.u16ConstVoltCharPoint = s16ConstVolt;
                    
                    sprintf(tab_BMS_LowVolt_ShutPoint,"%s",tab_BMS_LowVolt_ShutPoint_modify);
                    sprintf(tab_BMS_FloatVolt_Point,"%s",tab_BMS_FloatVolt_Point_modify);
                    sprintf(tab_BMS_ConstVolt_Point,"%s",tab_BMS_ConstVolt_Point_modify);


                    setVoltPointData(s16ShutPoint,s16FloatVolt,s16ConstVolt);
                    sU8SetBmsCounter = 0;
                    sU8NumberCounter = 0;
                    gCurrentMenu.eCurrentDisplayMenuType = nowDisplayType;
                    gbEditFlag = STATUS_FALSE;
                    Display_Set_UnderLine_Blink_Position(STATUS_FALSE,0,0);
                } 
            }
            break;
        case KEYACTION_ESC:
            {
                sU8SetBmsCounter = 0;
                sU8NumberCounter = 0;
                gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_SET_BATTERY_TYPE_LEAD_ACID;
                gbEditFlag = STATUS_FALSE;
                Display_Set_UnderLine_Blink_Position(STATUS_FALSE,0,0);
            }
            break;
        case KEYACTION_DOWN://在系统设置界面下，UP键按下，选择对应的设置项
            {
                if(gbEditFlag != STATUS_TRUE)
                {
                    gbEditFlag = STATUS_TRUE;
                    sprintf(tab_BMS_LowVolt_ShutPoint_modify,"%s",tab_BMS_LowVolt_ShutPoint);
                    sprintf(tab_BMS_FloatVolt_Point_modify,"%s",tab_BMS_FloatVolt_Point);
                    sprintf(tab_BMS_ConstVolt_Point_modify,"%s",tab_BMS_ConstVolt_Point);
                }                
                sU8NumberCounter++; 
                //低压关机点第一个数字              
                if(sU8SetBmsCounter == 0)
                {
                    tab_BMS_LowVolt_ShutPoint_modify[0] = '4';
                } 
                else if(sU8SetBmsCounter == 1)//低压关机点第二个数字
                {
                    if((tab_BMS_LowVolt_ShutPoint_modify[3] - '0') != 0)
                    {
                        if(sU8NumberCounter <= 7)
                        {
                           tab_BMS_LowVolt_ShutPoint_modify[1] = '0' + sU8NumberCounter;
                        }
                        else
                        {
                            sU8NumberCounter = 0;
                            tab_BMS_LowVolt_ShutPoint_modify[1] = '0';
                        }
                    }
                    else
                    {
                        if(sU8NumberCounter <= 8)
                        {
                            tab_BMS_LowVolt_ShutPoint_modify[1] = '0' + sU8NumberCounter;
                        }
                        else
                        {
                            sU8NumberCounter = 0;
                            tab_BMS_LowVolt_ShutPoint_modify[1] = '0';
                        }
                    }
                }
                else if(sU8SetBmsCounter == 2)//低压关机点第三个符号
                {
                    tab_BMS_LowVolt_ShutPoint_modify[2] = '.';
                }
                else if(sU8SetBmsCounter == 3)//低压关机点第四个数字
                {
                    if(tab_BMS_LowVolt_ShutPoint_modify[1] == '8')
                    {
                        tab_BMS_LowVolt_ShutPoint_modify[3] = '0';
                    }
                    else
                    {
                        if(sU8NumberCounter <= 9)
                        {
                            tab_BMS_LowVolt_ShutPoint_modify[3] = '0' + sU8NumberCounter;
                        }
                        else
                        {
                            sU8NumberCounter = 0;
                            tab_BMS_LowVolt_ShutPoint_modify[3] = '0';
                        }
                    }
                }
                //浮动电压点第一个数字
                if(sU8SetBmsCounter == 4)
                {
                    /*判断若第二,四位数字为非零，则第一位只能是5和4*/
                    if(((tab_BMS_FloatVolt_Point_modify[1] - '0') != 0)||((tab_BMS_FloatVolt_Point_modify[3] - '0') != 0))
                    {
                        if((sU8NumberCounter >= 4)&&(sU8NumberCounter <= 5))
                        {
                            tab_BMS_FloatVolt_Point_modify[0] = '0' + sU8NumberCounter;
                        }
                        else
                        {
                            sU8NumberCounter = 4;
                            tab_BMS_FloatVolt_Point_modify[0] = '4';
                        }
                    }
                    else
                    {
                        if((sU8NumberCounter >= 4)&&(sU8NumberCounter <= 6))
                        {
                            tab_BMS_FloatVolt_Point_modify[0] = '0' + sU8NumberCounter;
                        }
                        else
                        {
                            sU8NumberCounter = 4;
                            tab_BMS_FloatVolt_Point_modify[0] = '4';
                        }
                    }
                } 
                else if(sU8SetBmsCounter == 5)//浮动电压点第二个数字
                {
                    if(tab_BMS_FloatVolt_Point_modify[0] == '4')
                    {
                        if((sU8NumberCounter >= 8)&&(sU8NumberCounter <= 9))
                        {
                            tab_BMS_FloatVolt_Point_modify[1] = '0' + sU8NumberCounter;
                        }
                        else
                        {
                            sU8NumberCounter = 8;
                            tab_BMS_FloatVolt_Point_modify[1] = '8';
                        }
                    }
                    else if(tab_BMS_FloatVolt_Point_modify[0] == '5')
                    {
                        if(sU8NumberCounter <= 9)
                        {
                            tab_BMS_FloatVolt_Point_modify[1] = '0' + sU8NumberCounter;
                        }
                        else
                        {
                            sU8NumberCounter = 0;
                            tab_BMS_FloatVolt_Point_modify[1] = '0';
                        }
                    }
                    else if(tab_BMS_FloatVolt_Point_modify[0] == '6')
                    {
                        tab_BMS_FloatVolt_Point_modify[1] = '0';
                        tab_BMS_FloatVolt_Point_modify[3] = '0';
                    }
                }
                else if(sU8SetBmsCounter == 6)//浮动电压点第三个符号
                {
                    tab_BMS_FloatVolt_Point_modify[2] = '.';
                }
                else if(sU8SetBmsCounter == 7)//浮动电压点第四个数字
                {
                    if(tab_BMS_FloatVolt_Point_modify[0] == '6')
                    {
                        tab_BMS_FloatVolt_Point_modify[1] = '0';
                        tab_BMS_FloatVolt_Point_modify[3] = '0';
                    }
                    else
                    {
                        if(sU8NumberCounter <= 9)
                        {
                            tab_BMS_FloatVolt_Point_modify[3] = '0' + sU8NumberCounter;
                        }
                        else
                        {
                            sU8NumberCounter = 0;
                            tab_BMS_FloatVolt_Point_modify[3] = '0';
                        }
                    }
                }
                
                //恒压电压点第一个数字
                if(sU8SetBmsCounter == 8)
                {
                    /*判断若第二,四位数字为非零，则第一位只能是5和4*/
                    if(((tab_BMS_ConstVolt_Point_modify[1] - '0') != 0)||((tab_BMS_ConstVolt_Point_modify[3] - '0') != 0))
                    {
                        if((sU8NumberCounter >= 4)&&(sU8NumberCounter <= 5))
                        {
                            tab_BMS_ConstVolt_Point_modify[0] = '0' + sU8NumberCounter;
                        }
                        else
                        {
                            sU8NumberCounter = 4;
                            tab_BMS_ConstVolt_Point_modify[0] = '4';
                        }
                    }
                    else
                    {
                        if((sU8NumberCounter >= 4)&&(sU8NumberCounter <= 6))
                        {
                            tab_BMS_ConstVolt_Point_modify[0] = '0' + sU8NumberCounter;
                        }
                        else
                        {
                            sU8NumberCounter = 4;
                            tab_BMS_ConstVolt_Point_modify[0] = '4';
                        }
                    }
                } 
                else if(sU8SetBmsCounter == 9)//恒压电压点第二个数字
                {
                    if(tab_BMS_ConstVolt_Point_modify[0] == '4')
                    {
                        if((sU8NumberCounter >= 8)&&(sU8NumberCounter <= 9))
                        {
                            tab_BMS_ConstVolt_Point_modify[1] = '0' + sU8NumberCounter;
                        }
                        else
                        {
                            sU8NumberCounter = 8;
                            tab_BMS_ConstVolt_Point_modify[1] = '8';
                        }
                    }
                    else if(tab_BMS_ConstVolt_Point_modify[0] == '5')
                    {
                        if(sU8NumberCounter <= 9)
                        {
                            tab_BMS_ConstVolt_Point_modify[1] = '0' + sU8NumberCounter;
                        }
                        else
                        {
                            sU8NumberCounter = 0;
                            tab_BMS_ConstVolt_Point_modify[1] = '0';
                        }
                    }
                    else if(tab_BMS_ConstVolt_Point_modify[0] == '6')
                    {
                        tab_BMS_ConstVolt_Point_modify[1] = '0';
                        tab_BMS_ConstVolt_Point_modify[3] = '0';
                    }
                }
                else if(sU8SetBmsCounter == 10)//恒压电压点第三个符号
                {
                    tab_BMS_ConstVolt_Point_modify[2] = '.';
                }
                else if(sU8SetBmsCounter == 11)//恒压电压点第四个数字
                {
                    if(tab_BMS_ConstVolt_Point_modify[0] == '6')
                    {
                        tab_BMS_ConstVolt_Point_modify[1] = '0';
                        tab_BMS_ConstVolt_Point_modify[3] = '0';
                    }
                    else
                    {
                        if(sU8NumberCounter <= 9)
                        {
                            tab_BMS_ConstVolt_Point_modify[3] = '0' + sU8NumberCounter;
                        }
                        else
                        {
                            sU8NumberCounter = 0;
                            tab_BMS_ConstVolt_Point_modify[3] = '0';
                        }
                    }
                }
                gCurrentMenu.eCurrentDisplayMenuType = nowDisplayType;                
            }
            break;
        case KEYACTION_UP://在系统设置界面下，DOWN键按下，选择对应的设置项
            {
                if(gbEditFlag != STATUS_TRUE)//进入编辑模式 
                {
                    gbEditFlag = STATUS_TRUE;   
                    sprintf(tab_BMS_LowVolt_ShutPoint_modify,"%s",tab_BMS_LowVolt_ShutPoint);
                    sprintf(tab_BMS_FloatVolt_Point_modify,"%s",tab_BMS_FloatVolt_Point);
                    sprintf(tab_BMS_ConstVolt_Point_modify,"%s",tab_BMS_ConstVolt_Point);
                }
                
                sU8NumberCounter--;
                
                if(sU8SetBmsCounter == 0)//低压关机点第一个数字
                {
                    tab_BMS_LowVolt_ShutPoint_modify[0] = '4';
                }
                else if(sU8SetBmsCounter == 1)//低压关机点第二个数字
                {
                    if((tab_BMS_LowVolt_ShutPoint_modify[3] - '0') != 0)
                    {
                        if(!(sU8NumberCounter <= 7))
                        {
                            sU8NumberCounter = 7;
                            tab_BMS_LowVolt_ShutPoint_modify[1] = '0';
                        }                      
                    }
                    else
                    {
                        if(!(sU8NumberCounter <= 8))
                        {
                            sU8NumberCounter = 8;
                            tab_BMS_LowVolt_ShutPoint_modify[1] = '0';
                        }
                    }
                    tab_BMS_LowVolt_ShutPoint_modify[1] =  '0' + sU8NumberCounter;   
                }
                else if(sU8SetBmsCounter == 2)//低压关机点第三个符号
                {
                    tab_BMS_LowVolt_ShutPoint_modify[2] = '.';
                }
                else if(sU8SetBmsCounter == 3)//低压关机点第四个数字
                {
                    if(tab_BMS_LowVolt_ShutPoint_modify[1] == '8')
                    {
                        tab_BMS_LowVolt_ShutPoint_modify[3] = '0';
                    }
                    else
                    {
                        if(!(sU8NumberCounter <= 9))
                        {
                            sU8NumberCounter = 9;
                            tab_BMS_LowVolt_ShutPoint_modify[3] = '0';
                        }
                        tab_BMS_LowVolt_ShutPoint_modify[3] =  '0' + sU8NumberCounter;
                    }
                }
                //浮动电压点第一个数字
                if(sU8SetBmsCounter == 4)
                {   
                    /*判断若第二,四位数字为非零，则第一位只能是5和4*/
                    if(((tab_BMS_FloatVolt_Point_modify[1] - '0') != 0)||((tab_BMS_FloatVolt_Point_modify[3] - '0') != 0))
                    {
                        if(!(sU8NumberCounter <= 5))
                        {
                            sU8NumberCounter = 5;
                            tab_BMS_FloatVolt_Point_modify[0] = '0';
                        }
                        if(sU8NumberCounter < 4)
                        {
                            sU8NumberCounter = 5;
                        }          
                    }
                    else
                    {
                        if(!(sU8NumberCounter <= 6))
                        {
                            sU8NumberCounter = 6;
                            tab_BMS_FloatVolt_Point_modify[0] = '0';
                        }
                        if(sU8NumberCounter < 4)
                        {
                            sU8NumberCounter = 6;
                        }
                    }
                    tab_BMS_FloatVolt_Point_modify[0] =  '0' + sU8NumberCounter;
                }
                else if(sU8SetBmsCounter == 5)//浮动电压点第二个数字
                {
                    /*判断若第一位数字为4，则第二位只能是8和9*/
                    if(tab_BMS_FloatVolt_Point_modify[0] == '4')
                    {
                        if(!(sU8NumberCounter <= 9))
                        {
                            sU8NumberCounter = 9;
                            tab_BMS_FloatVolt_Point_modify[1] = '0';
                        }
                        if(sU8NumberCounter < 8)
                        {
                            sU8NumberCounter = 9;
                        }
                        tab_BMS_FloatVolt_Point_modify[1] =  '0' + sU8NumberCounter;
                    }
                    else if(tab_BMS_FloatVolt_Point_modify[0] == '5')
                    {
                        if(!(sU8NumberCounter <= 9))
                        {
                            sU8NumberCounter = 9;
                            tab_BMS_FloatVolt_Point_modify[1] = '0';
                        }
                        tab_BMS_FloatVolt_Point_modify[1] =  '0' + sU8NumberCounter;
                    }
                    /*判断若第一位数字为6，则第二位只能是8和9*/
                    else if(tab_BMS_FloatVolt_Point_modify[0] == '6')
                    {
                        tab_BMS_FloatVolt_Point_modify[1] = '0';
                        tab_BMS_FloatVolt_Point_modify[3] = '0';
                    } 
                }
                else if(sU8SetBmsCounter == 6)//浮动电压点第三个符号
                {
                    tab_BMS_FloatVolt_Point_modify[2] = '.';
                }
                else if(sU8SetBmsCounter == 7)//浮动电压点第四个数字
                {
                    if(tab_BMS_FloatVolt_Point_modify[0] == '6')
                    {
                        tab_BMS_FloatVolt_Point_modify[1] = '0';
                        tab_BMS_FloatVolt_Point_modify[3] = '0';
                    }
                    else
                    {
                        if(!(sU8NumberCounter <= 9))
                        {
                            sU8NumberCounter = 9;
                            tab_BMS_FloatVolt_Point_modify[3] = '0';
                        }
                        tab_BMS_FloatVolt_Point_modify[3] =  '0' + sU8NumberCounter;
                    }
                }
                //恒压电压点第一个数字
                if(sU8SetBmsCounter == 8)
                {   
                    /*判断若第二,四位数字为非零，则第一位只能是5和4*/
                    if(((tab_BMS_ConstVolt_Point_modify[1] - '0') != 0)||((tab_BMS_ConstVolt_Point_modify[3] - '0') != 0))
                    {
                        if(!(sU8NumberCounter <= 5))
                        {
                            sU8NumberCounter = 5;
                            tab_BMS_ConstVolt_Point_modify[0] = '0';
                        }
                        if(sU8NumberCounter < 4)
                        {
                            sU8NumberCounter = 5;
                        }          
                    }
                    else
                    {
                        if(!(sU8NumberCounter <= 6))
                        {
                            sU8NumberCounter = 6;
                            tab_BMS_ConstVolt_Point_modify[0] = '0';
                        }
                        if(sU8NumberCounter < 4)
                        {
                            sU8NumberCounter = 6;
                        }
                    }
                    tab_BMS_ConstVolt_Point_modify[0] =  '0' + sU8NumberCounter;
                }
                else if(sU8SetBmsCounter == 9)//恒压电压点第二个数字
                {
                    /*判断若第一位数字为4，则第二位只能是8和9*/
                    if(tab_BMS_ConstVolt_Point_modify[0] == '4')
                    {
                        if(!(sU8NumberCounter <= 9))
                        {
                            sU8NumberCounter = 9;
                            tab_BMS_ConstVolt_Point_modify[1] = '0';
                        }
                        if(sU8NumberCounter < 8)
                        {
                            sU8NumberCounter = 9;
                        }
                        tab_BMS_ConstVolt_Point_modify[1] =  '0' + sU8NumberCounter;
                    }
                    else if(tab_BMS_ConstVolt_Point_modify[0] == '5')
                    {
                        if(!(sU8NumberCounter <= 9))
                        {
                            sU8NumberCounter = 9;
                            tab_BMS_ConstVolt_Point_modify[1] = '0';
                        }
                        tab_BMS_ConstVolt_Point_modify[1] =  '0' + sU8NumberCounter;
                    }
                    /*判断若第一位数字为6，则第二位只能是8和9*/
                    else if(tab_BMS_ConstVolt_Point_modify[0] == '6')
                    {
                        tab_BMS_ConstVolt_Point_modify[1] = '0';
                        tab_BMS_ConstVolt_Point_modify[3] = '0';
                    }
                    else
                    {
                        if(!(sU8NumberCounter <= 9))
                        {
                            sU8NumberCounter = 9;
                            tab_BMS_ConstVolt_Point_modify[1] = '0';
                        }
                        tab_BMS_ConstVolt_Point_modify[1] =  '0' + sU8NumberCounter; 
                    }  
                }
                else if(sU8SetBmsCounter == 10)//恒压电压点第三个符号
                {
                    tab_BMS_ConstVolt_Point_modify[2] = '.';
                }
                else if(sU8SetBmsCounter == 11)//恒压电压点第四个数字
                {
                    if(tab_BMS_ConstVolt_Point_modify[0] == '6')
                    {
                        tab_BMS_ConstVolt_Point_modify[1] = '0';
                        tab_BMS_ConstVolt_Point_modify[3] = '0';
                    }
                    else
                    {
                        if(!(sU8NumberCounter <= 9))
                        {
                            sU8NumberCounter = 9;
                            tab_BMS_ConstVolt_Point_modify[3] = '0';
                        }
                        tab_BMS_ConstVolt_Point_modify[3] =  '0' + sU8NumberCounter;
                    }
                }
                gCurrentMenu.eCurrentDisplayMenuType = nowDisplayType;
            }
            break;
        case KEYACTION_UPDOWN://在系统设置界面下，UP键 + DOWN键同时按下，切换设置下一个数据
            {
                sU8NumberCounter = 0;
                sU8SetBmsCounter++;
                if(sU8SetBmsCounter == DISPLAY_SET_BMS_TYPE_COUNT_LEAD_VOLTPOINT_COUNT)
                {
                    sU8SetBmsCounter = 0;
                }
                gCurrentMenu.eCurrentDisplayMenuType = nowDisplayType;
            }
            break;
        case KEYACTION_NULL://无操作刷新主界面数据
        default:
            {
                if(gbEditFlag == STATUS_FALSE)
                {
                    Display_SET_BMS_LeadAcid_Paras *pStBmsPara = getLeadAcidParasData();
                    
                    int16 s16LowVoltPoint = pStBmsPara->u16LowVoltShutPoint;
                    float f16LowVoltPoint = s16LowVoltPoint / 10.0;
                    sprintf(tab_BMS_LowVolt_ShutPoint,"%04.1f",f16LowVoltPoint);

                    int16 s16FloatVolt = pStBmsPara->u16FloatVoltPoint;
                    float f16FloatVolt = s16FloatVolt / 10.0;
                    sprintf(tab_BMS_FloatVolt_Point,"%04.1f",f16FloatVolt);

                    int16 s16ConstVolt = pStBmsPara->u16ConstVoltCharPoint;
                    float f16ConstVolt = s16ConstVolt / 10.0;
                    sprintf(tab_BMS_ConstVolt_Point,"%04.1f",f16ConstVolt);                
                }
                gCurrentMenu.eCurrentDisplayMenuType = nowDisplayType;
            }
            break;
    }
    
    if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_ENGLISH)  //铅酸电池类型电压点设置界面 中文界面组装
    { 
        if(gbEditFlag == STATUS_TRUE)
        {
            Display_Set_UnderLine_Blink_Position(STATUS_TRUE,arrayVoltPointFlicker[sU8SetBmsCounter].u8StartPos,arrayVoltPointFlicker[sU8SetBmsCounter].u8EndPos);
            updateDisplayLeadAcidBatteryParaSetVoltPointData_English(tab_BMS_LowVolt_ShutPoint_modify,tab_BMS_FloatVolt_Point_modify,tab_BMS_ConstVolt_Point_modify); 
        }
        else 
        {
            updateDisplayLeadAcidBatteryParaSetVoltPointData_English(tab_BMS_LowVolt_ShutPoint,tab_BMS_FloatVolt_Point,tab_BMS_ConstVolt_Point);
        }
    }
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_CHINESE)//铅酸电池类型电压点设置界面 中文界面组装
    {
        updateDisplayLeadAcidBatteryParaSetVoltPointData_Chinese(tab_BMS_LowVolt_ShutPoint_modify,tab_BMS_FloatVolt_Point_modify,tab_BMS_ConstVolt_Point_modify);
    }
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_SPANISH)//铅酸电池类型电压点设置界面 西班牙界面组装 
    {
        updateDisplayLeadAcidBatteryParaSetVoltPointData_Spanish(tab_BMS_LowVolt_ShutPoint_modify,tab_BMS_FloatVolt_Point_modify,tab_BMS_ConstVolt_Point_modify);  
    }   
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_GERMAN)//铅酸电池类型电压点设置界面 德语界面组装
    {
        updateDisplayLeadAcidBatteryParaSetVoltPointData_German(tab_BMS_LowVolt_ShutPoint_modify,tab_BMS_FloatVolt_Point_modify,tab_BMS_ConstVolt_Point_modify);  
    }   
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_FRENCH)//铅酸电池类型电压点设置界面 法语界面组装 
    {
        updateDisplayLeadAcidBatteryParaSetVoltPointData_French(tab_BMS_LowVolt_ShutPoint_modify,tab_BMS_FloatVolt_Point_modify,tab_BMS_ConstVolt_Point_modify);    
    } 
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_POLISH)//铅酸电池类型电压点设置界面 波兰界面组装
    {
        updateDisplayLeadAcidBatteryParaSetVoltPointData_Polish(tab_BMS_LowVolt_ShutPoint_modify,tab_BMS_FloatVolt_Point_modify,tab_BMS_ConstVolt_Point_modify); 
    }  
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_ITALIAN)//铅酸电池类型电压点设置界面 意大利界面组装
    {
        updateDisplayLeadAcidBatteryParaSetVoltPointData_Italian(tab_BMS_LowVolt_ShutPoint_modify,tab_BMS_FloatVolt_Point_modify,tab_BMS_ConstVolt_Point_modify);  
    } 
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_CZECH)//铅酸电池类型电压点设置界面 捷克界面组装 
    {
        updateDisplayLeadAcidBatteryParaSetVoltPointData_Czech(tab_BMS_LowVolt_ShutPoint_modify,tab_BMS_FloatVolt_Point_modify,tab_BMS_ConstVolt_Point_modify);   
    }        
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_DUTCH)//铅酸电池类型电压点设置界面 荷兰界面组装 
    {
        updateDisplayLeadAcidBatteryParaSetVoltPointData_Dutch(tab_BMS_LowVolt_ShutPoint_modify,tab_BMS_FloatVolt_Point_modify,tab_BMS_ConstVolt_Point_modify);   
    }
    else
    {  
        updateDisplayLeadAcidBatteryParaSetVoltPointData_English(tab_BMS_LowVolt_ShutPoint_modify,tab_BMS_FloatVolt_Point_modify,tab_BMS_ConstVolt_Point_modify);        
    } 
}


/***************************************************************************
 功能:铅酸电池类型电压点设置界面 英文界面信息
****************************************************************************/
void updateDisplayLeadAcidBatteryParaSetVoltPointData_English(char* strBmsShutPoint, char* strFloatVoltPoint, char* strConstVoltPoint)
{
    memset(tab_display,0,DISPLAY_CACHE_SIZE);
    sprintf(tab_display,"    BMS VoltPoint    \nBmShutPoint:%s     \nFloatVolt:%s       \nConstVolt:%s       \n",strBmsShutPoint, strFloatVoltPoint, strConstVoltPoint);
    //GUI_DispStringAt((uint8_t*)tab_display, 0, 0);
    GUI_Display(tab_display, 0, 0);
}

/***************************************************************************
 功能:铅酸电池类型电压点设置界面 中文界面信息
****************************************************************************/
void updateDisplayLeadAcidBatteryParaSetVoltPointData_Chinese(char* strBmsShutPoint, char* strFloatVoltPoint, char* strConstVoltPoint)
{
    
}
/***************************************************************************
 功能:铅酸电池类型电压点设置界面 西班牙界面信息
****************************************************************************/
void updateDisplayLeadAcidBatteryParaSetVoltPointData_Spanish(char* strBmsShutPoint, char* strFloatVoltPoint, char* strConstVoltPoint)
{
    
}

/***************************************************************************
 功能:铅酸电池类型电压点设置界面 德语界面信息
****************************************************************************/
void updateDisplayLeadAcidBatteryParaSetVoltPointData_German(char* strBmsShutPoint, char* strFloatVoltPoint, char* strConstVoltPoint)
{
    
}

/***************************************************************************
 功能:铅酸电池类型电压点设置界面 法语界面信息
****************************************************************************/
void updateDisplayLeadAcidBatteryParaSetVoltPointData_French(char* strBmsShutPoint, char* strFloatVoltPoint, char* strConstVoltPoint)
{
    
}

/***************************************************************************
 功能:铅酸电池类型电压点设置界面 波兰语界面信息
****************************************************************************/
void updateDisplayLeadAcidBatteryParaSetVoltPointData_Polish(char* strBmsShutPoint, char* strFloatVoltPoint, char* strConstVoltPoint)
{
    
}

/***************************************************************************
 功能:铅酸电池类型电压点设置界面 意大利语界面信息
****************************************************************************/
void updateDisplayLeadAcidBatteryParaSetVoltPointData_Italian(char* strBmsShutPoint, char* strFloatVoltPoint, char* strConstVoltPoint)
{
    
}

/***************************************************************************
 功能:铅酸电池类型电压点设置界面 捷克语界面信息
****************************************************************************/
void updateDisplayLeadAcidBatteryParaSetVoltPointData_Czech(char* strBmsShutPoint, char* strFloatVoltPoint, char* strConstVoltPoint)
{
    
}

/***************************************************************************
 功能:铅酸电池类型电压点设置界面 荷兰语界面信息
****************************************************************************/
void updateDisplayLeadAcidBatteryParaSetVoltPointData_Dutch(char* strBmsShutPoint, char* strFloatVoltPoint, char* strConstVoltPoint)
{
    
}

/***************************************************************************
 功能:从Flash获取铅酸电池参数
****************************************************************************/
Display_SET_BMS_LeadAcid_Paras * getLeadAcidParasData(void)
{
   Flash_Device_BMSInfo_Read(&gDisplay.stDisplaySet.stBMS,sizeof(Display_SET_BMS));
   return &gDisplay.stDisplaySet.stBMS.stHMISetBMSLeadAcidParas; 
}

/***************************************************************************
 功能:保存电压点到Flash
****************************************************************************/
void setVoltPointData(int16 s16LowVoltPoint,int16 s16FloatVolt,int16 s16ConstVolt)
{
   Flash_Device_BMSInfo_Read(&gDisplay.stDisplaySet.stBMS,sizeof(Display_SET_BMS));
   gDisplay.stDisplaySet.stBMS.stHMISetBMSLeadAcidParas.u16LowVoltShutPoint = s16LowVoltPoint;
   gDisplay.stDisplaySet.stBMS.stHMISetBMSLeadAcidParas.u16FloatVoltPoint = s16FloatVolt;
   gDisplay.stDisplaySet.stBMS.stHMISetBMSLeadAcidParas.u16ConstVoltCharPoint = s16ConstVolt; 
   Flash_Device_BMSInfo_Write(&gDisplay.stDisplaySet.stBMS,sizeof(Display_SET_BMS));
}


/***************************************************************************
 功能:根据上一次界面操作类型和本次操作类型判断本次电池类型SET界面切换
****************************************************************************/
void updateDisplayBatteryTypeSetData(KeyAction_TypeDef nowActionType,DisplayAction_TypeDef nowDisplayType)
{
    static uint8_t sU8BatteryTypeCounter = 0;
    
    switch(nowActionType)
    {
        case KEYACTION_DOWN://在电池厂商界面下，UP键按下，页面数字加一
            {
                sU8BatteryTypeCounter++;
                if(sU8BatteryTypeCounter == DISPLAY_SET_BMS_TYPE_COUNT)
                {
                    sU8BatteryTypeCounter = 0;  
                }
                gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_SET_BATTERY_TYPE;
                
            }
            break; 
        case KEYACTION_UP://在电池厂商界面下，UP键按下，页面数字加一
            {
                sU8BatteryTypeCounter--;
                if(sU8BatteryTypeCounter >= DISPLAY_SET_BMS_TYPE_COUNT)
                {
                    sU8BatteryTypeCounter = DISPLAY_SET_BMS_TYPE_COUNT - 1;  
                }
                gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_SET_BATTERY_TYPE;
                
            }
            break; 
        case KEYACTION_ESC://在电池厂商界面下，Esc键按下，回退到电池设置界面
            {
                sU8BatteryTypeCounter = 0;
                gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_SET_BATTERY;
            }
            break;
        case KEYACTION_ENTER://在电池厂商界面下，Enter键按下，进入选择对应的设置项
            {          
                if(sU8BatteryTypeCounter == BMS_TYPE_LI_ION)
                {
                    gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_SET_BATTERY_TYPE_LI_ION;
					gDisplay.stDisplaySet.stBMS.u8Type = BMS_TYPE_LI_ION + 1; 
                }
                else if (sU8BatteryTypeCounter == BMS_TYPE_LEAD_ACID)
                {
                    gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_SET_BATTERY_TYPE_LEAD_ACID;
					gDisplay.stDisplaySet.stBMS.u8Type = BMS_TYPE_LEAD_ACID + 1;
                }
                setBmsBatteryTypeData(sU8BatteryTypeCounter);
                generateOperationRecord(RECORD_SET_BATTERY_TYPE); 
          
            }
            break;
        case KEYACTION_NULL://无操作
        default:
            {
                uint8_t sU8BatteryTypeCounter = getBmsBatteryTypeData();
                gCurrentMenu.eCurrentDisplayMenuType = nowDisplayType;
            }
            break;            
    }
    
    if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_ENGLISH)//在绝缘检测使能设置界面下 英文界面组装 
    { 
        updateDisplayBatteryTypeSetData_English(sU8BatteryTypeCounter);                    
    }         
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_CHINESE)//在绝缘检测使能设置界面下 中文界面组装
    {
        updateDisplayBatteryTypeSetData_Chinese(sU8BatteryTypeCounter);
    }
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_SPANISH)//在绝缘检测使能设置界面下 西班牙界面组装 
    {
        updateDisplayBatteryTypeSetData_Spanish(sU8BatteryTypeCounter);  
    }   
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_GERMAN)//在绝缘检测使能设置界面下 德语界面组装
    {
        updateDisplayBatteryTypeSetData_German(sU8BatteryTypeCounter);  
    }   
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_FRENCH)//在绝缘检测使能设置界面下 法语界面组装 
    {
        updateDisplayBatteryTypeSetData_French(sU8BatteryTypeCounter);    
    } 
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_POLISH)//在绝缘检测使能设置界面下 波兰界面组装
    {
        updateDisplayBatteryTypeSetData_Polish(sU8BatteryTypeCounter); 
    }  
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_ITALIAN)//在绝缘检测使能设置界面下 意大利界面组装
    {
        updateDisplayBatteryTypeSetData_Italian(sU8BatteryTypeCounter);  
    } 
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_CZECH)//在绝缘检测使能设置界面下 捷克界面组装 
    {
        updateDisplayBatteryTypeSetData_Czech(sU8BatteryTypeCounter);   
    }        
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_DUTCH)//在绝缘检测使能设置界面下 荷兰界面组装 
    {
        updateDisplayBatteryTypeSetData_Dutch(sU8BatteryTypeCounter);   
    }
    else
    {  
        updateDisplayBatteryTypeSetData_English(sU8BatteryTypeCounter);        
    }  
}

/***************************************************************************
功能:电池设置数据显示 英文界面信息
****************************************************************************/
void updateDisplayBatteryTypeSetData_English(uint8_t sU8BatteryTypeCounter)    
{
    memset(tab_display,0,DISPLAY_CACHE_SIZE);
       
    if(sU8BatteryTypeCounter ==  BMS_TYPE_LI_ION)
    {
        sprintf(tab_display,"      BMS Type       \n->LI.ION             \nLEAD.ACID            \n                     \n"); 
    }
    else if(sU8BatteryTypeCounter == BMS_TYPE_LEAD_ACID)
    {
        sprintf(tab_display,"      BMS Type       \nLI.ION               \n->LEAD.ACID          \n                     \n");   
    }

                  
    //GUI_DispStringAt((uint8_t*)tab_display, 0, 0); 
    GUI_Display(tab_display, 0, 0);
}


/***************************************************************************
 功能:电池设置数据显示 西班牙界面信息
****************************************************************************/
void updateDisplayBatteryTypeSetData_Spanish(uint8_t sU8BatteryTypeCounter)
{
    
}

/***************************************************************************
 功能:电池设置数据显示 德语界面信息
****************************************************************************/
void updateDisplayBatteryTypeSetData_German(uint8_t sU8BatteryTypeCounter)
{
    
}

/***************************************************************************
 功能:电池设置数据显示 法语界面信息
****************************************************************************/
void updateDisplayBatteryTypeSetData_French(uint8_t sU8BatteryTypeCounter)
{
    
}

/***************************************************************************
 功能:电池设置数据显示 波兰语界面信息
****************************************************************************/
void updateDisplayBatteryTypeSetData_Polish(uint8_t sU8BatteryTypeCounter)
{
    
}

/***************************************************************************
 功能:电池设置数据显示 意大利语界面信息
****************************************************************************/
void updateDisplayBatteryTypeSetData_Italian(uint8_t sU8BatteryTypeCounter)
{
    
}

/***************************************************************************
 功能:电池设置数据显示 捷克语界面信息
****************************************************************************/
void updateDisplayBatteryTypeSetData_Czech(uint8_t sU8BatteryTypeCounter)
{
    
}

/***************************************************************************
 功能:电池设置数据显示 荷兰语界面信息
****************************************************************************/
void updateDisplayBatteryTypeSetData_Dutch(uint8_t sU8BatteryTypeCounter)
{
    
}


/***************************************************************************
 功能:从Flash获取电池类型
****************************************************************************/
uint8_t getBmsBatteryTypeData(void)
{
   Flash_Device_BMSInfo_Read(&gDisplay.stDisplaySet.stBMS,sizeof(Display_SET_BMS));
   return gDisplay.stDisplaySet.stBMS.u8Type; 
}

/***************************************************************************
 功能:保存电池类型到Flash
****************************************************************************/
void setBmsBatteryTypeData(uint8_t s8BmsType)
{
   Flash_Device_BMSInfo_Read(&gDisplay.stDisplaySet.stBMS,sizeof(Display_SET_BMS));
   gDisplay.stDisplaySet.stBMS.u8Type = s8BmsType;
   Flash_Device_BMSInfo_Write(&gDisplay.stDisplaySet.stBMS,sizeof(Display_SET_BMS));
}


/***************************************************************************
 * 功能:根据上一次界面操作类型和本次操作类型判断本次电网 SET界面切换
 * 防逆流控制
 * 并网标准
 * 无功控制方式
 * 功率设置
 * 功率因数
 * 电表设置
 * 采样选择
 * 电价设置
****************************************************************************/
void updateDisplayGridSetData(KeyAction_TypeDef nowActionType,DisplayAction_TypeDef nowDisplayType)
{
     //本次界面操作类型
    static uint8_t sU8GridSetCounter = 0;
    //uint8_t u8SetIndex = 0;
    switch(nowActionType) 
    {
        case KEYACTION_ENTER://在电网设置界面下，Enter键按下，进入选择对应的设置项
        {
            // 防逆流控制
            if(sU8GridSetCounter == SET_GRID_Antireflux_Index)
            {
                gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_SET_GRID_ANTIREFLUX;
            }
            // 并网标准
            else if(sU8GridSetCounter == SET_GRID_Gridconnection_Index)
            {
                gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_SET_GRID_SR;
            }
            //无功控制方式
            else if(sU8GridSetCounter == SET_GRID_ReactPowerWay_Index)
            {
                gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_SET_GRID_REACTIVEPOWERCONTROLWAY;
            }
            // 功率设置
            else if(sU8GridSetCounter == SEY_GRID_PowerSettings)
            {
                gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_SET_GRID_POWERSETTING;
            }
            // 功率因数
            else if(sU8GridSetCounter == SET_GRID_PF_Index)
            {
                gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_SET_GRID_POWERFACTOR;
            }
            // 电表设置
            else if(sU8GridSetCounter == SET_GRID_Meter_Index)
            {
                gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_SET_GRID_METER;
            }
            // 采样选择
            else if(sU8GridSetCounter == SET_GRID_Meter_Index)
            {
                //gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_SET_GRID_SR;
            }
            // 电价设置
            else if(sU8GridSetCounter == SET_GRID_Meter_Index)
            {
                gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_SET_GRID_TIMEDIVEPRICE;
            }
        }
        break;
        case KEYACTION_DOWN://在电网设置界面下，UP键按下，向下选择对应的设置项
            {
                sU8GridSetCounter++;
                if(sU8GridSetCounter == DISPLAY_SET_GRID_ITEM_COUNT)
                {
                    sU8GridSetCounter = 0;  
                }
                gCurrentMenu.eCurrentDisplayMenuType = nowDisplayType;    
            }
            break;
        case KEYACTION_UP://在系统设置界面下，DOWN键按下，向上选择对应的设置项
            {
                sU8GridSetCounter--;
                if(sU8GridSetCounter >= DISPLAY_SET_GRID_ITEM_COUNT)
                {
                    sU8GridSetCounter = DISPLAY_SET_GRID_ITEM_COUNT - 1;  
                }
                gCurrentMenu.eCurrentDisplayMenuType = nowDisplayType;          
            }
            break;
        case KEYACTION_ESC://在系统设置界面下，ESC键按下，返回设置界面
            {
                //sU8SetCounter = 0;
                gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_SET;                
            }
            break;
        case KEYACTION_NULL://无操作刷新主界面数据
        default:
            { 
                gCurrentMenu.eCurrentDisplayMenuType = nowDisplayType;                
            }
            break;
    } 
    
    if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_ENGLISH) //实时统计数据显示界面 英文界面组装
    { 
        updateDisplayGridSetData_English(sU8GridSetCounter);                    
    }
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_CHINESE)//实时统计数据显示界面 中文界面组装
    {
        updateDisplayGridSetData_Chinese(sU8GridSetCounter);
    }    
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_SPANISH)//实时统计数据显示界面 西班牙界面组装
    { 
        updateDisplayGridSetData_Spanish(sU8GridSetCounter);
    } 
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_GERMAN)//实时统计数据显示界面 德语界面组装
    { 
        updateDisplayGridSetData_German(sU8GridSetCounter);
    } 
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_FRENCH)//实时统计数据显示界面 法语界面组装
    { 
        updateDisplayGridSetData_French(sU8GridSetCounter);                     
    }   
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_POLISH)//实时统计数据显示界面 波兰界面组装
    {
        updateDisplayGridSetData_Polish(sU8GridSetCounter);
    }    
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_ITALIAN)//实时统计数据显示界面 意大利界面组装
    {
        updateDisplayGridSetData_Italian(sU8GridSetCounter);                   
    } 
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_CZECH)//实时统计数据显示界面 捷克界面组装
    { 
        updateDisplayGridSetData_Czech(sU8GridSetCounter);                  
    }   
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_DUTCH)//实时统计数据显示界面 荷兰界面组装
    { 
        updateDisplayGridSetData_Dutch(sU8GridSetCounter);                 
    }
    else
    {   
        updateDisplayGridSetData_English(sU8GridSetCounter);                
    }
}

/***************************************************************************
功能:电池设置数据显示 英文界面信息
****************************************************************************/
void updateDisplayGridSetData_English(uint8_t sU8BMSSetCounter)    
{
    memset(tab_display,0,DISPLAY_CACHE_SIZE);
    // 防逆流标志
    if(sU8BMSSetCounter == SET_GRID_Antireflux_Index)
    {
        sprintf(tab_display,"      Grid Set       \n->Antireflux         \nGrid-connected       \nReact-Power Way      \n"); 
    }
    // 并网标准
    else if(sU8BMSSetCounter == SET_GRID_Gridconnection_Index)
    {
        sprintf(tab_display,"      Grid Set       \nAntireflux           \n->Grid-connected     \nReact-Power Way      \n"); 
    }
    // 并网标准
    else if(sU8BMSSetCounter == SET_GRID_ReactPowerWay_Index)
    {
        sprintf(tab_display,"      Grid Set       \nAntireflux           \nGrid-connected       \n->React-Power Way    \n"); 
    }
    // 功率设置
    else if(sU8BMSSetCounter == SEY_GRID_PowerSettings)
    {
        sprintf(tab_display,"      Grid Set       \nGrid-connected       \nReact-Power Way      \n->Power Setting      \n");
    }
    // 功率因数
    else if(sU8BMSSetCounter == SET_GRID_PF_Index)
    {
        sprintf(tab_display,"      Grid Set       \nReact-Power Way      \nPower Setting        \n->PF                 \n");
    }
    // 电表设置
    else if(sU8BMSSetCounter == SET_GRID_Meter_Index)
    {
        sprintf(tab_display,"      Grid Set       \nPower Setting        \nPF                   \n->Meter              \n");
    }
    // 采样选择
    else if(sU8BMSSetCounter == SET_GRID_Meter_Index)
    {
        sprintf(tab_display,"      Grid Set       \nPF                   \nMeter                \n->Sampling selection \n");
    }
    // 电价设置
    else if(sU8BMSSetCounter == SET_GRID_Meter_Index)
    {
        sprintf(tab_display,"      Grid Set       \nMeter                \nSampling selection   \n->Price              \n");
    }
    GUI_Display(tab_display, 0, 0);
}


/***************************************************************************
 功能:电池设置数据显示 西班牙界面信息
****************************************************************************/
void updateDisplayGridSetData_Spanish(uint8_t sU8BMSSetCounter)
{
    
}

/***************************************************************************
 功能:电池设置数据显示 德语界面信息
****************************************************************************/
void updateDisplayGridSetData_German(uint8_t sU8BMSSetCounter)
{
    
}

/***************************************************************************
 功能:电池设置数据显示 法语界面信息
****************************************************************************/
void updateDisplayGridSetData_French(uint8_t sU8BMSSetCounter)
{
    
}

/***************************************************************************
 功能:电池设置数据显示 波兰语界面信息
****************************************************************************/
void updateDisplayGridSetData_Polish(uint8_t sU8BMSSetCounter)
{
    
}

/***************************************************************************
 功能:电池设置数据显示 意大利语界面信息
****************************************************************************/
void updateDisplayGridSetData_Italian(uint8_t sU8BMSSetCounter)
{
    
}

/***************************************************************************
 功能:电池设置数据显示 捷克语界面信息
****************************************************************************/
void updateDisplayGridSetData_Czech(uint8_t sU8BMSSetCounter)
{
    
}

/***************************************************************************
 功能:电池设置数据显示 荷兰语界面信息
****************************************************************************/
void updateDisplayGridSetData_Dutch(uint8_t sU8BMSSetCounter)
{
    
}

/***************************************************************************
 功能:根据上一次界面操作类型和本次操作类型判断本次 功率设置界面
****************************************************************************/
void updateDisplayGridPowerSettingsData(KeyAction_TypeDef nowActionType,DisplayAction_TypeDef nowDisplayType)  
{
    static uint8_t sU8GridPowerSettingsCounter = 0;
    switch(nowActionType) 
    {
        case KEYACTION_ENTER: //在功率设置界面下，Enter键按下，进入选择对应的设置项
        {
            // 无功功率
            if(sU8GridPowerSettingsCounter == SET_GRID_Powersetting_ReactivePower)
            {
                gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_SET_GRID_REACTIVEPOWER;
            }
            // 有功功率
            else if(sU8GridPowerSettingsCounter == SET_GRID_Powersetting_ActivePower)
            {
                gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_SET_GRID_SR;
            }
        }
        break;
        case KEYACTION_DOWN://在功率设置界面下，UP键按下，向下选择对应的设置项
            {
                sU8GridPowerSettingsCounter++;
                if(sU8GridPowerSettingsCounter == DISPLAY_SET_GRIDPOWER_ITEM_COUNT)
                {
                    sU8GridPowerSettingsCounter = 0;  
                }
                gCurrentMenu.eCurrentDisplayMenuType = nowDisplayType;    
            }
            break;
        case KEYACTION_UP://在功率设置界面下，DOWN键按下，向上选择对应的设置项
            {
                sU8GridPowerSettingsCounter--;
                if(sU8GridPowerSettingsCounter >= DISPLAY_SET_GRIDPOWER_ITEM_COUNT)
                {
                    sU8GridPowerSettingsCounter = DISPLAY_SET_GRIDPOWER_ITEM_COUNT - 1;  
                }
                gCurrentMenu.eCurrentDisplayMenuType = nowDisplayType;          
            }
            break;
        case KEYACTION_ESC://在功率设置界面下，ESC键按下，返回设置界面
            {
                //sU8SetCounter = 0;
                gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_SET;                
            }
            break;
        case KEYACTION_NULL://无操作刷新主界面数据
        default:
            { 
                gCurrentMenu.eCurrentDisplayMenuType = nowDisplayType;                
            }
            break;
    } 
    
    if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_ENGLISH) //在功率设置界面下 英文界面组装
    { 
        updateDisplayGridPowerSettingsData_English(sU8GridPowerSettingsCounter);                    
    }
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_CHINESE)//在功率设置界面下 中文界面组装
    {
        //updateDisplayGridPowerSettingsData_Chinese(sU8GridPowerSettingsCounter);
    }    
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_SPANISH)//在功率设置界面下 西班牙界面组装
    { 
        updateDisplayGridPowerSettingstData_Spanish(sU8GridPowerSettingsCounter);
    } 
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_GERMAN)//在功率设置界面下 德语界面组装
    { 
        updateDisplayGridPowerSettingsData_German(sU8GridPowerSettingsCounter);
    } 
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_FRENCH)//在功率设置界面下 法语界面组装
    { 
        updateDisplayGridPowerSettingsData_French(sU8GridPowerSettingsCounter);                     
    }   
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_POLISH)//在功率设置界面下 波兰界面组装
    {
        updateDisplayGridPowerSettingsData_Polish(sU8GridPowerSettingsCounter);
    }    
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_ITALIAN)//在功率设置界面下 意大利界面组装
    {
        updateDisplayGridPowerSettingsData_Italian(sU8GridPowerSettingsCounter);                   
    } 
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_CZECH)//在功率设置界面下 捷克界面组装
    { 
        updateDisplayGridPowerSettingsData_Czech(sU8GridPowerSettingsCounter);                  
    }   
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_DUTCH)//在功率设置界面下 荷兰界面组装
    { 
        updateDisplayGridPowerSettingsData_Dutch(sU8GridPowerSettingsCounter);                 
    }
    else
    {   
        updateDisplayGridPowerSettingsData_English(sU8GridPowerSettingsCounter);                
    }

}
/***************************************************************************
功能:功率设置界面 英文界面信息
****************************************************************************/
void updateDisplayGridPowerSettingsData_English(uint8_t sU8PowerSetCounter)    
{
    memset(tab_display,0,DISPLAY_CACHE_SIZE);
    // 无功功率
    if(sU8PowerSetCounter == SET_GRID_Powersetting_ReactivePower)
    {
        sprintf(tab_display,"      Grid Set       \n->Reactive Power Set \nActive Power Set     \n                     \n"); 
    }
    // 有功功率
    else if(sU8PowerSetCounter == SET_GRID_Powersetting_ActivePower)
    {
        sprintf(tab_display,"      Grid Set       \nReactive Power Set   \n->Active Power Set   \n                     \n"); 
    }
    GUI_Display(tab_display, 0, 0);
}


/***************************************************************************
 功能:功率设置界面 西班牙界面信息
****************************************************************************/
void updateDisplayGridPowerSettingstData_Spanish(uint8_t sU8PowerSetCounter)
{
    
}

/***************************************************************************
 功能:功率设置界面 德语界面信息
****************************************************************************/
void updateDisplayGridPowerSettingsData_German(uint8_t sU8PowerSetCounter)
{
    
}

/***************************************************************************
 功能:功率设置界面 法语界面信息
****************************************************************************/
void updateDisplayGridPowerSettingsData_French(uint8_t sU8PowerSetCounter)
{
    
}

/***************************************************************************
 功能:功率设置界面 波兰语界面信息
****************************************************************************/
void updateDisplayGridPowerSettingsData_Polish(uint8_t sU8PowerSetCounter)
{
    
}

/***************************************************************************
 功能:功率设置界面 意大利语界面信息
****************************************************************************/
void updateDisplayGridPowerSettingsData_Italian(uint8_t sU8PowerSetCounter)
{
    
}

/***************************************************************************
 功能:功率设置界面 捷克语界面信息
****************************************************************************/
void updateDisplayGridPowerSettingsData_Czech(uint8_t sU8PowerSetCounter)
{
    
}

/***************************************************************************
 功能:功率设置界面 荷兰语界面信息
****************************************************************************/
void updateDisplayGridPowerSettingsData_Dutch(uint8_t sU8PowerSetCounter)
{
    
}


/***************************************************************************
 功能:根据上一次界面操作类型和本次操作类型判断本次电网安规 SET界面切换
****************************************************************************/
void updateDisplayGridSRSetData(KeyAction_TypeDef nowActionType,DisplayAction_TypeDef nowDisplayType)  
{
    static uint8_t sU8GridSRCounter = 0;  
    switch(nowActionType) 
    {
        case KEYACTION_ENTER://在电网安规界面下，Enter键按下，进入选择对应的设置项
             {
                if(gbEditFlag != STATUS_FALSE)
                {
                    setSafetyRegulationItem((SR_TypeDef)gU8GridSRCounter_modify); //写到FLASH，需要预留FLASH接口
                    SafetyRegulationInit(gU8GridSRCounter_modify);
                    gCurrentMenu.eCurrentDisplayMenuType = nowDisplayType;
                    gbEditFlag = STATUS_FALSE;
                    sU8GridSRCounter = gU8GridSRCounter_modify;
                    generateOperationRecord(RECORD_SET_GRID_SR);
                }
             }
              break;
        case KEYACTION_ESC://在电网安规界面下，ESC键按下，返回上一级电网设置界面
             {
                gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_SET_GRID;
                gbEditFlag = STATUS_FALSE;
                sU8GridSRCounter = 0;
                gU8GridSRCounter_modify = 0;
             }
             break;
        case KEYACTION_DOWN://在电网安规界面下，UP键按下，选择对应的设置项+1
             {
                if(gbEditFlag != STATUS_TRUE) //进入编辑模式  
                {
                    gbEditFlag = STATUS_TRUE;
                    gU8GridSRCounter_modify = sU8GridSRCounter;
                }
                
                gU8GridSRCounter_modify++;
                if(gU8GridSRCounter_modify == DISPLAY_SET_GRID_SR_ITEM_COUNT)
                {
                    gU8GridSRCounter_modify = 0;  
                }
                gCurrentMenu.eCurrentDisplayMenuType = nowDisplayType;
            }
            break;
        case KEYACTION_UP://在电网安规界面下，DOWN键按下，选择对应的设置项-1
             {
                if(gbEditFlag != STATUS_TRUE) //进入编辑模式  
                {
                    gbEditFlag = STATUS_TRUE;
                    gU8GridSRCounter_modify = sU8GridSRCounter;
                }
                
                gU8GridSRCounter_modify--;
                if(gU8GridSRCounter_modify >= DISPLAY_SET_GRID_SR_ITEM_COUNT)
                {
                    gU8GridSRCounter_modify = DISPLAY_SET_GRID_SR_ITEM_COUNT - 1;
                }
                gCurrentMenu.eCurrentDisplayMenuType = nowDisplayType;
            }
            break;
        case KEYACTION_NULL://无操作刷新主界面数据
        default:
            {
                if(gbEditFlag == STATUS_FALSE)
                {
                    sU8GridSRCounter = getSafetyRegulationItem();
                }
                gCurrentMenu.eCurrentDisplayMenuType = nowDisplayType;
            }
            break;
    }
    
    if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_ENGLISH) //电网安规设置界面 英文界面组装
    { 
        if(gbEditFlag == STATUS_TRUE)
        {
            updateDisplayGridSRSetData_English((SR_TypeDef)gU8GridSRCounter_modify);
        }
        else
        {
            updateDisplayGridSRSetData_English((SR_TypeDef)sU8GridSRCounter);
        }                   
    }
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_CHINESE)//电网安规设置界面 中文界面组装
    {
        if(gbEditFlag == STATUS_TRUE)
        {
            updateDisplayGridSRSetData_Chinese((SR_TypeDef)gU8GridSRCounter_modify);
        }
        else
        {
            updateDisplayGridSRSetData_Chinese((SR_TypeDef)sU8GridSRCounter);
        }    
    }    
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_SPANISH)//电网安规设置界面 西班牙界面组装
    { 
        updateDisplayGridSRSetData_Spanish(sU8GridSRCounter);
    } 
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_GERMAN)//电网安规设置界面 德语界面组装
    { 
        updateDisplayGridSRSetData_German(sU8GridSRCounter);
    } 
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_FRENCH)//电网安规设置界面 法语界面组装
    { 
        updateDisplayGridSRSetData_French(sU8GridSRCounter);                     
    }   
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_POLISH)//电网安规设置界面 波兰界面组装
    {
        updateDisplayGridSRSetData_Polish(sU8GridSRCounter);
    }    
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_ITALIAN)//电网安规设置界面 意大利界面组装
    {
        updateDisplayGridSRSetData_Italian(sU8GridSRCounter);                   
    } 
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_CZECH)//电网安规设置界面 捷克界面组装
    { 
        updateDisplayGridSRSetData_Czech(sU8GridSRCounter);                  
    }   
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_DUTCH)//电网安规设置界面 荷兰界面组装
    { 
        updateDisplayGridSRSetData_Dutch(sU8GridSRCounter);                 
    }
    else
    {   
        updateDisplayGridSRSetData_English(sU8GridSRCounter);                    
    }    
}

/***************************************************************************
功能:电网安规设置 英文界面信息
****************************************************************************/
void updateDisplayGridSRSetData_English(uint8_t sU8BMSSetCounter)    
{
    memset(tab_display,0,DISPLAY_CACHE_SIZE);
       
    if(sU8BMSSetCounter == SR_EURTEN)
    {
        sprintf(tab_display,"   Grid Standard 1   \n->EUR Union          \nDE                   \nUK                   \n"); 
    }
    else if(sU8BMSSetCounter == SR_DE)
    {
        sprintf(tab_display,"   Grid Standard 1   \nEUR Union            \n->DE                 \nUK                   \n");
    }
    else if(sU8BMSSetCounter == SR_UK)
    {
        sprintf(tab_display,"   Grid Standard 1   \nEUR Union            \nDE                   \n->UK                 \n");
    }
    else if(sU8BMSSetCounter == SR_ZA)
    {
        sprintf(tab_display,"   Grid Standard 2   \n->ZA                 \nAU                   \n                     \n");
    }
    else if(sU8BMSSetCounter == SR_AU)
    {
        sprintf(tab_display,"   Grid Standard 2   \nZA                   \n->AU                 \n                     \n");
    }
                  
    //GUI_DispStringAt((uint8_t*)tab_display, 0, 0); 
    GUI_Display(tab_display, 0, 0);
}


/***************************************************************************
 功能:电网安规设置 西班牙界面信息
****************************************************************************/
void updateDisplayGridSRSetData_Spanish(uint8_t sU8BMSSetCounter)
{
    
}

/***************************************************************************
 功能:电网安规设置 德语界面信息
****************************************************************************/
void updateDisplayGridSRSetData_German(uint8_t sU8BMSSetCounter)
{
    
}

/***************************************************************************
 功能:电网安规设置 法语界面信息
****************************************************************************/
void updateDisplayGridSRSetData_French(uint8_t sU8BMSSetCounter)
{
    
}

/***************************************************************************
 功能:电网安规设置 波兰语界面信息
****************************************************************************/
void updateDisplayGridSRSetData_Polish(uint8_t sU8BMSSetCounter)
{
    
}

/***************************************************************************
 功能:电网安规设置 意大利语界面信息
****************************************************************************/
void updateDisplayGridSRSetData_Italian(uint8_t sU8BMSSetCounter)
{
    
}

/***************************************************************************
 功能:电网安规设置 捷克语界面信息
****************************************************************************/
void updateDisplayGridSRSetData_Czech(uint8_t sU8BMSSetCounter)
{
    
}

/***************************************************************************
 功能:电网安规设置 荷兰语界面信息
****************************************************************************/
void updateDisplayGridSRSetData_Dutch(uint8_t sU8BMSSetCounter)
{
    
}

/***************************************************************************
 功能:从Flash获取安规标准
****************************************************************************/
SR_TypeDef getSafetyRegulationItem(void)
{
   Flash_Device_GridInfo_Read(&gDisplay.stDisplaySet.stGrid,sizeof(Display_SET_Grid));
   return (SR_TypeDef)gDisplay.stDisplaySet.stGrid.u8SafetyRegulationType; 
}

/***************************************************************************
 功能:保存安规标准到Flash
****************************************************************************/
void setSafetyRegulationItem(SR_TypeDef srItem)
{
   Flash_Device_GridInfo_Read(&gDisplay.stDisplaySet.stGrid,sizeof(Display_SET_Grid));
   gDisplay.stDisplaySet.stGrid.u8SafetyRegulationType = srItem;
   gDisplay.stDisplayData.stSystemData.u8SafetyRegulationType = srItem;
   Flash_Device_GridInfo_Write(&gDisplay.stDisplaySet.stGrid,sizeof(Display_SET_Grid));
}

/***************************************************************************
 功能:无功功率设置
****************************************************************************/
void updateDisplayGridReactivePowerSetData(KeyAction_TypeDef nowActionType,DisplayAction_TypeDef nowDisplayType)
{
    static uint8_t sU8SetNumCounter = 0;        			//需要设置某一位
    static uint8_t sU8NumberCounter = 0;        			//具体设置的值  
    static bool_t  Flag_confirm  = STATUS_FALSE;            //确认标志    
    static uint8_t confirm = 0;                             //确认保存
    switch(nowActionType) 
    {
        case KEYACTION_ENTER://在无功功率设置界面下，Enter键按下
		{ 
           	if(!Flag_confirm) //不是确认保存
            {
                sU8SetNumCounter++;
                if(sU8SetNumCounter == DISPLAY_SET_GRID_REACTIVEPOWER_COUNT)
                {
                    sU8SetNumCounter = 0;  
                }
                gCurrentMenu.eCurrentDisplayMenuType = nowDisplayType;
            	Display_Set_UnderLine_Blink_Position(STATUS_TRUE,arrayFixReactPowerFlicker[sU8SetNumCounter].u8StartPos,arrayFixReactPowerFlicker[sU8SetNumCounter].u8EndPos);
           	}
			else
			{
				if(confirm == 1)
				{  
                    int16  s16ReactPower = atoi(tab_ReactPower_edit_modify);
                    setReactPowerData(s16ReactPower);
                    sprintf(tab_ReactPower_edit,"%s",tab_ReactPower_edit_modify);
                    sprintf(tab_ReactPower_edit_modify,"%s","00000");
                    sU8SetNumCounter = 0;
					Display_Set_UnderLine_Blink_Position(STATUS_FALSE,arrayVarConfirmFlicker[confirm].u8StartPos,arrayVarConfirmFlicker[confirm].u8EndPos);
					Flag_confirm = STATUS_FALSE;// 关闭编辑模式
				}
				else
                {
                    Display_Set_UnderLine_Blink_Position(STATUS_FALSE,arrayVarConfirmFlicker[confirm-1].u8StartPos,arrayVarConfirmFlicker[confirm-1].u8EndPos);
                    gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_SET_GRID_POWERSETTING;
                    //取消
                }     
                gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_SET_GRID_POWERSETTING;
                gbEditFlag = STATUS_TRUE;                                  //进入编辑模式
                confirm = 1;
			}
		}
            break;
        case KEYACTION_DOWN://在系统设置界面下，UP键按下，选择对应的设置项
            {
				sU8NumberCounter++;
                
                if(sU8SetNumCounter == 0) //第一个正负
                {
                   if(sU8NumberCounter >= 2)
                   {
                       sU8NumberCounter = 0;
                   }
                   
                   if(sU8NumberCounter == 0)
                   {
                       tab_ReactPower_edit_modify[0] = '+';
                   }
                   else 
                   {
                       tab_ReactPower_edit_modify[0] = '-'; 
                   }
                }
                else if(sU8SetNumCounter == 1)//第一个数字
                {
                    if(sU8NumberCounter<=3)
                    {
                       tab_ReactPower_edit_modify[1] = '0' + sU8NumberCounter;
                    }
                    else
                    {
                       sU8NumberCounter = 0;
                       tab_ReactPower_edit_modify[1] = '0';
                    }
                }
                else if(sU8SetNumCounter == 2) //第二个数字
                {
                    if(tab_ReactPower_edit_modify[1] == '3')
                    {
                        if(sU8NumberCounter<=6)
                        {
                            tab_ReactPower_edit_modify[2] =  '0' + sU8NumberCounter;
                        }
                        else
                        {
                            sU8NumberCounter = 0;
                            tab_ReactPower_edit_modify[2] = '0';
                        }
                    }
                    else
                    {
                        if(sU8NumberCounter<=9)
                        {
                            tab_ReactPower_edit_modify[2] =  '0' + sU8NumberCounter;
                        }
                        else
                        {
                            sU8NumberCounter = 0;
                            tab_ReactPower_edit_modify[2] = '0';
                        }
                    }
                }
                else if(sU8SetNumCounter == 3)//第三个数字
                {
                    if((tab_ReactPower_edit_modify[1] == '3')&&(tab_ReactPower_edit_modify[2] == '6'))
                    {
                        tab_ReactPower_edit_modify[3] = '0';
                    }
                    else
                    {
                        if(sU8NumberCounter<=9)
                        {
                            tab_ReactPower_edit_modify[3] = '0' + sU8NumberCounter;
                        }
                        else
                        {
                            sU8NumberCounter = 0;
                            tab_ReactPower_edit_modify[3] = '0';
                        }
                    }
                }
                else if(sU8SetNumCounter == 4)//第四个数字
                {
                    if((tab_ReactPower_edit_modify[1] == '3')&&(tab_ReactPower_edit_modify[2] == '6'))
                    {
                        tab_ReactPower_edit_modify[4] = '0';
                    }
                    else
                    {
                        if(sU8NumberCounter<=9)
                        {
                            tab_ReactPower_edit_modify[4] = '0' + sU8NumberCounter;
                        }
                        else
                        {
                            sU8NumberCounter = 0;
                            tab_ReactPower_edit_modify[4] = '0';
                        }
                    }
                }
                gCurrentMenu.eCurrentDisplayMenuType = nowDisplayType;
            }
            break;
        case KEYACTION_UP://在系统设置界面下，DOWN键按下，选择对应的设置项
            {
                 if(gbEditFlag != STATUS_TRUE)//进入编辑模式
                {
                    gbEditFlag = STATUS_TRUE;
                    sprintf(tab_ReactPower_edit_modify,"%s",tab_ReactPower_edit);
                }
                
                sU8NumberCounter --;
                
                if(sU8SetNumCounter == 0) //第一个正负
                {
                   if(sU8NumberCounter >= 2)
                   {
                       sU8NumberCounter = 1;
                   }
                   
                   if(sU8NumberCounter == 0)
                   {
                       tab_ReactPower_edit_modify[0] = '+';
                   }
                   else 
                   {
                       tab_ReactPower_edit_modify[0] = '-';
                   }
                }
                else if(sU8SetNumCounter == 1)//第一个数字
                {
                    if(!(sU8NumberCounter <= 3))
                    {
                        sU8NumberCounter = 3;
                        tab_ReactPower_edit_modify[1] = '0';
                    }
                    tab_ReactPower_edit_modify[1] = '0' + sU8NumberCounter; 
                } 
                else if(sU8SetNumCounter == 2) //第二个数字
                {
                    if(tab_ReactPower_edit_modify[1] == '3')
                    {
                        if(!(sU8NumberCounter <= 6))
                        {
                            sU8NumberCounter = 6;
                            tab_ReactPower_edit_modify[2] = '0';
                        }
                    }
                    else
                    {
                        if(!(sU8NumberCounter <= 9))
                        {
                            sU8NumberCounter = 9;
                            tab_ReactPower_edit_modify[2] = '0';
                        }
                    }
                    tab_ReactPower_edit_modify[2] =  '0' + sU8NumberCounter; 
                }
                else if(sU8SetNumCounter == 3)//第三个数字
                {
                    if((tab_ReactPower_edit_modify[1] == '3')&&(tab_ReactPower_edit_modify[2] == '6'))
                    {
                        tab_ReactPower_edit_modify[3] = '0';
                        sU8NumberCounter = 0;
                    }
                    else
                    {
                        if(!(sU8NumberCounter <= 9))
                        {
                            sU8NumberCounter = 9;
                            tab_ReactPower_edit_modify[3] = '0';
                        }
                    }
                    tab_ReactPower_edit_modify[3] =  '0' + sU8NumberCounter; 
                }
                else if(sU8SetNumCounter == 4)//第四个数字
                {
                    if((tab_ReactPower_edit_modify[1] == '3')&&(tab_ReactPower_edit_modify[2] == '6'))
                    {
                        tab_ReactPower_edit_modify[4] = '0';
                        sU8NumberCounter = 0;
                    }
                    else
                    {
                        if(!(sU8NumberCounter <= 9))
                        {
                            sU8NumberCounter = 9;
                            tab_ReactPower_edit_modify[4] = '0';
                        }
                    }
                    tab_ReactPower_edit_modify[4] = '0' + sU8NumberCounter; 
                }
                gCurrentMenu.eCurrentDisplayMenuType = nowDisplayType;
            }
            break;
        case KEYACTION_ESC://在系统设置界面下，ESC键按下，保存退出到上一级菜单
        	{
	            if(!gbEditFlag)  
	            {					  
	            	sU8SetNumCounter = 0;					//需要设置某一位
					sU8NumberCounter = 0;					//具体设置的值  
	                Flag_confirm  = STATUS_FALSE;           //确认标志     
	                confirm = 0;              				//确认保存
	                gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_SET_GRID_POWERSETTING;
	            }
	            else
	            {
	                //进入确认模式
	                Flag_confirm = STATUS_TRUE;
	                confirm = 1;
	                // 关闭输入光标
					Display_Set_UnderLine_Blink_Position(STATUS_FALSE,arrayFixReactPowerFlicker[sU8SetNumCounter].u8StartPos,arrayFixReactPowerFlicker[sU8SetNumCounter].u8EndPos);
	                // 开启选择光标
	                Display_Set_UnderLine_Blink_Position(STATUS_TRUE,arrayVarConfirmFlicker[0].u8StartPos,arrayVarConfirmFlicker[0].u8EndPos);
	            }
            }
            break;
        case KEYACTION_NULL://无操作刷新主界面数据
        default:
            {
                int16 s16ReactPower = getReactPowerData();
                sprintf(tab_ReactPower_edit,"%05d",s16ReactPower); 
                if(s16ReactPower >= 0)
                {
                    tab_ReactPower_edit[0] = '+';
                }
                else
                {
                    tab_ReactPower_edit[0] = '-';
                }
                gCurrentMenu.eCurrentDisplayMenuType = nowDisplayType;       
            }
            break;
    }
    
    if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_ENGLISH)  //无功功率设置英文界面组装
    { 

		if(Flag_confirm)
        {
            memset(tab_display,0,DISPLAY_CACHE_SIZE);
            sprintf(tab_display,"                     \n   Sure Or Cancel ?  \n                    \n                    \n");
            //GUI_DispStringAt((uint8_t*)tab_display, 0, 0);  
            GUI_Display(tab_display, 0, 0);
        }
        else
        {
            updateDisplayGridReactivePowerSetData_English(tab_ReactPower_edit_modify);        
        }
    }
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_CHINESE) //无功功率设置中文界面组装 
    {
        if(gbEditFlag == STATUS_TRUE)
        {
            updateDisplayGridReactivePowerSetData_Chinese(tab_ReactPower_edit_modify);
        }
        else
        {
            updateDisplayGridReactivePowerSetData_Chinese(tab_ReactPower_edit);
        } 
    }
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_SPANISH)//无功功率设置西班牙界面组装
    {
        updateDisplayGridReactivePowerSetData_Spanish(tab_ReactPower_edit); 
    } 
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_GERMAN)//无功功率设置德语界面组装
    {
        updateDisplayGridReactivePowerSetData_German(tab_ReactPower_edit);
    }
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_FRENCH)//无功功率设置法语界面组装
    {
        updateDisplayGridReactivePowerSetData_French(tab_ReactPower_edit);
    }
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_POLISH)//无功功率设置波兰界面组装
    {
        updateDisplayGridReactivePowerSetData_Polish(tab_ReactPower_edit);
    }
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_ITALIAN)//无功功率设置意大利界面组装 
    {
        updateDisplayGridReactivePowerSetData_Italian(tab_ReactPower_edit);
    }
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_CZECH)//无功功率设置捷克界面组装 
    {
        updateDisplayGridReactivePowerSetData_Czech(tab_ReactPower_edit);
    } 
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_DUTCH)//无功功率设置荷兰界面组装
    {
        updateDisplayGridReactivePowerSetData_Dutch(tab_ReactPower_edit);
    }
}

/***************************************************************************
 功能:无功功率设置英语界面
****************************************************************************/
void updateDisplayGridReactivePowerSetData_English(char *ReactivePowerValue)
{
    memset(tab_display,0,DISPLAY_CACHE_SIZE);
       
    sprintf(tab_display,"  ReactivePower Set  \n                     \nReactPower:%s W\n                     \n",ReactivePowerValue);
    //GUI_DispStringAt((uint8_t*)tab_display, 0, 0);
    GUI_Display(tab_display, 0, 0);
}
/***************************************************************************
 功能:无功功率设置西班牙语界面
****************************************************************************/
void updateDisplayGridReactivePowerSetData_Spanish(char *ReactivePowerValue)
{
  
}

/***************************************************************************
 功能:无功功率设置德语界面
****************************************************************************/
void updateDisplayGridReactivePowerSetData_German(char *ReactivePowerValuer)
{
  
}

/***************************************************************************
 功能:无功功率设置法语界面
****************************************************************************/
void updateDisplayGridReactivePowerSetData_French(char *ReactivePowerValue)
{
  
}

/***************************************************************************
 功能:无功功率设置波兰语界面
****************************************************************************/
void updateDisplayGridReactivePowerSetData_Polish(char *ReactivePowerValue)
{
  
}

/***************************************************************************
 功能:无功功率设置意大利语界面
****************************************************************************/
void updateDisplayGridReactivePowerSetData_Italian(char *ReactivePowerValue)
{
  
}

/***************************************************************************
 功能:无功功率设置捷克语界面
****************************************************************************/
void updateDisplayGridReactivePowerSetData_Czech(char *ReactivePowerValue)
{
  
}

/***************************************************************************
 功能:无功功率设置荷兰语界面
****************************************************************************/
void updateDisplayGridReactivePowerSetData_Dutch(char *ReactivePowerValue)
{
  
}

/***************************************************************************
 功能:从Flash获取无功功率
****************************************************************************/
int16_t getReactPowerData(void)
{
   Flash_Device_GridInfo_Read(&gDisplay.stDisplaySet.stGrid,sizeof(Display_SET_Grid));
   return gDisplay.stDisplaySet.stGrid.s16ReactPower; 
}
/***************************************************************************
 功能:保存无功功率到Flash
****************************************************************************/
void setReactPowerData(int16_t s16ReactPower)
{
   Flash_Device_GridInfo_Read(&gDisplay.stDisplaySet.stGrid,sizeof(Display_SET_Grid));
   gDisplay.stDisplaySet.stGrid.s16ReactPower = s16ReactPower;
   Flash_Device_GridInfo_Write(&gDisplay.stDisplaySet.stGrid,sizeof(Display_SET_Grid));
}
/***************************************************************************
 功能:无功控制方式设置
****************************************************************************/
void updateDisplayGridReactPowerControlWaySetData(KeyAction_TypeDef nowActionType,DisplayAction_TypeDef nowDisplayType)
{
    static uint8_t sU8NumberCounter = 0;        //具体设置的值   
    switch(nowActionType) 
    {
        case KEYACTION_ENTER://在无功功率设置界面下，Enter键按下
            {                  
                if(gbEditFlag != STATUS_FALSE)//退出编辑模式
                {
                    gbEditFlag = STATUS_FALSE;
                    setReactPowerControlWayItem((REACTPOWER_CONTROL_TypeDef)gU8ReactPowerControlWay_modify);
                    sU8NumberCounter = gU8ReactPowerControlWay_modify;
                    gU8ReactPowerControlWay_modify = 0;
                    generateOperationRecord(RECORD_SET_GRID_REACTIVEPOWERCONTROLWAY);
                }
                gCurrentMenu.eCurrentDisplayMenuType = nowDisplayType;
            }
            break;
        case KEYACTION_ESC:
            {
                if(gbEditFlag != STATUS_FALSE)//退出编辑模式 
                {
                    gbEditFlag = STATUS_FALSE;
                    gU8ReactPowerControlWay_modify = 0;
                }
                gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_SET_GRID;
            }
            break;
        case KEYACTION_UP:
            {
                if(gbEditFlag != STATUS_TRUE)//退出编辑模式 
                {
                    gbEditFlag = STATUS_TRUE;
                    gU8ReactPowerControlWay_modify = sU8NumberCounter;
                }
                gU8ReactPowerControlWay_modify++;
                if(gU8ReactPowerControlWay_modify == DISPLAY_SET_GRID_REACTIVEPOWERCONTROLWAY_COUNT)
                {
                    gU8ReactPowerControlWay_modify = 0;
                }
                gCurrentMenu.eCurrentDisplayMenuType = nowDisplayType;
            }
            break;
        case KEYACTION_DOWN:
            {
                if(gbEditFlag != STATUS_TRUE)//退出编辑模式 
                {
                    gbEditFlag = STATUS_TRUE;
                    gU8ReactPowerControlWay_modify = sU8NumberCounter;
                }
                gU8ReactPowerControlWay_modify--;
                if(gU8ReactPowerControlWay_modify >= DISPLAY_SET_GRID_REACTIVEPOWERCONTROLWAY_COUNT)
                {
                    gU8ReactPowerControlWay_modify = DISPLAY_SET_GRID_REACTIVEPOWERCONTROLWAY_COUNT - 1;
                }
                gCurrentMenu.eCurrentDisplayMenuType = nowDisplayType;
            }
            break;
        case KEYACTION_NULL://无操作刷新主界面数据
        default:
            {
                sU8NumberCounter = getReactPowerControlWayItem();
                gCurrentMenu.eCurrentDisplayMenuType = nowDisplayType;
            }
            break;
    }
    if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_ENGLISH)  //无功控制方式设置英文界面组装
    {
        if(gbEditFlag != STATUS_FALSE)
        {
            updateDisplayGridReactPowerControlWaySetData_English(gU8ReactPowerControlWay_modify);
        }
        else
        {
            updateDisplayGridReactPowerControlWaySetData_English(sU8NumberCounter);
        }
    }
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_CHINESE) //无功控制方式设置中文界面组装 
    {
        if(gbEditFlag != STATUS_FALSE)
        {
            updateDisplayGridReactPowerControlWaySetData_Chinese(gU8ReactPowerControlWay_modify);
        }
        else
        {
            updateDisplayGridReactPowerControlWaySetData_Chinese(sU8NumberCounter);
        }
    }
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_SPANISH)//无功控制方式设置西班牙界面组装
    {
        updateDisplayGridReactPowerControlWaySetData_Spanish(sU8NumberCounter); 
    }
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_GERMAN)//无功控制方式设置德语界面组装
    {
        updateDisplayGridReactPowerControlWaySetData_German(sU8NumberCounter);
    }
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_FRENCH)//无功控制方式设置法语界面组装
    {
        updateDisplayGridReactPowerControlWaySetData_French(sU8NumberCounter);
    }
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_POLISH)//无功控制方式设置波兰界面组装
    {
        updateDisplayGridReactPowerControlWaySetData_Polish(sU8NumberCounter);
    }
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_ITALIAN)//无功控制方式设置意大利界面组装 
    {
        updateDisplayGridReactPowerControlWaySetData_Italian(sU8NumberCounter);
    }
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_CZECH)//无功控制方式设置捷克界面组装 
    {
        updateDisplayGridReactPowerControlWaySetData_Czech(sU8NumberCounter);
    }
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_DUTCH)//无功控制方式设置荷兰界面组装
    {
        updateDisplayGridReactPowerControlWaySetData_Dutch(sU8NumberCounter);
    }
}
/***************************************************************************
 功能:无功控制方式设置英语界面
****************************************************************************/
void updateDisplayGridReactPowerControlWaySetData_English(uint8_t u8Way)
{
    memset(tab_display,0,DISPLAY_CACHE_SIZE);
    if(u8Way == REACTPOWER_CONTROL_REACTPOWER)
    {
       sprintf(tab_display,"    Control-Q Way    \n->ReactPower Control \nPF Control           \n                     \n");
    }
    else
    {
       sprintf(tab_display,"    Control-Q Way    \nReactPower Control   \n->PF Control         \n                     \n");
    }
    GUI_Display(tab_display, 0, 0);
}
/***************************************************************************
 功能:无功控制方式设置西班牙语界面
****************************************************************************/
void updateDisplayGridReactPowerControlWaySetData_Spanish(uint8_t u8Way)
{
}
/***************************************************************************
 功能:无功控制方式设置德语界面
****************************************************************************/
void updateDisplayGridReactPowerControlWaySetData_German(uint8_t u8Way)
{
}
/***************************************************************************
 功能:无功控制方式设置法语界面
****************************************************************************/
void updateDisplayGridReactPowerControlWaySetData_French(uint8_t u8Way)
{
}
/***************************************************************************
 功能:无功控制方式设置波兰语界面
****************************************************************************/
void updateDisplayGridReactPowerControlWaySetData_Polish(uint8_t u8Way)
{
}
/***************************************************************************
 功能:无功控制方式设置意大利语界面
****************************************************************************/
void updateDisplayGridReactPowerControlWaySetData_Italian(uint8_t u8Way)
{
}
/***************************************************************************
 功能:无功控制方式设置捷克语界面
****************************************************************************/
void updateDisplayGridReactPowerControlWaySetData_Czech(uint8_t u8Way)
{
}
void updateDisplayGridReactPowerControlWaySetData_Dutch(uint8_t u8Way)
{
}
/***************************************************************************
 功能:从Flash获取安规标准
****************************************************************************/
REACTPOWER_CONTROL_TypeDef getReactPowerControlWayItem(void)
{
   Flash_Device_GridInfo_Read(&gDisplay.stDisplaySet.stGrid,sizeof(Display_SET_Grid));
   return (REACTPOWER_CONTROL_TypeDef)gDisplay.stDisplaySet.stGrid.u8ReactPowerControlWay; 
}
/***************************************************************************
 功能:保存安规标准到Flash
****************************************************************************/
void setReactPowerControlWayItem(REACTPOWER_CONTROL_TypeDef controlWayItem)
{
   Flash_Device_GridInfo_Read(&gDisplay.stDisplaySet.stGrid,sizeof(Display_SET_Grid));
   gDisplay.stDisplaySet.stGrid.u8ReactPowerControlWay = controlWayItem;
   Flash_Device_GridInfo_Write(&gDisplay.stDisplaySet.stGrid,sizeof(Display_SET_Grid));
}
/***************************************************************************
 功能:功率因素设置
****************************************************************************/
void updateDisplayGridPowerFactorSetData(KeyAction_TypeDef nowActionType,DisplayAction_TypeDef nowDisplayType)
{
    static uint8_t sU8SetNumCounter = 0;        //需要设置某一位
    static uint8_t sU8NumberCounter = 0;        //具体设置的值
    switch(nowActionType) 
    {
        case KEYACTION_ENTER://在无功功率设置界面下，Enter键按下
            {
                if(gbEditFlag != STATUS_FALSE)//退出编辑模式
                {
                    gbEditFlag = STATUS_FALSE;
                    float f16PF = atof(tab_PF_edit_modify);
                    int16 s16PF = (int16)(f16PF * 1000);
                    setPowerFactorData(s16PF);
                    sprintf(tab_PF_edit,"%s",tab_PF_edit_modify);
                    sprintf(tab_PF_edit_modify,"%s","0.000");
                    sU8SetNumCounter = 0;
                    sU8NumberCounter = 0;
                    Display_Set_UnderLine_Blink_Position(STATUS_FALSE,0,0);
                    generateOperationRecord(RECORD_SET_GRID_POWERFACTOR);
                }
                gCurrentMenu.eCurrentDisplayMenuType = nowDisplayType;
            }
            break;
        case KEYACTION_DOWN://在系统设置界面下，UP键按下，选择对应的设置项
            {
                if(gbEditFlag != STATUS_TRUE)//进入编辑模式
                {
                    gbEditFlag = STATUS_TRUE;
                    sprintf(tab_PF_edit_modify,"%s",tab_PF_edit);
                }
                
                sU8NumberCounter++;
                
                if(sU8SetNumCounter == 0) //第一个正负
                {
                   if(sU8NumberCounter >= 2)
                   {
                       sU8NumberCounter = 0;
                   }
                   if(sU8NumberCounter == 0)
                   {
                       tab_PF_edit_modify[0] =  '+';
                   }
                   else
                   {
                       tab_PF_edit_modify[0] =  '-'; 
                   }
                }
                else if(sU8SetNumCounter == 1)//第一个数字
                {
                    if(sU8NumberCounter<=1)
                    {
                       tab_PF_edit_modify[1] =  '0' + sU8NumberCounter;
                    }
                    else
                    {
                       sU8NumberCounter = 0;
                       tab_PF_edit_modify[1] = '0';
                    }
                }
                else if(sU8SetNumCounter == 2)//第一个数字
                {
                    tab_PF_edit_modify[2] = '.';
                } 
                else if(sU8SetNumCounter == 3) //第二个数字
                {
                    if(tab_PF_edit_modify[1] != '1')
                    {
                        if((sU8NumberCounter>=8)&&(sU8NumberCounter<=9))
                        {
                            tab_PF_edit_modify[3] = '0' + sU8NumberCounter;
                        }
                        else
                        {
                            sU8NumberCounter = 8;
                            tab_PF_edit_modify[3] = '8';
                        }
                    }
                    else
                    {
                        sU8NumberCounter = 0;
                        tab_PF_edit_modify[3] = '0';
                    }
                }
                else if(sU8SetNumCounter == 4)//第三个数字
                {
                    if(tab_PF_edit_modify[1] != '1')
                    {
                        if(sU8NumberCounter<=9)
                        {
                            tab_PF_edit_modify[4] =  '0' + sU8NumberCounter;
                        }
                        else
                        {
                            sU8NumberCounter = 0;
                            tab_PF_edit_modify[4] = '0';
                        }
                    }
                    else
                    {
                            sU8NumberCounter = 0;
                            tab_PF_edit_modify[4] = '0';
                    }
                }
                else if(sU8SetNumCounter == 5)//第三个数字
                {
                    if(tab_PF_edit_modify[1] != '1')
                    {
                        if(sU8NumberCounter<=9)
                        {
                            tab_PF_edit_modify[5] =  '0' + sU8NumberCounter;
                        }
                        else
                        {
                            sU8NumberCounter = 0;
                            tab_PF_edit_modify[5] = '0';
                        }
                    }
                    else
                    {
                            sU8NumberCounter = 0;
                            tab_PF_edit_modify[5] = '0';
                    }
                }
                
                gCurrentMenu.eCurrentDisplayMenuType = nowDisplayType;
            }
            break;
        case KEYACTION_UP://在系统设置界面下，DOWN键按下，选择对应的设置项
            {
                 if(gbEditFlag != STATUS_TRUE)//进入编辑模式
                {
                    gbEditFlag = STATUS_TRUE;
                    sprintf(tab_PF_edit_modify,"%s",tab_PF_edit);
                }
                
                sU8NumberCounter --;
                
                if(sU8SetNumCounter == 0) //第一个正负
                {
                   if(sU8NumberCounter >= 2)
                   {
                       sU8NumberCounter = 1;
                   }
                   if(sU8NumberCounter == 0)
                    {
                       tab_PF_edit_modify[0] =  '+';
                   }
                   else 
                   {
                       tab_PF_edit_modify[0] =  '-';
                    }
                }
                else if(sU8SetNumCounter == 1)//第一个数字
                {
                    if(!(sU8NumberCounter <= 1))
                    {
                        sU8NumberCounter = 1;
                       tab_PF_edit_modify[1] = '0';
                    }
                    tab_PF_edit_modify[1] =  '0' + sU8NumberCounter; 
                }
                else if(sU8SetNumCounter == 2)//第一个数字
                {
                    tab_PF_edit_modify[2] = '.';
                }
                else if(sU8SetNumCounter == 3) //第二个数字
                {
                    if(tab_PF_edit_modify[1] != '1')
                    {
                        if(!((sU8NumberCounter <= 9)&&(sU8NumberCounter >= 8)))
                        {
                            sU8NumberCounter = 9;
                            tab_PF_edit_modify[3] = '0';
                        }
                    }
                    else
                    {
                        sU8NumberCounter = 0;
                    }
                    tab_PF_edit_modify[3] =  '0' + sU8NumberCounter; 
                }
                else if(sU8SetNumCounter == 4)//第三个数字
                {
                    if(tab_PF_edit_modify[1] != '1')
                    {
                        if(!(sU8NumberCounter <= 9))
                        {
                            sU8NumberCounter = 9;
                            tab_PF_edit_modify[4] = '0';
                        }
                    }
                    else
                    {
                        sU8NumberCounter = 0;
                    }

                    tab_PF_edit_modify[4] =  '0' + sU8NumberCounter; 
                }
                else if(sU8SetNumCounter == 5)//第三个数字
                {
                    if(tab_PF_edit_modify[1] != '1')
                    {
                        if(!(sU8NumberCounter <= 9))
                        {
                            sU8NumberCounter = 9;
                            tab_PF_edit_modify[5] = '0';
                        }
                    }
                    else
                    {
                        sU8NumberCounter = 0;
                    }
                    tab_PF_edit_modify[5] =  '0' + sU8NumberCounter; 
                }
                
                gCurrentMenu.eCurrentDisplayMenuType = nowDisplayType;
            }
            break;
        case KEYACTION_ESC://在系统设置界面下，ESC键按下，保存退出到上一级菜单
            {
                if(gbEditFlag != STATUS_FALSE)//退出编辑模式 
                {
                    gbEditFlag = STATUS_FALSE;
                    sU8NumberCounter = 0;
                    Display_Set_UnderLine_Blink_Position(STATUS_FALSE,0,0);
                }
                gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_SET_GRID;
            }
            break;
        case KEYACTION_UPDOWN://在系统设置界面下，UP键 + DOWN键同时按下，切换设置下一个数据
            {
                sU8SetNumCounter++;
                sU8NumberCounter = 0;
                if(sU8SetNumCounter == DISPLAY_SET_GRID_POWERFACTOR_COUNT)
                {
                    sU8SetNumCounter = 0;  
                }
                gCurrentMenu.eCurrentDisplayMenuType = nowDisplayType;
            }
            break;
        case KEYACTION_NULL://无操作刷新主界面数据
        default:
            {
                int16 s16PF = getPowerFactorData();
                float f16PF = s16PF / 1000.0;
                sprintf(tab_PF_edit,"%06.3f",f16PF);
                if(f16PF >= 0)
                {
                    tab_PF_edit[0] = '+';
                }
                else
                {
                    tab_PF_edit[0] = '-';
                }
                gCurrentMenu.eCurrentDisplayMenuType = nowDisplayType;       
            }
            break;
    }
    
    if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_ENGLISH)  //无功功率设置英文界面组装
    { 
        if(gbEditFlag == STATUS_TRUE)
        {
            updateDisplayGridPowerFactorSetData_English(tab_PF_edit_modify);
            Display_Set_UnderLine_Blink_Position(STATUS_TRUE,arrayFixPFFlicker[sU8SetNumCounter].u8StartPos,arrayFixPFFlicker[sU8SetNumCounter].u8EndPos);
        }
        else
        {
            updateDisplayGridPowerFactorSetData_English(tab_PF_edit);
        }
    }
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_CHINESE) //无功功率设置中文界面组装 
    {
        if(gbEditFlag == STATUS_TRUE)
        {
            updateDisplayGridPowerFactorSetData_Chinese(tab_PF_edit_modify);
            //Display_Set_UnderLine_Blink_Position(STATUS_TRUE,arrayFixPFFlickerChinese[sU8SetNumCounter].u8StartPos,arrayFixPFFlickerChinese[sU8SetNumCounter].u8EndPos);
        }
        else
        {
            updateDisplayGridPowerFactorSetData_Chinese(tab_PF_edit);
        }
    } 
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_SPANISH)//无功功率设置西班牙界面组装
    { 
        updateDisplayGridPowerFactorSetData_Spanish(tab_PF_edit);
    } 
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_GERMAN)//无功功率设置德语界面组装
    { 
        updateDisplayGridPowerFactorSetData_German(tab_PF_edit);
    } 
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_FRENCH)//无功功率设置法语界面组装
    {
        updateDisplayGridPowerFactorSetData_French(tab_PF_edit);
    }
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_POLISH)//无功功率设置波兰界面组装
    {
        updateDisplayGridPowerFactorSetData_Polish(tab_PF_edit);
    }
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_ITALIAN)//无功功率设置意大利界面组装 
    {
        updateDisplayGridPowerFactorSetData_Italian(tab_PF_edit);
    }
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_CZECH)//无功功率设置捷克界面组装 
    { 
        updateDisplayGridPowerFactorSetData_Czech(tab_PF_edit);
    } 
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_DUTCH)//无功功率设置荷兰界面组装
    {
        updateDisplayGridPowerFactorSetData_Dutch(tab_PF_edit);
    }
}

/***************************************************************************
 功能:功率因素设置英语界面
****************************************************************************/
void updateDisplayGridPowerFactorSetData_English(char* strPF)
{
    memset(tab_display,0,DISPLAY_CACHE_SIZE);
           
    sprintf(tab_display,"   Power Factor Set  \n                     \nPowerFactor:%s %%\n                     \n",strPF);
    //GUI_DispStringAt((uint8_t*)tab_display, 0, 0);
    GUI_Display(tab_display, 0, 0);
}
/***************************************************************************
 功能:功率因素设置西班牙语界面
****************************************************************************/
void updateDisplayGridPowerFactorSetData_Spanish(char* strPF)
{
  
}

/***************************************************************************
 功能:功率因素设置德语界面
****************************************************************************/
void updateDisplayGridPowerFactorSetData_German(char* strPF)
{
  
}

/***************************************************************************
 功能:功率因素设置法语界面
****************************************************************************/
void updateDisplayGridPowerFactorSetData_French(char* strPF)
{
  
}

/***************************************************************************
 功能:功率因素设置波兰语界面
****************************************************************************/
void updateDisplayGridPowerFactorSetData_Polish(char* strPF)
{
  
}

/***************************************************************************
 功能:功率因素设置意大利语界面
****************************************************************************/
void updateDisplayGridPowerFactorSetData_Italian(char* strPF)
{
  
}

/***************************************************************************
 功能:功率因素设置捷克语界面
****************************************************************************/
void updateDisplayGridPowerFactorSetData_Czech(char* strPF)
{
  
}

/***************************************************************************
 功能:功率因素设置荷兰语界面
****************************************************************************/
void updateDisplayGridPowerFactorSetData_Dutch(char* strPF)
{
  
}

/***************************************************************************
 功能:从Flash获取功率因数
****************************************************************************/
int16_t getPowerFactorData(void)
{
   Flash_Device_GridInfo_Read(&gDisplay.stDisplaySet.stGrid,sizeof(Display_SET_Grid));
   return gDisplay.stDisplaySet.stGrid.s16PF; 
}

/***************************************************************************
 功能:保存功率因数到Flash
****************************************************************************/
void setPowerFactorData(int16_t s16PF)
{
   Flash_Device_GridInfo_Read(&gDisplay.stDisplaySet.stGrid,sizeof(Display_SET_Grid));
   gDisplay.stDisplaySet.stGrid.s16PF = s16PF;
   Flash_Device_GridInfo_Write(&gDisplay.stDisplaySet.stGrid,sizeof(Display_SET_Grid));
}

/***************************************************************************
 功能:根据上一次界面操作类型和本次操作类型判断本次电网电价 SET界面切换
****************************************************************************/
void updateDisplayGridPriceSetData(KeyAction_TypeDef nowActionType,DisplayAction_TypeDef nowDisplayType)  
{
    static uint8_t sU8GridPriceCounter = 1;
    switch(nowActionType) 
    {
        case KEYACTION_ENTER://在电网电价设置界面下，Enter键按下，进入选择对应的设置项
            {
                if(sU8GridPriceCounter == TPFV_TIP) 
                {
                    gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_SET_GRID_TIMEDIVEPRICE_TPFV_TIP;
                } 
                else if(sU8GridPriceCounter == TPFV_PEAK)
                {
                    gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_SET_GRID_TIMEDIVEPRICE_TPFV_PEAK; 
                }
                else if(sU8GridPriceCounter == TPFV_FLAT)
                {
                    gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_SET_GRID_TIMEDIVEPRICE_TPFV_FLAT; 
                }
                else if(sU8GridPriceCounter == TPFV_VALLEY)
                {
                    gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_SET_GRID_TIMEDIVEPRICE_TPFV_VALLEY; 
                }
                else
                {
                    gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_SET_GRID_TIMEDIVEPRICE;  
                }
            }
            break;
        case KEYACTION_ESC://在电网电价设置界面下，ESC键按下，返回上一级电网设置界面
            {
                gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_SET_GRID;                
            }
            break;
        case KEYACTION_DOWN://在电网安规界面下，UP键按下，选择对应的设置项+1
            {
                sU8GridPriceCounter++;
                if(sU8GridPriceCounter == DISPLAY_SET_GRID_PRICE_ITEM_COUNT)
                {
                    sU8GridPriceCounter = 1;
                } 
                gCurrentMenu.eCurrentDisplayMenuType = nowDisplayType;                 
            }
            break;
        case KEYACTION_UP://在电网电价设置界面下，DOWN键按下，选择对应的设置项-1
            {
                if(sU8GridPriceCounter == TPFV_PEAK)
                {
                sU8GridPriceCounter--;
                    sU8GridPriceCounter--;
                }
                else
                {
                    sU8GridPriceCounter--;
                }
                if(sU8GridPriceCounter >= DISPLAY_SET_GRID_PRICE_ITEM_COUNT)
                {
                    sU8GridPriceCounter = DISPLAY_SET_GRID_PRICE_ITEM_COUNT - 1;  
                }  
                gCurrentMenu.eCurrentDisplayMenuType = nowDisplayType;                
            }
            break;
        case KEYACTION_NULL://无操作刷新主界面数据
        default:
            {
                gCurrentMenu.eCurrentDisplayMenuType = nowDisplayType;
            }
            break;
    }
    
    if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_ENGLISH) //电网电价设置界面 英文界面组装
    { 
        updateDisplayGridPriceSetData_English(sU8GridPriceCounter);                    
    }
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_CHINESE)//电网电价设置界面 中文界面组装
    {
        updateDisplayGridPriceSetData_Chinese(sU8GridPriceCounter);
    }    
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_SPANISH)//电网电价设置界面 西班牙界面组装
    { 
        updateDisplayGridPriceSetData_Spanish(sU8GridPriceCounter);
    } 
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_GERMAN)//电网电价设置界面 德语界面组装
    { 
        updateDisplayGridPriceSetData_German(sU8GridPriceCounter);
    } 
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_FRENCH)//电网电价设置界面 法语界面组装
    { 
        updateDisplayGridPriceSetData_French(sU8GridPriceCounter);                     
    }   
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_POLISH)//电网电价设置界面 波兰界面组装
    {
        updateDisplayGridPriceSetData_Polish(sU8GridPriceCounter);
    }    
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_ITALIAN)//电网电价设置界面 意大利界面组装
    {
        updateDisplayGridPriceSetData_Italian(sU8GridPriceCounter);                   
    } 
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_CZECH)//电网电价设置界面 捷克界面组装
    { 
        updateDisplayGridPriceSetData_Czech(sU8GridPriceCounter);                  
    }   
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_DUTCH)//电网电价设置界面 荷兰界面组装
    { 
        updateDisplayGridPriceSetData_Dutch(sU8GridPriceCounter);                 
    }
    else
    {   
        updateDisplayGridPriceSetData_English(sU8GridPriceCounter);                    
    }    
}

/***************************************************************************
功能:电网电价设置 英文界面信息
****************************************************************************/
void updateDisplayGridPriceSetData_English(uint8_t sU8BMSSetCounter)    
{
    memset(tab_display,0,DISPLAY_CACHE_SIZE);
    /*
    if(sU8BMSSetCounter == TPFV_TIP)
    {
        sprintf(tab_display,"     Grid Price 1    \n->Tip                \nPeak                 \nFlat                 \n"); 
    }
    else if(sU8BMSSetCounter == TPFV_PEAK)
    {
        sprintf(tab_display,"     Grid Price 1    \nTip                  \n->Peak               \nFlat                 \n");   
    }
    else if(sU8BMSSetCounter == TPFV_FLAT)
    {
        sprintf(tab_display,"     Grid Price 1    \nTip                  \nPeak                 \n->Flat               \n");  
    }
    else if(sU8BMSSetCounter == TPFV_VALLEY)
    {
        sprintf(tab_display,"     Grid Price 2    \n->Valley             \n                     \n                     \n");  
    }
    */
    //GUI_DispStringAt((uint8_t*)tab_display, 0, 0);
    
    if(sU8BMSSetCounter == TPFV_PEAK)
    {
        sprintf(tab_display,"     Grid Price 1    \n->Peak               \nFlat                 \nValley               \n");
    }
    else if(sU8BMSSetCounter == TPFV_FLAT)
    {
        sprintf(tab_display,"     Grid Price 1    \nPeak                 \n->Flat               \nValley               \n");
    }
    else if(sU8BMSSetCounter == TPFV_VALLEY)
    {
        sprintf(tab_display,"     Grid Price 1    \nPeak                 \nFlat                 \n->Valley             \n");
    }
    
    GUI_Display(tab_display, 0, 0);
}


/***************************************************************************
 功能:电网电价设置 西班牙界面信息
****************************************************************************/
void updateDisplayGridPriceSetData_Spanish(uint8_t sU8BMSSetCounter)
{
    
}

/***************************************************************************
 功能:电网电价设置 德语界面信息
****************************************************************************/
void updateDisplayGridPriceSetData_German(uint8_t sU8BMSSetCounter)
{
    
}

/***************************************************************************
 功能:电网电价设置 法语界面信息
****************************************************************************/
void updateDisplayGridPriceSetData_French(uint8_t sU8BMSSetCounter)
{
    
}

/***************************************************************************
 功能:电网电价设置 波兰语界面信息
****************************************************************************/
void updateDisplayGridPriceSetData_Polish(uint8_t sU8BMSSetCounter)
{
    
}

/***************************************************************************
 功能:电网电价设置 意大利语界面信息
****************************************************************************/
void updateDisplayGridPriceSetData_Italian(uint8_t sU8BMSSetCounter)
{
    
}

/***************************************************************************
 功能:电网电价设置 捷克语界面信息
****************************************************************************/
void updateDisplayGridPriceSetData_Czech(uint8_t sU8BMSSetCounter)
{
    
}

/***************************************************************************
 功能:电网电价设置 荷兰语界面信息
****************************************************************************/
void updateDisplayGridPriceSetData_Dutch(uint8_t sU8BMSSetCounter)
{
    
}

/***************************************************************************
 功能:根据上一次界面操作类型和本次操作类型判断本次电价设置尖峰平谷分时 SET界面切换
****************************************************************************/
void updateDisplayGridPriceTPFVSetData(KeyAction_TypeDef nowActionType,DisplayAction_TypeDef nowDisplayType,TPFV_TypeDef enum_tpfv)
{
    static uint8_t sU8TPFVSetCounter = 0;
    static uint8_t sU8TPFVCounter  = 0;
    static uint8_t sU8TPFVTurnCounter  = 0;
        
    switch(nowActionType) 
    {
        case KEYACTION_ENTER://在尖峰平谷分时设置界面下，Enter键按下，在系统设置对应的时间
            { 
                if(enum_tpfv == TPFV_TIP)
                {
                    if(sU8TPFVTurnCounter == PRICE_TPFV_PERIOD_PRICE)
                    {
                        if(gbEditFlag != STATUS_FALSE)
                        { 
                            float fPrice = atof(tab_TPFV_Price_modify); 
                            gDisplay.stDisplaySet.stGrid.stTimeDivisionElecPrice.stTipPeriod.u8ElecPrice = fPrice * 100;
                            generateOperationRecord(RECORD_SET_GRID_TIMEDIVEPRICE_TPFV_TIP);
                        }
                        gCurrentMenu.eCurrentDisplayMenuType = nowDisplayType; 
                    }
                    else if(sU8TPFVTurnCounter == PRICE_TPFV_PERIOD_ONE)
                    {
                        gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_SET_GRID_TIMEDIVEPRICE_TPFV_TIP_PERIOD_ONE;
                    }  
                    else if(sU8TPFVTurnCounter == PRICE_TPFV_PERIOD_TWO)
                    {
                        gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_SET_GRID_TIMEDIVEPRICE_TPFV_TIP_PERIOD_TWO;
                    } 
                    else if(sU8TPFVTurnCounter == PRICE_TPFV_PERIOD_THREE)
                    {
                        gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_SET_GRID_TIMEDIVEPRICE_TPFV_TIP_PERIOD_THREE;
                    } 
                }
                else if(enum_tpfv == TPFV_PEAK)
                {
                    if(sU8TPFVTurnCounter == PRICE_TPFV_PERIOD_PRICE)
                    {
                        if(gbEditFlag != STATUS_FALSE)
                        {
                            float fPrice = atof(tab_TPFV_Price_modify); 
                            gDisplay.stDisplaySet.stGrid.stTimeDivisionElecPrice.stPeakPeriod.u8ElecPrice = fPrice * 100;
                            generateOperationRecord(RECORD_SET_GRID_TIMEDIVEPRICE_TPFV_PEAK);  
                        }
                        gCurrentMenu.eCurrentDisplayMenuType = nowDisplayType;
                    }
                    else if(sU8TPFVTurnCounter == PRICE_TPFV_PERIOD_ONE)
                    {
                        gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_SET_GRID_TIMEDIVEPRICE_TPFV_PEAK_PERIOD_ONE;
                    }  
                    else if(sU8TPFVTurnCounter == PRICE_TPFV_PERIOD_TWO)
                    {
                        gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_SET_GRID_TIMEDIVEPRICE_TPFV_PEAK_PERIOD_TWO;
                    } 
                    else if(sU8TPFVTurnCounter == PRICE_TPFV_PERIOD_THREE)
                    {
                        gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_SET_GRID_TIMEDIVEPRICE_TPFV_PEAK_PERIOD_THREE;
                    }    
                }
                else if(enum_tpfv == TPFV_FLAT)
                {
                    if(sU8TPFVTurnCounter == PRICE_TPFV_PERIOD_PRICE)
                    {
                        if(gbEditFlag != STATUS_FALSE)
                        {
                            float fPrice = atof(tab_TPFV_Price_modify); 
                            gDisplay.stDisplaySet.stGrid.stTimeDivisionElecPrice.stFlatPeriod.u8ElecPrice = fPrice * 100;
                            generateOperationRecord(RECORD_SET_GRID_TIMEDIVEPRICE_TPFV_FLAT);                          
                        }
                    }
                    else if(sU8TPFVTurnCounter == PRICE_TPFV_PERIOD_ONE)
                    {
                        gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_SET_GRID_TIMEDIVEPRICE_TPFV_FLAT_PERIOD_ONE;
                    }  
                    else if(sU8TPFVTurnCounter == PRICE_TPFV_PERIOD_TWO)
                    {
                        gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_SET_GRID_TIMEDIVEPRICE_TPFV_FLAT_PERIOD_TWO;
                    } 
                    else if(sU8TPFVTurnCounter == PRICE_TPFV_PERIOD_THREE)
                    {
                        gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_SET_GRID_TIMEDIVEPRICE_TPFV_FLAT_PERIOD_THREE;
                    }     
                }
                else if(enum_tpfv == TPFV_VALLEY)
                {
                    if(sU8TPFVTurnCounter == PRICE_TPFV_PERIOD_PRICE)
                    {
                        if(gbEditFlag != STATUS_FALSE)
                        {
                            float fPrice = atof(tab_TPFV_Price_modify); 
                            gDisplay.stDisplaySet.stGrid.stTimeDivisionElecPrice.stValleyPeriod.u8ElecPrice = fPrice * 100;
                            generateOperationRecord(RECORD_SET_GRID_TIMEDIVEPRICE_TPFV_VALLEY);
                        }
                    }
                    else if(sU8TPFVTurnCounter == PRICE_TPFV_PERIOD_ONE)
                    {
                        gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_SET_GRID_TIMEDIVEPRICE_TPFV_VALLEY_PERIOD_ONE;
                    }  
                    else if(sU8TPFVTurnCounter == PRICE_TPFV_PERIOD_TWO)
                    {
                        gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_SET_GRID_TIMEDIVEPRICE_TPFV_VALLEY_PERIOD_TWO;
                    } 
                    else if(sU8TPFVTurnCounter == PRICE_TPFV_PERIOD_THREE)
                    {
                        gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_SET_GRID_TIMEDIVEPRICE_TPFV_VALLEY_PERIOD_THREE;
                    }                     
                }

                gbEditFlag = STATUS_FALSE;//退出编辑模式
                sprintf(tab_TPFV_Price,"%s",tab_TPFV_Price_modify);
                sprintf(tab_TPFV_Price_modify,"%s","00:00");

                sU8TPFVSetCounter = 0;
                sU8TPFVCounter = 0;    
                Display_Set_UnderLine_Blink_Position(STATUS_FALSE,0,0);
            }
            break; 
        case KEYACTION_DOWN://在尖峰平谷分时设置界面下，UP键按下，选择对应的设置项
            {
                if(gbEditFlag != STATUS_TRUE)
                {
                    gbEditFlag = STATUS_TRUE;   
                    sprintf(tab_TPFV_Price_modify,"%s",tab_TPFV_Price);                    
                }
                
                sU8TPFVCounter++; 
                if(sU8TPFVTurnCounter == PRICE_TPFV_PERIOD_PRICE)
                {
                    if(sU8TPFVSetCounter == 0) //分时电价起始时间的第一个数字
                    {
                        if(sU8TPFVCounter<=9)
                        {
                            tab_TPFV_Price_modify[0] =  '0' + sU8TPFVCounter;
                        }
                        else
                        {
                            sU8TPFVCounter = 0;
                            tab_TPFV_Price_modify[0] = '0';
                        } 
                    } 
                    else if(sU8TPFVSetCounter == 1)//分时电价起始时间的第二个数字
                    {
                        if(sU8TPFVCounter<=9)
                        {
                            tab_TPFV_Price_modify[1] =  '0' + sU8TPFVCounter;
                        }
                        else
                        {
                            sU8TPFVCounter = 0;
                            tab_TPFV_Price_modify[1] = '0';
                        }                    
                    }
                    else if(sU8TPFVSetCounter == 2)//分时电价起始时间的第三个数字
                    {
                        if(sU8TPFVCounter<=9)
                        {
                            tab_TPFV_Price_modify[3] =  '0' + sU8TPFVCounter;
                        }
                        else
                        {
                            sU8TPFVCounter = 0;
                            tab_TPFV_Price_modify[3] = '0';
                        }                    
                    }
                    else if(sU8TPFVSetCounter == 3)//分时电价起始时间的第四个数字
                    {
                        if(sU8TPFVCounter<=9)
                        {
                            tab_TPFV_Price_modify[4] =  '0' + sU8TPFVCounter;
                        }
                        else
                        {
                            sU8TPFVCounter = 0;
                            tab_TPFV_Price_modify[4] = '0';
                        }                    
                    } 
                }                
                gCurrentMenu.eCurrentDisplayMenuType = nowDisplayType;  
            }
            break;
        case KEYACTION_UP://在尖峰平谷分时设置界面下，DOWN键按下，选择对应的设置项
            {
                if(gbEditFlag != STATUS_TRUE)
                {
                    gbEditFlag = STATUS_TRUE; 
                    sprintf(tab_TPFV_Price_modify,"%s",tab_TPFV_Price);                    
                } 
                
                if(sU8TPFVTurnCounter == PRICE_TPFV_PERIOD_PRICE)
                {
                    sU8TPFVCounter--;
                    if(sU8TPFVSetCounter == 0) //分时电价起始时间的第一个数字
                    {
                        if(!(sU8TPFVCounter <= 9))
                        {
                            sU8TPFVCounter = 9;
                            tab_TPFV_Price_modify[0] = '0';
                        }
                        tab_TPFV_Price_modify[0] =  '0' + sU8TPFVCounter;                    
                    }
                    else if(sU8TPFVSetCounter == 1) //分时电价起始时间的第二个数字
                    { 
                        if(!(sU8TPFVCounter <= 9))
                        {
                            sU8TPFVCounter = 9;
                            tab_TPFV_Price_modify[1] = '0';
                        }
                        tab_TPFV_Price_modify[1] =  '0' + sU8TPFVCounter;                        
                    }
                    else if(sU8TPFVSetCounter == 2) //分时电价起始时间的第三个数字
                    {
                        if(!(sU8TPFVCounter <= 9))
                        {
                            sU8TPFVCounter = 9;
                            tab_TPFV_Price_modify[3] = '0';
                        }
                        tab_TPFV_Price_modify[3] =  '0' + sU8TPFVCounter;                        
                    }
                    else if(sU8TPFVSetCounter == 3) //分时电价起始时间的第四个数字
                    { 
                        if(!(sU8TPFVCounter <= 9))
                        {
                            sU8TPFVCounter = 9;
                            tab_TPFV_Price_modify[4] = '0';
                        }
                        tab_TPFV_Price_modify[4] =  '0' + sU8TPFVCounter;                        
                    }     
                }
                gCurrentMenu.eCurrentDisplayMenuType = nowDisplayType;
            } 
            break;
        case KEYACTION_UPDOWN://在尖峰平谷分时设置界面下，UP键 + DOWN键同时按下，切换设置下一个数据
            {
                sU8TPFVSetCounter++;
                sU8TPFVCounter = 0;
                
                if(sU8TPFVSetCounter == DISPLAY_SET_GRID_PRICE_INPUT_COUNT)
                {
                    sU8TPFVSetCounter = 0;  
                }
                
                gCurrentMenu.eCurrentDisplayMenuType = nowDisplayType;        
            }
            break;
        case KEYACTION_ENTERUP://在尖峰平谷分时设置界面下，UP键 + DOWN键同时按下，切换设置下一个数据
            {
                sU8TPFVCounter = 0;
                sU8TPFVSetCounter = 0;
                sU8TPFVTurnCounter++;                
                
                if(sU8TPFVTurnCounter == DISPLAY_SET_GRID_PRICE_ITEM_COUNT)
                {
                    sU8TPFVTurnCounter = 0;  
                }
                
                gCurrentMenu.eCurrentDisplayMenuType = nowDisplayType;        
            }
            break;
        case KEYACTION_ESC://在尖峰平谷分时设置界面下，ESC键按下，保存退出到上一级菜单
            {
                gbEditFlag = STATUS_FALSE;//退出编辑模式  
                sU8TPFVCounter = 0;
                sU8TPFVSetCounter = 0;
                gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_SET_GRID_TIMEDIVEPRICE;
                Display_Set_UnderLine_Blink_Position(STATUS_FALSE,0,0);
            } 
            break;
        case KEYACTION_NULL://无操作刷新主界面数据
        default:
            {
                if(gbEditFlag == STATUS_FALSE)
                {
                    float fPrice = 0.0;
                    if(enum_tpfv == TPFV_TIP)
                    {
                        fPrice = gDisplay.stDisplaySet.stGrid.stTimeDivisionElecPrice.stTipPeriod.u8ElecPrice / 100.0;    
                    }
                    else if(enum_tpfv == TPFV_PEAK)
                    {
                        fPrice = gDisplay.stDisplaySet.stGrid.stTimeDivisionElecPrice.stPeakPeriod.u8ElecPrice / 100.0;    
                    }
                    else if(enum_tpfv == TPFV_FLAT)
                    {
                        fPrice = gDisplay.stDisplaySet.stGrid.stTimeDivisionElecPrice.stFlatPeriod.u8ElecPrice / 100.0;  
                    }
                    else if(enum_tpfv == TPFV_VALLEY)
                    {
                        fPrice = gDisplay.stDisplaySet.stGrid.stTimeDivisionElecPrice.stValleyPeriod.u8ElecPrice / 100.0;   
                    }
                
                    if(fPrice >= DISPLAY_PRICE_MAX_VLAUEE) //不能超过电价范围
                    {
                        fPrice = 99.99;
                    }
                    sprintf(tab_TPFV_Price,"%05.2f",fPrice); 
                }

                gCurrentMenu.eCurrentDisplayMenuType = nowDisplayType;
            } 
            break;
    }
       
    if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_ENGLISH) //系统时间设置界面TimeSystemSet 英文界面组装
    { 
        if(gbEditFlag == STATUS_TRUE)
        {
            if(sU8TPFVTurnCounter == PRICE_TPFV_PERIOD_PRICE)
            {
                Display_Set_UnderLine_Blink_Position(STATUS_TRUE,arrayPriceFlicker[sU8TPFVSetCounter].u8StartPos,arrayPriceFlicker[sU8TPFVSetCounter].u8EndPos);
            }
            updateDisplayGridPriceTPFVSetData_English(sU8TPFVTurnCounter,tab_TPFV_Price_modify,enum_tpfv);
        }
        else 
        {
            updateDisplayGridPriceTPFVSetData_English(sU8TPFVTurnCounter,tab_TPFV_Price,enum_tpfv);  
        }
    }
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_CHINESE) //系统时间设置界面TimeSystemSet 中文界面组装
    {
        if(gbEditFlag == STATUS_TRUE)
        {   
            if(sU8TPFVTurnCounter == PRICE_TPFV_PERIOD_PRICE)
            {
                //Display_Set_UnderLine_Blink_Position(STATUS_TRUE,arrayPriceFlickerChinese[sU8TPFVSetCounter].u8StartPos,arrayPriceFlickerChinese[sU8TPFVSetCounter].u8EndPos);
            }
            updateDisplayGridPriceTPFVSetData_Chinese(sU8TPFVTurnCounter,tab_TPFV_Price_modify,enum_tpfv);
        }
        else 
        {
            updateDisplayGridPriceTPFVSetData_Chinese(sU8TPFVTurnCounter,tab_TPFV_Price,enum_tpfv);  
        }   
    }
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_SPANISH)//系统时间设置界面TimeSystemSet 西班牙界面组装
    { 
        updateDisplayGridPriceTPFVSetData_Spanish(sU8TPFVTurnCounter,tab_TPFV_Price,enum_tpfv); 
    }
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_GERMAN)//系统时间设置界面TimeSystemSet 德语界面组装
    { 
        updateDisplayGridPriceTPFVSetData_German(sU8TPFVTurnCounter,tab_TPFV_Price,enum_tpfv);
    }
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_FRENCH) //系统时间设置界面TimeSystemSet 法语界面组装
    {
        updateDisplayGridPriceTPFVSetData_French(sU8TPFVTurnCounter,tab_TPFV_Price,enum_tpfv);                    
    }
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_POLISH)//系统时间设置界面TimeSystemSet 波兰界面组装 
    {
        updateDisplayGridPriceTPFVSetData_Polish(sU8TPFVTurnCounter,tab_TPFV_Price,enum_tpfv);
    }
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_ITALIAN)//系统时间设置界面TimeSystemSet 意大利界面组装
    {
        updateDisplayGridPriceTPFVSetData_Italian(sU8TPFVTurnCounter,tab_TPFV_Price,enum_tpfv);                    
    }
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_CZECH)//系统时间设置界面TimeSystemSet 捷克界面组装
    { 
        updateDisplayGridPriceTPFVSetData_Czech(sU8TPFVTurnCounter,tab_TPFV_Price,enum_tpfv);                    
    }
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_DUTCH)//系统时间设置界面TimeSystemSet 荷兰界面组装
    {
        updateDisplayGridPriceTPFVSetData_Dutch(sU8TPFVTurnCounter,tab_TPFV_Price,enum_tpfv);                    
    }
    else
    {
        updateDisplayGridPriceTPFVSetData_English(sU8TPFVTurnCounter,tab_TPFV_Price,enum_tpfv);        
    }
}

/***************************************************************************
功能:电网尖峰平谷分时设置 英文界面信息
****************************************************************************/
void updateDisplayGridPriceTPFVSetData_English(uint8_t sU8TPFVSetCounter, char* strPrice,TPFV_TypeDef enum_tpfv)    
{
    memset(tab_display,0,DISPLAY_CACHE_SIZE);
    
    if(enum_tpfv == TPFV_TIP)
    {
        if(sU8TPFVSetCounter == PRICE_TPFV_PERIOD_PRICE)
        {
            sprintf(tab_display,"      Tip Perid 1    \n->Price:%s        \nTime Perid 1         \nTime Perid 2         \n",strPrice);  
        }
        else if(sU8TPFVSetCounter == PRICE_TPFV_PERIOD_ONE)
        {
            sprintf(tab_display,"      Tip Perid 1    \nPrice:%s          \n->Time Perid 1       \nTime Perid 2         \n",strPrice);
        }
        else if(sU8TPFVSetCounter == PRICE_TPFV_PERIOD_TWO)
        {
            sprintf(tab_display,"      Tip Perid 1    \nPrice:%s          \nTime Perid 1         \n->Time Perid 2       \n",strPrice);
        }
        else if(sU8TPFVSetCounter == PRICE_TPFV_PERIOD_THREE)
        {
            sprintf(tab_display,"      Tip Perid 2    \n->Time Perid 3       \n                     \n                     \n");
        }
    }
    else if(enum_tpfv == TPFV_PEAK)
    {
        if(sU8TPFVSetCounter == PRICE_TPFV_PERIOD_PRICE)
        {
            sprintf(tab_display,"     Peak Perid 1    \n->Price:%s        \nTime Perid 1         \nTime Perid 2         \n",strPrice);  
        }
        else if(sU8TPFVSetCounter == PRICE_TPFV_PERIOD_ONE)
        {
            sprintf(tab_display,"     Peak Perid 1    \nPrice:%s          \n->Time Perid 1       \nTime Perid 2         \n",strPrice);
        }
        else if(sU8TPFVSetCounter == PRICE_TPFV_PERIOD_TWO)
        {
            sprintf(tab_display,"     Peak Perid 1    \nPrice:%s          \nTime Perid 1         \n->Time Perid 2       \n",strPrice);
        }
        else if(sU8TPFVSetCounter == PRICE_TPFV_PERIOD_THREE)
        {
            sprintf(tab_display,"     Peak Perid 2    \n->Time Perid 3       \n                     \n                     \n");
        }  
    }
    else if(enum_tpfv == TPFV_FLAT)
    {
        if(sU8TPFVSetCounter == PRICE_TPFV_PERIOD_PRICE)
        {
            sprintf(tab_display,"     Flat Perid 1    \n->Price:%s        \nTime Perid 1         \nTime Perid 2         \n",strPrice);  
        }
        else if(sU8TPFVSetCounter == PRICE_TPFV_PERIOD_ONE)
        {
            sprintf(tab_display,"     Flat Perid 1    \nPrice:%s          \n->Time Perid 1       \nTime Perid 2         \n",strPrice);
        }
        else if(sU8TPFVSetCounter == PRICE_TPFV_PERIOD_TWO)
        {
            sprintf(tab_display,"     Flat Perid 1    \nPrice:%s          \nTime Perid 1         \n->Time Perid 2       \n",strPrice);
        }
        else if(sU8TPFVSetCounter == PRICE_TPFV_PERIOD_THREE)
        {
            sprintf(tab_display,"     Flat Perid 2    \n->Time Perid 3       \n                     \n                     \n");
        } 
    }
    else if(enum_tpfv == TPFV_VALLEY)
    {        
        if(sU8TPFVSetCounter == PRICE_TPFV_PERIOD_PRICE)
        {
            sprintf(tab_display,"    Valley Perid 1   \n->Price:%s        \nTime Perid 1         \nTime Perid 2         \n",strPrice);  
        }
        else if(sU8TPFVSetCounter == PRICE_TPFV_PERIOD_ONE)
        {
            sprintf(tab_display,"    Valley Perid 1   \nPrice:%s          \n->Time Perid 1       \nTime Perid 2         \n",strPrice);
        }
        else if(sU8TPFVSetCounter == PRICE_TPFV_PERIOD_TWO)
        {
            sprintf(tab_display,"    Valley Perid 1   \nPrice:%s          \nTime Perid 1         \n->Time Perid 2       \n",strPrice);
        }
        else if(sU8TPFVSetCounter == PRICE_TPFV_PERIOD_THREE)
        {
            sprintf(tab_display,"    Valley Perid 2   \n->Time Perid 3       \n                     \n                     \n");
        } 
    }  
                         
    //GUI_DispStringAt((uint8_t*)tab_display, 0, 0); 
    GUI_Display(tab_display, 0, 0);
}


/***************************************************************************
 功能:电网尖峰平谷分时设置 西班牙界面信息
****************************************************************************/
void updateDisplayGridPriceTPFVSetData_Spanish(uint8_t sU8BMSSetCounter, char* strPrice,TPFV_TypeDef enum_tpfv)
{
    
}

/***************************************************************************
 功能:电网尖峰平谷分时设置 德语界面信息
****************************************************************************/
void updateDisplayGridPriceTPFVSetData_German(uint8_t sU8BMSSetCounter, char* strPrice,TPFV_TypeDef enum_tpfv)
{
    
}

/***************************************************************************
 功能:电网尖峰平谷分时设置 法语界面信息
****************************************************************************/
void updateDisplayGridPriceTPFVSetData_French(uint8_t sU8BMSSetCounter, char* strPrice,TPFV_TypeDef enum_tpfv)
{
    
}

/***************************************************************************
 功能:电网尖峰平谷分时设置 波兰语界面信息
****************************************************************************/
void updateDisplayGridPriceTPFVSetData_Polish(uint8_t sU8BMSSetCounter, char* strPrice,TPFV_TypeDef enum_tpfv)
{
    
}

/***************************************************************************
 功能:电网尖峰平谷分时设置 意大利语界面信息
****************************************************************************/
void updateDisplayGridPriceTPFVSetData_Italian(uint8_t sU8BMSSetCounter, char* strPrice,TPFV_TypeDef enum_tpfv)
{
    
}

/***************************************************************************
 功能:电网尖峰平谷分时设置 捷克语界面信息
****************************************************************************/
void updateDisplayGridPriceTPFVSetData_Czech(uint8_t sU8BMSSetCounter, char* strPrice,TPFV_TypeDef enum_tpfv)
{
    
}

/***************************************************************************
 功能:电网尖峰平谷分时设置 荷兰语界面信息
****************************************************************************/
void updateDisplayGridPriceTPFVSetData_Dutch(uint8_t sU8BMSSetCounter, char* strPrice,TPFV_TypeDef enum_tpfv)
{
    
}

/***************************************************************************
 功能:根据上一次界面操作类型和本次操作类型判断本次电价设置分时电价起始时间设置 SET界面切换
****************************************************************************/
void updateDisplayGridPriceTPFVTimePeriodSetData(KeyAction_TypeDef nowActionType,DisplayAction_TypeDef nowDisplayType,TPFV_TypeDef enum_tpfv, TPFV_Price_TypeDef enumTPFVPeriod)
{
    static uint8_t sU8TPFVSetCounter = 0;
    static uint8_t sU8TPFVCounter  = 0;
    
    //getRTCTimetoDisplayTime();//从flash读取时间显示到lcd屏
    
    switch(nowActionType) 
    {
        case KEYACTION_ENTER://在分时电价起始时间设置，Enter键按下，在系统设置对应的时间
            {   
                if(gbEditFlag != STATUS_FALSE)
                { 
                    if(enum_tpfv == TPFV_TIP)
                    {
                        if(enumTPFVPeriod == PRICE_TPFV_PERIOD_ONE)
                        {
                            char tabTempTime[3] = {""};
                            
                            tabTempTime[0] = tab_TPFV_Time_Start_modify[0];
                            tabTempTime[1] = tab_TPFV_Time_Start_modify[1];
                            uint16_t u16StartHour = atoi(tabTempTime);
                            gDisplay.stDisplaySet.stGrid.stTimeDivisionElecPrice.stTipPeriod.stPeriod1.u8StartHour = u16StartHour;
                            
                            tabTempTime[0] = tab_TPFV_Time_Start_modify[3];
                            tabTempTime[1] = tab_TPFV_Time_Start_modify[4];
                            uint16_t u16StartMin = atoi(tabTempTime);
                            gDisplay.stDisplaySet.stGrid.stTimeDivisionElecPrice.stTipPeriod.stPeriod1.u8StartMin = u16StartMin;
                            
                            tabTempTime[0] = tab_TPFV_Time_Start_modify[6];
                            tabTempTime[1] = tab_TPFV_Time_Start_modify[7];
                            uint16_t u16StartSec = atoi(tabTempTime);
                            gDisplay.stDisplaySet.stGrid.stTimeDivisionElecPrice.stTipPeriod.stPeriod1.u8StartSec = u16StartSec;
                            
                            tabTempTime[0] = tab_TPFV_Time_End_modify[0];
                            tabTempTime[1] = tab_TPFV_Time_End_modify[1];
                            uint16_t u16EndHour = atoi(tabTempTime);
                            gDisplay.stDisplaySet.stGrid.stTimeDivisionElecPrice.stTipPeriod.stPeriod1.u8EndHour = u16EndHour;
                            
                            tabTempTime[0] = tab_TPFV_Time_End_modify[3];
                            tabTempTime[1] = tab_TPFV_Time_End_modify[4];
                            uint16_t u16EndMin = atoi(tabTempTime);
                            gDisplay.stDisplaySet.stGrid.stTimeDivisionElecPrice.stTipPeriod.stPeriod1.u8EndMin = u16EndMin;
                            
                            tabTempTime[0] = tab_TPFV_Time_End_modify[6];
                            tabTempTime[1] = tab_TPFV_Time_End_modify[7];
                            uint16_t u16EndSec = atoi(tabTempTime);
                            gDisplay.stDisplaySet.stGrid.stTimeDivisionElecPrice.stTipPeriod.stPeriod1.u8EndSec = u16EndSec;
                            generateOperationRecord(RECORD_SET_GRID_TIMEDIVEPRICE_TPFV_TIP_PERIOD_ONE);
                        }
                        else if(enumTPFVPeriod == PRICE_TPFV_PERIOD_TWO)
                        {
                            char tabTempTime[3] = {""};
                            
                            tabTempTime[0] = tab_TPFV_Time_Start_modify[0];
                            tabTempTime[1] = tab_TPFV_Time_Start_modify[1];
                            uint16_t u16StartHour = atoi(tabTempTime); 
                            gDisplay.stDisplaySet.stGrid.stTimeDivisionElecPrice.stTipPeriod.stPeriod2.u8StartHour = u16StartHour;
                            
                            tabTempTime[0] = tab_TPFV_Time_Start_modify[3];
                            tabTempTime[1] = tab_TPFV_Time_Start_modify[4];
                            uint16_t u16StartMin = atoi(tabTempTime);
                            gDisplay.stDisplaySet.stGrid.stTimeDivisionElecPrice.stTipPeriod.stPeriod2.u8StartMin = u16StartMin;
                            
                            tabTempTime[0] = tab_TPFV_Time_Start_modify[6];
                            tabTempTime[1] = tab_TPFV_Time_Start_modify[7];
                            uint16_t u16StartSec = atoi(tabTempTime);
                            gDisplay.stDisplaySet.stGrid.stTimeDivisionElecPrice.stTipPeriod.stPeriod2.u8StartSec = u16StartSec;
                            
                            tabTempTime[0] = tab_TPFV_Time_End_modify[0];
                            tabTempTime[1] = tab_TPFV_Time_End_modify[1];
                            uint16_t u16EndHour = atoi(tabTempTime);
                            gDisplay.stDisplaySet.stGrid.stTimeDivisionElecPrice.stTipPeriod.stPeriod2.u8EndHour = u16EndHour;
                            
                            tabTempTime[0] = tab_TPFV_Time_End_modify[3];
                            tabTempTime[1] = tab_TPFV_Time_End_modify[4];
                            uint16_t u16EndMin = atoi(tabTempTime);
                            gDisplay.stDisplaySet.stGrid.stTimeDivisionElecPrice.stTipPeriod.stPeriod2.u8EndMin = u16EndMin;
                            
                            tabTempTime[0] = tab_TPFV_Time_End_modify[6];
                            tabTempTime[1] = tab_TPFV_Time_End_modify[7];
                            uint16_t u16EndSec = atoi(tabTempTime);
                            gDisplay.stDisplaySet.stGrid.stTimeDivisionElecPrice.stTipPeriod.stPeriod2.u8EndSec = u16EndSec; 
                            generateOperationRecord(RECORD_SET_GRID_TIMEDIVEPRICE_TPFV_TIP_PERIOD_TWO);                      
                        }
                        else if(enumTPFVPeriod == PRICE_TPFV_PERIOD_THREE)
                        {
                            char tabTempTime[3] = {""};
                            
                            tabTempTime[0] = tab_TPFV_Time_Start_modify[0];
                            tabTempTime[1] = tab_TPFV_Time_Start_modify[1];
                            uint16_t u16StartHour = atoi(tabTempTime);
                            gDisplay.stDisplaySet.stGrid.stTimeDivisionElecPrice.stTipPeriod.stPeriod3.u8StartHour = u16StartHour;
                            
                            tabTempTime[0] = tab_TPFV_Time_Start_modify[3];
                            tabTempTime[1] = tab_TPFV_Time_Start_modify[4];
                            uint16_t u16StartMin = atoi(tabTempTime);
                            gDisplay.stDisplaySet.stGrid.stTimeDivisionElecPrice.stTipPeriod.stPeriod3.u8StartMin = u16StartMin;
                            
                            tabTempTime[0] = tab_TPFV_Time_Start_modify[6];
                            tabTempTime[1] = tab_TPFV_Time_Start_modify[7];
                            uint16_t u16StartSec = atoi(tabTempTime);
                            gDisplay.stDisplaySet.stGrid.stTimeDivisionElecPrice.stTipPeriod.stPeriod3.u8StartSec = u16StartSec;
                            
                            tabTempTime[0] = tab_TPFV_Time_End_modify[0];
                            tabTempTime[1] = tab_TPFV_Time_End_modify[1];
                            uint16_t u16EndHour = atoi(tabTempTime);
                            gDisplay.stDisplaySet.stGrid.stTimeDivisionElecPrice.stTipPeriod.stPeriod3.u8EndHour = u16EndHour;
                            
                            tabTempTime[0] = tab_TPFV_Time_End_modify[3];
                            tabTempTime[1] = tab_TPFV_Time_End_modify[4];
                            uint16_t u16EndMin = atoi(tabTempTime);
                            gDisplay.stDisplaySet.stGrid.stTimeDivisionElecPrice.stTipPeriod.stPeriod3.u8EndMin = u16EndMin;
                            
                            tabTempTime[0] = tab_TPFV_Time_End_modify[6];
                            tabTempTime[1] = tab_TPFV_Time_End_modify[7];
                            uint16_t u16EndSec = atoi(tabTempTime);
                            gDisplay.stDisplaySet.stGrid.stTimeDivisionElecPrice.stTipPeriod.stPeriod3.u8EndSec = u16EndSec;
                            generateOperationRecord(RECORD_SET_GRID_TIMEDIVEPRICE_TPFV_TIP_PERIOD_THREE);                       
                        } 
                    }
                    else if(enum_tpfv == TPFV_PEAK)
                    {
                        if(enumTPFVPeriod == PRICE_TPFV_PERIOD_ONE)
                        {
                            char tabTempTime[3] = {""};
                            
                            tabTempTime[0] = tab_TPFV_Time_Start_modify[0];
                            tabTempTime[1] = tab_TPFV_Time_Start_modify[1];
                            uint16_t u16StartHour = atoi(tabTempTime); 
                            gDisplay.stDisplaySet.stGrid.stTimeDivisionElecPrice.stPeakPeriod.stPeriod1.u8StartHour = u16StartHour;
                            
                            tabTempTime[0] = tab_TPFV_Time_Start_modify[3];
                            tabTempTime[1] = tab_TPFV_Time_Start_modify[4];
                            uint16_t u16StartMin = atoi(tabTempTime); 
                            gDisplay.stDisplaySet.stGrid.stTimeDivisionElecPrice.stPeakPeriod.stPeriod1.u8StartMin = u16StartMin;
                            
                            tabTempTime[0] = tab_TPFV_Time_Start_modify[6];
                            tabTempTime[1] = tab_TPFV_Time_Start_modify[7];
                            uint16_t u16StartSec = atoi(tabTempTime); 
                            gDisplay.stDisplaySet.stGrid.stTimeDivisionElecPrice.stPeakPeriod.stPeriod1.u8StartSec = u16StartSec;
                            
                            tabTempTime[0] = tab_TPFV_Time_End_modify[0];
                            tabTempTime[1] = tab_TPFV_Time_End_modify[1];
                            uint16_t u16EndHour = atoi(tabTempTime); 
                            gDisplay.stDisplaySet.stGrid.stTimeDivisionElecPrice.stPeakPeriod.stPeriod1.u8EndHour = u16EndHour;
                            
                            tabTempTime[0] = tab_TPFV_Time_End_modify[3];
                            tabTempTime[1] = tab_TPFV_Time_End_modify[4];
                            uint16_t u16EndMin = atoi(tabTempTime); 
                            gDisplay.stDisplaySet.stGrid.stTimeDivisionElecPrice.stPeakPeriod.stPeriod1.u8EndMin = u16EndMin;
                            
                            tabTempTime[0] = tab_TPFV_Time_End_modify[6];
                            tabTempTime[1] = tab_TPFV_Time_End_modify[7];
                            uint16_t u16EndSec = atoi(tabTempTime); 
                            gDisplay.stDisplaySet.stGrid.stTimeDivisionElecPrice.stPeakPeriod.stPeriod1.u8EndSec = u16EndSec;
                            generateOperationRecord(RECORD_SET_GRID_TIMEDIVEPRICE_TPFV_PEAK_PERIOD_ONE);
                        }
                        else if(enumTPFVPeriod == PRICE_TPFV_PERIOD_TWO)
                        {
                            char tabTempTime[3] = {""};
                            
                            tabTempTime[0] = tab_TPFV_Time_Start_modify[0];
                            tabTempTime[1] = tab_TPFV_Time_Start_modify[1];
                            uint16_t u16StartHour = atoi(tabTempTime); 
                            gDisplay.stDisplaySet.stGrid.stTimeDivisionElecPrice.stPeakPeriod.stPeriod2.u8StartHour = u16StartHour;
                            
                            tabTempTime[0] = tab_TPFV_Time_Start_modify[3];
                            tabTempTime[1] = tab_TPFV_Time_Start_modify[4];
                            uint16_t u16StartMin = atoi(tabTempTime); 
                            gDisplay.stDisplaySet.stGrid.stTimeDivisionElecPrice.stPeakPeriod.stPeriod2.u8StartMin = u16StartMin;
                            
                            tabTempTime[0] = tab_TPFV_Time_Start_modify[6];
                            tabTempTime[1] = tab_TPFV_Time_Start_modify[7];
                            uint16_t u16StartSec = atoi(tabTempTime); 
                            gDisplay.stDisplaySet.stGrid.stTimeDivisionElecPrice.stPeakPeriod.stPeriod2.u8StartSec = u16StartSec;
                            
                            tabTempTime[0] = tab_TPFV_Time_End_modify[0];
                            tabTempTime[1] = tab_TPFV_Time_End_modify[1];
                            uint16_t u16EndHour = atoi(tabTempTime); 
                            gDisplay.stDisplaySet.stGrid.stTimeDivisionElecPrice.stPeakPeriod.stPeriod2.u8EndHour = u16EndHour;
                            
                            tabTempTime[0] = tab_TPFV_Time_End_modify[3];
                            tabTempTime[1] = tab_TPFV_Time_End_modify[4];
                            uint16_t u16EndMin = atoi(tabTempTime); 
                            gDisplay.stDisplaySet.stGrid.stTimeDivisionElecPrice.stPeakPeriod.stPeriod2.u8EndMin = u16EndMin;
                            
                            tabTempTime[0] = tab_TPFV_Time_End_modify[6];
                            tabTempTime[1] = tab_TPFV_Time_End_modify[7];
                            uint16_t u16EndSec = atoi(tabTempTime); 
                            gDisplay.stDisplaySet.stGrid.stTimeDivisionElecPrice.stPeakPeriod.stPeriod2.u8EndSec = u16EndSec; 
                            generateOperationRecord(RECORD_SET_GRID_TIMEDIVEPRICE_TPFV_PEAK_PERIOD_TWO);                      
                        }
                        else if(enumTPFVPeriod == PRICE_TPFV_PERIOD_THREE)
                        {
                            char tabTempTime[3] = {""};
                            
                            tabTempTime[0] = tab_TPFV_Time_Start_modify[0];
                            tabTempTime[1] = tab_TPFV_Time_Start_modify[1];
                            uint16_t u16StartHour = atoi(tabTempTime);
                            gDisplay.stDisplaySet.stGrid.stTimeDivisionElecPrice.stPeakPeriod.stPeriod3.u8StartHour = u16StartHour;
                            
                            tabTempTime[0] = tab_TPFV_Time_Start_modify[3];
                            tabTempTime[1] = tab_TPFV_Time_Start_modify[4];
                            uint16_t u16StartMin = atoi(tabTempTime);
                            gDisplay.stDisplaySet.stGrid.stTimeDivisionElecPrice.stPeakPeriod.stPeriod3.u8StartMin = u16StartMin;
                            
                            tabTempTime[0] = tab_TPFV_Time_Start_modify[6];
                            tabTempTime[1] = tab_TPFV_Time_Start_modify[7];
                            uint16_t u16StartSec = atoi(tabTempTime);
                            gDisplay.stDisplaySet.stGrid.stTimeDivisionElecPrice.stPeakPeriod.stPeriod3.u8StartSec = u16StartSec;
                            
                            tabTempTime[0] = tab_TPFV_Time_End_modify[0];
                            tabTempTime[1] = tab_TPFV_Time_End_modify[1];
                            uint16_t u16EndHour = atoi(tabTempTime);
                            gDisplay.stDisplaySet.stGrid.stTimeDivisionElecPrice.stPeakPeriod.stPeriod3.u8EndHour = u16EndHour;
                            
                            tabTempTime[0] = tab_TPFV_Time_End_modify[3];
                            tabTempTime[1] = tab_TPFV_Time_End_modify[4];
                            uint16_t u16EndMin = atoi(tabTempTime);
                            gDisplay.stDisplaySet.stGrid.stTimeDivisionElecPrice.stPeakPeriod.stPeriod3.u8EndMin = u16EndMin;
                            
                            tabTempTime[0] = tab_TPFV_Time_End_modify[6];
                            tabTempTime[1] = tab_TPFV_Time_End_modify[7];
                            uint16_t u16EndSec = atoi(tabTempTime);
                            gDisplay.stDisplaySet.stGrid.stTimeDivisionElecPrice.stPeakPeriod.stPeriod3.u8EndSec = u16EndSec;
                            generateOperationRecord(RECORD_SET_GRID_TIMEDIVEPRICE_TPFV_PEAK_PERIOD_THREE);                       
                        }  
                    }
                    else if(enum_tpfv == TPFV_FLAT)
                    {
                        if(enumTPFVPeriod == PRICE_TPFV_PERIOD_ONE)
                        {
                            char tabTempTime[3] = {""};
                            
                            tabTempTime[0] = tab_TPFV_Time_Start_modify[0];
                            tabTempTime[1] = tab_TPFV_Time_Start_modify[1];
                            uint16_t u16StartHour = atoi(tabTempTime);
                            gDisplay.stDisplaySet.stGrid.stTimeDivisionElecPrice.stFlatPeriod.stPeriod1.u8StartHour = u16StartHour;
                            
                            tabTempTime[0] = tab_TPFV_Time_Start_modify[3];
                            tabTempTime[1] = tab_TPFV_Time_Start_modify[4];
                            uint16_t u16StartMin = atoi(tabTempTime);
                            gDisplay.stDisplaySet.stGrid.stTimeDivisionElecPrice.stFlatPeriod.stPeriod1.u8StartMin = u16StartMin;
                            
                            tabTempTime[0] = tab_TPFV_Time_Start_modify[6];
                            tabTempTime[1] = tab_TPFV_Time_Start_modify[7];
                            uint16_t u16StartSec = atoi(tabTempTime);
                            gDisplay.stDisplaySet.stGrid.stTimeDivisionElecPrice.stFlatPeriod.stPeriod1.u8StartSec = u16StartSec;
                            
                            tabTempTime[0] = tab_TPFV_Time_End_modify[0];
                            tabTempTime[1] = tab_TPFV_Time_End_modify[1];
                            uint16_t u16EndHour = atoi(tabTempTime);
                            gDisplay.stDisplaySet.stGrid.stTimeDivisionElecPrice.stFlatPeriod.stPeriod1.u8EndHour = u16EndHour;
                            
                            tabTempTime[0] = tab_TPFV_Time_End_modify[3];
                            tabTempTime[1] = tab_TPFV_Time_End_modify[4];
                            uint16_t u16EndMin = atoi(tabTempTime);
                            gDisplay.stDisplaySet.stGrid.stTimeDivisionElecPrice.stFlatPeriod.stPeriod1.u8EndMin = u16EndMin;
                            
                            tabTempTime[0] = tab_TPFV_Time_End_modify[6];
                            tabTempTime[1] = tab_TPFV_Time_End_modify[7];
                            uint16_t u16EndSec = atoi(tabTempTime);
                            gDisplay.stDisplaySet.stGrid.stTimeDivisionElecPrice.stFlatPeriod.stPeriod1.u8EndSec = u16EndSec;
                            generateOperationRecord(RECORD_SET_GRID_TIMEDIVEPRICE_TPFV_FLAT_PERIOD_ONE);
                        }
                        else if(enumTPFVPeriod == PRICE_TPFV_PERIOD_TWO)
                        {
                            char tabTempTime[3] = {""};
                            
                            tabTempTime[0] = tab_TPFV_Time_Start_modify[0];
                            tabTempTime[1] = tab_TPFV_Time_Start_modify[1];
                            uint16_t u16StartHour = atoi(tabTempTime);
                            gDisplay.stDisplaySet.stGrid.stTimeDivisionElecPrice.stFlatPeriod.stPeriod2.u8StartHour = u16StartHour;
                            
                            tabTempTime[0] = tab_TPFV_Time_Start_modify[3];
                            tabTempTime[1] = tab_TPFV_Time_Start_modify[4];
                            uint16_t u16StartMin = atoi(tabTempTime);
                            gDisplay.stDisplaySet.stGrid.stTimeDivisionElecPrice.stFlatPeriod.stPeriod2.u8StartMin = u16StartMin;
                            
                            tabTempTime[0] = tab_TPFV_Time_Start_modify[6];
                            tabTempTime[1] = tab_TPFV_Time_Start_modify[7];
                            uint16_t u16StartSec = atoi(tabTempTime);
                            gDisplay.stDisplaySet.stGrid.stTimeDivisionElecPrice.stFlatPeriod.stPeriod2.u8StartSec = u16StartSec;
                            
                            tabTempTime[0] = tab_TPFV_Time_End_modify[0];
                            tabTempTime[1] = tab_TPFV_Time_End_modify[1];
                            uint16_t u16EndHour = atoi(tabTempTime);
                            gDisplay.stDisplaySet.stGrid.stTimeDivisionElecPrice.stFlatPeriod.stPeriod2.u8EndHour = u16EndHour;
                            
                            tabTempTime[0] = tab_TPFV_Time_End_modify[3];
                            tabTempTime[1] = tab_TPFV_Time_End_modify[4];
                            uint16_t u16EndMin = atoi(tabTempTime);
                            gDisplay.stDisplaySet.stGrid.stTimeDivisionElecPrice.stFlatPeriod.stPeriod2.u8EndMin = u16EndMin;
                            
                            tabTempTime[0] = tab_TPFV_Time_End_modify[6];
                            tabTempTime[1] = tab_TPFV_Time_End_modify[7];
                            uint16_t u16EndSec = atoi(tabTempTime);
                            gDisplay.stDisplaySet.stGrid.stTimeDivisionElecPrice.stFlatPeriod.stPeriod2.u8EndSec = u16EndSec;
                            generateOperationRecord(RECORD_SET_GRID_TIMEDIVEPRICE_TPFV_FLAT_PERIOD_TWO);                       
                        }
                        else if(enumTPFVPeriod == PRICE_TPFV_PERIOD_THREE)
                        {
                            char tabTempTime[3] = {""};
                            
                            tabTempTime[0] = tab_TPFV_Time_Start_modify[0];
                            tabTempTime[1] = tab_TPFV_Time_Start_modify[1];
                            uint16_t u16StartHour = atoi(tabTempTime);
                            gDisplay.stDisplaySet.stGrid.stTimeDivisionElecPrice.stFlatPeriod.stPeriod3.u8StartHour = u16StartHour;
                            
                            tabTempTime[0] = tab_TPFV_Time_Start_modify[3];
                            tabTempTime[1] = tab_TPFV_Time_Start_modify[4];
                            uint16_t u16StartMin = atoi(tabTempTime);
                            gDisplay.stDisplaySet.stGrid.stTimeDivisionElecPrice.stFlatPeriod.stPeriod3.u8StartMin = u16StartMin;
                            
                            tabTempTime[0] = tab_TPFV_Time_Start_modify[6];
                            tabTempTime[1] = tab_TPFV_Time_Start_modify[7];
                            uint16_t u16StartSec = atoi(tabTempTime);
                            gDisplay.stDisplaySet.stGrid.stTimeDivisionElecPrice.stFlatPeriod.stPeriod3.u8StartSec = u16StartSec;
                            
                            tabTempTime[0] = tab_TPFV_Time_End_modify[0];
                            tabTempTime[1] = tab_TPFV_Time_End_modify[1];
                            uint16_t u16EndHour = atoi(tabTempTime);
                            gDisplay.stDisplaySet.stGrid.stTimeDivisionElecPrice.stFlatPeriod.stPeriod3.u8EndHour = u16EndHour;
                            
                            tabTempTime[0] = tab_TPFV_Time_End_modify[3];
                            tabTempTime[1] = tab_TPFV_Time_End_modify[4];
                            uint16_t u16EndMin = atoi(tabTempTime);
                            gDisplay.stDisplaySet.stGrid.stTimeDivisionElecPrice.stFlatPeriod.stPeriod3.u8EndMin = u16EndMin;
                            
                            tabTempTime[0] = tab_TPFV_Time_End_modify[6];
                            tabTempTime[1] = tab_TPFV_Time_End_modify[7];
                            uint16_t u16EndSec = atoi(tabTempTime);
                            gDisplay.stDisplaySet.stGrid.stTimeDivisionElecPrice.stFlatPeriod.stPeriod3.u8EndSec = u16EndSec;
                            generateOperationRecord(RECORD_SET_GRID_TIMEDIVEPRICE_TPFV_FLAT_PERIOD_THREE);                       
                        }
                    }
                    else if(enum_tpfv == TPFV_VALLEY)
                    {
                        if(enumTPFVPeriod == PRICE_TPFV_PERIOD_ONE)
                        {
                            char tabTempTime[3] = {""};
                            
                            tabTempTime[0] = tab_TPFV_Time_Start_modify[0];
                            tabTempTime[1] = tab_TPFV_Time_Start_modify[1];
                            uint16_t u16StartHour = atoi(tabTempTime); 
                            gDisplay.stDisplaySet.stGrid.stTimeDivisionElecPrice.stValleyPeriod.stPeriod1.u8StartHour = u16StartHour;
                            
                            tabTempTime[0] = tab_TPFV_Time_Start_modify[3];
                            tabTempTime[1] = tab_TPFV_Time_Start_modify[4];
                            uint16_t u16StartMin = atoi(tabTempTime); 
                            gDisplay.stDisplaySet.stGrid.stTimeDivisionElecPrice.stValleyPeriod.stPeriod1.u8StartMin = u16StartMin;
                            
                            tabTempTime[0] = tab_TPFV_Time_Start_modify[6];
                            tabTempTime[1] = tab_TPFV_Time_Start_modify[7];
                            uint16_t u16StartSec = atoi(tabTempTime); 
                            gDisplay.stDisplaySet.stGrid.stTimeDivisionElecPrice.stValleyPeriod.stPeriod1.u8StartSec = u16StartSec;
                            
                            tabTempTime[0] = tab_TPFV_Time_End_modify[0];
                            tabTempTime[1] = tab_TPFV_Time_End_modify[1];
                            uint16_t u16EndHour = atoi(tabTempTime); 
                            gDisplay.stDisplaySet.stGrid.stTimeDivisionElecPrice.stValleyPeriod.stPeriod1.u8EndHour = u16EndHour;
                            
                            tabTempTime[0] = tab_TPFV_Time_End_modify[3];
                            tabTempTime[1] = tab_TPFV_Time_End_modify[4];
                            uint16_t u16EndMin = atoi(tabTempTime); 
                            gDisplay.stDisplaySet.stGrid.stTimeDivisionElecPrice.stValleyPeriod.stPeriod1.u8EndMin = u16EndMin;
                            
                            tabTempTime[0] = tab_TPFV_Time_End_modify[6];
                            tabTempTime[1] = tab_TPFV_Time_End_modify[7];
                            uint16_t u16EndSec = atoi(tabTempTime); 
                            gDisplay.stDisplaySet.stGrid.stTimeDivisionElecPrice.stValleyPeriod.stPeriod1.u8EndSec = u16EndSec;
                            generateOperationRecord(RECORD_SET_GRID_TIMEDIVEPRICE_TPFV_VALLEY_PERIOD_ONE);
                        }
                        else if(enumTPFVPeriod == PRICE_TPFV_PERIOD_TWO)
                        {
                            char tabTempTime[3] = {""};
                            
                            tabTempTime[0] = tab_TPFV_Time_Start_modify[0];
                            tabTempTime[1] = tab_TPFV_Time_Start_modify[1];
                            uint16_t u16StartHour = atoi(tabTempTime); 
                            gDisplay.stDisplaySet.stGrid.stTimeDivisionElecPrice.stValleyPeriod.stPeriod2.u8StartHour = u16StartHour;
                            
                            tabTempTime[0] = tab_TPFV_Time_Start_modify[3];
                            tabTempTime[1] = tab_TPFV_Time_Start_modify[4];
                            uint16_t u16StartMin = atoi(tabTempTime); 
                            gDisplay.stDisplaySet.stGrid.stTimeDivisionElecPrice.stValleyPeriod.stPeriod2.u8StartMin = u16StartMin;
                            
                            tabTempTime[0] = tab_TPFV_Time_Start_modify[6];
                            tabTempTime[1] = tab_TPFV_Time_Start_modify[7];
                            uint16_t u16StartSec = atoi(tabTempTime); 
                            gDisplay.stDisplaySet.stGrid.stTimeDivisionElecPrice.stValleyPeriod.stPeriod2.u8StartSec = u16StartSec;
                            
                            tabTempTime[0] = tab_TPFV_Time_End_modify[0];
                            tabTempTime[1] = tab_TPFV_Time_End_modify[1];
                            uint16_t u16EndHour = atoi(tabTempTime); 
                            gDisplay.stDisplaySet.stGrid.stTimeDivisionElecPrice.stValleyPeriod.stPeriod2.u8EndHour = u16EndHour;
                            
                            tabTempTime[0] = tab_TPFV_Time_End_modify[3];
                            tabTempTime[1] = tab_TPFV_Time_End_modify[4];
                            uint16_t u16EndMin = atoi(tabTempTime); 
                            gDisplay.stDisplaySet.stGrid.stTimeDivisionElecPrice.stValleyPeriod.stPeriod2.u8EndMin = u16EndMin;
                            
                            tabTempTime[0] = tab_TPFV_Time_End_modify[6];
                            tabTempTime[1] = tab_TPFV_Time_End_modify[7];
                            uint16_t u16EndSec = atoi(tabTempTime); 
                            gDisplay.stDisplaySet.stGrid.stTimeDivisionElecPrice.stValleyPeriod.stPeriod2.u8EndSec = u16EndSec;
                            generateOperationRecord(RECORD_SET_GRID_TIMEDIVEPRICE_TPFV_VALLEY_PERIOD_TWO);                       
                        }
                        else if(enumTPFVPeriod == PRICE_TPFV_PERIOD_THREE)
                        {
                            char tabTempTime[3] = {""};
                            
                            tabTempTime[0] = tab_TPFV_Time_Start_modify[0];
                            tabTempTime[1] = tab_TPFV_Time_Start_modify[1];
                            uint16_t u16StartHour = atoi(tabTempTime); 
                            gDisplay.stDisplaySet.stGrid.stTimeDivisionElecPrice.stValleyPeriod.stPeriod3.u8StartHour = u16StartHour;
                            
                            tabTempTime[0] = tab_TPFV_Time_Start_modify[3];
                            tabTempTime[1] = tab_TPFV_Time_Start_modify[4];
                            uint16_t u16StartMin = atoi(tabTempTime); 
                            gDisplay.stDisplaySet.stGrid.stTimeDivisionElecPrice.stValleyPeriod.stPeriod3.u8StartMin = u16StartMin;
                            
                            tabTempTime[0] = tab_TPFV_Time_Start_modify[6];
                            tabTempTime[1] = tab_TPFV_Time_Start_modify[7];
                            uint16_t u16StartSec = atoi(tabTempTime); 
                            gDisplay.stDisplaySet.stGrid.stTimeDivisionElecPrice.stValleyPeriod.stPeriod3.u8StartSec = u16StartSec;
                            
                            tabTempTime[0] = tab_TPFV_Time_End_modify[0];
                            tabTempTime[1] = tab_TPFV_Time_End_modify[1];
                            uint16_t u16EndHour = atoi(tabTempTime); 
                            gDisplay.stDisplaySet.stGrid.stTimeDivisionElecPrice.stValleyPeriod.stPeriod3.u8EndHour = u16EndHour;
                            
                            tabTempTime[0] = tab_TPFV_Time_End_modify[3];
                            tabTempTime[1] = tab_TPFV_Time_End_modify[4];
                            uint16_t u16EndMin = atoi(tabTempTime); 
                            gDisplay.stDisplaySet.stGrid.stTimeDivisionElecPrice.stValleyPeriod.stPeriod3.u8EndMin = u16EndMin;
                            
                            tabTempTime[0] = tab_TPFV_Time_End_modify[6];
                            tabTempTime[1] = tab_TPFV_Time_End_modify[7];
                            uint16_t u16EndSec = atoi(tabTempTime); 
                            gDisplay.stDisplaySet.stGrid.stTimeDivisionElecPrice.stValleyPeriod.stPeriod3.u8EndSec = u16EndSec;
                            generateOperationRecord(RECORD_SET_GRID_TIMEDIVEPRICE_TPFV_VALLEY_PERIOD_THREE);                       
                        }
                    }
                    
                    gbEditFlag = STATUS_FALSE;//退出编辑模式
                    sprintf(tab_TPFV_Time_Start,"%s",tab_TPFV_Time_Start_modify);
                    sprintf(tab_TPFV_Time_End,"%s",tab_TPFV_Time_End_modify);
                    sU8TPFVSetCounter = 0;
                    sU8TPFVCounter = 0;
                    Display_Set_UnderLine_Blink_Position(STATUS_FALSE,0,0);
                }
            }
            break; 
        case KEYACTION_DOWN://在分时电价起始时间设置，UP键按下，选择对应的设置项
            {
                if(gbEditFlag != STATUS_TRUE)
                {
                    gbEditFlag = STATUS_TRUE; 
                    sprintf(tab_TPFV_Time_Start_modify,"%s",tab_TPFV_Time_Start);
                    sprintf(tab_TPFV_Time_End_modify,"%s",tab_TPFV_Time_End);                    
                }
                
                sU8TPFVCounter++;
                
                if(sU8TPFVSetCounter == 0) //分时电价起始时间的第一个数字
                {
                    if(sU8TPFVCounter <= 2)
                    {
                       tab_TPFV_Time_Start_modify[0] =  '0' + sU8TPFVCounter;
                    }
                    else
                    {
                       sU8TPFVCounter = 0;
                       tab_TPFV_Time_Start_modify[0] = '0';
                    }
                }
                else if(sU8TPFVSetCounter == 1)//分时电价起始时间的第二个数字
                {
                    if(tab_TPFV_Time_Start_modify[0] == '2')
                    {
                        if(sU8TPFVCounter <= 4)
                        {
                            tab_TPFV_Time_Start_modify[1] =  '0' + sU8TPFVCounter;
                        }
                        else
                        {
                            sU8TPFVCounter = 0;
                            tab_TPFV_Time_Start_modify[1] = '0';
                        }
                    }
                    else 
                    {
                        if(sU8TPFVCounter <= 9)
                        {
                            tab_TPFV_Time_Start_modify[1] =  '0' + sU8TPFVCounter;
                        }
                        else
                        {
                            sU8TPFVCounter = 0;
                            tab_TPFV_Time_Start_modify[1] = '0';
                        }
                    }
                }
                else if(sU8TPFVSetCounter == 2)//分时电价起始时间的第三个数字
                {
                    if(sU8TPFVCounter <= 5)
                    {
                       tab_TPFV_Time_Start_modify[3] =  '0' + sU8TPFVCounter;
                    }
                    else
                    {
                       sU8TPFVCounter = 0;
                       tab_TPFV_Time_Start_modify[3] = '0';
                    }
                }
                else if(sU8TPFVSetCounter == 3)//分时电价起始时间的第四个数字
                {
                    if(sU8TPFVCounter <= 9)
                    {
                       tab_TPFV_Time_Start_modify[4] =  '0' + sU8TPFVCounter;
                    }
                    else
                    {
                       sU8TPFVCounter = 0;
                       tab_TPFV_Time_Start_modify[4] = '0';
                    }
                }
                else if(sU8TPFVSetCounter == 4)//分时电价起始时间的第五个数字
                {
                    if(sU8TPFVCounter <= 5)
                    {
                       tab_TPFV_Time_Start_modify[6] =  '0' + sU8TPFVCounter;
                    }
                    else
                    {
                       sU8TPFVCounter = 0;
                       tab_TPFV_Time_Start_modify[6] = '0';
                    }
                }
                else if(sU8TPFVSetCounter == 5)//分时电价起始时间的第六个数字
                {
                    if(sU8TPFVCounter <= 9)
                    {
                       tab_TPFV_Time_Start_modify[7] =  '0' + sU8TPFVCounter;
                    }
                    else
                    {
                       sU8TPFVCounter = 0;
                       tab_TPFV_Time_Start_modify[7] = '0';
                    }
                }
                else if(sU8TPFVSetCounter == 6) //分时电价结束时间的第一个数字
                {
                    if(sU8TPFVCounter <= 2)
                    {
                       tab_TPFV_Time_End_modify[0] =  '0' + sU8TPFVCounter;
                    }
                    else
                    {
                       sU8TPFVCounter = 0;
                       tab_TPFV_Time_End_modify[0] = '0';
                    }
                }
                else if(sU8TPFVSetCounter == 7)//分时电价结束时间的第二个数字
                {                    
                    if(tab_TPFV_Time_End_modify[0] == '2')
                    {
                        if(sU8TPFVCounter <= 4)
                        {
                            tab_TPFV_Time_End_modify[1] =  '0' + sU8TPFVCounter;
                        }
                        else
                        {
                            sU8TPFVCounter = 0;
                            tab_TPFV_Time_End_modify[1] = '0';
                        }
                    }
                    else 
                    {
                        if(sU8TPFVCounter <= 9)
                        {
                            tab_TPFV_Time_End_modify[1] =  '0' + sU8TPFVCounter;
                        }
                        else
                        {
                            sU8TPFVCounter = 0;
                            tab_TPFV_Time_End_modify[1] = '0';
                        }
                    }
                }
                else if(sU8TPFVSetCounter == 8)//分时电价结束时间的第三个数字
                {
                    if(sU8TPFVCounter <= 5)
                    {
                       tab_TPFV_Time_End_modify[3] =  '0' + sU8TPFVCounter;
                    }
                    else
                    {
                       sU8TPFVCounter = 0;
                       tab_TPFV_Time_End_modify[3] = '0';
                    }
                }
                else if(sU8TPFVSetCounter == 9)//分时电价结束时间的第四个数字
                {
                    if(sU8TPFVCounter <= 9)
                    {
                       tab_TPFV_Time_End_modify[4] =  '0' + sU8TPFVCounter;
                    }
                    else
                    {
                       sU8TPFVCounter = 0;
                       tab_TPFV_Time_End_modify[4] = '0';
                    }
                }
                else if(sU8TPFVSetCounter == 10)//分时电价结束时间的第五个数字
                {
                    if(sU8TPFVCounter <= 5)
                    {
                       tab_TPFV_Time_End_modify[6] =  '0' + sU8TPFVCounter;
                    }
                    else
                    {
                       sU8TPFVCounter = 0;
                       tab_TPFV_Time_End_modify[6] = '0';
                    }                    
                }
                else if(sU8TPFVSetCounter == 11)//分时电价结束时间的第六个数字
                {
                    if(sU8TPFVCounter <= 9)
                    {
                       tab_TPFV_Time_End_modify[7] =  '0' + sU8TPFVCounter;
                    }
                    else
                    {
                       sU8TPFVCounter = 0;
                       tab_TPFV_Time_End_modify[7] = '0';
                    }
                }
                
                gCurrentMenu.eCurrentDisplayMenuType = nowDisplayType;   
            }
            break;
        case KEYACTION_UP://在分时电价起始时间设置，DOWN键按下，选择对应的设置项
            {
                if(gbEditFlag != STATUS_TRUE)
                {
                    gbEditFlag = STATUS_TRUE;  
                    sprintf(tab_TPFV_Time_Start_modify,"%s",tab_TPFV_Time_Start);
                    sprintf(tab_TPFV_Time_End_modify,"%s",tab_TPFV_Time_End);
                }
                
                sU8TPFVCounter--;
                
                if(sU8TPFVSetCounter == 0) //分时电价起始时间的第一个数字
                {
                    if(!(sU8TPFVCounter <= 2))
                    {
                       sU8TPFVCounter = 2;
                       tab_TPFV_Time_Start_modify[0] = '0';
                    }
                    tab_TPFV_Time_Start_modify[0] =  '0' + sU8TPFVCounter;
                }
                else if(sU8TPFVSetCounter == 1) //分时电价起始时间的第二个数字
                { 
                    if(tab_TPFV_Time_Start_modify[0] == '2')
                    {
                        if(!(sU8TPFVCounter <= 4))
                        {
                            sU8TPFVCounter = 4;
                            tab_TPFV_Time_Start_modify[1] = '0';
                        }
                        tab_TPFV_Time_Start_modify[1] =  '0' + sU8TPFVCounter;    
                    }
                    else
                    {
                        if(!(sU8TPFVCounter <= 9))
                        {
                            sU8TPFVCounter = 9;
                            tab_TPFV_Time_Start_modify[1] = '0';
                        }
                        tab_TPFV_Time_Start_modify[1] =  '0' + sU8TPFVCounter;
                    }
                }
                else if(sU8TPFVSetCounter == 2) //分时电价起始时间的第三个数字
                {
                    if(!(sU8TPFVCounter <= 5))
                    {
                       sU8TPFVCounter = 5;
                       tab_TPFV_Time_Start_modify[3] = '0';
                    }
                    tab_TPFV_Time_Start_modify[3] =  '0' + sU8TPFVCounter;
                }
                else if(sU8TPFVSetCounter == 3) //分时电价起始时间的第四个数字
                {
                    if(!(sU8TPFVCounter <= 9))
                    {
                       sU8TPFVCounter = 9;
                       tab_TPFV_Time_Start_modify[4] = '0';
                    }
                    tab_TPFV_Time_Start_modify[4] =  '0' + sU8TPFVCounter;
                }
                else if(sU8TPFVSetCounter == 4) //分时电价起始时间的第五个数字
                {
                    if(!(sU8TPFVCounter <= 5))
                    {
                       sU8TPFVCounter = 5;
                       tab_TPFV_Time_Start_modify[6] = '0';
                    }
                    tab_TPFV_Time_Start_modify[6] =  '0' + sU8TPFVCounter;
                }
                else if(sU8TPFVSetCounter == 5) //分时电价起始时间的第六个数字
                {
                    if(!(sU8TPFVCounter <= 9))
                    {
                       sU8TPFVCounter = 9;
                       tab_TPFV_Time_Start_modify[7] = '0';
                    }
                    tab_TPFV_Time_Start_modify[7] =  '0' + sU8TPFVCounter;
                }
                else if(sU8TPFVSetCounter == 6) //分时电价结束时间的第一个数字
                {
                    if(!(sU8TPFVCounter <= 2))
                    {
                       sU8TPFVCounter = 2;
                       tab_TPFV_Time_End_modify[0] = '0';
                    }
                    tab_TPFV_Time_End_modify[0] =  '0' + sU8TPFVCounter;
                }
                else if(sU8TPFVSetCounter == 7) //分时电价起始时间的第二个数字
                { 
                    if(tab_TPFV_Time_End_modify[0] == '2')
                    {
                        if(!(sU8TPFVCounter <= 4))
                        {
                            sU8TPFVCounter = 4;
                            tab_TPFV_Time_End_modify[1] = '0';
                        }
                        tab_TPFV_Time_End_modify[1] =  '0' + sU8TPFVCounter;
                    }
                    else
                    {
                        if(!(sU8TPFVCounter <= 9))
                        {
                            sU8TPFVCounter = 9;
                            tab_TPFV_Time_End_modify[1] = '0';
                        }
                        tab_TPFV_Time_End_modify[1] =  '0' + sU8TPFVCounter;
                    }
                }
                else if(sU8TPFVSetCounter == 8) //分时电价结束时间的第三个数字
                {
                    if(!(sU8TPFVCounter <= 5))
                    {
                       sU8TPFVCounter = 5;
                       tab_TPFV_Time_End_modify[3] = '0';
                    }
                    tab_TPFV_Time_End_modify[3] =  '0' + sU8TPFVCounter;
                }
                else if(sU8TPFVSetCounter == 9) //分时电价结束时间的第四个数字
                { 
                    if(!(sU8TPFVCounter <= 9))
                    {
                       sU8TPFVCounter = 9;
                       tab_TPFV_Time_End_modify[4] = '0';
                    }
                    tab_TPFV_Time_End_modify[4] =  '0' + sU8TPFVCounter;
                }
                else if(sU8TPFVSetCounter == 10) //分时电价结束时间的第五个数字
                {
                    if(!(sU8TPFVCounter<=5))
                    {
                       sU8TPFVCounter = 5;
                       tab_TPFV_Time_End_modify[6] = '0';
                    }
                    tab_TPFV_Time_End_modify[6] =  '0' + sU8TPFVCounter;
                }
                else if(sU8TPFVSetCounter == 11) //分时电价结束时间的第六个数字
                {
                    if(!(sU8TPFVCounter <= 9))
                    {
                       sU8TPFVCounter = 9;
                       tab_TPFV_Time_End_modify[7] = '0';
                    }
                    tab_TPFV_Time_End_modify[7] =  '0' + sU8TPFVCounter;
                }
                gCurrentMenu.eCurrentDisplayMenuType = nowDisplayType;
            }
            break;
        case KEYACTION_UPDOWN://在分时电价起始时间设置，UP键 + DOWN键同时按下，切换设置下一个数据
            {
                sU8TPFVSetCounter++;
                sU8TPFVCounter = 0;
                if(sU8TPFVSetCounter == DISPLAY_SET_TPFV_TIME_ITEM_COUNT)
                {
                    sU8TPFVSetCounter = 0;
                }
                gCurrentMenu.eCurrentDisplayMenuType = nowDisplayType;
            }
            break;
        case KEYACTION_ESC://在分时电价起始时间设置，ESC键按下，保存退出到上一级菜单
            {   
                gbEditFlag = STATUS_FALSE;//退出编辑模式  
                sU8TPFVCounter  = 0; //
                sU8TPFVSetCounter = 0;
                
                if(enum_tpfv == TPFV_TIP)
                {
                   gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_SET_GRID_TIMEDIVEPRICE_TPFV_TIP; 
                }
                else if(enum_tpfv == TPFV_PEAK)
                {
                   gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_SET_GRID_TIMEDIVEPRICE_TPFV_PEAK; 
                }
                else if(enum_tpfv == TPFV_FLAT)
                {
                   gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_SET_GRID_TIMEDIVEPRICE_TPFV_FLAT;
                }
                else if(enum_tpfv == TPFV_VALLEY)
                {
                   gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_SET_GRID_TIMEDIVEPRICE_TPFV_VALLEY; 
                }
                Display_Set_UnderLine_Blink_Position(STATUS_FALSE,0,0);
            } 
            break;
        case KEYACTION_NULL://无操作刷新主界面数据
        default:
            {
                gCurrentMenu.eCurrentDisplayMenuType = nowDisplayType;
                if(gbEditFlag == STATUS_FALSE)
                {
                    if(enum_tpfv == TPFV_TIP)
                    {
                        if(enumTPFVPeriod == PRICE_TPFV_PERIOD_ONE)
                        {  
                            char tab_time_Hour_Start[3] = {0}; 
                            sprintf(tab_time_Hour_Start,"%02d",gDisplay.stDisplaySet.stGrid.stTimeDivisionElecPrice.stTipPeriod.stPeriod1.u8StartHour);
                            tab_TPFV_Time_Start_modify[0] = tab_time_Hour_Start[0];
                            tab_TPFV_Time_Start_modify[1] = tab_time_Hour_Start[1];
                            
                            char tab_time_Min_Start[3] = {0}; 
                            sprintf(tab_time_Min_Start,"%02d",gDisplay.stDisplaySet.stGrid.stTimeDivisionElecPrice.stTipPeriod.stPeriod1.u8StartMin);
                            tab_TPFV_Time_Start_modify[3] = tab_time_Min_Start[0];
                            tab_TPFV_Time_Start_modify[4] = tab_time_Min_Start[1];
                            
                            char tab_time_Sec_Start[3] = {0}; 
                            sprintf(tab_time_Sec_Start,"%02d",gDisplay.stDisplaySet.stGrid.stTimeDivisionElecPrice.stTipPeriod.stPeriod1.u8StartSec);
                            tab_TPFV_Time_Start_modify[6] = tab_time_Sec_Start[0];
                            tab_TPFV_Time_Start_modify[7] = tab_time_Sec_Start[1];
                            
                            char tab_time_Hour_End[3] = {0}; 
                            sprintf(tab_time_Hour_End,"%02d",gDisplay.stDisplaySet.stGrid.stTimeDivisionElecPrice.stTipPeriod.stPeriod1.u8EndHour);
                            tab_TPFV_Time_End_modify[0] = tab_time_Hour_End[0];
                            tab_TPFV_Time_End_modify[1] = tab_time_Hour_End[1];
                            
                            char tab_time_Min_End[3] = {0}; 
                            sprintf(tab_time_Min_End,"%02d",gDisplay.stDisplaySet.stGrid.stTimeDivisionElecPrice.stTipPeriod.stPeriod1.u8EndMin);
                            tab_TPFV_Time_End_modify[3] = tab_time_Min_End[0];
                            tab_TPFV_Time_End_modify[4] = tab_time_Min_End[1];
                            
                            char tab_time_Sec_End[3] = {0}; 
                            sprintf(tab_time_Sec_End,"%02d",gDisplay.stDisplaySet.stGrid.stTimeDivisionElecPrice.stTipPeriod.stPeriod1.u8EndSec);
                            tab_TPFV_Time_End_modify[6] = tab_time_Sec_End[0];
                            tab_TPFV_Time_End_modify[7] = tab_time_Sec_End[1];               
                        }
                        else if(enumTPFVPeriod == PRICE_TPFV_PERIOD_TWO)
                        {
                            char tab_time_Hour_Start[3] = {0}; 
                            sprintf(tab_time_Hour_Start,"%02d",gDisplay.stDisplaySet.stGrid.stTimeDivisionElecPrice.stTipPeriod.stPeriod2.u8StartHour);
                            tab_TPFV_Time_Start_modify[0] = tab_time_Hour_Start[0];
                            tab_TPFV_Time_Start_modify[1] = tab_time_Hour_Start[1];
                            
                            char tab_time_Min_Start[3] = {0}; 
                            sprintf(tab_time_Min_Start,"%02d",gDisplay.stDisplaySet.stGrid.stTimeDivisionElecPrice.stTipPeriod.stPeriod2.u8StartMin);
                            tab_TPFV_Time_Start_modify[3] = tab_time_Min_Start[0];
                            tab_TPFV_Time_Start_modify[4] = tab_time_Min_Start[1];
                            
                            char tab_time_Sec_Start[3] = {0}; 
                            sprintf(tab_time_Sec_Start,"%02d",gDisplay.stDisplaySet.stGrid.stTimeDivisionElecPrice.stTipPeriod.stPeriod2.u8StartSec);
                            tab_TPFV_Time_Start_modify[6] = tab_time_Sec_Start[0];
                            tab_TPFV_Time_Start_modify[7] = tab_time_Sec_Start[1];
                            
                            char tab_time_Hour_End[3] = {0}; 
                            sprintf(tab_time_Hour_End,"%02d",gDisplay.stDisplaySet.stGrid.stTimeDivisionElecPrice.stTipPeriod.stPeriod2.u8EndHour);
                            tab_TPFV_Time_End_modify[0] = tab_time_Hour_End[0];
                            tab_TPFV_Time_End_modify[1] = tab_time_Hour_End[1];
                            
                            char tab_time_Min_End[3] = {0}; 
                            sprintf(tab_time_Min_End,"%02d",gDisplay.stDisplaySet.stGrid.stTimeDivisionElecPrice.stTipPeriod.stPeriod2.u8EndMin);
                            tab_TPFV_Time_End_modify[3] = tab_time_Min_End[0];
                            tab_TPFV_Time_End_modify[4] = tab_time_Min_End[1];
                            
                            char tab_time_Sec_End[3] = {0}; 
                            sprintf(tab_time_Sec_End,"%02d",gDisplay.stDisplaySet.stGrid.stTimeDivisionElecPrice.stTipPeriod.stPeriod2.u8EndSec);
                            tab_TPFV_Time_End_modify[6] = tab_time_Sec_End[0];
                            tab_TPFV_Time_End_modify[7] = tab_time_Sec_End[1]; 
                        }
                        else if(enumTPFVPeriod == PRICE_TPFV_PERIOD_THREE)
                        {
                            char tab_time_Hour_Start[3] = {0}; 
                            sprintf(tab_time_Hour_Start,"%02d",gDisplay.stDisplaySet.stGrid.stTimeDivisionElecPrice.stTipPeriod.stPeriod3.u8StartHour);
                            tab_TPFV_Time_Start_modify[0] = tab_time_Hour_Start[0];
                            tab_TPFV_Time_Start_modify[1] = tab_time_Hour_Start[1];
                            
                            char tab_time_Min_Start[3] = {0}; 
                            sprintf(tab_time_Min_Start,"%02d",gDisplay.stDisplaySet.stGrid.stTimeDivisionElecPrice.stTipPeriod.stPeriod3.u8StartMin);
                            tab_TPFV_Time_Start_modify[3] = tab_time_Min_Start[0];
                            tab_TPFV_Time_Start_modify[4] = tab_time_Min_Start[1];
                            
                            char tab_time_Sec_Start[3] = {0}; 
                            sprintf(tab_time_Sec_Start,"%02d",gDisplay.stDisplaySet.stGrid.stTimeDivisionElecPrice.stTipPeriod.stPeriod3.u8StartSec);
                            tab_TPFV_Time_Start_modify[6] = tab_time_Sec_Start[0];
                            tab_TPFV_Time_Start_modify[7] = tab_time_Sec_Start[1];
                            
                            char tab_time_Hour_End[3] = {0}; 
                            sprintf(tab_time_Hour_End,"%02d",gDisplay.stDisplaySet.stGrid.stTimeDivisionElecPrice.stTipPeriod.stPeriod3.u8EndHour);
                            tab_TPFV_Time_End_modify[0] = tab_time_Hour_End[0];
                            tab_TPFV_Time_End_modify[1] = tab_time_Hour_End[1];
                            
                            char tab_time_Min_End[3] = {0}; 
                            sprintf(tab_time_Min_End,"%02d",gDisplay.stDisplaySet.stGrid.stTimeDivisionElecPrice.stTipPeriod.stPeriod3.u8EndMin);
                            tab_TPFV_Time_End_modify[3] = tab_time_Min_End[0];
                            tab_TPFV_Time_End_modify[4] = tab_time_Min_End[1];
                            
                            char tab_time_Sec_End[3] = {0}; 
                            sprintf(tab_time_Sec_End,"%02d",gDisplay.stDisplaySet.stGrid.stTimeDivisionElecPrice.stTipPeriod.stPeriod3.u8EndSec);
                            tab_TPFV_Time_End_modify[6] = tab_time_Sec_End[0];
                            tab_TPFV_Time_End_modify[7] = tab_time_Sec_End[1];   
                        }
                    }
                    else if(enum_tpfv == TPFV_PEAK)
                    {
                        if(enumTPFVPeriod == PRICE_TPFV_PERIOD_ONE)
                        {  
                            char tab_time_Hour_Start[3] = {0}; 
                            sprintf(tab_time_Hour_Start,"%02d",gDisplay.stDisplaySet.stGrid.stTimeDivisionElecPrice.stPeakPeriod.stPeriod1.u8StartHour);
                            tab_TPFV_Time_Start_modify[0] = tab_time_Hour_Start[0];
                            tab_TPFV_Time_Start_modify[1] = tab_time_Hour_Start[1];
                            
                            char tab_time_Min_Start[3] = {0}; 
                            sprintf(tab_time_Min_Start,"%02d",gDisplay.stDisplaySet.stGrid.stTimeDivisionElecPrice.stPeakPeriod.stPeriod1.u8StartMin);
                            tab_TPFV_Time_Start_modify[3] = tab_time_Min_Start[0];
                            tab_TPFV_Time_Start_modify[4] = tab_time_Min_Start[1];
                            
                            char tab_time_Sec_Start[3] = {0}; 
                            sprintf(tab_time_Sec_Start,"%02d",gDisplay.stDisplaySet.stGrid.stTimeDivisionElecPrice.stPeakPeriod.stPeriod1.u8StartSec);
                            tab_TPFV_Time_Start_modify[6] = tab_time_Sec_Start[0];
                            tab_TPFV_Time_Start_modify[7] = tab_time_Sec_Start[1];
                            
                            char tab_time_Hour_End[3] = {0}; 
                            sprintf(tab_time_Hour_End,"%02d",gDisplay.stDisplaySet.stGrid.stTimeDivisionElecPrice.stPeakPeriod.stPeriod1.u8EndHour);
                            tab_TPFV_Time_End_modify[0] = tab_time_Hour_End[0];
                            tab_TPFV_Time_End_modify[1] = tab_time_Hour_End[1];
                            
                            char tab_time_Min_End[3] = {0}; 
                            sprintf(tab_time_Min_End,"%02d",gDisplay.stDisplaySet.stGrid.stTimeDivisionElecPrice.stPeakPeriod.stPeriod1.u8EndMin);
                            tab_TPFV_Time_End_modify[3] = tab_time_Min_End[0];
                            tab_TPFV_Time_End_modify[4] = tab_time_Min_End[1];
                            
                            char tab_time_Sec_End[3] = {0}; 
                            sprintf(tab_time_Sec_End,"%02d",gDisplay.stDisplaySet.stGrid.stTimeDivisionElecPrice.stPeakPeriod.stPeriod1.u8EndSec);
                            tab_TPFV_Time_End_modify[6] = tab_time_Sec_End[0];
                            tab_TPFV_Time_End_modify[7] = tab_time_Sec_End[1];               
                        }
                        else if(enumTPFVPeriod == PRICE_TPFV_PERIOD_TWO)
                        {
                            char tab_time_Hour_Start[3] = {0}; 
                            sprintf(tab_time_Hour_Start,"%02d",gDisplay.stDisplaySet.stGrid.stTimeDivisionElecPrice.stPeakPeriod.stPeriod2.u8StartHour);
                            tab_TPFV_Time_Start_modify[0] = tab_time_Hour_Start[0];
                            tab_TPFV_Time_Start_modify[1] = tab_time_Hour_Start[1];
                            
                            char tab_time_Min_Start[3] = {0}; 
                            sprintf(tab_time_Min_Start,"%02d",gDisplay.stDisplaySet.stGrid.stTimeDivisionElecPrice.stPeakPeriod.stPeriod2.u8StartMin);
                            tab_TPFV_Time_Start_modify[3] = tab_time_Min_Start[0];
                            tab_TPFV_Time_Start_modify[4] = tab_time_Min_Start[1];
                            
                            char tab_time_Sec_Start[3] = {0}; 
                            sprintf(tab_time_Sec_Start,"%02d",gDisplay.stDisplaySet.stGrid.stTimeDivisionElecPrice.stPeakPeriod.stPeriod2.u8StartSec);
                            tab_TPFV_Time_Start_modify[6] = tab_time_Sec_Start[0];
                            tab_TPFV_Time_Start_modify[7] = tab_time_Sec_Start[1];
                            
                            char tab_time_Hour_End[3] = {0}; 
                            sprintf(tab_time_Hour_End,"%02d",gDisplay.stDisplaySet.stGrid.stTimeDivisionElecPrice.stPeakPeriod.stPeriod2.u8EndHour);
                            tab_TPFV_Time_End_modify[0] = tab_time_Hour_End[0];
                            tab_TPFV_Time_End_modify[1] = tab_time_Hour_End[1];
                            
                            char tab_time_Min_End[3] = {0}; 
                            sprintf(tab_time_Min_End,"%02d",gDisplay.stDisplaySet.stGrid.stTimeDivisionElecPrice.stPeakPeriod.stPeriod2.u8EndMin);
                            tab_TPFV_Time_End_modify[3] = tab_time_Min_End[0];
                            tab_TPFV_Time_End_modify[4] = tab_time_Min_End[1];
                            
                            char tab_time_Sec_End[3] = {0}; 
                            sprintf(tab_time_Sec_End,"%02d",gDisplay.stDisplaySet.stGrid.stTimeDivisionElecPrice.stPeakPeriod.stPeriod2.u8EndSec);
                            tab_TPFV_Time_End_modify[6] = tab_time_Sec_End[0];
                            tab_TPFV_Time_End_modify[7] = tab_time_Sec_End[1]; 
                        }
                        else if(enumTPFVPeriod == PRICE_TPFV_PERIOD_THREE)
                        {
                            char tab_time_Hour_Start[3] = {0}; 
                            sprintf(tab_time_Hour_Start,"%02d",gDisplay.stDisplaySet.stGrid.stTimeDivisionElecPrice.stPeakPeriod.stPeriod3.u8StartHour);
                            tab_TPFV_Time_Start_modify[0] = tab_time_Hour_Start[0];
                            tab_TPFV_Time_Start_modify[1] = tab_time_Hour_Start[1];
                            
                            char tab_time_Min_Start[3] = {0}; 
                            sprintf(tab_time_Min_Start,"%02d",gDisplay.stDisplaySet.stGrid.stTimeDivisionElecPrice.stPeakPeriod.stPeriod3.u8StartMin);
                            tab_TPFV_Time_Start_modify[3] = tab_time_Min_Start[0];
                            tab_TPFV_Time_Start_modify[4] = tab_time_Min_Start[1];
                            
                            char tab_time_Sec_Start[3] = {0}; 
                            sprintf(tab_time_Sec_Start,"%02d",gDisplay.stDisplaySet.stGrid.stTimeDivisionElecPrice.stPeakPeriod.stPeriod3.u8StartSec);
                            tab_TPFV_Time_Start_modify[6] = tab_time_Sec_Start[0];
                            tab_TPFV_Time_Start_modify[7] = tab_time_Sec_Start[1];
                            
                            char tab_time_Hour_End[3] = {0}; 
                            sprintf(tab_time_Hour_End,"%02d",gDisplay.stDisplaySet.stGrid.stTimeDivisionElecPrice.stPeakPeriod.stPeriod3.u8EndHour);
                            tab_TPFV_Time_End_modify[0] = tab_time_Hour_End[0];
                            tab_TPFV_Time_End_modify[1] = tab_time_Hour_End[1];
                            
                            char tab_time_Min_End[3] = {0}; 
                            sprintf(tab_time_Min_End,"%02d",gDisplay.stDisplaySet.stGrid.stTimeDivisionElecPrice.stPeakPeriod.stPeriod3.u8EndMin);
                            tab_TPFV_Time_End_modify[3] = tab_time_Min_End[0];
                            tab_TPFV_Time_End_modify[4] = tab_time_Min_End[1];
                            
                            char tab_time_Sec_End[3] = {0}; 
                            sprintf(tab_time_Sec_End,"%02d",gDisplay.stDisplaySet.stGrid.stTimeDivisionElecPrice.stPeakPeriod.stPeriod3.u8EndSec);
                            tab_TPFV_Time_End_modify[6] = tab_time_Sec_End[0];
                            tab_TPFV_Time_End_modify[7] = tab_time_Sec_End[1];   
                        }
                    }
                    else if(enum_tpfv == TPFV_FLAT)
                    {
                        if(enumTPFVPeriod == PRICE_TPFV_PERIOD_ONE)
                        {  
                            char tab_time_Hour_Start[3] = {0}; 
                            sprintf(tab_time_Hour_Start,"%02d",gDisplay.stDisplaySet.stGrid.stTimeDivisionElecPrice.stFlatPeriod.stPeriod1.u8StartHour);
                            tab_TPFV_Time_Start_modify[0] = tab_time_Hour_Start[0];
                            tab_TPFV_Time_Start_modify[1] = tab_time_Hour_Start[1];
                            
                            char tab_time_Min_Start[3] = {0}; 
                            sprintf(tab_time_Min_Start,"%02d",gDisplay.stDisplaySet.stGrid.stTimeDivisionElecPrice.stFlatPeriod.stPeriod1.u8StartMin);
                            tab_TPFV_Time_Start_modify[3] = tab_time_Min_Start[0];
                            tab_TPFV_Time_Start_modify[4] = tab_time_Min_Start[1];
                            
                            char tab_time_Sec_Start[3] = {0}; 
                            sprintf(tab_time_Sec_Start,"%02d",gDisplay.stDisplaySet.stGrid.stTimeDivisionElecPrice.stFlatPeriod.stPeriod1.u8StartSec);
                            tab_TPFV_Time_Start_modify[6] = tab_time_Sec_Start[0];
                            tab_TPFV_Time_Start_modify[7] = tab_time_Sec_Start[1];
                            
                            char tab_time_Hour_End[3] = {0}; 
                            sprintf(tab_time_Hour_End,"%02d",gDisplay.stDisplaySet.stGrid.stTimeDivisionElecPrice.stFlatPeriod.stPeriod1.u8EndHour);
                            tab_TPFV_Time_End_modify[0] = tab_time_Hour_End[0];
                            tab_TPFV_Time_End_modify[1] = tab_time_Hour_End[1];
                            
                            char tab_time_Min_End[3] = {0}; 
                            sprintf(tab_time_Min_End,"%02d",gDisplay.stDisplaySet.stGrid.stTimeDivisionElecPrice.stFlatPeriod.stPeriod1.u8EndMin);
                            tab_TPFV_Time_End_modify[3] = tab_time_Min_End[0];
                            tab_TPFV_Time_End_modify[4] = tab_time_Min_End[1];
                            
                            char tab_time_Sec_End[3] = {0}; 
                            sprintf(tab_time_Sec_End,"%02d",gDisplay.stDisplaySet.stGrid.stTimeDivisionElecPrice.stFlatPeriod.stPeriod1.u8EndSec);
                            tab_TPFV_Time_End_modify[6] = tab_time_Sec_End[0];
                            tab_TPFV_Time_End_modify[7] = tab_time_Sec_End[1];               
                        }
                        else if(enumTPFVPeriod == PRICE_TPFV_PERIOD_TWO)
                        {
                            char tab_time_Hour_Start[3] = {0}; 
                            sprintf(tab_time_Hour_Start,"%02d",gDisplay.stDisplaySet.stGrid.stTimeDivisionElecPrice.stFlatPeriod.stPeriod2.u8StartHour);
                            tab_TPFV_Time_Start_modify[0] = tab_time_Hour_Start[0];
                            tab_TPFV_Time_Start_modify[1] = tab_time_Hour_Start[1];
                            
                            char tab_time_Min_Start[3] = {0}; 
                            sprintf(tab_time_Min_Start,"%02d",gDisplay.stDisplaySet.stGrid.stTimeDivisionElecPrice.stFlatPeriod.stPeriod2.u8StartMin);
                            tab_TPFV_Time_Start_modify[3] = tab_time_Min_Start[0];
                            tab_TPFV_Time_Start_modify[4] = tab_time_Min_Start[1];
                            
                            char tab_time_Sec_Start[3] = {0}; 
                            sprintf(tab_time_Sec_Start,"%02d",gDisplay.stDisplaySet.stGrid.stTimeDivisionElecPrice.stFlatPeriod.stPeriod2.u8StartSec);
                            tab_TPFV_Time_Start_modify[6] = tab_time_Sec_Start[0];
                            tab_TPFV_Time_Start_modify[7] = tab_time_Sec_Start[1];
                            
                            char tab_time_Hour_End[3] = {0}; 
                            sprintf(tab_time_Hour_End,"%02d",gDisplay.stDisplaySet.stGrid.stTimeDivisionElecPrice.stFlatPeriod.stPeriod2.u8EndHour);
                            tab_TPFV_Time_End_modify[0] = tab_time_Hour_End[0];
                            tab_TPFV_Time_End_modify[1] = tab_time_Hour_End[1];
                            
                            char tab_time_Min_End[3] = {0}; 
                            sprintf(tab_time_Min_End,"%02d",gDisplay.stDisplaySet.stGrid.stTimeDivisionElecPrice.stFlatPeriod.stPeriod2.u8EndMin);
                            tab_TPFV_Time_End_modify[3] = tab_time_Min_End[0];
                            tab_TPFV_Time_End_modify[4] = tab_time_Min_End[1];
                            
                            char tab_time_Sec_End[3] = {0}; 
                            sprintf(tab_time_Sec_End,"%02d",gDisplay.stDisplaySet.stGrid.stTimeDivisionElecPrice.stFlatPeriod.stPeriod2.u8EndSec);
                            tab_TPFV_Time_End_modify[6] = tab_time_Sec_End[0];
                            tab_TPFV_Time_End_modify[7] = tab_time_Sec_End[1]; 
                        }
                        else if(enumTPFVPeriod == PRICE_TPFV_PERIOD_THREE)
                        {
                            char tab_time_Hour_Start[3] = {0}; 
                            sprintf(tab_time_Hour_Start,"%02d",gDisplay.stDisplaySet.stGrid.stTimeDivisionElecPrice.stFlatPeriod.stPeriod3.u8StartHour);
                            tab_TPFV_Time_Start_modify[0] = tab_time_Hour_Start[0];
                            tab_TPFV_Time_Start_modify[1] = tab_time_Hour_Start[1];
                            
                            char tab_time_Min_Start[3] = {0}; 
                            sprintf(tab_time_Min_Start,"%02d",gDisplay.stDisplaySet.stGrid.stTimeDivisionElecPrice.stFlatPeriod.stPeriod3.u8StartMin);
                            tab_TPFV_Time_Start_modify[3] = tab_time_Min_Start[0];
                            tab_TPFV_Time_Start_modify[4] = tab_time_Min_Start[1];
                            
                            char tab_time_Sec_Start[3] = {0}; 
                            sprintf(tab_time_Sec_Start,"%02d",gDisplay.stDisplaySet.stGrid.stTimeDivisionElecPrice.stFlatPeriod.stPeriod3.u8StartSec);
                            tab_TPFV_Time_Start_modify[6] = tab_time_Sec_Start[0];
                            tab_TPFV_Time_Start_modify[7] = tab_time_Sec_Start[1];
                            
                            char tab_time_Hour_End[3] = {0}; 
                            sprintf(tab_time_Hour_End,"%02d",gDisplay.stDisplaySet.stGrid.stTimeDivisionElecPrice.stFlatPeriod.stPeriod3.u8EndHour);
                            tab_TPFV_Time_End_modify[0] = tab_time_Hour_End[0];
                            tab_TPFV_Time_End_modify[1] = tab_time_Hour_End[1];
                            
                            char tab_time_Min_End[3] = {0}; 
                            sprintf(tab_time_Min_End,"%02d",gDisplay.stDisplaySet.stGrid.stTimeDivisionElecPrice.stFlatPeriod.stPeriod3.u8EndMin);
                            tab_TPFV_Time_End_modify[3] = tab_time_Min_End[0];
                            tab_TPFV_Time_End_modify[4] = tab_time_Min_End[1];
                            
                            char tab_time_Sec_End[3] = {0}; 
                            sprintf(tab_time_Sec_End,"%02d",gDisplay.stDisplaySet.stGrid.stTimeDivisionElecPrice.stFlatPeriod.stPeriod3.u8EndSec);
                            tab_TPFV_Time_End_modify[6] = tab_time_Sec_End[0];
                            tab_TPFV_Time_End_modify[7] = tab_time_Sec_End[1];   
                        }
                    }
                    else if(enum_tpfv == TPFV_VALLEY)
                    {
                        if(enumTPFVPeriod == PRICE_TPFV_PERIOD_ONE)
                        {  
                            char tab_time_Hour_Start[3] = {0}; 
                            sprintf(tab_time_Hour_Start,"%02d",gDisplay.stDisplaySet.stGrid.stTimeDivisionElecPrice.stValleyPeriod.stPeriod1.u8StartHour);
                            tab_TPFV_Time_Start_modify[0] = tab_time_Hour_Start[0];
                            tab_TPFV_Time_Start_modify[1] = tab_time_Hour_Start[1];
                            
                            char tab_time_Min_Start[3] = {0}; 
                            sprintf(tab_time_Min_Start,"%02d",gDisplay.stDisplaySet.stGrid.stTimeDivisionElecPrice.stValleyPeriod.stPeriod1.u8StartMin);
                            tab_TPFV_Time_Start_modify[3] = tab_time_Min_Start[0];
                            tab_TPFV_Time_Start_modify[4] = tab_time_Min_Start[1];
                            
                            char tab_time_Sec_Start[3] = {0}; 
                            sprintf(tab_time_Sec_Start,"%02d",gDisplay.stDisplaySet.stGrid.stTimeDivisionElecPrice.stValleyPeriod.stPeriod1.u8StartSec);
                            tab_TPFV_Time_Start_modify[6] = tab_time_Sec_Start[0];
                            tab_TPFV_Time_Start_modify[7] = tab_time_Sec_Start[1];
                            
                            char tab_time_Hour_End[3] = {0}; 
                            sprintf(tab_time_Hour_End,"%02d",gDisplay.stDisplaySet.stGrid.stTimeDivisionElecPrice.stValleyPeriod.stPeriod1.u8EndHour);
                            tab_TPFV_Time_End_modify[0] = tab_time_Hour_End[0];
                            tab_TPFV_Time_End_modify[1] = tab_time_Hour_End[1];
                            
                            char tab_time_Min_End[3] = {0}; 
                            sprintf(tab_time_Min_End,"%02d",gDisplay.stDisplaySet.stGrid.stTimeDivisionElecPrice.stValleyPeriod.stPeriod1.u8EndMin);
                            tab_TPFV_Time_End_modify[3] = tab_time_Min_End[0];
                            tab_TPFV_Time_End_modify[4] = tab_time_Min_End[1];
                            
                            char tab_time_Sec_End[3] = {0}; 
                            sprintf(tab_time_Sec_End,"%02d",gDisplay.stDisplaySet.stGrid.stTimeDivisionElecPrice.stValleyPeriod.stPeriod1.u8EndSec);
                            tab_TPFV_Time_End_modify[6] = tab_time_Sec_End[0];
                            tab_TPFV_Time_End_modify[7] = tab_time_Sec_End[1];               
                        }
                        else if(enumTPFVPeriod == PRICE_TPFV_PERIOD_TWO)
                        {
                            char tab_time_Hour_Start[3] = {0}; 
                            sprintf(tab_time_Hour_Start,"%02d",gDisplay.stDisplaySet.stGrid.stTimeDivisionElecPrice.stValleyPeriod.stPeriod2.u8StartHour);
                            tab_TPFV_Time_Start_modify[0] = tab_time_Hour_Start[0];
                            tab_TPFV_Time_Start_modify[1] = tab_time_Hour_Start[1];
                            
                            char tab_time_Min_Start[3] = {0}; 
                            sprintf(tab_time_Min_Start,"%02d",gDisplay.stDisplaySet.stGrid.stTimeDivisionElecPrice.stValleyPeriod.stPeriod2.u8StartMin);
                            tab_TPFV_Time_Start_modify[3] = tab_time_Min_Start[0];
                            tab_TPFV_Time_Start_modify[4] = tab_time_Min_Start[1];
                            
                            char tab_time_Sec_Start[3] = {0}; 
                            sprintf(tab_time_Sec_Start,"%02d",gDisplay.stDisplaySet.stGrid.stTimeDivisionElecPrice.stValleyPeriod.stPeriod2.u8StartSec);
                            tab_TPFV_Time_Start_modify[6] = tab_time_Sec_Start[0];
                            tab_TPFV_Time_Start_modify[7] = tab_time_Sec_Start[1];
                            
                            char tab_time_Hour_End[3] = {0}; 
                            sprintf(tab_time_Hour_End,"%02d",gDisplay.stDisplaySet.stGrid.stTimeDivisionElecPrice.stValleyPeriod.stPeriod2.u8EndHour);
                            tab_TPFV_Time_End_modify[0] = tab_time_Hour_End[0];
                            tab_TPFV_Time_End_modify[1] = tab_time_Hour_End[1];
                            
                            char tab_time_Min_End[3] = {0}; 
                            sprintf(tab_time_Min_End,"%02d",gDisplay.stDisplaySet.stGrid.stTimeDivisionElecPrice.stValleyPeriod.stPeriod2.u8EndMin);
                            tab_TPFV_Time_End_modify[3] = tab_time_Min_End[0];
                            tab_TPFV_Time_End_modify[4] = tab_time_Min_End[1];
                            
                            char tab_time_Sec_End[3] = {0}; 
                            sprintf(tab_time_Sec_End,"%02d",gDisplay.stDisplaySet.stGrid.stTimeDivisionElecPrice.stValleyPeriod.stPeriod2.u8EndSec);
                            tab_TPFV_Time_End_modify[6] = tab_time_Sec_End[0];
                            tab_TPFV_Time_End_modify[7] = tab_time_Sec_End[1]; 
                        }
                        else if(enumTPFVPeriod == PRICE_TPFV_PERIOD_THREE)
                        {
                            char tab_time_Hour_Start[3] = {0}; 
                            sprintf(tab_time_Hour_Start,"%02d",gDisplay.stDisplaySet.stGrid.stTimeDivisionElecPrice.stValleyPeriod.stPeriod3.u8StartHour);
                            tab_TPFV_Time_Start_modify[0] = tab_time_Hour_Start[0];
                            tab_TPFV_Time_Start_modify[1] = tab_time_Hour_Start[1];
                            
                            char tab_time_Min_Start[3] = {0}; 
                            sprintf(tab_time_Min_Start,"%02d",gDisplay.stDisplaySet.stGrid.stTimeDivisionElecPrice.stValleyPeriod.stPeriod3.u8StartMin);
                            tab_TPFV_Time_Start_modify[3] = tab_time_Min_Start[0];
                            tab_TPFV_Time_Start_modify[4] = tab_time_Min_Start[1];
                            
                            char tab_time_Sec_Start[3] = {0}; 
                            sprintf(tab_time_Sec_Start,"%02d",gDisplay.stDisplaySet.stGrid.stTimeDivisionElecPrice.stValleyPeriod.stPeriod3.u8StartSec);
                            tab_TPFV_Time_Start_modify[6] = tab_time_Sec_Start[0];
                            tab_TPFV_Time_Start_modify[7] = tab_time_Sec_Start[1];
                            
                            char tab_time_Hour_End[3] = {0}; 
                            sprintf(tab_time_Hour_End,"%02d",gDisplay.stDisplaySet.stGrid.stTimeDivisionElecPrice.stValleyPeriod.stPeriod3.u8EndHour);
                            tab_TPFV_Time_End_modify[0] = tab_time_Hour_End[0];
                            tab_TPFV_Time_End_modify[1] = tab_time_Hour_End[1];
                            
                            char tab_time_Min_End[3] = {0}; 
                            sprintf(tab_time_Min_End,"%02d",gDisplay.stDisplaySet.stGrid.stTimeDivisionElecPrice.stValleyPeriod.stPeriod3.u8EndMin);
                            tab_TPFV_Time_End_modify[3] = tab_time_Min_End[0];
                            tab_TPFV_Time_End_modify[4] = tab_time_Min_End[1];
                            
                            char tab_time_Sec_End[3] = {0}; 
                            sprintf(tab_time_Sec_End,"%02d",gDisplay.stDisplaySet.stGrid.stTimeDivisionElecPrice.stValleyPeriod.stPeriod3.u8EndSec);
                            tab_TPFV_Time_End_modify[6] = tab_time_Sec_End[0];
                            tab_TPFV_Time_End_modify[7] = tab_time_Sec_End[1];   
                        }
                    }
                    sprintf(tab_TPFV_Time_Start,"%s",tab_TPFV_Time_Start_modify);
                    sprintf(tab_TPFV_Time_End,"%s",tab_TPFV_Time_End_modify);
                }
            } 
            break;
    }
     
    if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_ENGLISH) //在分时电价起始时间设置 英文界面组装
    {    
        if(gbEditFlag == STATUS_TRUE)
        {
           Display_Set_UnderLine_Blink_Position(STATUS_TRUE,arrayPriceTimeFlicker[sU8TPFVSetCounter].u8StartPos,arrayPriceTimeFlicker[sU8TPFVSetCounter].u8EndPos);
           updateDisplayGridPriceTPFVTimePeriodSetData_English(tab_TPFV_Time_Start_modify,tab_TPFV_Time_End_modify, enum_tpfv, enumTPFVPeriod);
        }
        else 
        {
            updateDisplayGridPriceTPFVTimePeriodSetData_English(tab_TPFV_Time_Start,tab_TPFV_Time_End, enum_tpfv, enumTPFVPeriod);
        }
    }
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_CHINESE) //在分时电价起始时间设置 中文界面组装
    {
        if(gbEditFlag == STATUS_TRUE)
        {
        //Display_Set_UnderLine_Blink_Position(STATUS_TRUE,arrayPriceTimeFlickerChinese[sU8TPFVSetCounter].u8StartPos,arrayPriceTimeFlickerChinese[sU8TPFVSetCounter].u8EndPos);
           updateDisplayGridPriceTPFVTimePeriodSetData_Chinese(tab_TPFV_Time_Start_modify,tab_TPFV_Time_End_modify, enum_tpfv, enumTPFVPeriod); 
        }
        else 
        {
            updateDisplayGridPriceTPFVTimePeriodSetData_Chinese(tab_TPFV_Time_Start,tab_TPFV_Time_End, enum_tpfv, enumTPFVPeriod);   
        }     
    }
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_SPANISH)//在分时电价起始时间设置 西班牙界面组装
    { 
        updateDisplayGridPriceTPFVTimePeriodSetData_Spanish(tab_TPFV_Time_Start,tab_TPFV_Time_End,enumTPFVPeriod);
    }
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_GERMAN)//在分时电价起始时间设置 德语界面组装
    { 
        updateDisplayGridPriceTPFVTimePeriodSetData_German(tab_TPFV_Time_Start,tab_TPFV_Time_End,enumTPFVPeriod);
    }
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_FRENCH) //在分时电价起始时间设置 法语界面组装
    {
        updateDisplayGridPriceTPFVTimePeriodSetData_French(tab_TPFV_Time_Start,tab_TPFV_Time_End,enumTPFVPeriod);
    }
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_POLISH)//在分时电价起始时间设置 波兰界面组装 
    {
        updateDisplayGridPriceTPFVTimePeriodSetData_Polish(tab_TPFV_Time_Start,tab_TPFV_Time_End,enumTPFVPeriod);
    }
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_ITALIAN)//在分时电价起始时间设置 意大利界面组装
    {
        updateDisplayGridPriceTPFVTimePeriodSetData_Italian(tab_TPFV_Time_Start,tab_TPFV_Time_End,enumTPFVPeriod);
    }
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_CZECH)//在分时电价起始时间设置 捷克界面组装
    { 
        updateDisplayGridPriceTPFVTimePeriodSetData_Czech(tab_TPFV_Time_Start,tab_TPFV_Time_End,enumTPFVPeriod);
    }
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_DUTCH)//在分时电价起始时间设置 荷兰界面组装
    {
        updateDisplayGridPriceTPFVTimePeriodSetData_Dutch(tab_TPFV_Time_Start,tab_TPFV_Time_End,enumTPFVPeriod);
    }
    else
    { 
        updateDisplayGridPriceTPFVTimePeriodSetData_English(tab_TPFV_Time_Start,tab_TPFV_Time_End, enum_tpfv,enumTPFVPeriod);
    }
}

/***************************************************************************
功能:电网分时电价起始时间设置 英文界面信息
****************************************************************************/
void updateDisplayGridPriceTPFVTimePeriodSetData_English(char* strStartTime, char* strEndTime, TPFV_TypeDef enum_tpfv, TPFV_Price_TypeDef enumTPFVPeriod)    
{
    memset(tab_display,0,DISPLAY_CACHE_SIZE);
    if(enum_tpfv == TPFV_PEAK)
    {    
        if(enumTPFVPeriod == PRICE_TPFV_PERIOD_ONE)
        {
            sprintf(tab_display,"     Peak Perid %d    \nStart Time:%s  \nEnd Time:%s   \n                     \n",enumTPFVPeriod,strStartTime,strEndTime); 
        }
        else if(enumTPFVPeriod == PRICE_TPFV_PERIOD_TWO)
        {
            sprintf(tab_display,"     Peak Perid %d    \nStart Time:%s  \nEnd Time:%s   \n                     \n",enumTPFVPeriod,strStartTime,strEndTime);   
        }
        else if(enumTPFVPeriod == PRICE_TPFV_PERIOD_THREE)
        {
            sprintf(tab_display,"     Peak Perid %d    \nStart Time:%s  \nEnd Time:%s   \n                     \n",enumTPFVPeriod,strStartTime,strEndTime); 
        }
    }
    else if(enum_tpfv == TPFV_FLAT)
    {
        if(enumTPFVPeriod == PRICE_TPFV_PERIOD_ONE)
        {
            sprintf(tab_display,"     Flat Perid %d    \nStart Time:%s  \nEnd Time:%s   \n                     \n",enumTPFVPeriod,strStartTime,strEndTime); 
        }
        else if(enumTPFVPeriod == PRICE_TPFV_PERIOD_TWO)
        {
            sprintf(tab_display,"     Flat Perid %d    \nStart Time:%s  \nEnd Time:%s   \n                     \n",enumTPFVPeriod,strStartTime,strEndTime);   
        }
        else if(enumTPFVPeriod == PRICE_TPFV_PERIOD_THREE)
        {
            sprintf(tab_display,"     Flat Perid %d    \nStart Time:%s  \nEnd Time:%s   \n                     \n",enumTPFVPeriod,strStartTime,strEndTime); 
        }
    }
    else if(enum_tpfv == TPFV_VALLEY)
    {
        if(enumTPFVPeriod == PRICE_TPFV_PERIOD_ONE)
        {
            sprintf(tab_display,"    Valley Perid %d   \nStart Time:%s  \nEnd Time:%s   \n                     \n",enumTPFVPeriod,strStartTime,strEndTime); 
        }
        else if(enumTPFVPeriod == PRICE_TPFV_PERIOD_TWO)
        {
            sprintf(tab_display,"    Valley Perid %d   \nStart Time:%s  \nEnd Time:%s   \n                     \n",enumTPFVPeriod,strStartTime,strEndTime);   
        }
        else if(enumTPFVPeriod == PRICE_TPFV_PERIOD_THREE)
        {
            sprintf(tab_display,"    Valley Perid %d   \nStart Time:%s  \nEnd Time:%s   \n                     \n",enumTPFVPeriod,strStartTime,strEndTime); 
        }
    }
                         
    //GUI_DispStringAt((uint8_t*)tab_display, 0, 0); 
    GUI_Display(tab_display, 0, 0);
}


/***************************************************************************
 功能:电网分时电价起始时间设置 西班牙界面信息
****************************************************************************/
void updateDisplayGridPriceTPFVTimePeriodSetData_Spanish(char* strStartTime, char* strEndTime, TPFV_Price_TypeDef enumTPFVPeriod)
{
    
}

/***************************************************************************
 功能:电网分时电价起始时间设置 德语界面信息
****************************************************************************/
void updateDisplayGridPriceTPFVTimePeriodSetData_German(char* strStartTime, char* strEndTime, TPFV_Price_TypeDef enumTPFVPeriod)
{
    
}

/***************************************************************************
 功能:电网分时电价起始时间设置 法语界面信息
****************************************************************************/
void updateDisplayGridPriceTPFVTimePeriodSetData_French(char* strStartTime, char* strEndTime, TPFV_Price_TypeDef enumTPFVPeriod)
{
    
}

/***************************************************************************
 功能:电网分时电价起始时间设置 波兰语界面信息
****************************************************************************/
void updateDisplayGridPriceTPFVTimePeriodSetData_Polish(char* strStartTime, char* strEndTime, TPFV_Price_TypeDef enumTPFVPeriod)
{
    
}

/***************************************************************************
 功能:电网分时电价起始时间设置 意大利语界面信息
****************************************************************************/
void updateDisplayGridPriceTPFVTimePeriodSetData_Italian(char* strStartTime, char* strEndTime, TPFV_Price_TypeDef enumTPFVPeriod)
{
    
}

/***************************************************************************
 功能:电网分时电价起始时间设置 捷克语界面信息
****************************************************************************/
void updateDisplayGridPriceTPFVTimePeriodSetData_Czech(char* strStartTime, char* strEndTime, TPFV_Price_TypeDef enumTPFVPeriod)
{
    
}

/***************************************************************************
 功能:电网分时电价起始时间设置 荷兰语界面信息
****************************************************************************/
void updateDisplayGridPriceTPFVTimePeriodSetData_Dutch(char* strStartTime, char* strEndTime, TPFV_Price_TypeDef enumTPFVPeriod)
{
    
}
/***************************************************************************
 功能:根据上一次界面操作类型和本次操作类型判断本次发电机 SET界面切换
****************************************************************************/
void updateDisplayGenSetData(KeyAction_TypeDef nowActionType,DisplayAction_TypeDef nowDisplayType)
{
    static uint8_t sU8GenSetCounter = 0;
    
    switch(nowActionType) //本次界面操作类型
    {
        case KEYACTION_ENTER://在系统设置界面下，Enter键按下，进入选择对应的设置项
            {
                if(sU8GenSetCounter == GEN_CLASS_USE)
                {
                    gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_SET_GEN_USE;
                }
                else if(sU8GenSetCounter == GEN_CLASS_DRYRLY_FLAG)
                {
                    gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_SET_GEN_DRYRLY;
                }
                else if(sU8GenSetCounter == GEN_CLASS_ENABLE)
                {
                    gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_SET_GEN_ENABLE;
                }
                else if(sU8GenSetCounter == GEN_CLASS_POWER_PARA)
                {
                    gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_SET_GEN_POWERPARA;
                }
                else if(sU8GenSetCounter == GEN_CLASS_INTELLOAD_PARA)
                {
                    gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_SET_GEN_INTELLOADPARA;
                }
                else
                {
                    gCurrentMenu.eCurrentDisplayMenuType = nowDisplayType;
                }
            }
            break;
        case KEYACTION_DOWN://在系统设置界面下，UP键按下，选择对应的设置项
            {
                sU8GenSetCounter++;
                if(sU8GenSetCounter == DISPLAY_SET_GEN_ITEM_COUNT)
                {
                    sU8GenSetCounter = 0;
                }
                gCurrentMenu.eCurrentDisplayMenuType = nowDisplayType;
            }
            break;
        case KEYACTION_UP://在系统设置界面下，DOWN键按下，选择对应的设置项
            {
                sU8GenSetCounter--;
                if(sU8GenSetCounter >= DISPLAY_SET_GEN_ITEM_COUNT)
                {
                    sU8GenSetCounter = DISPLAY_SET_GEN_ITEM_COUNT - 1;
                }
                gCurrentMenu.eCurrentDisplayMenuType = nowDisplayType;
            }
            break;
        case KEYACTION_ESC://在系统设置界面下，ESC键按下，返回设置界面
            {
                //sU8SetCounter = 0;
                gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_SET;
            }
            break;
        case KEYACTION_NULL://无操作刷新主界面数据
        default:
            {
            }
            break;
    }
    
    if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_ENGLISH) //实时统计数据显示界面 英文界面组装
    {
        updateDisplayGenSetData_English(sU8GenSetCounter);
    }
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_CHINESE)//实时统计数据显示界面 中文界面组装
    {
        updateDisplayGenSetData_Chinese(sU8GenSetCounter);
    }
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_SPANISH)//实时统计数据显示界面 西班牙界面组装
    {
        updateDisplayGenSetData_Spanish(sU8GenSetCounter);
    }
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_GERMAN)//实时统计数据显示界面 德语界面组装
    {
        updateDisplayGenSetData_German(sU8GenSetCounter);
    }
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_FRENCH)//实时统计数据显示界面 法语界面组装
    {
        updateDisplayGenSetData_French(sU8GenSetCounter);
    }
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_POLISH)//实时统计数据显示界面 波兰界面组装
    {
        updateDisplayGenSetData_Polish(sU8GenSetCounter);
    }
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_ITALIAN)//实时统计数据显示界面 意大利界面组装
    {
        updateDisplayGenSetData_Italian(sU8GenSetCounter);
    }
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_CZECH)//实时统计数据显示界面 捷克界面组装
    {
        updateDisplayGenSetData_Czech(sU8GenSetCounter);
    }
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_DUTCH)//实时统计数据显示界面 荷兰界面组装
    {
        updateDisplayGenSetData_Dutch(sU8GenSetCounter);
    }
    else
    {
        updateDisplayGenSetData_English(sU8GenSetCounter);
    }
}

/***************************************************************************
功能:电池设置数据显示 英文界面信息
****************************************************************************/
void updateDisplayGenSetData_English(uint8_t sU8GenSetCounter)    
{
    memset(tab_display,0,DISPLAY_CACHE_SIZE);
    if(sU8GenSetCounter == GEN_CLASS_USE)
    {
        sprintf(tab_display,"       Gen Set 1     \n->Usage Select       \nDry Rly Select       \nEnable               \n"); 
    }
    else if(sU8GenSetCounter == GEN_CLASS_DRYRLY_FLAG)
    {
        sprintf(tab_display,"       Gen Set 1     \nUsage Select         \n->Dry Rly Select     \nEnable               \n");
    }
    else if(sU8GenSetCounter == GEN_CLASS_ENABLE)
    {
        sprintf(tab_display,"       Gen Set 1     \nUsage Select         \nDry Rly Select       \n->Enable             \n");
    }
    else if(sU8GenSetCounter == GEN_CLASS_POWER_PARA)
    {
        sprintf(tab_display,"       Gen Set 2     \n->Power Para         \nIntelligent Load     \n                     \n");
    }
    else if(sU8GenSetCounter == GEN_CLASS_INTELLOAD_PARA)
    {
        sprintf(tab_display,"       Gen Set 2     \nPower Para           \n->Intelligent Load   \n                     \n");
    }
    GUI_Display(tab_display, 0, 0);
}

/***************************************************************************
 功能:电池设置数据显示 西班牙界面信息
****************************************************************************/
void updateDisplayGenSetData_Chinese(uint8_t sU8GenSetCounter)
{
    
}

/***************************************************************************
 功能:电池设置数据显示 西班牙界面信息
****************************************************************************/
void updateDisplayGenSetData_Spanish(uint8_t sU8GenSetCounter)
{
    
}

/***************************************************************************
 功能:电池设置数据显示 德语界面信息
****************************************************************************/
void updateDisplayGenSetData_German(uint8_t sU8GenSetCounter)
{
    
}

/***************************************************************************
 功能:电池设置数据显示 法语界面信息
****************************************************************************/
void updateDisplayGenSetData_French(uint8_t sU8GenSetCounter)
{
    
}

/***************************************************************************
 功能:电池设置数据显示 波兰语界面信息
****************************************************************************/
void updateDisplayGenSetData_Polish(uint8_t sU8GenSetCounter)
{
    
}

/***************************************************************************
 功能:电池设置数据显示 意大利语界面信息
****************************************************************************/
void updateDisplayGenSetData_Italian(uint8_t sU8GenSetCounter)
{
    
}

/***************************************************************************
 功能:电池设置数据显示 捷克语界面信息
****************************************************************************/
void updateDisplayGenSetData_Czech(uint8_t sU8GenSetCounter)
{
    
}

/***************************************************************************
 功能:电池设置数据显示 荷兰语界面信息
****************************************************************************/
void updateDisplayGenSetData_Dutch(uint8_t sU8GenSetCounter)
{
    
}

/***************************************************************************
 功能:根据上一次界面操作类型和本次操作类型判断本次发电机功率参数 SET界面切换
****************************************************************************/
void updateDisplayGenPowerParaSetData(KeyAction_TypeDef nowActionType,DisplayAction_TypeDef nowDisplayType)
{
    static uint8_t sU8SetNumCounter = 0;        //需要设置某一位
    static uint8_t sU8NumberCounter = 0;        //具体设置的值
    
    switch(nowActionType) 
    {
        case KEYACTION_ENTER://在发电机功率参数界面下，Enter键按下
            {
                if(gbEditFlag != STATUS_FALSE)//退出编辑模式
                {
                    gbEditFlag = STATUS_FALSE;
                    
                    Display_SET_GenPara  stGenPara;
                    memset(&stGenPara,0,sizeof(Display_SET_GenPara));
                    stGenPara.u16RatedPower = atoi(tab_Gen_RatedPower_edit_modify);
                    stGenPara.u16MaxPower   = atoi(tab_Gen_MaxPower_edit_modify);
                    
                    setGenParaData(stGenPara);
                    
                    sprintf(tab_Gen_RatedPower_edit,"%s",tab_Gen_RatedPower_edit_modify);
                    sprintf(tab_Gen_MaxPower_edit,"%s",tab_Gen_MaxPower_edit_modify);
                    
                    sprintf(tab_Gen_RatedPower_edit_modify,"%s","0000");
                    sprintf(tab_Gen_MaxPower_edit_modify,"%s","0000");
                    sU8SetNumCounter = 0;
                    sU8NumberCounter = 0;
                    Display_Set_UnderLine_Blink_Position(STATUS_FALSE,0,0);
                }
                gCurrentMenu.eCurrentDisplayMenuType = nowDisplayType;
            }
            break;
        case KEYACTION_DOWN://在发电机功率参数界面下，UP键按下，选择对应的设置项
            {
                if(gbEditFlag != STATUS_TRUE)//进入编辑模式
                {
                    gbEditFlag = STATUS_TRUE;
                    sprintf(tab_Gen_RatedPower_edit_modify,"%s",tab_Gen_RatedPower_edit);
                    sprintf(tab_Gen_MaxPower_edit_modify,"%s",tab_Gen_MaxPower_edit);
                }
                
                sU8NumberCounter++;
                
                if(sU8SetNumCounter == 0) //额定功率第一个数字
                {
                    if(sU8NumberCounter <= 6)
                    {
                       tab_Gen_RatedPower_edit_modify[0] = '0' + sU8NumberCounter;
                    }
                    else
                    {
                       sU8NumberCounter = 0;
                       tab_Gen_RatedPower_edit_modify[0] = '0';
                    }
                }
                else if(sU8SetNumCounter == 1)//额定功率第二个数字
                {
                    if(tab_Gen_RatedPower_edit_modify[0] == '6')
                    {
                        if(sU8NumberCounter <= 6)
                        {
                            tab_Gen_RatedPower_edit_modify[1] =  '0' + sU8NumberCounter;
                        }
                        else
                        {
                            sU8NumberCounter = 0;
                            tab_Gen_RatedPower_edit_modify[1] = '0';
                        }
                    }
                    else
                    {
                        if(sU8NumberCounter <= 9)
                        {
                            tab_Gen_RatedPower_edit_modify[1] =  '0' + sU8NumberCounter;
                        }
                        else
                        {
                            sU8NumberCounter = 0;
                            tab_Gen_RatedPower_edit_modify[1] = '0';
                        }
                    }
                }
                else if(sU8SetNumCounter == 2) //额定功率第三个数字
                {
                    if((tab_Gen_RatedPower_edit_modify[0] == '6')&&(tab_Gen_RatedPower_edit_modify[1] == '6'))
                    {
                       tab_Gen_RatedPower_edit_modify[2] = '0';
                    }
                    else
                    {
                        if(sU8NumberCounter <= 9)
                        {
                            tab_Gen_RatedPower_edit_modify[2] =  '0' + sU8NumberCounter;
                        }
                        else
                        {
                            sU8NumberCounter = 0;
                            tab_Gen_RatedPower_edit_modify[2] = '0';
                        }
                    }
                }
                else if(sU8SetNumCounter == 3)//额定功率第四个数字
                {
                    if((tab_Gen_RatedPower_edit_modify[0] == '6')&&(tab_Gen_RatedPower_edit_modify[1] == '6'))
                    {
                       tab_Gen_RatedPower_edit_modify[3] = '0';
                    }
                    else
                    {
                        if(sU8NumberCounter <= 9)
                        {
                            tab_Gen_RatedPower_edit_modify[3] =  '0' + sU8NumberCounter;
                        }
                        else
                        {
                            sU8NumberCounter = 0;
                            tab_Gen_RatedPower_edit_modify[3] = '0';
                        }
                    }
                }
                else if(sU8SetNumCounter == 4) //最大功率第一个数字
                {
                    if(sU8NumberCounter <= 6)
                    {
                       tab_Gen_MaxPower_edit_modify[0] = '0' + sU8NumberCounter;
                    }
                    else
                    {
                       sU8NumberCounter = 0;
                       tab_Gen_MaxPower_edit_modify[0] = '0';
                    }
                }
                else if(sU8SetNumCounter == 5)//最大功率第二个数字
                {
                    if(tab_Gen_MaxPower_edit_modify[0] == '6')
                    {
                        if(sU8NumberCounter <= 6)
                        {
                            tab_Gen_MaxPower_edit_modify[1] =  '0' + sU8NumberCounter;
                        }
                        else
                        {
                            sU8NumberCounter = 0;
                            tab_Gen_MaxPower_edit_modify[1] = '0';
                        }
                    }
                    else
                    {
                        if(sU8NumberCounter <= 9)
                        {
                            tab_Gen_MaxPower_edit_modify[1] =  '0' + sU8NumberCounter;
                        }
                        else
                        {
                            sU8NumberCounter = 0;
                            tab_Gen_MaxPower_edit_modify[1] = '0';
                        }
                    }
                }
                else if(sU8SetNumCounter == 6) //最大功率第三个数字
                {
                    if((tab_Gen_MaxPower_edit_modify[0] == '6')&&(tab_Gen_MaxPower_edit_modify[1] == '6'))
                    {
                       tab_Gen_MaxPower_edit_modify[2] = '0';
                    }
                    else
                    {
                        if(sU8NumberCounter <= 9)
                        {
                            tab_Gen_MaxPower_edit_modify[2] =  '0' + sU8NumberCounter;
                        }
                        else
                        {
                            sU8NumberCounter = 0;
                            tab_Gen_MaxPower_edit_modify[2] = '0';
                        }
                    }
                }
                else if(sU8SetNumCounter == 7)//最大功率第四个数字
                {
                    if((tab_Gen_MaxPower_edit_modify[0] == '6')&&(tab_Gen_MaxPower_edit_modify[1] == '6'))
                    {
                       tab_Gen_MaxPower_edit_modify[3] = '0';
                    }
                    else
                    {
                        if(sU8NumberCounter <= 9)
                        {
                            tab_Gen_MaxPower_edit_modify[3] =  '0' + sU8NumberCounter;
                        }
                        else
                        {
                            sU8NumberCounter = 0;
                            tab_Gen_MaxPower_edit_modify[3] = '0';
                        }
                    }
                }
                gCurrentMenu.eCurrentDisplayMenuType = nowDisplayType;
            }
            break;
        case KEYACTION_UP://在发电机功率参数界面下，DOWN键按下，选择对应的设置项
            {
                 if(gbEditFlag != STATUS_TRUE)//进入编辑模式
                {
                    gbEditFlag = STATUS_TRUE;
                    sprintf(tab_Gen_RatedPower_edit_modify,"%s",tab_Gen_RatedPower_edit);
                    sprintf(tab_Gen_MaxPower_edit_modify,"%s",tab_Gen_MaxPower_edit);
                }
                
                sU8NumberCounter--;
                
                if(sU8SetNumCounter == 0) //额定功率第一个数字
                {
                    if(!(sU8NumberCounter <= 6))
                    {
                        sU8NumberCounter = 6;
                    }
                    tab_Gen_RatedPower_edit_modify[0] = '0' + sU8NumberCounter;
                }
                else if(sU8SetNumCounter == 1)//额定功率第二个数字
                {
                    if(tab_Gen_RatedPower_edit_modify[0] == '6')
                    {
                        if(!(sU8NumberCounter <= 6))
                        {
                            sU8NumberCounter = 6;
                            tab_Gen_RatedPower_edit_modify[2] = '0';
                        }
                    }
                    else
                    {
                        if(!(sU8NumberCounter <= 9))
                        {
                            sU8NumberCounter = 9;
                            tab_Gen_RatedPower_edit_modify[2] = '0';
                        }
                    }
                    tab_Gen_RatedPower_edit_modify[1] = '0' + sU8NumberCounter; 
                } 
                else if(sU8SetNumCounter == 2) //额定功率第三个数字
                {
                    if((tab_Gen_RatedPower_edit_modify[0] == '6')&&(tab_Gen_RatedPower_edit_modify[1] == '6'))
                    {
                       sU8NumberCounter = 0;
                    }
                    else
                    {
                        if(!(sU8NumberCounter <= 9))
                        {
                            sU8NumberCounter = 9;
                        }
                    }
                    tab_Gen_RatedPower_edit_modify[2] =  '0' + sU8NumberCounter;
                }
                else if(sU8SetNumCounter == 3)//额定功率第四个数字
                {
                    if((tab_Gen_RatedPower_edit_modify[0] == '6')&&(tab_Gen_RatedPower_edit_modify[1] == '6'))
                    {
                       sU8NumberCounter = 0;
                    }
                    else
                    {
                        if(!(sU8NumberCounter <= 9))
                        {
                            sU8NumberCounter = 9;
                        }
                    }
                    tab_Gen_RatedPower_edit_modify[3] =  '0' + sU8NumberCounter;
                }
                else if(sU8SetNumCounter == 4) //最大功率第一个数字
                {
                    if(!(sU8NumberCounter <= 6))
                    {
                        sU8NumberCounter = 6;
                        tab_Gen_MaxPower_edit_modify[0] = '0';
                    }
                     tab_Gen_MaxPower_edit_modify[0] = '0' + sU8NumberCounter;
                }
                else if(sU8SetNumCounter == 5)//最大功率第二个数字
                {
                    if(tab_Gen_MaxPower_edit_modify[0] == '6')
                    {
                        if(!(sU8NumberCounter <= 6))
                        {
                            sU8NumberCounter = 6;
                            tab_Gen_MaxPower_edit_modify[2] = '0';
                        }
                    }
                    else
                    {
                        if(!(sU8NumberCounter <= 9))
                        {
                            sU8NumberCounter = 9;
                            tab_Gen_MaxPower_edit_modify[2] = '0';
                        }
                    }
                    tab_Gen_MaxPower_edit_modify[1] = '0' + sU8NumberCounter; 
                } 
                else if(sU8SetNumCounter == 6) //最大功率第三个数字
                {
                    if((tab_Gen_MaxPower_edit_modify[0] == '6')&&(tab_Gen_MaxPower_edit_modify[1] == '6'))
                    {
                       sU8NumberCounter = 0;
                    }
                    else
                    {
                        if(!(sU8NumberCounter <= 9))
                        {
                            sU8NumberCounter = 9;
                        }
                    }
                    tab_Gen_MaxPower_edit_modify[2] =  '0' + sU8NumberCounter;
                }
                else if(sU8SetNumCounter == 7)//最大功率第四个数字
                {
                    if((tab_Gen_MaxPower_edit_modify[0] == '6')&&(tab_Gen_MaxPower_edit_modify[1] == '6'))
                    {
                       sU8NumberCounter = 0;
                    }
                    else
                    {
                        if(!(sU8NumberCounter <= 9))
                        {
                            sU8NumberCounter = 9;
                        }
                    }
                    tab_Gen_MaxPower_edit_modify[3] =  '0' + sU8NumberCounter;
                }

                gCurrentMenu.eCurrentDisplayMenuType = nowDisplayType;
            }
            break;
        case KEYACTION_UPDOWN://在发电机功率参数界面下，UP键 + DOWN键同时按下，切换设置下一个数据
            {
                sU8SetNumCounter++;
                sU8NumberCounter = 0;
                if(sU8SetNumCounter == DISPLAY_SET_GEN_POWERPARA_COUNT)
                {
                    sU8SetNumCounter = 0;  
                }
                gCurrentMenu.eCurrentDisplayMenuType = nowDisplayType;
            }
            break;
        case KEYACTION_ESC://在发电机功率参数界面下，ESC键按下，保存退出到上一级菜单
            {
                if(gbEditFlag != STATUS_FALSE)//退出编辑模式 
                {
                    gbEditFlag = STATUS_FALSE;
                    sU8NumberCounter = 0;
                    Display_Set_UnderLine_Blink_Position(STATUS_FALSE,0,0);
                }
                gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_SET_GEN;
            }
            break;
        case KEYACTION_NULL://无操作刷新主界面数据
        default:
            {
                Display_SET_GenPara *pStGenPara = getGenParaData();
                sprintf(tab_Gen_RatedPower_edit,"%04d",pStGenPara->u16RatedPower);
                sprintf(tab_Gen_MaxPower_edit,"%04d",pStGenPara->u16MaxPower);
                gCurrentMenu.eCurrentDisplayMenuType = nowDisplayType;
            }
            break;
    }
    
    if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_ENGLISH)  //无功功率设置英文界面组装
    { 
        if(gbEditFlag == STATUS_TRUE)
        {
            updateDisplayGenPowerParaSetData_English(tab_Gen_RatedPower_edit_modify,tab_Gen_MaxPower_edit_modify);
            Display_Set_UnderLine_Blink_Position(STATUS_TRUE,arrayFixGenPowerParaFlicker[sU8SetNumCounter].u8StartPos,arrayFixGenPowerParaFlicker[sU8SetNumCounter].u8EndPos);
        }
        else
        {
            updateDisplayGenPowerParaSetData_English(tab_Gen_RatedPower_edit,tab_Gen_MaxPower_edit);
        }
    }
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_CHINESE) //发电机功率参数设置中文界面组装 
    {
        if(gbEditFlag == STATUS_TRUE)
        {
            updateDisplayGenPowerParaSetData_Chinese(tab_Gen_RatedPower_edit_modify,tab_Gen_MaxPower_edit_modify);
            //Display_Set_UnderLine_Blink_Position(STATUS_TRUE,arrayFixReactPowerFlickerChinese[sU8SetNumCounter].u8StartPos,arrayFixReactPowerFlickerChinese[sU8SetNumCounter].u8EndPos);
        }
        else
        {
            updateDisplayGenPowerParaSetData_Chinese(tab_Gen_RatedPower_edit,tab_Gen_MaxPower_edit);
        } 
    }
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_SPANISH)//发电机功率参数设置西班牙界面组装
    {
        updateDisplayGenPowerParaSetData_Spanish(tab_Gen_RatedPower_edit_modify,tab_Gen_MaxPower_edit_modify); 
    } 
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_GERMAN)//发电机功率参数设置德语界面组装
    {
        updateDisplayGenPowerParaSetData_German(tab_Gen_RatedPower_edit_modify,tab_Gen_MaxPower_edit_modify);
    }
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_FRENCH)//发电机功率参数设置法语界面组装
    {
        updateDisplayGenPowerParaSetData_French(tab_Gen_RatedPower_edit_modify,tab_Gen_MaxPower_edit_modify);
    }
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_POLISH)//发电机功率参数设置波兰界面组装
    {
        updateDisplayGenPowerParaSetData_Polish(tab_Gen_RatedPower_edit_modify,tab_Gen_MaxPower_edit_modify);
    }
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_ITALIAN)//发电机功率参数设置意大利界面组装 
    {
        updateDisplayGenPowerParaSetData_Italian(tab_Gen_RatedPower_edit_modify,tab_Gen_MaxPower_edit_modify);
    }
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_CZECH)//发电机功率参数设置捷克界面组装 
    {
        updateDisplayGenPowerParaSetData_Czech(tab_Gen_RatedPower_edit_modify,tab_Gen_MaxPower_edit_modify);
    } 
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_DUTCH)//发电机功率参数设置荷兰界面组装
    {
        updateDisplayGenPowerParaSetData_Dutch(tab_Gen_RatedPower_edit_modify,tab_Gen_MaxPower_edit_modify);
    }
}

/***************************************************************************
 功能:发电机功率参数设置 西班牙界面信息
****************************************************************************/
void updateDisplayGenPowerParaSetData_English(char *strRatedPower,char *strMaxPower)
{
    memset(tab_display,0,DISPLAY_CACHE_SIZE);
    sprintf(tab_display,"  Gen Power Para Set \nRatedPower:%s W    \nMaxPower:%s W      \n                     \n",strRatedPower,strMaxPower);
    GUI_Display(tab_display, 0, 0);
}

/***************************************************************************
 功能:发电机功率参数设置 西班牙界面信息
****************************************************************************/
void updateDisplayGenPowerParaSetData_Chinese(char *strRatedPower,char *strMaxPower)
{
    
}

/***************************************************************************
 功能:发电机功率参数设置 西班牙界面信息
****************************************************************************/
void updateDisplayGenPowerParaSetData_Spanish(char *strRatedPower,char *strMaxPower)
{
    
}

/***************************************************************************
 功能:发电机功率参数设置 德语界面信息
****************************************************************************/
void updateDisplayGenPowerParaSetData_German(char *strRatedPower,char *strMaxPower)
{
    
}

/***************************************************************************
 功能:发电机功率参数设置 法语界面信息
****************************************************************************/
void updateDisplayGenPowerParaSetData_French(char *strRatedPower,char *strMaxPower)
{
    
}

/***************************************************************************
 功能:发电机功率参数设置 波兰语界面信息
****************************************************************************/
void updateDisplayGenPowerParaSetData_Polish(char *strRatedPower,char *strMaxPower)
{
    
}

/***************************************************************************
 功能:发电机功率参数设置 意大利语界面信息
****************************************************************************/
void updateDisplayGenPowerParaSetData_Italian(char *strRatedPower,char *strMaxPower)
{
    
}

/***************************************************************************
 功能:发电机功率参数设置 捷克语界面信息
****************************************************************************/
void updateDisplayGenPowerParaSetData_Czech(char *strRatedPower,char *strMaxPower)
{
    
}

/***************************************************************************
 功能:发电机功率参数设置 荷兰语界面信息
****************************************************************************/
void updateDisplayGenPowerParaSetData_Dutch(char *strRatedPower,char *strMaxPower)
{
    
}

/***************************************************************************
功能:从Flash获取发电机参数
****************************************************************************/
Display_SET_GenPara * getGenParaData(void)
{
   Flash_Device_GenInfo_Read(&gDisplay.stDisplaySet.stGen,sizeof(Display_SET_Grid));
   return &gDisplay.stDisplaySet.stGen.stGenPara; 
}
/***************************************************************************
 功能:保存发电机参数到Flash
****************************************************************************/
void setGenParaData(Display_SET_GenPara stGenPara)
{
    Flash_Device_GenInfo_Read(&gDisplay.stDisplaySet.stGen,sizeof(Display_SET_Gen));
    gDisplay.stDisplaySet.stGen.stGenPara.u16RatedPower = stGenPara.u16RatedPower;
    gDisplay.stDisplaySet.stGen.stGenPara.u16MaxPower   = stGenPara.u16MaxPower;
    Flash_Device_GenInfo_Write(&gDisplay.stDisplaySet.stGen,sizeof(Display_SET_Gen));
}

/***************************************************************************
 功能:根据上一次界面操作类型和本次操作类型判断本次智能负载参数 SET界面切换
****************************************************************************/
void updateDisplayIntelLoadParaSetData(KeyAction_TypeDef nowActionType,DisplayAction_TypeDef nowDisplayType)
{
    static uint8_t sU8SetNumCounter = 0;        //需要设置某一位
    static uint8_t sU8NumberCounter = 0;        //具体设置的值
    
    switch(nowActionType) 
    {
        case KEYACTION_ENTER://在本次智能负载参数设置界面下，Enter键按下
            {
                if(gbEditFlag != STATUS_FALSE)//退出编辑模式
                {
                    gbEditFlag = STATUS_FALSE;
                    
                    Display_SET_IntelLoad  stInterLoad;
                    memset(&stInterLoad,0,sizeof(Display_SET_IntelLoad));
                    stInterLoad.u8CutDrySOC = atoi(tab_IntelLoad_CutSOC_edit_modify);
                    stInterLoad.u8OnDrySOC  = atoi(tab_IntelLoad_AccessSOC_edit_modify);
                    
                    setIntelLoadParaData(stInterLoad);
                    
                    sprintf(tab_IntelLoad_CutSOC_edit,"%s",tab_IntelLoad_CutSOC_edit_modify);
                    sprintf(tab_IntelLoad_AccessSOC_edit,"%s",tab_IntelLoad_AccessSOC_edit_modify);
                    
                    sprintf(tab_IntelLoad_CutSOC_edit_modify,"%s","000");
                    sprintf(tab_IntelLoad_AccessSOC_edit_modify,"%s","000");
                    sU8SetNumCounter = 0;
                    sU8NumberCounter = 0;
                    Display_Set_UnderLine_Blink_Position(STATUS_FALSE,0,0);
                }
                gCurrentMenu.eCurrentDisplayMenuType = nowDisplayType;
            }
            break;
        case KEYACTION_DOWN://在本次智能负载参数设置界面下，UP键按下，选择对应的设置项
            {
                if(gbEditFlag != STATUS_TRUE)//进入编辑模式
                {
                    gbEditFlag = STATUS_TRUE;
                    sprintf(tab_IntelLoad_CutSOC_edit_modify,"%s",tab_IntelLoad_CutSOC_edit);
                    sprintf(tab_IntelLoad_AccessSOC_edit_modify,"%s",tab_IntelLoad_AccessSOC_edit);
                }
                
                sU8NumberCounter++;
                
                if(sU8SetNumCounter == 0) //智能负载退出SOC第一个数字
                {
                    if(sU8NumberCounter > 1)
                    {
                        sU8NumberCounter = 0;
                    } 
                    
                    tab_IntelLoad_CutSOC_edit_modify[0] =  '0' + sU8NumberCounter;
                    
                    if(tab_IntelLoad_CutSOC_edit_modify[0] == '1')
                    {
                       tab_IntelLoad_CutSOC_edit_modify[1] =  '0';
                       tab_IntelLoad_CutSOC_edit_modify[2] =  '0';
                    }
                }
                else if(sU8SetNumCounter == 1)//智能负载退出SOC第二个数字
                {
                    if(tab_IntelLoad_CutSOC_edit_modify[0] == '1')
                    {
                        sU8NumberCounter = 0;
                    }
                    else
                    {
                        if(sU8NumberCounter > 9)
                        {
                            sU8NumberCounter = 0;
                        }
                    }
                    tab_IntelLoad_CutSOC_edit_modify[1] =  '0' + sU8NumberCounter;
                }
                else if(sU8SetNumCounter == 2) //智能负载退出SOC第三个数字
                {
                    if(tab_IntelLoad_CutSOC_edit_modify[0] == '1')
                    {
                        sU8NumberCounter = 0;
                    }
                    else
                    {
                        if(sU8NumberCounter > 9)
                        {
                            sU8NumberCounter = 0;
                        }
                    }
                    tab_IntelLoad_CutSOC_edit_modify[2] =  '0' + sU8NumberCounter;
                }
                if(sU8SetNumCounter == 3) //智能负载并入SOC第一个数字
                {
                    if(sU8NumberCounter > 1)
                    {
                        sU8NumberCounter = 0;
                    } 
                    
                    tab_IntelLoad_AccessSOC_edit_modify[0] =  '0' + sU8NumberCounter;
                    
                    if(tab_IntelLoad_AccessSOC_edit_modify[0] == '1')
                    {
                       tab_IntelLoad_AccessSOC_edit_modify[1] =  '0';
                       tab_IntelLoad_AccessSOC_edit_modify[2] =  '0';
                    }
                }
                else if(sU8SetNumCounter == 4)//智能负载并入SOC第二个数字
                {
                    if(tab_IntelLoad_AccessSOC_edit_modify[0] == '1')
                    {
                        sU8NumberCounter = 0;
                    }
                    else
                    {
                        if(sU8NumberCounter > 9)
                        {
                            sU8NumberCounter = 0;
                        }
                    }
                    tab_IntelLoad_AccessSOC_edit_modify[1] =  '0' + sU8NumberCounter;
                }
                else if(sU8SetNumCounter == 5) //智能负载并入SOC第三个数字
                {
                    if(tab_IntelLoad_AccessSOC_edit_modify[0] == '1')
                    {
                        sU8NumberCounter = 0;
                    }
                    else
                    {
                        if(sU8NumberCounter > 9)
                        {
                            sU8NumberCounter = 0;
                        }
                    }
                    tab_IntelLoad_AccessSOC_edit_modify[2] =  '0' + sU8NumberCounter;
                }
            }
            break;
        case KEYACTION_UP://在本次智能负载参数设置界面下，DOWN键按下，选择对应的设置项
            {
                 if(gbEditFlag != STATUS_TRUE)//进入编辑模式
                {
                    gbEditFlag = STATUS_TRUE;
                    sprintf(tab_IntelLoad_CutSOC_edit_modify,"%s",tab_IntelLoad_CutSOC_edit);
                    sprintf(tab_IntelLoad_AccessSOC_edit_modify,"%s",tab_IntelLoad_AccessSOC_edit);
                }
                
                sU8NumberCounter--;
                
                if(sU8SetNumCounter == 0) //智能负载退出SOC第一个数字
                {
                    if(!(sU8NumberCounter <= 1))
                    {
                        sU8NumberCounter = 1;
                    }
                    
                    tab_IntelLoad_CutSOC_edit_modify[0] =  '0' + sU8NumberCounter;
                    
                    if(tab_IntelLoad_CutSOC_edit_modify[0] == '1')
                    {
                       tab_IntelLoad_CutSOC_edit_modify[1] =  '0';
                       tab_IntelLoad_CutSOC_edit_modify[2] =  '0';
                    }
                }
                else if(sU8SetNumCounter == 1)//智能负载退出SOC第二个数字
                {
                    if(tab_IntelLoad_CutSOC_edit_modify[0] == '1')
                    {
                       sU8NumberCounter = 0;
                    }
                    else
                    {
                        if(!(sU8NumberCounter<=9))
                        {
                            sU8NumberCounter = 9;
                        }
                    }
                    tab_IntelLoad_CutSOC_edit_modify[1] =  '0' + sU8NumberCounter;
                } 
                else if(sU8SetNumCounter == 2) //智能负载退出SOC第三个数字
                {
                    if(tab_IntelLoad_CutSOC_edit_modify[0] == '1')
                    {
                       sU8NumberCounter = 0;
                    }
                    else
                    {
                        if(!(sU8NumberCounter<=9))
                        {
                            sU8NumberCounter = 9;
                        }
                    }
                    tab_IntelLoad_CutSOC_edit_modify[2] =  '0' + sU8NumberCounter;
                }
                else if(sU8SetNumCounter == 3) //智能负载并入SOC第一个数字
                {
                    if(!(sU8NumberCounter <= 1))
                    {
                        sU8NumberCounter = 1;
                    }
                    
                    tab_IntelLoad_AccessSOC_edit_modify[0] =  '0' + sU8NumberCounter;
                    
                    if(tab_IntelLoad_AccessSOC_edit_modify[0] == '1')
                    {
                       tab_IntelLoad_AccessSOC_edit_modify[1] =  '0';
                       tab_IntelLoad_AccessSOC_edit_modify[2] =  '0';
                    }
                }
                else if(sU8SetNumCounter == 4)//智能负载并入SOC第二个数字
                {
                    if(tab_IntelLoad_AccessSOC_edit_modify[0] == '1')
                    {
                       sU8NumberCounter = 0;
                    }
                    else
                    {
                        if(!(sU8NumberCounter<=9))
                        {
                            sU8NumberCounter = 9;
                        }
                    }
                    tab_IntelLoad_AccessSOC_edit_modify[1] =  '0' + sU8NumberCounter;
                } 
                else if(sU8SetNumCounter == 5) //智能负载并入SOC第三个数字
                {
                    if(tab_IntelLoad_AccessSOC_edit_modify[0] == '1')
                    {
                       sU8NumberCounter = 0;
                    }
                    else
                    {
                        if(!(sU8NumberCounter<=9))
                        {
                            sU8NumberCounter = 9;
                        }
                    }
                    tab_IntelLoad_AccessSOC_edit_modify[2] =  '0' + sU8NumberCounter;
                }
                
                gCurrentMenu.eCurrentDisplayMenuType = nowDisplayType;
            }
            break;
        case KEYACTION_UPDOWN://在本次智能负载参数设置界面下，UP键 + DOWN键同时按下，切换设置下一个数据
            {
                sU8SetNumCounter++;
                sU8NumberCounter = 0;
                if(sU8SetNumCounter == DISPLAY_SET_GEN_POWERPARA_COUNT)
                {
                    sU8SetNumCounter = 0;
                }
                gCurrentMenu.eCurrentDisplayMenuType = nowDisplayType;
            }
            break;
        case KEYACTION_ESC://在本次智能负载参数设置界面下，ESC键按下，保存退出到上一级菜单
            {
                if(gbEditFlag != STATUS_FALSE)//退出编辑模式 
                {
                    gbEditFlag = STATUS_FALSE;
                    sU8NumberCounter = 0;
                    Display_Set_UnderLine_Blink_Position(STATUS_FALSE,0,0);
                }
                gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_SET_GEN;
            }
            break;
        case KEYACTION_NULL:
        default:
            {
                Display_SET_IntelLoad *pStIntelLoad = getIntelLoadParaData();
                sprintf(tab_IntelLoad_CutSOC_edit,"%03d",pStIntelLoad->u8CutDrySOC);
                sprintf(tab_IntelLoad_AccessSOC_edit,"%03d",pStIntelLoad->u8OnDrySOC);
                gCurrentMenu.eCurrentDisplayMenuType = nowDisplayType;
            }
            break;
    }
    
    if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_ENGLISH)  //智能负载参数设置界面英文界面组装
    { 
        if(gbEditFlag == STATUS_TRUE)
        {
            updateDisplayIntelLoadSetData_English(tab_IntelLoad_CutSOC_edit_modify,tab_IntelLoad_AccessSOC_edit_modify);
            Display_Set_UnderLine_Blink_Position(STATUS_TRUE,arrayFixIntelLoadParaFlicker[sU8SetNumCounter].u8StartPos,arrayFixIntelLoadParaFlicker[sU8SetNumCounter].u8EndPos);
        }
        else
        {
            updateDisplayIntelLoadSetData_English(tab_IntelLoad_CutSOC_edit,tab_IntelLoad_AccessSOC_edit);
        }
    }
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_CHINESE) //智能负载参数设置界面中文界面组装 
    {
        if(gbEditFlag == STATUS_TRUE)
        {
            updateDisplayIntelLoadSetData_Chinese(tab_IntelLoad_CutSOC_edit_modify,tab_IntelLoad_AccessSOC_edit_modify);
            //Display_Set_UnderLine_Blink_Position(STATUS_TRUE,arrayFixIntelLoadFlickerChinese[sU8SetNumCounter].u8StartPos,arrayFixIntelLoadFlickerChinese[sU8SetNumCounter].u8EndPos);
        }
        else
        {
            updateDisplayIntelLoadSetData_Chinese(tab_IntelLoad_CutSOC_edit,tab_IntelLoad_AccessSOC_edit);
        } 
    }
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_SPANISH)//智能负载参数设置界面西班牙界面组装
    {
        updateDisplayIntelLoadSetData_Spanish(tab_Gen_RatedPower_edit_modify,tab_Gen_MaxPower_edit_modify); 
    } 
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_GERMAN)//智能负载参数设置界面德语界面组装
    {
        updateDisplayIntelLoadSetData_German(tab_Gen_RatedPower_edit_modify,tab_Gen_MaxPower_edit_modify);
    }
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_FRENCH)//智能负载参数设置界面法语界面组装
    {
        updateDisplayIntelLoadSetData_French(tab_Gen_RatedPower_edit_modify,tab_Gen_MaxPower_edit_modify);
    }
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_POLISH)//智能负载参数设置界面波兰界面组装
    {
        updateDisplayIntelLoadSetData_Polish(tab_Gen_RatedPower_edit_modify,tab_Gen_MaxPower_edit_modify);
    }
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_ITALIAN)//智能负载参数设置界面意大利界面组装 
    {
        updateDisplayIntelLoadSetData_Italian(tab_Gen_RatedPower_edit_modify,tab_Gen_MaxPower_edit_modify);
    }
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_CZECH)//智能负载参数设置界面捷克界面组装 
    {
        updateDisplayIntelLoadSetData_Czech(tab_Gen_RatedPower_edit_modify,tab_Gen_MaxPower_edit_modify);
    } 
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_DUTCH)//智能负载参数设置界面荷兰界面组装
    {
        updateDisplayIntelLoadSetData_Dutch(tab_Gen_RatedPower_edit_modify,tab_Gen_MaxPower_edit_modify);
    }
}

/***************************************************************************
 功能:智能负载参数设置 英语界面信息
****************************************************************************/
void updateDisplayIntelLoadSetData_English(char *strCutSOC,char *stOnSOC)
{
    memset(tab_display,0,DISPLAY_CACHE_SIZE);
    sprintf(tab_display," IntelligentLoad Set \nCut SOC:%s W        \nAccess SOC:%s W     \n                     \n",strCutSOC,stOnSOC);
    GUI_Display(tab_display, 0, 0);
}

/***************************************************************************
 功能:智能负载参数设置 西班牙界面信息
****************************************************************************/
void updateDisplayIntelLoadSetData_Chinese(char *strCutSOC,char *stOnSOC)
{
    
}

/***************************************************************************
 功能:智能负载参数设置 西班牙界面信息
****************************************************************************/
void updateDisplayIntelLoadSetData_Spanish(char *strCutSOC,char *stOnSOC)
{
    
}

/***************************************************************************
 功能:智能负载参数设置 德语界面信息
****************************************************************************/
void updateDisplayIntelLoadSetData_German(char *strCutSOC,char *stOnSOC)
{
    
}

/***************************************************************************
 功能:智能负载参数设置 法语界面信息
****************************************************************************/
void updateDisplayIntelLoadSetData_French(char *strCutSOC,char *stOnSOC)
{
    
}

/***************************************************************************
 功能:智能负载参数设置 波兰语界面信息
****************************************************************************/
void updateDisplayIntelLoadSetData_Polish(char *strCutSOC,char *stOnSOC)
{
    
}

/***************************************************************************
 功能:智能负载参数设置 意大利语界面信息
****************************************************************************/
void updateDisplayIntelLoadSetData_Italian(char *strCutSOC,char *stOnSOC)
{
    
}

/***************************************************************************
 功能:智能负载参数设置 捷克语界面信息
****************************************************************************/
void updateDisplayIntelLoadSetData_Czech(char *strCutSOC,char *stOnSOC)
{
    
}

/***************************************************************************
 功能:智能负载参数设置 荷兰语界面信息
****************************************************************************/
void updateDisplayIntelLoadSetData_Dutch(char *strCutSOC,char *stOnSOC)
{
    
}

/***************************************************************************
功能:从Flash获取发电机参数
****************************************************************************/
Display_SET_IntelLoad * getIntelLoadParaData(void)
{
   Flash_Device_GenInfo_Read(&gDisplay.stDisplaySet.stGen,sizeof(Display_SET_Gen));
   return &gDisplay.stDisplaySet.stGen.stIntelLoad; 
}
/***************************************************************************
 功能:保存发电机参数到Flash
****************************************************************************/
void setIntelLoadParaData(Display_SET_IntelLoad stInterLoadPara)
{
    Flash_Device_GenInfo_Read(&gDisplay.stDisplaySet.stGen,sizeof(Display_SET_Gen));
    gDisplay.stDisplaySet.stGen.stIntelLoad.u8CutDrySOC = stInterLoadPara.u8CutDrySOC;
    gDisplay.stDisplaySet.stGen.stIntelLoad.u8OnDrySOC  = stInterLoadPara.u8OnDrySOC;
    Flash_Device_GenInfo_Write(&gDisplay.stDisplaySet.stGen,sizeof(Display_SET_Gen));
}


/***************************************************************************
 功能:根据上一次界面操作类型和本次操作类型判断本次干接点用途界面切换
****************************************************************************/
void updateDisplayGenUsageSelectSetData(KeyAction_TypeDef nowActionType,DisplayAction_TypeDef nowDisplayType)
{
    static uint8_t sU8UsageSelectCounter = 0;
    
    switch(nowActionType)
    {
        case KEYACTION_ENTER://在干接点用途设置界面下，Enter键按下，保存设置值
            {
                if(gbEditFlag != STATUS_FALSE)
                {
                    setDryNodeUseData(gU8UsageSelectCounter_modify);
                    gbEditFlag = STATUS_FALSE;
                    sU8UsageSelectCounter = gU8UsageSelectCounter_modify;
                    gCurrentMenu.stTip.eOccurTipAction = nowDisplayType;
                    gCurrentMenu.stTip.eTipType = TIP_PASSED;
                    gCurrentMenu.stTip.u8PromptTime = 20;
                    gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_PROMPT;
                    gU8UsageSelectCounter_modify = 0;
                }
            }
            break;
        case KEYACTION_DOWN://在干接点用途设置界面下，Up键按下，设置向下翻页
            {
                if(gbEditFlag != STATUS_TRUE) //进入编辑模式  
                {
                    gbEditFlag = STATUS_TRUE;
                    gU8UsageSelectCounter_modify = sU8UsageSelectCounter;
                }
                
                gU8UsageSelectCounter_modify++;
                if(gU8UsageSelectCounter_modify == DISPLAY_SET_GEN_USAGE_COUNT)
                {
                    gU8UsageSelectCounter_modify = 0;
                }
                gCurrentMenu.eCurrentDisplayMenuType = nowDisplayType;
            }
            break;
        case KEYACTION_UP://在干接点用途设置界面下，Enter键按下，设置向上翻页
            {
                if(gbEditFlag != STATUS_TRUE) //进入编辑模式  
                {
                    gbEditFlag = STATUS_TRUE;
                    gU8UsageSelectCounter_modify = sU8UsageSelectCounter;
                }
                
                gU8UsageSelectCounter_modify--;
                
                if(gU8UsageSelectCounter_modify >= DISPLAY_SET_GEN_USAGE_COUNT)
                {
                    gU8UsageSelectCounter_modify = DISPLAY_SET_GEN_USAGE_COUNT-1;
                }
                gCurrentMenu.eCurrentDisplayMenuType = nowDisplayType;
            }
            break;
        case KEYACTION_ESC://在干接点用途设置界面下，Esc键按下，进入上一级目录
            {
                gbEditFlag = STATUS_FALSE;
                gU8UsageSelectCounter_modify = 0;
                sU8UsageSelectCounter = 0;
                gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_SET_GEN; 
            }
            break;
        case KEYACTION_NULL://无操作刷新界面数据
        default:
            {
                if(gbEditFlag == STATUS_FALSE)
                {
                    sU8UsageSelectCounter = getDryNodeUseData();
                }
                
                gCurrentMenu.eCurrentDisplayMenuType = nowDisplayType;
            }
            break;
    }
    
    if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_ENGLISH)//在干接点用途设置界面下 英文界面组装 
    {
        if(gbEditFlag == STATUS_TRUE)
        {
            updateDisplayGenUsageSelectSetData_English(gU8UsageSelectCounter_modify);
        }
        else
        {
            updateDisplayGenUsageSelectSetData_English(sU8UsageSelectCounter);
        }
    }
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_CHINESE)//在干接点用途设置界面下 中文界面组装
    {
        updateDisplayGenUsageSelectSetData_Chinese(sU8UsageSelectCounter);
    }
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_SPANISH)//在干接点用途设置界面下 西班牙界面组装 
    {
        updateDisplayGenUsageSelectSetData_Spanish(sU8UsageSelectCounter);
    }
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_GERMAN)//在干接点用途设置界面下 德语界面组装
    {
        updateDisplayPVControlWaySetData_German(sU8UsageSelectCounter);
    }   
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_FRENCH)//在干接点用途设置界面下 法语界面组装 
    {
       updateDisplayPVControlWaySetData_French(sU8UsageSelectCounter);
    }
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_POLISH)//在干接点用途设置界面下 波兰界面组装
    {
        updateDisplayPVControlWaySetData_Polish(sU8UsageSelectCounter); 
    }
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_ITALIAN)//在干接点用途设置界面下 意大利界面组装
    {
        updateDisplayPVControlWaySetData_Italian(sU8UsageSelectCounter);
    }
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_CZECH)//在干接点用途设置界面下 捷克界面组装 
    {
        updateDisplayPVControlWaySetData_Czech(sU8UsageSelectCounter);
    }
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_DUTCH)//在干接点用途设置界面下 荷兰界面组装 
    {
        updateDisplayPVControlWaySetData_Dutch(sU8UsageSelectCounter);
    }
    else
    {
        updateDisplayPVControlWaySetData_English(sU8UsageSelectCounter);
    }
}

/***************************************************************************
功能:发电机用途选择设置英文界面
****************************************************************************/
void updateDisplayGenUsageSelectSetData_English(uint8_t sU8GenUsageSCounter)
{    
    memset(tab_display,0,DISPLAY_CACHE_SIZE);
    
    if(sU8GenUsageSCounter == GEN_USE_NULL)
    {
        sprintf(tab_display,"   Gen Usage Select  \n->None               \nGen                  \nIntelligent Load     \n");
    }
    else if(sU8GenUsageSCounter == GEN_USE_Gen)
    {
        sprintf(tab_display,"   Gen Usage Select  \nNone                 \n->Gen                \nIntelligent Load     \n");
    }
    else if(sU8GenUsageSCounter == GEN_USE_IntelLoad)
    {
        sprintf(tab_display,"   Gen Usage Select  \nNone                 \nGen                  \n->Intelligent Load   \n");
    }
    else
    {
    }
    
    GUI_Display(tab_display, 0, 0);
}

/***************************************************************************
 功能:发电机用途选择设置西班牙界面
****************************************************************************/
void updateDisplayGenUsageSelectSetData_Spanish(uint8_t sU8GenUsageSCounter)
{
    
}

/***************************************************************************
 功能:发电机用途选择设置中文界面
****************************************************************************/
void updateDisplayGenUsageSelectSetData_Chinese(uint8_t sU8GenUsageSCounter)
{
    
}
/***************************************************************************
 功能:发电机用途选择设置德语界面
****************************************************************************/
void updateDisplayGenUsageSelectSetData_German(uint8_t sU8GenUsageSCounter)
{
    
}
/***************************************************************************
 功能:发电机用途选择设置法语界面
****************************************************************************/
void updateDisplayGenUsageSelectSetData_French(uint8_t sU8GenUsageSCounter)
{
    
}
/***************************************************************************
 功能:发电机用途选择设置界面
****************************************************************************/
void updateDisplayGenUsageSelectSetData_Polish(uint8_t sU8GenUsageSCounter)
{
    
}
/***************************************************************************
 功能:发电机用途选择设置界面
****************************************************************************/
void updateDisplayGenUsageSelectSetData_Italian(uint8_t sU8GenUsageSCounter)
{
    
}
/***************************************************************************
 功能:发电机用途选择设置界面
****************************************************************************/
void updateDisplayGenUsageSelectSetData_Czech(uint8_t sU8GenUsageSCounter)
{
    
}
/***************************************************************************
 功能:发电机用途选择设置界面
****************************************************************************/
void updateDisplayGenUsageSelectSetData_Dutch(uint8_t sU8GenUsageSCounter)
{
    
}

/***************************************************************************
功能:从Flash获取发电机用途选择参数
****************************************************************************/
uint8_t getDryNodeUseData(void)
{
   Flash_Device_GenInfo_Read(&gDisplay.stDisplaySet.stGen,sizeof(Display_SET_GenPara));
   return gDisplay.stDisplaySet.stGen.u8DryNodeUse; 
}

/***************************************************************************
 功能:保存发电机用途选择参数到Flash
****************************************************************************/
void setDryNodeUseData(uint8_t u8UsageNode)
{
    Flash_Device_GenInfo_Read(&gDisplay.stDisplaySet.stGen,sizeof(Display_SET_GenPara));
    gDisplay.stDisplaySet.stGen.u8DryNodeUse = u8UsageNode;
    Flash_Device_GenInfo_Write(&gDisplay.stDisplaySet.stGen,sizeof(Display_SET_GenPara));
}

/***************************************************************************
 功能:根据上一次界面操作类型和本次操作类型判断本次干接点选择界面切换
****************************************************************************/
void updateDisplayGenDryRlySelectSetData(KeyAction_TypeDef nowActionType,DisplayAction_TypeDef nowDisplayType)
{
    static uint8_t sU8DryRlySelectCounter = 0;
    
    switch(nowActionType)
    {
        case KEYACTION_ENTER://在干接点选择设置界面下，Enter键按下，保存设置值
            {
                if(gbEditFlag != STATUS_FALSE)
                {
                    setDryNodeData(gU8DryRlySelectCounter_modify);
                    gbEditFlag = STATUS_FALSE;
                    sU8DryRlySelectCounter = gU8DryRlySelectCounter_modify;
                    gCurrentMenu.stTip.eOccurTipAction = nowDisplayType;
                    gCurrentMenu.stTip.eTipType = TIP_PASSED;
                    gCurrentMenu.stTip.u8PromptTime = 20;
                    gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_PROMPT;
                    gU8DryRlySelectCounter_modify = 0;
                }
            }
            break;
        case KEYACTION_DOWN://在干接点选择设置界面下，Up键按下，设置向下翻页
            {
                if(gbEditFlag != STATUS_TRUE) //进入编辑模式
                {
                    gbEditFlag = STATUS_TRUE;
                    gU8DryRlySelectCounter_modify = sU8DryRlySelectCounter;
                }
                
                gU8DryRlySelectCounter_modify++;
                if(gU8DryRlySelectCounter_modify == DISPLAY_SET_GEN_DRYLRY_COUNT)
                {
                    gU8DryRlySelectCounter_modify = 0;
                }
                gCurrentMenu.eCurrentDisplayMenuType = nowDisplayType;
            }
            break;
        case KEYACTION_UP://在干接点选择设置界面下，Enter键按下，设置向上翻页
            {
                if(gbEditFlag != STATUS_TRUE) //进入编辑模式  
                {
                    gbEditFlag = STATUS_TRUE;
                    gU8DryRlySelectCounter_modify = sU8DryRlySelectCounter;
                }
                
                gU8DryRlySelectCounter_modify--;
                
                if(gU8DryRlySelectCounter_modify >= DISPLAY_SET_GEN_DRYLRY_COUNT)
                {
                    gU8DryRlySelectCounter_modify = DISPLAY_SET_GEN_DRYLRY_COUNT-1;
                }
                gCurrentMenu.eCurrentDisplayMenuType = nowDisplayType;
            }
            break;
        case KEYACTION_ESC://在干接点选择设置界面下，Esc键按下，进入上一级目录
            {
                gbEditFlag = STATUS_FALSE;
                gU8DryRlySelectCounter_modify = 0;
                sU8DryRlySelectCounter = 0;
                gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_SET_GEN; 
            }
            break;
        case KEYACTION_NULL://无操作刷新界面数据
        default:
            {
                if(gbEditFlag == STATUS_FALSE)
                {
                    sU8DryRlySelectCounter = getDryNodeData();
                }
                
                gCurrentMenu.eCurrentDisplayMenuType = nowDisplayType;
            }
            break;
    }
    
    if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_ENGLISH)//在干接点选择设置界面下 英文界面组装 
    {
        if(gbEditFlag == STATUS_TRUE)
        {
            updateDisplayGenDryRlySelectSetData_English(gU8DryRlySelectCounter_modify);
        }
        else
        {
            updateDisplayGenDryRlySelectSetData_English(sU8DryRlySelectCounter);
        }
    }
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_CHINESE)//在干接点选择设置界面下 中文界面组装
    {
        updateDisplayGenDryRlySelectSetData_Chinese(sU8DryRlySelectCounter);
    }
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_SPANISH)//在干接点选择设置界面下 西班牙界面组装 
    {
        updateDisplayGenDryRlySelectSetData_Spanish(sU8DryRlySelectCounter);
    }
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_GERMAN)//在干接点选择设置界面下 德语界面组装
    {
        updateDisplayGenDryRlySelectSetData_German(sU8DryRlySelectCounter);
    }   
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_FRENCH)//在干接点选择设置界面下 法语界面组装 
    {
        updateDisplayGenDryRlySelectSetData_French(sU8DryRlySelectCounter);
    }
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_POLISH)//在干接点选择设置界面下 波兰界面组装
    {
        updateDisplayGenDryRlySelectSetData_Polish(sU8DryRlySelectCounter); 
    }
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_ITALIAN)//在干接点选择设置界面下 意大利界面组装
    {
        updateDisplayGenDryRlySelectSetData_Italian(sU8DryRlySelectCounter);
    }
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_CZECH)//在干接点选择设置界面下 捷克界面组装 
    {
        updateDisplayGenDryRlySelectSetData_Czech(sU8DryRlySelectCounter);
    }
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_DUTCH)//在干接点选择设置界面下 荷兰界面组装 
    {
        updateDisplayGenDryRlySelectSetData_Dutch(sU8DryRlySelectCounter);
    }
    else
    {
        updateDisplayGenDryRlySelectSetData_English(sU8DryRlySelectCounter);
    }
}

/***************************************************************************
功能:发电机用途选择设置英文界面
****************************************************************************/
void updateDisplayGenDryRlySelectSetData_English(uint8_t u8GenDryRlyCounter)
{
    memset(tab_display,0,DISPLAY_CACHE_SIZE);
    
    if(u8GenDryRlyCounter == GEN_DRYRLY_One)
    {
        sprintf(tab_display,"  Gen DryRly Select  \n->DRY-RLY 1          \nDRY-RLY 2            \n                     \n");
    }
    else if(u8GenDryRlyCounter == GEN_DRYRLY_Two)
    {
        sprintf(tab_display,"  Gen DryRly Select  \nDRY-RLY 1            \n->DRY-RLY 2          \n                     \n");
    }
    else
    {
    }
    
    GUI_Display(tab_display, 0, 0);
}

/***************************************************************************
 功能:发电机用途选择设置西班牙界面
****************************************************************************/
void updateDisplayGenDryRlySelectSetData_Spanish(uint8_t u8GenDryRlyCounter)
{
    
}

/***************************************************************************
 功能:发电机用途选择设置中文界面
****************************************************************************/
void updateDisplayGenDryRlySelectSetData_Chinese(uint8_t u8GenDryRlyCounter)
{
    
}
/***************************************************************************
 功能:发电机用途选择设置德语界面
****************************************************************************/
void updateDisplayGenDryRlySelectSetData_German(uint8_t u8GenDryRlyCounter)
{
    
}
/***************************************************************************
 功能:发电机用途选择设置法语界面
****************************************************************************/
void updateDisplayGenDryRlySelectSetData_French(uint8_t u8GenDryRlyCounter)
{
    
}
/***************************************************************************
 功能:发电机用途选择设置界面
****************************************************************************/
void updateDisplayGenDryRlySelectSetData_Polish(uint8_t u8GenDryRlyCounter)
{
    
}
/***************************************************************************
 功能:发电机用途选择设置界面
****************************************************************************/
void updateDisplayGenDryRlySelectSetData_Italian(uint8_t u8GenDryRlyCounter)
{
    
}
/***************************************************************************
 功能:发电机用途选择设置界面
****************************************************************************/
void updateDisplayGenDryRlySelectSetData_Czech(uint8_t u8GenDryRlyCounter)
{
    
}
/***************************************************************************
 功能:发电机用途选择设置界面
****************************************************************************/
void updateDisplayGenDryRlySelectSetData_Dutch(uint8_t sU8GenUsageSCounter)
{
    
}

/***************************************************************************
功能:从Flash获取发电机用途选择参数
****************************************************************************/
uint8_t getDryNodeData(void)
{
   Flash_Device_GenInfo_Read(&gDisplay.stDisplaySet.stGen,sizeof(Display_SET_GenPara));
   return gDisplay.stDisplaySet.stGen.u8DryNode; 
}

/***************************************************************************
 功能:保存发电机用途选择参数到Flash
****************************************************************************/
void setDryNodeData(uint8_t u8DryRlyNode)
{
    Flash_Device_GenInfo_Read(&gDisplay.stDisplaySet.stGen,sizeof(Display_SET_GenPara));
    gDisplay.stDisplaySet.stGen.u8DryNode = u8DryRlyNode;
    Flash_Device_GenInfo_Write(&gDisplay.stDisplaySet.stGen,sizeof(Display_SET_GenPara));
}

/***************************************************************************
 功能:根据上一次界面操作类型和本次操作类型判断本次升级 SET界面切换
****************************************************************************/
void updateDisplayUpgradeData(KeyAction_TypeDef nowActionType,DisplayAction_TypeDef nowDisplayType)
{
    static uint8_t sU8UpgradeCounter = 0;
    //uint8_t u8SetIndex = 0;
    switch(nowActionType) //本次界面操作类型
    {
        case KEYACTION_ENTER://在升级界面下，Enter键按下，进入选择对应的设置项
            {
                if(sU8UpgradeCounter == UPGRADE_EMS)
                {
                     //预留EMS升级接口
                     //gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_SET_UPGRADE_EMS;
                }
                else if(sU8UpgradeCounter == UPGRADE_DSP)
                {
                     //预留DSP升级接口
                     //gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_SET_UPGRADE_DSP;                   
                }
                else if(sU8UpgradeCounter == UPGRADE_BACKUP_MCU)
                {
                     //预留BMS升级接口
                     //gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_SET_UPGRADE_BMS;                     
                }
                else if(sU8UpgradeCounter == UPGRADE_BMS)
                {
                     //预留备份MCU升级接口
                     //gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_SET_UPGRADE_BACKUP;                      
                }
                
                gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_SET; 
            }
            break;
        case KEYACTION_DOWN://在升级界面下，UP键按下，选择对应的设置项
            {
                sU8UpgradeCounter++;
                if(sU8UpgradeCounter == DISPLAY_UPGRADE_ITEM_COUNT)
                {
                    sU8UpgradeCounter = 0;
                }
                gCurrentMenu.eCurrentDisplayMenuType = nowDisplayType; 
            }
            break;
        case KEYACTION_UP://在升级界面下，DOWN键按下，选择对应的设置项
            {
                sU8UpgradeCounter--;
                if(sU8UpgradeCounter >= DISPLAY_UPGRADE_ITEM_COUNT)
                {
                    sU8UpgradeCounter =  DISPLAY_UPGRADE_ITEM_COUNT - 1;
                }   
                gCurrentMenu.eCurrentDisplayMenuType = nowDisplayType;
            }
            break;
        case KEYACTION_ESC://在升级界面下，ESC键按下，返回设置界面
            {
                gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_SET;                
            }
            break;
        case KEYACTION_NULL://无操作刷新主界面数据
        default:
            {
                gCurrentMenu.eCurrentDisplayMenuType = nowDisplayType;  
            }
            break;
    }
    
    if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_ENGLISH) //在升级界面下 中文界面组装
    { 
        updateDisplayUpgradeData_English((Upgrade_TypeDef)sU8UpgradeCounter);                    
    } 
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_CHINESE)//在升级界面下 中文界面组装
    {
        updateDisplayUpgradeData_Chinese((Upgrade_TypeDef)sU8UpgradeCounter);
    } 
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_SPANISH)//在升级界面下 西班牙界面组装
    {
        updateDisplayUpgradeData_Spanish((Upgrade_TypeDef)sU8UpgradeCounter);  
    }
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_GERMAN)//在升级界面下 德语界面组装
    {
        updateDisplayUpgradeData_German((Upgrade_TypeDef)sU8UpgradeCounter);  
    }
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_FRENCH)//在升级界面下 法语界面组装
    {
        updateDisplayUpgradeData_French((Upgrade_TypeDef)sU8UpgradeCounter);    
    }
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_POLISH)//在升级界面下 波兰界面组装
    {
        updateDisplayUpgradeData_Polish((Upgrade_TypeDef)sU8UpgradeCounter); 
    }
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_ITALIAN)//在升级界面下 意大利界面组装 
    {
        updateDisplayUpgradeData_Italian((Upgrade_TypeDef)sU8UpgradeCounter);  
    }
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_CZECH)//在升级界面下 捷克界面组装
    {
        updateDisplayUpgradeData_Czech((Upgrade_TypeDef)sU8UpgradeCounter);   
    } 
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_DUTCH)//在升级界面下 荷兰界面组装
    {
        updateDisplayUpgradeData_Dutch((Upgrade_TypeDef)sU8UpgradeCounter);   
    }
    else
    { 
        updateDisplayUpgradeData_English((Upgrade_TypeDef)sU8UpgradeCounter);        
    }    
}

/***************************************************************************
 功能:升级界面 英语界面
****************************************************************************/
void updateDisplayUpgradeData_English(Upgrade_TypeDef u8UpgradeIndex)
{
    memset(tab_display,0,DISPLAY_CACHE_SIZE);
    
    if(u8UpgradeIndex == UPGRADE_EMS)
    {
        sprintf(tab_display,"       Upgrade       \n->EMS                \nDSP                  \nBackup MCU           \n");   
    }
    else if(u8UpgradeIndex == UPGRADE_DSP)
    {
        sprintf(tab_display,"       Upgrade       \nEMS                  \n->DSP                \nBackup MCU           \n");
    }
    else if(u8UpgradeIndex == UPGRADE_BACKUP_MCU)
    {
        sprintf(tab_display,"       Upgrade       \nEMS                  \nDSP                  \n->Backup MCU         \n");
    }
    else if(u8UpgradeIndex == UPGRADE_BMS)
    {
        sprintf(tab_display,"       Upgrade       \n->BMS                \n                     \n                     \n");
    }
    
    //GUI_DispStringAt((uint8_t*)tab_display, 0, 0); 
    GUI_Display(tab_display, 0, 0);
}

/***************************************************************************
 功能:升级界面西班牙语界面
****************************************************************************/
void  updateDisplayUpgradeData_Spanish(Upgrade_TypeDef u8UpgradeIndex)
{
    
}
/***************************************************************************
 功能:升级界面德语界
****************************************************************************/
void  updateDisplayUpgradeData_German(Upgrade_TypeDef u8UpgradeIndex)
{
    
}
/***************************************************************************
 功能:升级界面法语界面
****************************************************************************/
void  updateDisplayUpgradeData_French(Upgrade_TypeDef u8UpgradeIndex)
{
    
}
/***************************************************************************
 功能:升级界面波兰语界面
****************************************************************************/
void  updateDisplayUpgradeData_Polish(Upgrade_TypeDef u8UpgradeIndex)
{
    
}
/***************************************************************************
 功能:升级界面意大利语界
****************************************************************************/
void  updateDisplayUpgradeData_Italian(Upgrade_TypeDef u8UpgradeIndex)
{
    
}
/***************************************************************************
 功能:升级界面捷克语界面
****************************************************************************/
void  updateDisplayUpgradeData_Czech(Upgrade_TypeDef u8UpgradeIndex)
{
    
}
/***************************************************************************
 功能:升级界面荷兰语界面
****************************************************************************/
void  updateDisplayUpgradeData_Dutch(Upgrade_TypeDef u8UpgradeIndex)
{
    
}

/***************************************************************************
 功能:据上一次界面操作类型和本次操作类型判断本次语言 SET界面切换换
****************************************************************************/
void updateDisplaySystemLanguageSetData(KeyAction_TypeDef nowActionType,DisplayAction_TypeDef nowDisplayType)
{
    static uint8_t sU8SettLanguageCounter = 0;   //本次界面操作类型  

    //gLastMenu.eLastDisplayMenuType = DISPLAY_SET_SYSTEM_LANGUAGE;
    switch(nowActionType) 
    {
        case KEYACTION_ENTER://在系统设置界面下，Enter键按下，进入选择对应的设置项
            {
                if(gbEditFlag != STATUS_FALSE)
                {
                    setSystemLanguageItem((Language_TypeDef)gU8SettLanguageCounter_modify); //写到FLASH，需要预留FLASH接口
                    gCurrentMenu.eCurrentDisplayMenuType = nowDisplayType;
                    gbEditFlag = STATUS_FALSE;
                    sU8SettLanguageCounter = gU8SettLanguageCounter_modify;
                    gU8SettLanguageCounter_modify = 0;
                    
                    generateOperationRecord(RECORD_SET_Language);
                    if(LANGUAGE_ENGLISH == sU8SettLanguageCounter)										
                    {
                        GUI_Clear();
                        gu8LCDEnglishFont = En_5x8;                                                                                         //英文显示时，英文字体需初始化调整为8*5
                        gu8CharacterSpace = En_5x8_CharacterSpace_SIZE;                                                                     //英文显示时，字符间距进行调整;
                        SetSingleRowSize(En_ROW_SIZE);  
                        gu8ColumnSizeOfChar = En_5x8_Column_SIZE;
                    }
                    else
                    {
                        GUI_Clear();
                        gu8LCDEnglishFont = En_8x16;                                                                                        //中文显示时，英文字体需初始化调整为8*16
                        gu8CharacterSpace = En_8x16_CharacterSpace_SIZE;                                                                    //中文显示时，字符间距进行调整;
                        SetSingleRowSize(CH_ROW_SIZE); 
                        gu8ColumnSizeOfChar = En_8x16_Column_SIZE;
                    } 
                }
            }
            break;
        case KEYACTION_DOWN://在系统设置界面下，UP键按下，选择对应的设置项
            {
                if(gbEditFlag != STATUS_TRUE) //进入编辑模式  
                {
                    gbEditFlag = STATUS_TRUE;
                    gU8SettLanguageCounter_modify = sU8SettLanguageCounter;
                }
                
                gU8SettLanguageCounter_modify++;
                
                if(gU8SettLanguageCounter_modify == DISPLAY_SET_SYSTEM_LANGUAGE_ITEM_COUNT)
                {
                    gU8SettLanguageCounter_modify = 0;
                }
                gCurrentMenu.eCurrentDisplayMenuType = nowDisplayType;
            }
            break;
        case KEYACTION_UP://在系统设置界面下，DOWN键按下，选择对应的设置项
            {
                if(gbEditFlag != STATUS_TRUE) //进入编辑模式  
                {
                    gbEditFlag = STATUS_TRUE;
                    gU8SettLanguageCounter_modify = sU8SettLanguageCounter;
                }
                
                gU8SettLanguageCounter_modify--;
                
                if(gU8SettLanguageCounter_modify >= DISPLAY_SET_SYSTEM_LANGUAGE_ITEM_COUNT)
                {
                    gU8SettLanguageCounter_modify = DISPLAY_SET_SYSTEM_LANGUAGE_ITEM_COUNT - 1;
                }
                gCurrentMenu.eCurrentDisplayMenuType = nowDisplayType;   
            }
            break;
        case KEYACTION_ESC://在系统设置界面下，ESC键按下，返回设置界面
            {
                if(gLastMenu.eLastDisplayMenuType == DISPLAY_HOME)
                {
                    gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_HOME;
                }
                else if(gLastMenu.eLastDisplayMenuType == DISPLAY_SET_SYSTEM)
                {
                    gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_SET_SYSTEM;
                }
                gLastMenu.eLastDisplayMenuType = DISPLAY_NULL;
                
                gbEditFlag = STATUS_FALSE;
                gU8SettLanguageCounter_modify = 0;
                sU8SettLanguageCounter = 0;
            }
            break;
        case KEYACTION_NULL://无操作刷新主界面数据
        default:
            {
                if(gbEditFlag == STATUS_FALSE)
                {
                    sU8SettLanguageCounter = getSystemLanguageItem();
                }
                gCurrentMenu.eCurrentDisplayMenuType = nowDisplayType;                
            }
            break;
    }
    
    if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_ENGLISH) //系统语言设置界面LangiageSystemSet 中文界面组装
    {  
        if(gbEditFlag == STATUS_TRUE)
        {
            updateDisplaySystemLanguageSetData_English((Language_TypeDef)gU8SettLanguageCounter_modify);
        }
        else
        {
            updateDisplaySystemLanguageSetData_English((Language_TypeDef)sU8SettLanguageCounter);            
        }          
    } 
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_CHINESE)//系统语言设置界面LangiageSystemSet 中文界面组装
    {
			//updateDisplaySystemLanguageSetData_Chinese((Language_TypeDef)sU8SettLanguageCounter);
        if(gbEditFlag == STATUS_TRUE)
        {
            updateDisplaySystemLanguageSetData_Chinese((Language_TypeDef)gU8SettLanguageCounter_modify);
        }
        else
        {
            updateDisplaySystemLanguageSetData_Chinese((Language_TypeDef)sU8SettLanguageCounter);            
        }          
    } 
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_SPANISH)//系统语言设置界面LangiageSystemSet 西班牙界面组装
    {
        updateDisplaySystemLanguageSetData_Spanish((Language_TypeDef)sU8SettLanguageCounter);  
    }
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_GERMAN)//系统语言设置界面LangiageSystemSet 德语界面组装
    {
        updateDisplaySystemLanguageSetData_German((Language_TypeDef)sU8SettLanguageCounter);  
    }
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_FRENCH)//系统语言设置界面LangiageSystemSet 法语界面组装
    {
        updateDisplaySystemLanguageSetData_French((Language_TypeDef)sU8SettLanguageCounter);    
    }
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_POLISH)//系统语言设置界面LangiageSystemSet 波兰界面组装
    {
        updateDisplaySystemLanguageSetData_Polish((Language_TypeDef)sU8SettLanguageCounter); 
    }
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_ITALIAN)//系统语言设置界面LangiageSystemSet 意大利界面组装 
    {
        updateDisplaySystemLanguageSetData_Italian((Language_TypeDef)sU8SettLanguageCounter);  
    }
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_CZECH)//系统语言设置界面LangiageSystemSet 捷克界面组装
    {
        updateDisplaySystemLanguageSetData_Czech((Language_TypeDef)sU8SettLanguageCounter);   
    } 
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_DUTCH)//系统语言设置界面LangiageSystemSet 荷兰界面组装
    {
        updateDisplaySystemLanguageSetData_Dutch((Language_TypeDef)sU8SettLanguageCounter);   
    }
    else
    { 
        updateDisplaySystemLanguageSetData_English((Language_TypeDef)sU8SettLanguageCounter);        
    }
}
/***************************************************************************
 功能:语言设置SET英语界面
****************************************************************************/
void updateDisplaySystemLanguageSetData_English(Language_TypeDef u8SetIndex)
{
    memset(tab_display,0,DISPLAY_CACHE_SIZE);
    if(u8SetIndex ==  LANGUAGE_ENGLISH)
    {
        sprintf(tab_display,"    Language Set     \n->English            \nChinese              \nSpanish              \n"); 
    }
    else if(u8SetIndex == LANGUAGE_CHINESE)
    {
        sprintf(tab_display,"    Language Set     \nEnglish              \n->Chinese            \nSpanish              \n");
    }
    else if(u8SetIndex == LANGUAGE_SPANISH)
    {
        sprintf(tab_display,"    Language Set     \nChinese              \nEnglish              \n->Spanish            \n");
    }
    else if(u8SetIndex == LANGUAGE_GERMAN)
    {
        sprintf(tab_display,"    Language Set     \n->German             \nFrench               \nPolish               \n");
    }
    else if(u8SetIndex == LANGUAGE_FRENCH)
    { 
        sprintf(tab_display,"    Language Set     \nGerman               \n->French             \nPolish               \n");
    }
    else if(u8SetIndex == LANGUAGE_POLISH)
    {
        sprintf(tab_display,"    Language Set     \nGerman               \nFrench               \n->Polish             \n");
    }
    else if(u8SetIndex == LANGUAGE_ITALIAN)
    {
        sprintf(tab_display,"    Language Set     \n->Italian            \nCzech                \nDutch                \n");
    }
    else if(u8SetIndex == LANGUAGE_CZECH)
    {
        sprintf(tab_display,"    Language Set     \nItalian              \n->Czech              \nDutch                \n");
    }
    else if(u8SetIndex == LANGUAGE_DUTCH)
    {
        sprintf(tab_display,"    Language Set     \nItalian              \nCzech                \n->Dutch              \n");
    }
    
    //GUI_DispStringAt((uint8_t*)tab_display, 0, 0);     
    GUI_Display(tab_display, 0, 0);
}
/***************************************************************************
 功能:语言设置SET西班牙语界面
****************************************************************************/
void updateDisplaySystemLanguageSetData_Spanish(Language_TypeDef u8SetIndex)
{
    memset(tab_display,0,DISPLAY_CACHE_SIZE); 
    sprintf(tab_display,"      Spanish        \n                     \n                     \n                     \n");    
    //GUI_DispStringAt((uint8_t*)tab_display, 0, 0);  
    GUI_Display(tab_display, 0, 0);
}
/***************************************************************************
 功能:语言设置SET德语界
****************************************************************************/
void updateDisplaySystemLanguageSetData_German(Language_TypeDef u8SetIndex)
{
    memset(tab_display,0,DISPLAY_CACHE_SIZE);  
    sprintf(tab_display,"       German        \n                     \n                     \n                     \n");
    //GUI_DispStringAt((uint8_t*)tab_display, 0, 0);      
    GUI_Display(tab_display, 0, 0);
}
/***************************************************************************
 功能:语言设置SET发语界面
****************************************************************************/
void updateDisplaySystemLanguageSetData_French(Language_TypeDef u8SetIndex)
{
    memset(tab_display,0,DISPLAY_CACHE_SIZE); 
    sprintf(tab_display,"       French        \n                     \n                     \n                     \n");    
    //GUI_DispStringAt((uint8_t*)tab_display, 0, 0);      
    GUI_Display(tab_display, 0, 0);
}
/***************************************************************************
 功能:语言设置SET波兰语界面
****************************************************************************/
void updateDisplaySystemLanguageSetData_Polish(Language_TypeDef u8SetIndex)
{
    memset(tab_display,0,DISPLAY_CACHE_SIZE);
    sprintf(tab_display,"      Polish         \n                     \n                     \n                     \n");    
    //GUI_DispStringAt((uint8_t*)tab_display, 0, 0);     
    GUI_Display(tab_display, 0, 0);
}
/***************************************************************************
 功能:语言设置SET意大利语界
****************************************************************************/
void updateDisplaySystemLanguageSetData_Italian(Language_TypeDef u8SetIndex)
{
    memset(tab_display,0,DISPLAY_CACHE_SIZE); 
    sprintf(tab_display,"     Italian         \n                     \n                     \n                     \n");    
    //GUI_DispStringAt((uint8_t*)tab_display, 0, 0);      
    GUI_Display(tab_display, 0, 0);
}
/***************************************************************************
 功能:语言设置SET捷克语界面
****************************************************************************/
void updateDisplaySystemLanguageSetData_Czech(Language_TypeDef u8SetIndex)
{
    memset(tab_display,0,DISPLAY_CACHE_SIZE);
    sprintf(tab_display,"      Czech          \n                     \n                     \n                     \n");    
    //GUI_DispStringAt((uint8_t*)tab_display, 0, 0);      
    GUI_Display(tab_display, 0, 0);
}
/***************************************************************************
 功能:从Flash获取系统语言
****************************************************************************/
void updateDisplaySystemLanguageSetData_Dutch(Language_TypeDef u8SetIndex)
{
    memset(tab_display,0,DISPLAY_CACHE_SIZE);  
    sprintf(tab_display,"    Dutch            \n                     \n                     \n                     \n");
    //GUI_DispStringAt((uint8_t*)tab_display, 0, 0);     
    GUI_Display(tab_display, 0, 0);
}

/***************************************************************************
 功能:设置语言到Flash
****************************************************************************/
Language_TypeDef getSystemLanguageItem(void)
{
    Flash_Device_LanguageType_Read((uint8_t *)&gDisplay.stDisplaySet.u8LanguageType);
    return gDisplay.stDisplaySet.u8LanguageType;
}

/***************************************************************************
 功能:设置当前系统的语言
****************************************************************************/
void setSystemLanguageItem(Language_TypeDef languageItem)
{    
    gDisplay.stDisplayData.stSystemData.u8LanguageType = languageItem;
    gDisplay.stDisplaySet.u8LanguageType = languageItem;  
    Flash_Device_LanguageType_Write(languageItem);
}

/***************************************************************************
 功能:设置系统Time
****************************************************************************/
void updateDisplaySystemTimeSetData(KeyAction_TypeDef nowActionType,DisplayAction_TypeDef nowDisplayType)
{
    static uint8_t sU8SetTimeCounter = 0;
    static uint8_t sU8NumberCounter = 0;
    
    switch(nowActionType) 
    {
        case KEYACTION_ENTER://在时间设置界面下，Enter键按下，在系统设置对应的时间
            {
                if(gbEditFlag != STATUS_FALSE)//退出编辑模式
                {
                    gbEditFlag = STATUS_FALSE;
                    setDisplayTimetoRTCTime();//预留给系统设置时间接口到RTC时钟
                    sU8SetTimeCounter = 0;
                    sU8NumberCounter = 0;
                    sprintf(tab_date_modify,"%s","0000-00-00");
                    sprintf(tab_time_modify,"%s","00:00:00");
                    eWeekday_modify = WEEK_SUNDAY;
                    generateOperationRecord(RECORD_SET_Time);
                    Display_Set_UnderLine_Blink_Position(STATUS_FALSE,0,0);
                } 
                gCurrentMenu.eCurrentDisplayMenuType = nowDisplayType;
            }
            break;
        case KEYACTION_DOWN://在系统设置界面下，UP键按下，选择对应的设置项
            {
                if(gbEditFlag != STATUS_TRUE)//进入编辑模式
                {
                    gbEditFlag = STATUS_TRUE;
                    sprintf(tab_date_modify,"%s",tab_date);
                    sprintf(tab_time_modify,"%s",tab_time);
                    eWeekday_modify = eWeekday;
                }
                
                sU8NumberCounter++;
                
                if(sU8SetTimeCounter == 0) //2023-04-23日期的第一个数字2
                {
                    tab_date_modify[0] = '2';
                }
                else if(sU8SetTimeCounter == 1)//2023-04-23日期的第二个数字0
                {
                    tab_date_modify[1] = '0';
                }
                else if(sU8SetTimeCounter == 2) //2023-04-23日期的第三个数字2
                {
                    if(sU8NumberCounter<=9)
                    {
                       tab_date_modify[2] = '0' + sU8NumberCounter;
                    }
                    else
                    {
                       sU8NumberCounter = 0;
                       tab_date_modify[2] = '0';
                    }
                }
                else if(sU8SetTimeCounter == 3)//2023-04-23日期的第四个数字3
                {
                    if(sU8NumberCounter<=9)
                    {
                       tab_date_modify[3] = '0' + sU8NumberCounter;
                    }
                    else
                    {
                       sU8NumberCounter = 0;
                       tab_date_modify[3] = '0';
                    }
                }
                else if(sU8SetTimeCounter == 4)//2023-04-23日期的第五个数字0
                {
                    if(sU8NumberCounter<=1)
                    {
                       tab_date_modify[5] = '0' + sU8NumberCounter;
                    }
                    else
                    {
                       sU8NumberCounter = 0;
                       tab_date_modify[5] = '0';
                    }
                }
                else if(sU8SetTimeCounter == 5)//2023-04-23日期的第六个数字4
                {
                    if(tab_date_modify[5] == '1')
                    {
                        if(sU8NumberCounter<=2)
                        {
                            tab_date_modify[6] = '0' + sU8NumberCounter;
                        }
                        else
                        {
                            sU8NumberCounter = 0;
                            tab_date_modify[6] = '0';
                        }
                    }
                    else
                    {
                        if(sU8NumberCounter<=9)
                        {
                            tab_date_modify[6] = '0' + sU8NumberCounter;
                        }
                        else
                        {
                            sU8NumberCounter = 0;
                            tab_date_modify[6] = '0';
                        }
                    }
                }
                else if(sU8SetTimeCounter == 6)//2023-04-23日期的第七个数字2
                {
                    if(sU8NumberCounter<=3)
                    {
                       tab_date_modify[8] = '0' + sU8NumberCounter;
                    }
                    else
                    {
                       sU8NumberCounter = 0;
                       tab_date_modify[8] = '0';
                    }
                }
                else if(sU8SetTimeCounter == 7)//2023-04-23日期的第八个数字3
                {
                    if(tab_date_modify[8] == '3')
                    {
                        if(sU8NumberCounter<=1)
                        {
                            tab_date_modify[9] = '0' + sU8NumberCounter;
                        }
                        else
                        {
                            sU8NumberCounter = 0;
                            tab_date_modify[9] = '0';
                        }
                    }
                    else
                    {
                        if(sU8NumberCounter<=9)
                        {
                            tab_date_modify[9] =  '0' + sU8NumberCounter;
                        }
                        else
                        {
                            sU8NumberCounter = 0;
                            tab_date_modify[9] = '0';
                        }
                    }
                }
                else if(sU8SetTimeCounter == 8)//17:56:56时间的第一个数字1
                {
                    if(sU8NumberCounter<=2)
                    {
                       tab_time_modify[0] =  '0' + sU8NumberCounter;
                    }
                    else
                    {
                       sU8NumberCounter = 0;
                       tab_time_modify[0] = '0';
                    }
                } 
                else if(sU8SetTimeCounter == 9)//17:56:56时间的第二个数字7
                {
                    if(tab_time_modify[0] == '2')
                    {
                        if(sU8NumberCounter<=3)
                        {
                            tab_time_modify[1] =  '0' + sU8NumberCounter;
                        }
                        else
                        {
                            sU8NumberCounter = 0;
                            tab_time_modify[1] = '0';
                        }
                    }
                    else
                    {
                        if(sU8NumberCounter<=9)
                        {
                            tab_time_modify[1] =  '0' + sU8NumberCounter;
                        }
                        else
                        {
                            sU8NumberCounter = 0;
                            tab_time_modify[1] = '0';
                        }
                    }
                }
                else if(sU8SetTimeCounter == 10)//17:56:56时间的第三个数字5
                {
                    if(sU8NumberCounter<=5)
                    {
                       tab_time_modify[3] =  '0' + sU8NumberCounter;
                    }
                    else
                    {
                       sU8NumberCounter = 0;
                       tab_time_modify[3] = '0';
                    }
                }
                else if(sU8SetTimeCounter == 11)//17:56:56时间的第四个数字6
                {
                    if(sU8NumberCounter<=9)
                    {
                       tab_time_modify[4] =  '0' + sU8NumberCounter;
                    }
                    else
                    {
                       sU8NumberCounter = 0;
                       tab_time_modify[4] = '0';
                    }
                }
                else if(sU8SetTimeCounter == 12)//17:56:56时间的第五个数字5
                {
                    if(sU8NumberCounter<=5)
                    {
                       tab_time_modify[6] =  '0' + sU8NumberCounter;
                    }
                    else
                    {
                       sU8NumberCounter = 0;
                       tab_time_modify[6] = '0';
                    }
                } 
                else if(sU8SetTimeCounter == 13)//17:56:56时间的第六个数字6
                {
                    if(sU8NumberCounter<=9)
                    {
                       tab_time_modify[7] =  '0' + sU8NumberCounter;
                    }
                    else
                    {
                       sU8NumberCounter = 0;
                       tab_time_modify[7] = '0';
                    }
                }
                else if(sU8SetTimeCounter == 14) //星期几
                {
                    if(sU8NumberCounter >= WEEK_SATURDAY)
                    {
                        sU8NumberCounter = WEEK_SUNDAY;
                    }
                    eWeekday_modify = (Week_TypeDef)sU8NumberCounter;                   
                }
               
                gCurrentMenu.eCurrentDisplayMenuType = nowDisplayType;
            }
            break;
        case KEYACTION_UP://在系统设置界面下，DOWN键按下，选择对应的设置项
            {
                if(gbEditFlag != STATUS_TRUE)//进入编辑模式 
                {
                    gbEditFlag = STATUS_TRUE;
                    sprintf(tab_date_modify,"%s",tab_date);
                    sprintf(tab_time_modify,"%s",tab_time);
                    eWeekday_modify = eWeekday;
                }
                
                sU8NumberCounter--;
                
                if(sU8SetTimeCounter == 0) //2023-04-23日期的第一个数字2
                {
                    tab_date_modify[0] = '2';
                }
                else if(sU8SetTimeCounter == 1) //2023-04-23日期的第二个数字0
                {
                    tab_date_modify[1] = '0';
                }
                else if(sU8SetTimeCounter == 2) //2023-04-23日期的第三个数字2
                {
                    if(!(sU8NumberCounter <= 9))
                    {
                       sU8NumberCounter = 9;
                       tab_date_modify[2] = '0';
                    }
                    tab_date_modify[2] =  '0' + sU8NumberCounter;                        
                }
                else if(sU8SetTimeCounter == 3)//2023-04-23日期的第四个数字3
                {
                    if(!(sU8NumberCounter <= 9))
                    {
                       sU8NumberCounter = 9;
                       tab_date_modify[3] = '0';
                    }
                    tab_date_modify[3] =  '0' + sU8NumberCounter;                    
                }
                else if(sU8SetTimeCounter == 4) //2023-04-23日期的第五个数字0
                {
                    if(!(sU8NumberCounter <= 1))
                    {
                       sU8NumberCounter = 1;
                       tab_date_modify[5] = '0';
                    }
                    tab_date_modify[5] = '0' + sU8NumberCounter;                      
                }
                else if(sU8SetTimeCounter == 5)//2023-04-23日期的第六个数字4
                {
                    if(tab_date_modify[5] == '1')
                    {
                        if(!(sU8NumberCounter <= 2))
                        {
                            sU8NumberCounter = 2;
                            tab_date_modify[6] = '0';
                        }
                    }
                    else
                    {
                        if(!(sU8NumberCounter <= 9))
                        {
                            sU8NumberCounter = 9;
                            tab_date_modify[6] = '0';
                        }
                    }
                    tab_date_modify[6] = '0' + sU8NumberCounter;
                }
                else if(sU8SetTimeCounter == 6) //2023-04-23日期的第七个数字2
                {
                    if(!(sU8NumberCounter <= 3))
                    {
                       sU8NumberCounter = 3;
                       tab_date_modify[8] = '0';
                    }
                    tab_date_modify[8] = '0' + sU8NumberCounter;
                }
                else if(sU8SetTimeCounter == 7) //2023-04-23日期的第八个数字3
                {
                    if(tab_date_modify[8] == '3')
                    {
                        if(!(sU8NumberCounter <= 1))
                        {
                            sU8NumberCounter = 1;
                            tab_date_modify[9] = '0';
                        }
                    }
                    else
                    {
                        if(!(sU8NumberCounter <= 9))
                        {
                            sU8NumberCounter = 9;
                            tab_time_modify[1] = '0';
                        }
                    }
                    tab_date_modify[9] = '0' + sU8NumberCounter;
                }
                else if(sU8SetTimeCounter == 8) //17:56:56时间的第一个数字1
                {
                    if(!(sU8NumberCounter <= 2))
                    {
                       sU8NumberCounter = 2;
                       tab_time_modify[0] = '0';
                    }
                    tab_time_modify[0] = '0' + sU8NumberCounter;
                } 
                else if(sU8SetTimeCounter == 9)//17:56:56时间的第二个数字7
                {
                    if(tab_time_modify[0] == '2')
                    {
                        if(!(sU8NumberCounter <= 3))
                        {
                            sU8NumberCounter = 3;
                            tab_time_modify[1] = '0';
                        }
                    }
                    else
                    {
                        if(!(sU8NumberCounter <= 9))
                        {
                            sU8NumberCounter = 9;
                            tab_time_modify[1] = '0';
                        }
                    }
                    tab_time_modify[1] = '0' + sU8NumberCounter;
                }
                else if(sU8SetTimeCounter == 10) //17:56:56时间的第三个数字5
                {
                    if(!(sU8NumberCounter <= 5))
                    {
                       sU8NumberCounter = 5;
                       tab_time_modify[3] = '0';
                    }
                    tab_time_modify[3] = '0' + sU8NumberCounter;
                }
                else if(sU8SetTimeCounter == 11) //17:56:56时间的第四个数字6
                {
                    if(!(sU8NumberCounter <= 9))
                    {
                       sU8NumberCounter = 9;
                       tab_time_modify[4] = '0';
                    }
                    tab_time_modify[4] = '0' + sU8NumberCounter;
                } 
                else if(sU8SetTimeCounter == 12)//17:56:56时间的第五个数字5
                {
                    if(!(sU8NumberCounter <= 5))
                    {
                       sU8NumberCounter = 5;
                       tab_time_modify[6] = '0';
                    }
                    tab_time_modify[6] = '0' + sU8NumberCounter;
                } 
                else if(sU8SetTimeCounter == 13) //17:56:56时间的第六个数字6
                {
                    if(!(sU8NumberCounter <= 9))
                    {
                       sU8NumberCounter = 9;
                       tab_time_modify[7] = '0';
                    }
                    tab_time_modify[7] = '0' + sU8NumberCounter;
                }
                else if(sU8SetTimeCounter == 14)//星期几
                {
                    if(sU8NumberCounter >= WEEK_SATURDAY)
                    {
                        sU8NumberCounter = WEEK_SATURDAY;
                    }
                    eWeekday_modify = (Week_TypeDef)sU8NumberCounter;
                }
                
                gCurrentMenu.eCurrentDisplayMenuType = nowDisplayType;
                
            }
            break;
        case KEYACTION_ESC://在系统设置界面下，ESC键按下，保存退出到上一级菜单
            {
                if(gbEditFlag != STATUS_FALSE)//退出编辑模式 
                {
                    gbEditFlag = STATUS_FALSE;
                    sU8NumberCounter = 0;
                    sprintf(tab_date_modify,"%s","0000-00-00");
                    sprintf(tab_time_modify,"%s","00:00:00");
                    eWeekday_modify = WEEK_SUNDAY;
                    Display_Set_UnderLine_Blink_Position(STATUS_FALSE,0,0);
                }
                gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_SET_SYSTEM;
            }
            break;
        case KEYACTION_UPDOWN://在系统设置界面下，UP键 + DOWN键同时按下，切换设置下一个数据
            {
                sU8SetTimeCounter++;
                sU8NumberCounter = 0;
                if(sU8SetTimeCounter == DISPLAY_SET_SYSTEM_TIME_ITEM_COUNT)
                {
                    sU8SetTimeCounter = 0;  
                }
                gCurrentMenu.eCurrentDisplayMenuType = nowDisplayType;
            }
            break;
        case KEYACTION_NULL://无操作刷新主界面数据
        default:
            {
                getRTCTimetoDisplayTime();
                gCurrentMenu.eCurrentDisplayMenuType = nowDisplayType;       
            }
            break;
    }
    
    if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_ENGLISH)  //系统时间设置界面TimeSystemSet 中文界面组装
    { 
        if(gbEditFlag == STATUS_TRUE)
        {  
            if(sU8SetTimeCounter == (DISPLAY_SET_SYSTEM_TIME_ITEM_COUNT-1))
            {
                Display_Set_UnderLine_Blink_Position(STATUS_TRUE,arrayVarTimeFlicker[eWeekday_modify].u8StartPos,arrayVarTimeFlicker[eWeekday_modify].u8EndPos);
            }
            else
            {
                Display_Set_UnderLine_Blink_Position(STATUS_TRUE,arrayFixTimeFlicker[sU8SetTimeCounter].u8StartPos,arrayFixTimeFlicker[sU8SetTimeCounter].u8EndPos);
            }
            updateDisplaySystemTimeSetData_English(tab_date_modify,tab_time_modify,eWeekday_modify); 
        }
        else 
        {
            updateDisplaySystemTimeSetData_English(tab_date,tab_time,eWeekday);
        }
    }
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_CHINESE) //系统时间设置界面TimeSystemSet 中文界面组装 
    {

        if(gbEditFlag == STATUS_TRUE)
        {  
            if(sU8SetTimeCounter == (DISPLAY_SET_SYSTEM_TIME_ITEM_COUNT-1))
            {
                Display_Set_UnderLine_Blink_Position(STATUS_TRUE,arrayVarTimeFlickerChinese[eWeekday_modify].u8StartPos,arrayVarTimeFlickerChinese[eWeekday_modify].u8EndPos);
            }
            else
            {
                Display_Set_UnderLine_Blink_Position(STATUS_TRUE,arrayFixTimeFlickerChinese[sU8SetTimeCounter].u8StartPos,arrayFixTimeFlickerChinese[sU8SetTimeCounter].u8EndPos);
            }
            updateDisplaySystemTimeSetData_Chinese(tab_date_modify,tab_time_modify,eWeekday_modify); 
        }
        else 
        {
            updateDisplaySystemTimeSetData_Chinese(tab_date,tab_time,eWeekday);
        }
    } 
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_SPANISH)//系统时间设置界面TimeSystemSet 西班牙界面组装
    { 
        updateDisplaySystemTimeSetData_Spanish(tab_date,tab_time,eWeekday); 
    } 
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_GERMAN)//系统时间设置界面TimeSystemSet 德语界面组装
    { 
        updateDisplaySystemTimeSetData_German(tab_date,tab_time,eWeekday);
    } 
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_FRENCH)//系统时间设置界面TimeSystemSet 法语界面组装
    {
        updateDisplaySystemTimeSetData_French(tab_date,tab_time,eWeekday);                    
    }
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_POLISH)//系统时间设置界面TimeSystemSet 波兰界面组装
    {
        updateDisplaySystemTimeSetData_Polish(tab_date,tab_time,eWeekday);
    }
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_ITALIAN)//系统时间设置界面TimeSystemSet 意大利界面组装 
    {
        updateDisplaySystemTimeSetData_Italian(tab_date,tab_time,eWeekday);                    
    }
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_CZECH)//系统时间设置界面TimeSystemSet 捷克界面组装 
    { 
        updateDisplaySystemTimeSetData_Czech(tab_date,tab_time,eWeekday);                    
    } 
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_DUTCH)//系统时间设置界面TimeSystemSet 荷兰界面组装
    {
        updateDisplaySystemTimeSetData_Dutch(tab_date,tab_time,eWeekday);                    
    }
}

/***************************************************************************
 功能:时间设置SET英语界面
****************************************************************************/
void updateDisplaySystemTimeSetData_English(char* sDate,char* sTime,Week_TypeDef eWeek)
{
    memset(tab_display,0,DISPLAY_CACHE_SIZE);
    
    char tab_week[10]; 
    memset(tab_week,0,10);
    
    if(eWeek == WEEK_MONDAY)
    {
        strcpy(tab_week, "Monday");
    }
    else if(eWeek == WEEK_TUESDAY)
    {
       strcpy(tab_week, "Tuesday");
    }
    else if(eWeek == WEEK_WEDNESDAY)
    {
       strcpy(tab_week, "Wednesday");
    }
    else if(eWeek == WEEK_THURSDAY)
    {
       strcpy(tab_week, "Thursday");
    }
    else if(eWeek == WEEK_FRIDAY)
    {
       strcpy(tab_week, "Friday");
    }
    else if(eWeek == WEEK_SATURDAY)
    {
       strcpy(tab_week, "Saturday");
    }
    else if(eWeek == WEEK_SUNDAY)
    {
       strcpy(tab_week, "Sunday");
    }
     
    sprintf(tab_display,"       Time Set      \nDate:%s      \nTime:%s        \nWeek:%s      \n",sDate,sTime,tab_week);
    //GUI_DispStringAt((uint8_t*)tab_display, 0, 0);
    GUI_Display(tab_display, 0, 0);
}
/***************************************************************************
 功能:时间设置SET西班牙语界面
****************************************************************************/
void updateDisplaySystemTimeSetData_Spanish(char* sDate,char* sTime,Week_TypeDef eWeek)
{
  
}

/***************************************************************************
 功能:时间设置SET德语界面
****************************************************************************/
void updateDisplaySystemTimeSetData_German(char* sDate,char* sTime,Week_TypeDef eWeek)
{
  
}

/***************************************************************************
 功能:时间设置SET法语界面
****************************************************************************/
void updateDisplaySystemTimeSetData_French(char* sDate,char* sTime,Week_TypeDef eWeek)
{
  
}

/***************************************************************************
 功能:时间设置SET波兰语界面
****************************************************************************/
void updateDisplaySystemTimeSetData_Polish(char* sDate,char* sTime,Week_TypeDef eWeek)
{
  
}

/***************************************************************************
 功能:时间设置SET意大利语界面
****************************************************************************/
void updateDisplaySystemTimeSetData_Italian(char* sDate,char* sTime,Week_TypeDef eWeek)
{
  
}

/***************************************************************************
 功能:时间设置SET捷克语界面
****************************************************************************/
void updateDisplaySystemTimeSetData_Czech(char* sDate,char* sTime,Week_TypeDef eWeek)
{
  
}

/***************************************************************************
 功能:时间设置SET荷兰语界面
****************************************************************************/
void updateDisplaySystemTimeSetData_Dutch(char* sDate,char* sTime,Week_TypeDef eWeek)
{
  
}

/***************************************************************************
 功能:系统设置时间接口到RTC时钟
****************************************************************************/
void setDisplayTimetoRTCTime(void)
{
    TimeInf_t tab_SysTime_Temp;
    memset(&tab_SysTime_Temp, 0, sizeof(TimeInf_t));

    char tab_date_year[5] = {0};
    memcpy(tab_date_year, tab_date_modify, 4);
    tab_SysTime_Temp.u16Year = atoi(tab_date_year);

    char tab_date_Month[3] = {0};
    memcpy(tab_date_Month, tab_date_modify + 5, 2);
    tab_SysTime_Temp.u8Month =  atoi(tab_date_Month);

    char tab_date_Day[3] = {0};
    memcpy(tab_date_Day, tab_date_modify + 8, 2);
    tab_SysTime_Temp.u8Day =  atoi(tab_date_Day);

    tab_SysTime_Temp.u8Week = eWeekday_modify;

    char tab_Time_Hour[3] = {0};
    memcpy(tab_Time_Hour, tab_time_modify, 2);
    tab_SysTime_Temp.u8Hour =  atoi(tab_Time_Hour);

    char tab_Time_Min[3] = {0};
    memcpy(tab_Time_Min, tab_time_modify + 3, 2);
    tab_SysTime_Temp.u8Min =  atoi(tab_Time_Min);

    char tab_Time_Sec[3] = {0};
    memcpy(tab_Time_Sec, tab_time_modify + 6, 2);
    tab_SysTime_Temp.u8Sec =  atoi(tab_Time_Sec);

    Set_SysTime(tab_SysTime_Temp);
}

/***************************************************************************
 功能:系统RTC时钟到显示时间
****************************************************************************/
void getRTCTimetoDisplayTime(void)
{
    Get_SysTime(&tab_SysTime);

    char tab_date_Year[5] = {0};
    sprintf(tab_date_Year, "%4d", (int16_t)tab_SysTime.u16Year);
    tab_date[0] = tab_date_Year[0];
    tab_date[1] = tab_date_Year[1];
    tab_date[2] = tab_date_Year[2];
    tab_date[3] = tab_date_Year[3];

    char tab_date_Month[3] = {0};
    sprintf(tab_date_Month, "%-.2d", (int8_t)tab_SysTime.u8Month);
    tab_date[5] = tab_date_Month[0];
    tab_date[6] = tab_date_Month[1];

    char tab_date_Day[3] = {0};
    sprintf(tab_date_Day, "%-.2d", (int8_t)tab_SysTime.u8Day);
    tab_date[8] = tab_date_Day[0];
    tab_date[9] = tab_date_Day[1];


    eWeekday = (Week_TypeDef)tab_SysTime.u8Week;

    char tab_time_Hour[3] = {0};
    sprintf(tab_time_Hour, "%-.2d", (int8_t)tab_SysTime.u8Hour);
    tab_time[0] = tab_time_Hour[0];
    tab_time[1] = tab_time_Hour[1];

    char tab_time_Min[3] = {0};
    sprintf(tab_time_Min, "%-.2d", (int8_t)tab_SysTime.u8Min);
    tab_time[3] = tab_time_Min[0];
    tab_time[4] = tab_time_Min[1];

    char tab_time_Sec[3] = {0};
    sprintf(tab_time_Sec, "%-.2d", (int8_t)tab_SysTime.u8Sec);
    tab_time[6] = tab_time_Sec[0];
    tab_time[7] = tab_time_Sec[1];
}

/***************************************************************************
 功能:生成一条操作记录
****************************************************************************/
void generateOperationRecord(uint16_t u16Type)
{
    Display_Record_Info stRecordTemp;
    memset(&stRecordTemp, 0, sizeof(Display_Record_Info));

    stRecordTemp.u16RecordType = u16Type;
    stRecordTemp.u8RecordObj = OPERATE_OBJ_LOCAL_EMS;
    Get_SysTime(&tab_SysTime);
    stRecordTemp.stOperateTime.u16Year = (int16_t)tab_SysTime.u16Year;
    stRecordTemp.stOperateTime.u8Month = (int8_t)tab_SysTime.u8Month;
    stRecordTemp.stOperateTime.u8Day   = (int8_t)tab_SysTime.u8Day;
    stRecordTemp.stOperateTime.u8Hour  = (int8_t)tab_SysTime.u8Hour;
    stRecordTemp.stOperateTime.u8Min   = (int8_t)tab_SysTime.u8Min;
    stRecordTemp.stOperateTime.u8Sec   = (int8_t)tab_SysTime.u8Sec;
    InsertOperationRecordQueue(&stRecordTemp);
}

/***************************************************************************
 功能:设置系统Password
****************************************************************************/
void updateDisplaySystemPasswordSetData(KeyAction_TypeDef nowActionType,DisplayAction_TypeDef nowDisplayType)
{
    static uint8_t sU8SetPasswordCounter = 0;
    static uint8_t sU8NumberCounter = 0;
    switch(nowActionType) 
    {
        case KEYACTION_ENTER://在时间设置界面下，Enter键按下，在系统设置对应的时间
            {                   
                if(gbEditFlag != STATUS_FALSE)//退出编辑模式
                {
                    Tip_TypeDef re = DisplaySystemPasswordVerify(tab_OldPassword_edit,tab_NewPassword_edit,tab_ConfirmPassword_edit); //校验密码
                    if(re != TIP_PASSED)
                    {
                        gCurrentMenu.stTip.eOccurTipAction = DISPLAY_SET_SYSTEM_PASSWORD;
                        //gCurrentMenu.stTip.eOccurPreTipAction = DISPLAY_SET_SYSTEM;
                        gCurrentMenu.stTip.eTipType = re;
                        gCurrentMenu.stTip.u8PromptTime = 60;
                        //gCurrentMenu.stTip.eOccurPreIndex = 0;
                        gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_PROMPT;   
                    }
                    else
                    {
                        setDisplayPasswordtToFlash(tab_ConfirmPassword_edit); //校验通过
                        gCurrentMenu.stTip.eOccurTipAction = DISPLAY_SET_SYSTEM;
                        gCurrentMenu.stTip.eTipType = re;
                        gCurrentMenu.stTip.u8PromptTime = 20;
                        gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_PROMPT;                           
                    }
                    gbEditFlag = STATUS_FALSE;
                    sU8SetPasswordCounter = 0;
                    sU8NumberCounter = 0;
                    Display_Set_UnderLine_Blink_Position(STATUS_FALSE,0,0);
                    generateOperationRecord(RECORD_SET_Password);
               }
            }
            break;
        case KEYACTION_DOWN://在系统设置界面下，UP键按下，选择对应的设置项
            {
                if(gbEditFlag != STATUS_TRUE) //进入编辑模式  
                {
                    gbEditFlag = STATUS_TRUE;
                }
                       
                if(sU8SetPasswordCounter == 0) //Old密码第一个数字
                {
                    sU8NumberCounter++;
                    if(sU8NumberCounter<=9)
                    {
                       tab_OldPassword_edit[0] =  '0' + sU8NumberCounter;
                    }
                    else
                    {
                       sU8NumberCounter = 0;
                       tab_OldPassword_edit[0] = '0';
                    }
                }
                else if(sU8SetPasswordCounter == 1) //Old密码第二个数字
                {
                    sU8NumberCounter++;
                    if(sU8NumberCounter<=9)
                    {
                       tab_OldPassword_edit[1] =  '0' + sU8NumberCounter;
                    }
                    else
                    {
                       sU8NumberCounter = 0;
                       tab_OldPassword_edit[1] = '0';
                    }
                }
                else if(sU8SetPasswordCounter == 2) //Old密码第三个数字
                {
                    sU8NumberCounter++;
                    if(sU8NumberCounter<=9)
                    {
                       tab_OldPassword_edit[2] =  '0' + sU8NumberCounter;
                    }
                    else
                    {
                       sU8NumberCounter = 0;
                       tab_OldPassword_edit[2] = '0';
                    }
                }
                else if(sU8SetPasswordCounter == 3)//Old密码第四个数字
                {
                    sU8NumberCounter++;
                    if(sU8NumberCounter<=9)
                    {
                       tab_OldPassword_edit[3] =  '0' + sU8NumberCounter;
                    }
                    else
                    {
                       sU8NumberCounter = 0;
                       tab_OldPassword_edit[3] = '0';
                    }
                }
                else if(sU8SetPasswordCounter == 4)//Old密码第五个数字
                {
                    sU8NumberCounter++;
                    if(sU8NumberCounter<=9)
                    {
                       tab_OldPassword_edit[4] =  '0' + sU8NumberCounter;
                    }
                    else
                    {
                       sU8NumberCounter = 0;
                       tab_OldPassword_edit[4] = '0';
                    }
                }
                else if(sU8SetPasswordCounter == 5)//Old密码第六个数字
                {
                    sU8NumberCounter++;
                    if(sU8NumberCounter<=9)
                    {
                       tab_OldPassword_edit[5] =  '0' + sU8NumberCounter;
                    }
                    else
                    {
                       sU8NumberCounter = 0;
                       tab_OldPassword_edit[5] = '0';
                    }
                }
                else if(sU8SetPasswordCounter == 6)//New密码第一个数字
                {
                    sU8NumberCounter++;
                    if(sU8NumberCounter<=9)
                    {
                       tab_NewPassword_edit[0] =  '0' + sU8NumberCounter;
                    }
                    else
                    {
                       sU8NumberCounter = 0;
                       tab_NewPassword_edit[0] = '0';
                    }
                }
                else if(sU8SetPasswordCounter == 7) //New密码第二个数字
                {
                    sU8NumberCounter++;
                    if(sU8NumberCounter<=9)
                    {
                       tab_NewPassword_edit[1] =  '0' + sU8NumberCounter;
                    }
                    else
                    {
                       sU8NumberCounter = 0;
                       tab_NewPassword_edit[1] = '0';
                    }
                }
                else if(sU8SetPasswordCounter == 8)//New密码第三个数字
                {
                    sU8NumberCounter++;
                    if(sU8NumberCounter<=9)
                    {
                       tab_NewPassword_edit[2] =  '0' + sU8NumberCounter;
                    }
                    else
                    {
                       sU8NumberCounter = 0;
                       tab_NewPassword_edit[2] = '0';
                    }
                } 
                else if(sU8SetPasswordCounter == 9) //New密码第四个数字
                {
                    sU8NumberCounter++;
                    if(sU8NumberCounter<=9)
                    {
                       tab_NewPassword_edit[3] =  '0' + sU8NumberCounter;
                    }
                    else
                    {
                       sU8NumberCounter = 0;
                       tab_NewPassword_edit[3] = '0';
                    }
                }
                else if(sU8SetPasswordCounter == 10)//New密码第五个数字
                {
                    sU8NumberCounter++;
                    if(sU8NumberCounter<=9)
                    {
                       tab_NewPassword_edit[4] =  '0' + sU8NumberCounter;
                    }
                    else
                    {
                       sU8NumberCounter = 0;
                       tab_NewPassword_edit[4] = '0';
                    }
                }
                else if(sU8SetPasswordCounter == 11)//New密码第六个数字
                {
                    sU8NumberCounter++;
                    if(sU8NumberCounter<=9)
                    {
                       tab_NewPassword_edit[5] =  '0' + sU8NumberCounter;
                    }
                    else
                    {
                       sU8NumberCounter = 0;
                       tab_NewPassword_edit[5] = '0';
                    }
                }
                else if(sU8SetPasswordCounter == 12) //Confirm密码第一个数字
                {
                    sU8NumberCounter++;
                    if(sU8NumberCounter<=9)
                    {
                       tab_ConfirmPassword_edit[0] =  '0' + sU8NumberCounter;
                    }
                    else
                    {
                       sU8NumberCounter = 0;
                       tab_ConfirmPassword_edit[0] = '0';
                    }
                }
                else if(sU8SetPasswordCounter == 13)//Confirm密码第二个数字
                {
                    sU8NumberCounter++;
                    if(sU8NumberCounter<=9)
                    {
                       tab_ConfirmPassword_edit[1] =  '0' + sU8NumberCounter;
                    }
                    else
                    {
                       sU8NumberCounter = 0;
                       tab_ConfirmPassword_edit[1] = '0';
                    }
                }
                else if(sU8SetPasswordCounter == 14) //Confirm密码第三个数字
                {
                    sU8NumberCounter++;
                    if(sU8NumberCounter<=9)
                    {
                       tab_ConfirmPassword_edit[2] =  '0' + sU8NumberCounter;
                    }
                    else
                    {
                       sU8NumberCounter = 0;
                       tab_ConfirmPassword_edit[2] = '0';
                    }
                }
                else if(sU8SetPasswordCounter == 15)//Confirm密码第四个数字
                {
                    sU8NumberCounter++;
                    if(sU8NumberCounter<=9)
                    {
                       tab_ConfirmPassword_edit[3] =  '0' + sU8NumberCounter;
                    }
                    else
                    {
                       sU8NumberCounter = 0;
                       tab_ConfirmPassword_edit[3] = '0';
                    }
                }
                else if(sU8SetPasswordCounter == 16)//Confirm密码第五个数字
                {
                    sU8NumberCounter++;
                    if(sU8NumberCounter<=9)
                    {
                       tab_ConfirmPassword_edit[4] =  '0' + sU8NumberCounter;
                    }
                    else
                    {
                       sU8NumberCounter = 0;
                       tab_ConfirmPassword_edit[4] = '0';
                    }
                }
                else if(sU8SetPasswordCounter == 17)//Confirm密码第六个数字
                {
                    sU8NumberCounter++;
                    if(sU8NumberCounter<=9)
                    {
                       tab_ConfirmPassword_edit[5] =  '0' + sU8NumberCounter;
                    }
                    else
                    {
                       sU8NumberCounter = 0;
                       tab_ConfirmPassword_edit[5] = '0';
                    }
                }

                gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_SET_SYSTEM_PASSWORD;
            }
            break;
        case KEYACTION_UP://在系统设置界面下，DOWN键按下，选择对应的设置项
            {
                if(gbEditFlag != STATUS_TRUE)//进入编辑模式 
                {
                    gbEditFlag = STATUS_TRUE;
                }
               
                if(sU8SetPasswordCounter == 0)  //Old密码第一个数字
                {
                    sU8NumberCounter--;
                    if(!(sU8NumberCounter <= 9))
                    {
                       sU8NumberCounter = 9;
                       tab_OldPassword_edit[0] = '0';
                    }
                    tab_OldPassword_edit[0] =  '0' + sU8NumberCounter;                    
                } 
                else if(sU8SetPasswordCounter == 1)//Old密码第二个数字
                {
                    sU8NumberCounter--;   
                    if(!(sU8NumberCounter <= 9))
                    {
                       sU8NumberCounter = 9;
                       tab_OldPassword_edit[1] = '0';
                    }
                    tab_OldPassword_edit[1] =  '0' + sU8NumberCounter;                        
                }
                else if(sU8SetPasswordCounter == 2)//Old密码第三个数字
                {
                    sU8NumberCounter--;
                    if(!(sU8NumberCounter <= 9))
                    {
                       sU8NumberCounter = 9;
                       tab_OldPassword_edit[2] = '0';
                    }
                    tab_OldPassword_edit[2] =  '0' + sU8NumberCounter;                        
                }
                else if(sU8SetPasswordCounter == 3)//Old密码第四个数字
                {
                    sU8NumberCounter--; 
                    if(!(sU8NumberCounter <= 9))
                    {
                       sU8NumberCounter = 9;
                       tab_OldPassword_edit[3] = '0';
                    }
                    tab_OldPassword_edit[3] =  '0' + sU8NumberCounter;                    
                }
                else if(sU8SetPasswordCounter == 4)//Old密码第五个数字
                {
                    sU8NumberCounter--;
                    if(!(sU8NumberCounter <= 9))
                    {
                       sU8NumberCounter = 9;
                       tab_OldPassword_edit[4] = '0';
                    }
                    tab_OldPassword_edit[4] =  '0' + sU8NumberCounter;                      
                }
                else if(sU8SetPasswordCounter == 5)//Old密码第六个数字
                {
                    sU8NumberCounter--;  
                    if(!(sU8NumberCounter <= 9))
                    {
                       sU8NumberCounter = 9;
                       tab_OldPassword_edit[5] = '0';
                    }
                    tab_OldPassword_edit[5] =  '0' + sU8NumberCounter;                      
                }
                else if(sU8SetPasswordCounter == 6)//New密码第一个数字
                {
                    sU8NumberCounter--;
                    if(!(sU8NumberCounter <= 9))
                    {
                       sU8NumberCounter = 9;
                       tab_NewPassword_edit[0] = '0';
                    }
                    tab_NewPassword_edit[0] =  '0' + sU8NumberCounter;                     
                }
                else if(sU8SetPasswordCounter == 7)//New密码第二个数字
                {
                    sU8NumberCounter--; 
                    if(!(sU8NumberCounter <= 9))
                    {
                       sU8NumberCounter = 9;
                       tab_NewPassword_edit[1] = '0';
                    }
                    tab_NewPassword_edit[1] =  '0' + sU8NumberCounter;                      
                }
                else if(sU8SetPasswordCounter == 8)//New密码第三个数字
                {
                    sU8NumberCounter--;
                    if(!(sU8NumberCounter <= 9))
                    {
                       sU8NumberCounter = 9;
                       tab_NewPassword_edit[2] = '0';
                    }
                    tab_NewPassword_edit[2] =  '0' + sU8NumberCounter;                      
                } 
                else if(sU8SetPasswordCounter == 9)//New密码第四个数字
                {
                    sU8NumberCounter--;
                    if(!(sU8NumberCounter <= 9))
                    {
                       sU8NumberCounter = 9;
                       tab_NewPassword_edit[3] = '0';
                    }
                    tab_NewPassword_edit[3] =  '0' + sU8NumberCounter;                        
                }
                else if(sU8SetPasswordCounter == 10)//New密码第五个数字
                {
                    sU8NumberCounter--;
                    if(!(sU8NumberCounter <= 9))
                    {
                       sU8NumberCounter = 9;
                       tab_NewPassword_edit[4] = '0';
                    }
                    tab_NewPassword_edit[4] =  '0' + sU8NumberCounter;                      
                } 
                else if(sU8SetPasswordCounter == 11)//New密码第六个数字
                {
                    sU8NumberCounter--;
                    if(!(sU8NumberCounter <= 9))
                    {
                       sU8NumberCounter = 9;
                       tab_NewPassword_edit[5] = '0';
                    }
                    tab_NewPassword_edit[5] =  '0' + sU8NumberCounter;                       
                } 
                else if(sU8SetPasswordCounter == 12)//Confirm密码第一个数字
                {
                    sU8NumberCounter--; 
                    if(!(sU8NumberCounter <= 9))
                    {
                       sU8NumberCounter = 9;
                       tab_ConfirmPassword_edit[0] = '0';
                    }
                    tab_ConfirmPassword_edit[0] =  '0' + sU8NumberCounter;                       
                } 
                else if(sU8SetPasswordCounter == 13)//Confirm密码第二个数字
                {
                    sU8NumberCounter--;
                    if(!(sU8NumberCounter <= 9))
                    {
                       sU8NumberCounter = 9;
                       tab_ConfirmPassword_edit[1] = '0';
                    }
                    tab_ConfirmPassword_edit[1] =  '0' + sU8NumberCounter;                       
                }
               else if(sU8SetPasswordCounter == 14)//Confirm密码第三个数字
                {
                    sU8NumberCounter--;
                    if(!(sU8NumberCounter <= 9))
                    {
                       sU8NumberCounter = 9;
                       tab_ConfirmPassword_edit[2] = '0';
                    }
                    tab_ConfirmPassword_edit[2] =  '0' + sU8NumberCounter;                       
                }
               else if(sU8SetPasswordCounter == 15)//Confirm密码第四个数字
                {
                    sU8NumberCounter--;
                    if(!(sU8NumberCounter <= 9))
                    {
                       sU8NumberCounter = 9;
                       tab_ConfirmPassword_edit[2] = '0';
                    }
                    tab_ConfirmPassword_edit[2] =  '0' + sU8NumberCounter;                       
                }
                else if(sU8SetPasswordCounter == 16) //Confirm密码第五个数字
                {
                    sU8NumberCounter--;
                    if(!(sU8NumberCounter <= 9))
                    {
                       sU8NumberCounter = 9;
                       tab_ConfirmPassword_edit[4] = '0';
                    }
                    tab_ConfirmPassword_edit[4] =  '0' + sU8NumberCounter;                       
                }
                else if(sU8SetPasswordCounter == 17)//Confirm密码第六个数字
                {
                    sU8NumberCounter--;
                    if(!(sU8NumberCounter <= 9))
                    {
                       sU8NumberCounter = 9;
                       tab_ConfirmPassword_edit[5] = '0';
                    }
                    tab_ConfirmPassword_edit[5] =  '0' + sU8NumberCounter;                       
                }
                
                gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_SET_SYSTEM_PASSWORD;
                
            }
            break;
        case KEYACTION_ESC://在系统设置界面下，ESC键按下，保存退出到上一级菜单
            {
                if(gbEditFlag != STATUS_FALSE)//退出编辑模式 
                {
                    gbEditFlag = STATUS_FALSE;
                    sU8NumberCounter = 0;
                    Display_Set_UnderLine_Blink_Position(STATUS_FALSE,0,0);
                }
                gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_SET_SYSTEM;
            }
            break;
        case KEYACTION_UPDOWN://在系统设置界面下，UP键 + DOWN键同时按下，切换设置下一个数据
            {
                sU8SetPasswordCounter++;
                sU8NumberCounter = 0;
                if(sU8SetPasswordCounter == DISPLAY_SET_SYSTEM_PASSWORD_COUNT)
                {
                    sU8SetPasswordCounter = 0;  
                }
                gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_SET_SYSTEM_PASSWORD;
            }
            break;
        case KEYACTION_NULL://无操作刷新主界面数据
        default:
            {
                if(gbEditFlag != STATUS_TRUE)
                {
                    gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_SET_SYSTEM_PASSWORD;
                }
            }
            break;
    }
    
    if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_ENGLISH) //系统密码设置界面PasswordSystemSet 英文界面组装
    {
        if(gbEditFlag == STATUS_TRUE)
        {
            Display_Set_UnderLine_Blink_Position(STATUS_TRUE,arrayFixPasswordFlicker[sU8SetPasswordCounter].u8StartPos,arrayFixPasswordFlicker[sU8SetPasswordCounter].u8EndPos);
        }
        updateDisplaySystemPasswordSetData_English(tab_OldPassword_edit,tab_NewPassword_edit,tab_ConfirmPassword_edit);                        
    }
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_CHINESE) //系统密码设置界面PasswordSystemSet 中文界面组装 
    {
        if(gbEditFlag == STATUS_TRUE)
        {
            //Display_Set_UnderLine_Blink_Position(STATUS_TRUE,arrayFixPasswordFlickerChinese[sU8SetPasswordCounter].u8StartPos,arrayFixPasswordFlickerChinese[sU8SetPasswordCounter].u8EndPos);
        }
        updateDisplaySystemPasswordSetData_Chinese(tab_OldPassword_edit,tab_NewPassword_edit,tab_ConfirmPassword_edit);                          
    }
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_SPANISH)//系统密码设置界面PasswordSystemSet 西班牙界面组装 
    { 
        updateDisplaySystemPasswordSetData_Spanish(tab_OldPassword_edit,tab_NewPassword_edit,tab_ConfirmPassword_edit); 
    }
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_GERMAN)//系统密码设置界面PasswordSystemSet 德语界面组装 
    { 
        updateDisplaySystemPasswordSetData_German(tab_OldPassword_edit,tab_NewPassword_edit,tab_ConfirmPassword_edit); 
    }
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_FRENCH)//系统密码设置界面PasswordSystemSet 法语界面组装 
    { 
        updateDisplaySystemPasswordSetData_French(tab_OldPassword_edit,tab_NewPassword_edit,tab_ConfirmPassword_edit);                         
    }
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_POLISH)//系统密码设置界面PasswordSystemSet 波兰界面组装 
    {
        updateDisplaySystemPasswordSetData_Polish(tab_OldPassword_edit,tab_NewPassword_edit,tab_ConfirmPassword_edit); 
    }
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_ITALIAN)//系统密码设置界面PasswordSystemSet 意大利界面组装 
    {
        updateDisplaySystemPasswordSetData_Italian(tab_OldPassword_edit,tab_NewPassword_edit,tab_ConfirmPassword_edit);                        
    }
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_CZECH)//系统密码设置界面PasswordSystemSet 捷克界面组装
    { 
        updateDisplaySystemPasswordSetData_Czech(tab_OldPassword_edit,tab_NewPassword_edit,tab_ConfirmPassword_edit);                        
    }
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_DUTCH) //系统密码设置界面PasswordSystemSet 荷兰界面组装 
    {
        updateDisplaySystemPasswordSetData_Dutch(tab_OldPassword_edit,tab_NewPassword_edit,tab_ConfirmPassword_edit);                        
    }
    else
    {
        updateDisplaySystemPasswordSetData_English(tab_OldPassword_edit,tab_NewPassword_edit,tab_ConfirmPassword_edit);
    }
}

/***************************************************************************
 功能:英文 设置系统Password界面
****************************************************************************/
void updateDisplaySystemPasswordSetData_English(char* sOldPassword,char* sNewPassword,char* sConfirmPassword)
{
    memset(tab_display,0,DISPLAY_CACHE_SIZE);
    sprintf(tab_display,"     Password Set    \nOld:%s           \nNew:%s           \nConfirm:%s       \n",sOldPassword,sNewPassword,sConfirmPassword);
    //GUI_DispStringAt((uint8_t*)tab_display, 0, 0);
    GUI_Display(tab_display, 0, 0);
}


/***************************************************************************
 功能:西班牙 设置系统Password界面
****************************************************************************/
void updateDisplaySystemPasswordSetData_Spanish(char* sOldPassword,char* sNewPassword,char* sConfirmPassword)
{
    
}

/***************************************************************************
 功能:德语 设置系统Password界面
****************************************************************************/
void updateDisplaySystemPasswordSetData_German(char* sOldPassword,char* sNewPassword,char* sConfirmPassword)
{
    
}

/***************************************************************************
 功能:法语 设置系统Password界面
****************************************************************************/
void updateDisplaySystemPasswordSetData_French(char* sOldPassword,char* sNewPassword,char* sConfirmPassword)
{
    
}

/***************************************************************************
 功能:波兰语 设置系统Password界面
****************************************************************************/
void updateDisplaySystemPasswordSetData_Polish(char* sOldPassword,char* sNewPassword,char* sConfirmPassword)
{
    
}

/***************************************************************************
 功能:意大利语 设置系统Password界面
****************************************************************************/
void updateDisplaySystemPasswordSetData_Italian(char* sOldPassword,char* sNewPassword,char* sConfirmPassword)
{
    
}

/***************************************************************************
 功能:捷克语 设置系统Password界面
****************************************************************************/
void updateDisplaySystemPasswordSetData_Czech(char* sOldPassword,char* sNewPassword,char* sConfirmPassword)
{
    
}

/***************************************************************************
 功能:荷兰语 设置系统Password界面
****************************************************************************/
void updateDisplaySystemPasswordSetData_Dutch(char* sOldPassword,char* sNewPassword,char* sConfirmPassword)
{
    
}

/***************************************************************************
 功能:系统设置密码接口到Flash存储
****************************************************************************/
void setDisplayPasswordtToFlash(char* sSetPassword)
{    
    //用tab_OldPassword_Flash模拟Flash存储
    memcpy(tab_Password_Flash,sSetPassword,sizeof(tab_Password_Flash));
}

/***************************************************************************
 功能:系统设置密码接口到Flash存储
****************************************************************************/
void getDisplayPasswordFromFlash(char* sGetPassword)
{    
    //用tab_OldPassword_Flash模拟Flash存储
    memcpy(sGetPassword,tab_Password_Flash,sizeof(tab_Password_Flash));
}

/***************************************************************************
功能：密码校验 password verify
****************************************************************************/
Tip_TypeDef DisplaySystemPasswordVerify(char* sOldPassword,char* sNewPassword,char* sConfirmPassword)
{
   Tip_TypeDef rValue;
   char tab_OldPassword_Flash_Compare[7];
   getDisplayPasswordFromFlash(tab_OldPassword_Flash_Compare);
    
   if((sOldPassword[0] != tab_OldPassword_Flash_Compare[0])
         ||(sOldPassword[1] != tab_OldPassword_Flash_Compare[1])
         ||(sOldPassword[2] != tab_OldPassword_Flash_Compare[2])
         ||(sOldPassword[3] != tab_OldPassword_Flash_Compare[3])
         ||(sOldPassword[4] != tab_OldPassword_Flash_Compare[4])
         ||(sOldPassword[5] != tab_OldPassword_Flash_Compare[5]))     
   {
       rValue = TIP_PASSWORD_SET_ERROR;
   }
   else if((strcmp(sNewPassword+0,"000000")== 0) 
       || (strcmp(sNewPassword+1,"00000")== 0)
       || (strcmp(sNewPassword+2,"0000") == 0)
       || (strcmp(sNewPassword+3,"000")  == 0)
       || (strcmp(sNewPassword+4,"00")   == 0)
       || (strcmp(sNewPassword+5,"0")    == 0))  
   {
       rValue = TIP_PASSWORD_SET_SHORT;
   } 
   else if((sNewPassword[0] == tab_OldPassword_Flash_Compare[0])
         &&(sNewPassword[1] == tab_OldPassword_Flash_Compare[1])
         &&(sNewPassword[2] == tab_OldPassword_Flash_Compare[2])
         &&(sNewPassword[3] == tab_OldPassword_Flash_Compare[3])
         &&(sNewPassword[4] == tab_OldPassword_Flash_Compare[4])
         &&(sNewPassword[5] == tab_OldPassword_Flash_Compare[5]))
   {
       rValue = TIP_PASSWORD_SET_OVERLAP;
   }
   else if((sNewPassword[0] != sConfirmPassword[0])
         ||(sNewPassword[1] != sConfirmPassword[1])
         ||(sNewPassword[2] != sConfirmPassword[2])
         ||(sNewPassword[3] != sConfirmPassword[3])
         ||(sNewPassword[4] != sConfirmPassword[4])
         ||(sNewPassword[5] != sConfirmPassword[5]))
   {
       rValue = TIP_PASSWORD_SET_DIFFERENCET;
   }
   else
   {
       rValue = TIP_PASSED;
   }    
   
   return rValue;
}

/***************************************************************************
  功能：登陆校验 Login verify
****************************************************************************/
Tip_TypeDef DisplaySystemLoginVerify(char* sPassword)
{  
    Tip_TypeDef rValue = TIP_PASSED;
    char tab_Flash_Compare[7];
    getDisplayPasswordFromFlash(tab_Flash_Compare);
    if((sPassword[0] != tab_Flash_Compare[0])
        ||(sPassword[1] != tab_Flash_Compare[1])  
        ||(sPassword[2] != tab_Flash_Compare[2])
        ||(sPassword[3] != tab_Flash_Compare[3])
        ||(sPassword[4] != tab_Flash_Compare[4])
        ||(sPassword[5] != tab_Flash_Compare[5])
        )
    {
       rValue = TIP_LOGIN_ERROR; 
    }
   return rValue;
}

/***************************************************************************
 功能：提示界面处理流程
****************************************************************************/
void updateDisplaySystemPrompt(KeyAction_TypeDef nowActionType,DisplayAction_TypeDef nowDisplayType)
{
    //本次界面操作类型
    switch(nowActionType) 
    {
        case KEYACTION_ENTER://确认
            {
                //gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_SET;
            }
            break;
        case KEYACTION_ESC://取消
            {
                //gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_SET;
            }
            break;
        case KEYACTION_NULL://无操作刷新主界面数据
        default:
            {
                gPromptCount++;
                if(gCurrentMenu.stTip.u8PromptTime == gPromptCount)
                {
                    gPromptCount = 0;
                    gCurrentMenu.eCurrentDisplayMenuType = gCurrentMenu.stTip.eOccurTipAction;
                }
                else
                {
                    switch(gCurrentMenu.stTip.eTipType)
                    {
                        case TIP_PASSWORD_SET_SHORT:            
                            {
                                if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_ENGLISH)//密码设置位数不够6位提示界面信息 英文界面组装
                                { 
                                    updateDisplayTipPasswordShort_English();                    
                                }                          
                                else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_CHINESE)//密码设置位数不够6位提示界面信息 中文界面组装
                                {
                                    updateDisplayTipPasswordShort_Chinese();
                                }                         
                                else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_SPANISH)//密码设置位数不够6位提示界面信息 西班牙界面组装
                                {
                                    updateDisplayTipPasswordShort_Spanish();  
                                }                             
                                else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_GERMAN)//密码设置位数不够6位提示界面信息 德语界面组装 
                                {
                                    updateDisplayTipPasswordShort_German();  
                                }                         
                                else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_FRENCH)//密码设置位数不够6位提示界面信息 法语界面组装
                                {
                                    updateDisplayTipPasswordShort_French();    
                                }                                
                                else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_POLISH)//密码设置位数不够6位提示界面信息 波兰界面组装
                                {
                                    updateDisplayTipPasswordShort_Polish(); 
                                }                                 
                                else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_ITALIAN)//密码设置位数不够6位提示界面信息 意大利界面组装
                                {
                                    updateDisplayTipPasswordShort_Italian();  
                                }                    
                                else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_CZECH)//密码设置位数不够6位提示界面信息 捷克界面组装
                                {
                                    updateDisplayTipPasswordShort_Czech();   
                                }    
                                else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_DUTCH)//密码设置位数不够6位提示界面信息 荷兰界面组装 
                                {
                                    updateDisplayTipPasswordShort_Dutch();   
                                }          
                                else//默认是英语
                                { 
                                    updateDisplayTipPasswordShort_English();                                    
                                }
                            }
                            break; 
                        case TIP_PASSWORD_SET_ERROR:          
                            {
                                if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_ENGLISH)//旧的密码输入错误提示界面信息 英文界面组装
                                { 
                                    updateDisplayTipOldPasswordError_English();                    
                                }                          
                                else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_CHINESE)//旧的密码输入错误提示界面信息 中文界面组装
                                {
                                    updateDisplayTipOldPasswordError_Chinese();
                                }                         
                                else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_SPANISH)//旧的密码输入错误提示界面信息 西班牙界面组装
                                {
                                    updateDisplayTipOldPasswordError_Spanish();  
                                }                             
                                else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_GERMAN)//旧的密码输入错误提示界面信息 德语界面组装 
                                {
                                    updateDisplayTipOldPasswordError_German();  
                                }                         
                                else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_FRENCH)//旧的密码输入错误提示界面信息 法语界面组装
                                {
                                    updateDisplayTipOldPasswordError_French();    
                                }                                
                                else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_POLISH)//旧的密码输入错误提示界面信息 波兰界面组装
                                {
                                    updateDisplayTipOldPasswordError_Polish(); 
                                }                                 
                                else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_ITALIAN)//旧的密码输入错误提示界面信息 意大利界面组装
                                {
                                    updateDisplayTipOldPasswordError_Italian();  
                                }                    
                                else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_CZECH)//旧的密码输入错误提示界面信息 捷克界面组装
                                {
                                    updateDisplayTipOldPasswordError_Czech();   
                                }    
                                else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_DUTCH)//旧的密码输入错误提示界面信息 荷兰界面组装 
                                {
                                    updateDisplayTipOldPasswordError_Dutch();   
                                }          
                                else//默认是英语
                                { 
                                    updateDisplayTipOldPasswordError_English();                                    
                                }
                            }
                            break; 
                        case TIP_PASSWORD_SET_DIFFERENCET://            
                            {
                               if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_ENGLISH)//两次输入的新密码不一致提示界面信息 英文界面组装
                                { 
                                    updateDisplayTipOldPasswordNotMatch_English();                    
                                }                          
                                else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_CHINESE)//两次输入的新密码不一致提示界面信息 中文界面组装
                                {
                                    updateDisplayTipOldPasswordNotMatch_Chinese();
                                }                         
                                else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_SPANISH)//两次输入的新密码不一致提示界面信息 西班牙界面组装
                                {
                                    updateDisplayTipOldPasswordNotMatch_Spanish();  
                                }                             
                                else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_GERMAN)//两次输入的新密码不一致提示界面信息 德语界面组装 
                                {
                                    updateDisplayTipOldPasswordNotMatch_German();  
                                }                         
                                else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_FRENCH)//两次输入的新密码不一致提示界面信息 法语界面组装
                                {
                                    updateDisplayTipOldPasswordNotMatch_French();    
                                }                                
                                else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_POLISH)//两次输入的新密码不一致提示界面信息 波兰界面组装
                                {
                                    updateDisplayTipOldPasswordNotMatch_Polish(); 
                                }                                 
                                else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_ITALIAN)//两次输入的新密码不一致提示界面信息 意大利界面组装
                                {
                                    updateDisplayTipOldPasswordNotMatch_Italian();  
                                }                    
                                else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_CZECH)//两次输入的新密码不一致提示界面信息 捷克界面组装
                                {
                                    updateDisplayTipOldPasswordNotMatch_Czech();   
                                }    
                                else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_DUTCH)//两次输入的新密码不一致提示界面信息 荷兰界面组装 
                                {
                                    updateDisplayTipOldPasswordNotMatch_Dutch();   
                                }          
                                else//默认是英语
                                { 
                                    updateDisplayTipOldPasswordNotMatch_English();                                    
                                }
                            }
                            break; 
                        case TIP_PASSWORD_SET_OVERLAP://            
                            {
                               if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_ENGLISH)//输入的新密码和历史密码重合提示界面信息 英文界面组装
                                { 
                                    updateDisplayTipOldPasswordOverlaps_English();                    
                                }                          
                                else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_CHINESE)//输入的新密码和历史密码重合提示界面信息 中文界面组装
                                {
                                    updateDisplayTipOldPasswordOverlaps_Chinese();
                                }                         
                                else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_SPANISH)//输入的新密码和历史密码重合提示界面信息 西班牙界面组装
                                {
                                    updateDisplayTipOldPasswordOverlaps_Spanish();  
                                }                             
                                else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_GERMAN)//输入的新密码和历史密码重合提示界面信息 德语界面组装 
                                {
                                    updateDisplayTipOldPasswordOverlaps_German();  
                                }                         
                                else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_FRENCH)//输入的新密码和历史密码重合提示界面信息 法语界面组装
                                {
                                    updateDisplayTipOldPasswordOverlaps_French();    
                                }                                
                                else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_POLISH)//输入的新密码和历史密码重合提示界面信息 波兰界面组装
                                {
                                    updateDisplayTipOldPasswordOverlaps_Polish(); 
                                }                                 
                                else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_ITALIAN)//输入的新密码和历史密码重合提示界面信息 意大利界面组装
                                {
                                    updateDisplayTipOldPasswordOverlaps_Italian();  
                                }                    
                                else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_CZECH)//输入的新密码和历史密码重合提示界面信息 捷克界面组装
                                {
                                    updateDisplayTipOldPasswordOverlaps_Czech();   
                                }    
                                else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_DUTCH)//输入的新密码和历史密码重合提示界面信息 荷兰界面组装 
                                {
                                    updateDisplayTipOldPasswordOverlaps_Dutch();   
                                }          
                                else//默认是英语
                                { 
                                    updateDisplayTipOldPasswordOverlaps_English();                                    
                                }
                            }
                            break; 
                        case TIP_LOGIN_ERROR://            
                            {                             
                                if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_ENGLISH)//登陆密码错误提示界面信息 英文界面组装
                                { 
                                    updateDisplayTipLoginError_English();                    
                                }                          
                                else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_CHINESE)//登陆密码错误提示界面信息 中文界面组装
                                {
                                    updateDisplayTipLoginError_Chinese();
                                }                         
                                else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_SPANISH)//登陆密码错误提示界面信息 西班牙界面组装
                                {
                                    updateDisplayTipLoginError_Spanish();  
                                }                             
                                else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_GERMAN)//登陆密码错误提示界面信息 德语界面组装 
                                {
                                    updateDisplayTipLoginError_German();  
                                }                         
                                else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_FRENCH)//登陆密码错误提示界面信息 法语界面组装
                                {
                                    updateDisplayTipLoginError_French();    
                                }                                
                                else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_POLISH)//登陆密码错误提示界面信息 波兰界面组装
                                {
                                    updateDisplayTipLoginError_Polish(); 
                                }                                 
                                else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_ITALIAN)//登陆密码错误提示界面信息 意大利界面组装
                                {
                                    updateDisplayTipLoginError_Italian();  
                                }                    
                                else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_CZECH)//登陆密码错误提示界面信息 捷克界面组装
                                {
                                    updateDisplayTipLoginError_Czech();   
                                }    
                                else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_DUTCH)//登陆密码错误提示界面信息 荷兰界面组装 
                                {
                                    updateDisplayTipLoginError_Dutch();   
                                }          
                                else//默认是英语
                                { 
                                    updateDisplayTipLoginError_English();                                    
                                }
                            }
                            break;
                        case TIP_PASSED://
                            {
                                if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_ENGLISH)//设置ok 英文界面组装
                                { 
                                    updateDisplayTipSetPassed_English();                    
                                }                          
                                else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_CHINESE)//设置ok 中文界面组装
                                {
                                    updateDisplayTipSetPassed_Chinese();
                                }                         
                                else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_SPANISH)//设置ok 西班牙界面组装
                                {
                                    updateDisplayTipSetPassed_Spanish();  
                                }                             
                                else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_GERMAN)//设置ok 德语界面组装 
                                {
                                    updateDisplayTipSetPassed_German();  
                                }                         
                                else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_FRENCH)//设置ok 法语界面组装
                                {
                                    updateDisplayTipSetPassed_French();    
                                }                                
                                else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_POLISH)//设置ok 波兰界面组装
                                {
                                    updateDisplayTipSetPassed_Polish(); 
                                }                                 
                                else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_ITALIAN)//设置ok 意大利界面组装
                                {
                                    updateDisplayTipSetPassed_Italian();  
                                }                    
                                else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_CZECH)//设置ok 捷克界面组装
                                {
                                    updateDisplayTipSetPassed_Czech();   
                                }    
                                else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_DUTCH)//设置ok 荷兰界面组装 
                                {
                                    updateDisplayTipSetPassed_Dutch();   
                                }          
                                else//默认是英语
                                { 
                                    updateDisplayTipSetPassed_English();                                    
                                }
                            }                            
                        default: 
                            {
                            }                                        
                    }
                    gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_PROMPT;
                }
            }
    }
}

/***************************************************************************
 功能:英语 显示登陆密码校验错误信息
****************************************************************************/
void updateDisplayTipLoginError_English(void)
{
    sprintf(tab_display,"         TIP         \nPassword verification\n error,Please again. \n                     \n");
    //GUI_DispStringAt((uint8_t*)tab_display, 0, 0);  
    GUI_Display(tab_display, 0, 0);
}


/***************************************************************************
 功能:西班牙语 显示登陆密码校验错误信息
****************************************************************************/
void updateDisplayTipLoginError_Spanish(void)
{
}
/***************************************************************************
 功能:德语 显示登陆密码校验错误信息
****************************************************************************/
void updateDisplayTipLoginError_German(void)
{
}
/***************************************************************************
 功能:法语 显示登陆密码校验错误信息
****************************************************************************/
void updateDisplayTipLoginError_French(void)
{
}
/***************************************************************************
 功能:波兰语 显示登陆密码校验错误信息
****************************************************************************/
void updateDisplayTipLoginError_Polish(void)
{
}
/***************************************************************************
 功能:意大利语 显示登陆密码校验错误信息
****************************************************************************/
void updateDisplayTipLoginError_Italian(void)
{
}
/***************************************************************************
 功能:捷克 显示登陆密码校验错误信息
****************************************************************************/
void updateDisplayTipLoginError_Czech(void)
{
}
/***************************************************************************
 功能:荷兰 显示登陆密码校验错误信息
****************************************************************************/
void updateDisplayTipLoginError_Dutch(void)
{
}


/***************************************************************************
 功能:英语 密码修改密码设置位数不够6位提示界面信息
****************************************************************************/
void updateDisplayTipPasswordShort_English(void)
{
    memset(tab_display,0,DISPLAY_CACHE_SIZE);
    sprintf(tab_display,"         TIP         \nPlease enter 6-digit \npassword,Please again\n.                    \n");
    //GUI_DispStringAt((uint8_t*)tab_display, 0, 0);  
    GUI_Display(tab_display, 0, 0);
}


/***************************************************************************
 功能:西班牙语 密码修改密码设置位数不够6位提示界面信息
****************************************************************************/
void updateDisplayTipPasswordShort_Spanish(void)
{
}
/***************************************************************************
 功能:德语 密码修改密码设置位数不够6位提示界面信息
****************************************************************************/
void updateDisplayTipPasswordShort_German(void)
{
}
/***************************************************************************
 功能:法语 密码修改密码设置位数不够6位提示界面信息
****************************************************************************/
void updateDisplayTipPasswordShort_French(void)
{
}
/***************************************************************************
 功能:波兰语 密码修改密码设置位数不够6位提示界面信息
****************************************************************************/
void updateDisplayTipPasswordShort_Polish(void)
{
}
/***************************************************************************
 功能:意大利语 密码修改密码设置位数不够6位提示界面信息
****************************************************************************/
void updateDisplayTipPasswordShort_Italian(void)
{
}
/***************************************************************************
 功能:捷克 密码修改密码设置位数不够6位提示界面信息
****************************************************************************/
void updateDisplayTipPasswordShort_Czech(void)
{
}
/***************************************************************************
 功能:荷兰 密码修改密码设置位数不够6位提示界面信息
****************************************************************************/
void updateDisplayTipPasswordShort_Dutch(void)
{
}

/***************************************************************************
 功能:英语 密码修改旧的密码输入错误提示界面信息
****************************************************************************/
void updateDisplayTipOldPasswordError_English(void)
{
    sprintf(tab_display,"         TIP         \nOld Password Input   \nError,Please again.  \n                     \n");
    //GUI_DispStringAt((uint8_t*)tab_display, 0, 0);  
    GUI_Display(tab_display, 0, 0);
}


/***************************************************************************
 功能:西班牙语 密码修改旧的密码输入错误提示界面信息
****************************************************************************/
void updateDisplayTipOldPasswordError_Spanish(void)
{
}
/***************************************************************************
 功能:德语 密码修改旧的密码输入错误提示界面信息
****************************************************************************/
void updateDisplayTipOldPasswordError_German(void)
{
}
/***************************************************************************
 功能:法语 密码修改旧的密码输入错误提示界面信息
****************************************************************************/
void updateDisplayTipOldPasswordError_French(void)
{
}
/***************************************************************************
 功能:波兰语 密码修改旧的密码输入错误提示界面信息
****************************************************************************/
void updateDisplayTipOldPasswordError_Polish(void)
{
}
/***************************************************************************
 功能:意大利语 密码修改旧的密码输入错误提示界面信息
****************************************************************************/
void updateDisplayTipOldPasswordError_Italian(void)
{
}
/***************************************************************************
 功能:捷克 密码修改旧的密码输入错误提示界面信息
****************************************************************************/
void updateDisplayTipOldPasswordError_Czech(void)
{
}
/***************************************************************************
 功能:荷兰 密码修改旧的密码输入错误提示界面信息
****************************************************************************/
void updateDisplayTipOldPasswordError_Dutch(void)
{
}

/***************************************************************************
 功能:英语 密码修改两次输入的新密码不一致提示界面信息
****************************************************************************/
void updateDisplayTipOldPasswordNotMatch_English(void)
{
    sprintf(tab_display,"         TIP         \nNew Password and confirmed Password Not Match,\nPlease again.\n                     \n");
    //GUI_DispStringAt((uint8_t*)tab_display, 0, 0);  
    GUI_Display(tab_display, 0, 0);
}


/***************************************************************************
 功能:西班牙语 密码修改两次输入的新密码不一致提示界面信息
****************************************************************************/
void updateDisplayTipOldPasswordNotMatch_Spanish(void)
{
}
/***************************************************************************
 功能:德语 密码修改两次输入的新密码不一致提示界面信息
****************************************************************************/
void updateDisplayTipOldPasswordNotMatch_German(void)
{
}
/***************************************************************************
 功能:法语 密码修改两次输入的新密码不一致提示界面信息
****************************************************************************/
void updateDisplayTipOldPasswordNotMatch_French(void)
{
}
/***************************************************************************
 功能:波兰语 密码修改两次输入的新密码不一致提示界面信息
****************************************************************************/
void updateDisplayTipOldPasswordNotMatch_Polish(void)
{
}
/***************************************************************************
 功能:意大利语 密码修改两次输入的新密码不一致提示界面信息
****************************************************************************/
void updateDisplayTipOldPasswordNotMatch_Italian(void)
{
}
/***************************************************************************
 功能:捷克 密码修改两次输入的新密码不一致提示界面信息
****************************************************************************/
void updateDisplayTipOldPasswordNotMatch_Czech(void)
{
}
/***************************************************************************
 功能:荷兰 密码修改两次输入的新密码不一致提示界面信息
****************************************************************************/
void updateDisplayTipOldPasswordNotMatch_Dutch(void)
{
}

/***************************************************************************
 功能:英语 密码修改输入的新密码和历史密码重合提示界面信息
****************************************************************************/
void updateDisplayTipOldPasswordOverlaps_English(void)
{
    sprintf(tab_display,"         TIP         \nNew Password Overlaps\n With Old Password,  \nPlease again.        \n");
    //GUI_DispStringAt((uint8_t*)tab_display, 0, 0);  
    GUI_Display(tab_display, 0, 0);
}


/***************************************************************************
 功能:西班牙语 密码修改输入的新密码和历史密码重合提示界面信息
****************************************************************************/
void updateDisplayTipOldPasswordOverlaps_Spanish(void)
{
}
/***************************************************************************
 功能:德语 密码修改输入的新密码和历史密码重合提示界面信息
****************************************************************************/
void updateDisplayTipOldPasswordOverlaps_German(void)
{
}
/***************************************************************************
 功能:法语 密码修改输入的新密码和历史密码重合提示界面信息
****************************************************************************/
void updateDisplayTipOldPasswordOverlaps_French(void)
{
}
/***************************************************************************
 功能:波兰语 密码修改输入的新密码和历史密码重合提示界面信息
****************************************************************************/
void updateDisplayTipOldPasswordOverlaps_Polish(void)
{
}
/***************************************************************************
 功能:意大利语 密码修改输入的新密码和历史密码重合提示界面信息
****************************************************************************/
void updateDisplayTipOldPasswordOverlaps_Italian(void)
{
}
/***************************************************************************
 功能:捷克 密码修改输入的新密码和历史密码重合提示界面信息
****************************************************************************/
void updateDisplayTipOldPasswordOverlaps_Czech(void)
{
}
/***************************************************************************
 功能:荷兰 密码修改输入的新密码和历史密码重合提示界面信息
****************************************************************************/
void updateDisplayTipOldPasswordOverlaps_Dutch(void)
{
}

/***************************************************************************
 功能:英语 设置通过提示界面信息
****************************************************************************/
void updateDisplayTipSetPassed_English(void)
{
    sprintf(tab_display,"         TIP         \n                     \n        Set ok       \n                     \n");
    //GUI_DispStringAt((uint8_t*)tab_display, 0, 0);  
    GUI_Display(tab_display, 0, 0);
}


/***************************************************************************
 功能:西班牙语 设置通过提示界面信息
****************************************************************************/
void updateDisplayTipSetPassed_Spanish(void)
{
}
/***************************************************************************
 功能:德语 设置通过提示界面信息
****************************************************************************/
void updateDisplayTipSetPassed_German(void)
{
}
/***************************************************************************
 功能:法语 设置通过提示界面信息
****************************************************************************/
void updateDisplayTipSetPassed_French(void)
{
}
/***************************************************************************
 功能:波兰语 设置通过提示界面信息
****************************************************************************/
void updateDisplayTipSetPassed_Polish(void)
{
}
/***************************************************************************
 功能:意大利语 设置通过提示界面信息
****************************************************************************/
void updateDisplayTipSetPassed_Italian(void)
{
}
/***************************************************************************
 功能:捷克 设置通过提示界面信息
****************************************************************************/
void updateDisplayTipSetPassed_Czech(void)
{
}
/***************************************************************************
 功能:荷兰 设置通过提示界面信息
****************************************************************************/
void updateDisplayTipSetPassed_Dutch(void)
{
}

/***************************************************************************
 功能:设置系统清除故障
****************************************************************************/
void updateDisplaySystemClearFaultData(void)
{
    /*清除结束提示*/
    gCurrentMenu.stTip.eOccurTipAction = DISPLAY_SET_SYSTEM;
    gCurrentMenu.stTip.eConfirmSource = CONFIRMSOURCE_CLEARFAULT;
    //gCurrentMenu.stTip.eTipType = TIP_PASSED;
    gCurrentMenu.stTip.u8PromptTime = 60;
    gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_CONFIRM;
}

/***************************************************************************
 功能:设置系统清除故障
****************************************************************************/
void updateDisplaySystemClearRecordData(void)
{
    gCurrentMenu.stTip.eOccurTipAction = DISPLAY_SET_SYSTEM;
    gCurrentMenu.stTip.eConfirmSource = CONFIRMSOURCE_CLEARRECORD;
    //gCurrentMenu.stTip.eTipType = TIP_PASSED;
    gCurrentMenu.stTip.u8PromptTime = 60;
    gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_CONFIRM;
}
/***************************************************************************
 功能：提示确认流程
****************************************************************************/
void updateDisplaySystemConfirm(KeyAction_TypeDef nowActionType,DisplayAction_TypeDef nowDisplayType)
{
    static uint8_t sU8ConfirCounter = 0;
    static bool_t bFristFlag = STATUS_FALSE;
    //本次界面操作类型
    switch(nowActionType) 
    {
        case KEYACTION_ENTER://确认
            {
                bFristFlag = STATUS_FALSE;
                Display_Set_UnderLine_Blink_Position(STATUS_FALSE,0,0);
                if(sU8ConfirCounter == 1)
                {
                    switch(gCurrentMenu.stTip.eConfirmSource) 
                    {
                        case CONFIRMSOURCE_CLEARFAULT:
                            {
                                Display_Clear_HistoryFaultData();
                                generateOperationRecord(RECORD_SET_ClearFault);
                            }
                            break;
                        case CONFIRMSOURCE_CLEARRECORD:
                            {
                                Display_Clear_OperationRecordData();
                                generateOperationRecord(RECORD_SET_ClearRecord);
                            }
                            break;
                        case CONFIRMSOURCE_FACTORY:
                            {
                                /*
                                    恢复出厂功能
                                    1.设置数据恢复到出厂数据
                                    2.清除历史数据(历史故障、操作记录)
                                    3.重启
                                        (1)ToPCS发送并网标准
                                        (2)ToPCS发送校准系数
                                */
                                Display_Clear_HistoryFaultData();
                                Display_Clear_OperationRecordData();
                                Display_Clear_SystemStatistical();
                                SystemPara_RestoreFactorySetData();
                                generateOperationRecord(RECORD_SET_Factory);
                                SysSoftwareReset();
                            }
                            break;
                        case CONFIRMSOURCE_BLUETOOTHRESET:
                            {
                                //添加蓝牙复位代码
                                generateOperationRecord(RECORD_SET_BLT_RESET);
                            }
                            break;
                        case CONFIRMSOURCE_WIFIRESET:
                            {
                                //添加蓝牙复位代码 
                                generateOperationRecord(RECORD_SET_WIFI_RESET);
                            }
                            break;
                        case CONFIRMSOURCE_NONE:
                        default:
                            {
                            }
                            break;
                    }
                    sU8ConfirCounter = 0;
                    gCurrentMenu.stTip.eTipType = TIP_PASSED;
                    gCurrentMenu.stTip.u8PromptTime = 20;
                    gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_PROMPT;  
                }
                else
                {
                    sU8ConfirCounter = 0;
                    gCurrentMenu.eCurrentDisplayMenuType = gCurrentMenu.stTip.eOccurTipAction;
                }
            }
            break;
        case KEYACTION_ESC://取消
            {
                Display_Set_UnderLine_Blink_Position(STATUS_FALSE,0,0);
                sU8ConfirCounter = 0;
                bFristFlag = STATUS_FALSE;
                gCurrentMenu.eCurrentDisplayMenuType = gCurrentMenu.stTip.eOccurTipAction;
            }
            break;
        case KEYACTION_UPDOWN://confirm 和 cancel切换
            {
                sU8ConfirCounter++;
                if(sU8ConfirCounter == DISPLAY_SET_SYSTEM_CONFIRM_ITEM_COUNT)
                {
                    sU8ConfirCounter = 1;
                }
                gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_CONFIRM;
                }
            break;
        case KEYACTION_NULL://无操作刷新主界面数据
        default:
                {
                    gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_CONFIRM;
                    if(bFristFlag == STATUS_FALSE)
                    {
                        bFristFlag = STATUS_TRUE;
                        sU8ConfirCounter = 1;
                    }
            }
            break;
    }
    
    if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_ENGLISH)//设置ok 英文界面组装
    { 
        if(sU8ConfirCounter != 0)
        {
            Display_Set_UnderLine_Blink_Position(STATUS_TRUE,arrayVarConfirmFlicker[sU8ConfirCounter-1].u8StartPos,arrayVarConfirmFlicker[sU8ConfirCounter-1].u8EndPos);
        }
        updateDisplaySystemConfirm_English();                    
    }                          
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_CHINESE)//设置ok 中文界面组装
    {
        if(sU8ConfirCounter != 0)
        {
            Display_Set_UnderLine_Blink_Position(STATUS_TRUE,arrayVarConfirmFlickerChinese[sU8ConfirCounter-1].u8StartPos,arrayVarConfirmFlickerChinese[sU8ConfirCounter-1].u8EndPos);
        }
        updateDisplaySystemConfirm_Chinese();
    }                         
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_SPANISH)//设置ok 西班牙界面组装
    {
        updateDisplaySystemConfirm_Spanish();  
    }                             
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_GERMAN)//设置ok 德语界面组装 
    {
        updateDisplaySystemConfirm_German();  
    }                         
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_FRENCH)//设置ok 法语界面组装
    {
        updateDisplaySystemConfirm_French();    
    }                                
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_POLISH)//设置ok 波兰界面组装
    {
        updateDisplaySystemConfirm_Polish(); 
    }                                 
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_ITALIAN)//设置ok 意大利界面组装
    {
        updateDisplaySystemConfirm_Italian();  
    }                    
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_CZECH)//设置ok 捷克界面组装
    {
        updateDisplaySystemConfirm_Czech();   
    }    
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_DUTCH)//设置ok 荷兰界面组装 
    {
        updateDisplaySystemConfirm_Dutch();   
    }          
    else//默认是英语
    { 
        updateDisplaySystemConfirm_English();                                    
    }
}

/***************************************************************************
 功能:英语 确认提示信息
****************************************************************************/
void updateDisplaySystemConfirm_English(void)
{
    memset(tab_display,0,DISPLAY_CACHE_SIZE);
    sprintf(tab_display,"                     \n   Sure Or Cancel ?  \n                    \n                    \n");
    //GUI_DispStringAt((uint8_t*)tab_display, 0, 0);  
    GUI_Display(tab_display, 0, 0);
}



/***************************************************************************
 功能:西班牙语 确认提示信息
****************************************************************************/
void updateDisplaySystemConfirm_Spanish(void)
{
}
/***************************************************************************
 功能:德语 确认提示信息
****************************************************************************/
void updateDisplaySystemConfirm_German(void)
{
}
/***************************************************************************
 功能:法语 确认提示信息
****************************************************************************/
void updateDisplaySystemConfirm_French(void)
{
}
/***************************************************************************
 功能:波兰语 确认提示信息
****************************************************************************/
void updateDisplaySystemConfirm_Polish(void)
{
}
/***************************************************************************
 功能:意大利语 确认提示信息
****************************************************************************/
void updateDisplaySystemConfirm_Italian(void)
{
}
/***************************************************************************
 功能:捷克 确认提示信息
****************************************************************************/
void updateDisplaySystemConfirm_Czech(void)
{
}
/***************************************************************************
功能:荷兰 确认提示信息
****************************************************************************/
void updateDisplaySystemConfirm_Dutch(void)
{
}



/***************************************************************************
 功能:设置系统串口设置
****************************************************************************/
void updateDisplaySystemSerialSetData(KeyAction_TypeDef nowActionType,DisplayAction_TypeDef nowDisplayType,SERIALUSE_TypeDef enumSerialUse)
{    
    static uint8_t sU8SerialSetCounter = 0;
    static uint8_t sU8NumberCounter = 0;
    
    switch(nowActionType)//本次界面操作类型
    {
        case KEYACTION_ENTER://在串口设置界面下，Enter键按下，进入选择的设置界面
            { 
                if(gbEditFlag != STATUS_FALSE)
                {
                    setSystemSerialData(enumSerialUse,bMeterEnableFlag_modify);
                    
                    sprintf(tab_SerialAddress_edit,"%s",tab_SerialAddress_edit_modify);
                    sprintf(tab_SerialBaud_edit,"%s",tab_SerialBaud_edit_modify);
                    bMeterEnableFlag = bMeterEnableFlag_modify;
                    gCurrentMenu.stTip.eOccurTipAction = nowDisplayType;
                    gCurrentMenu.stTip.eTipType = TIP_PASSED;
                    gCurrentMenu.stTip.u8PromptTime = 20;
                    gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_PROMPT; 
                
                    sU8SerialSetCounter = 0;
                    sU8NumberCounter = 0;
                    gbEditFlag = STATUS_FALSE;
                    Display_Set_UnderLine_Blink_Position(STATUS_FALSE,0,0);
                    if(enumSerialUse == SERIAL_USE_PCS)
                    {
                        generateOperationRecord(RECORD_SET_Serial);
                    }
                    else
                    {
                        generateOperationRecord(RECORD_SET_GRID_METER);
                    }
                    
                }
            }
            break;
        case KEYACTION_ESC://在串口设置界面下，Esc键按下，进入上一级菜单
            {
                if(enumSerialUse == SERIAL_USE_PCS)
                {
                    gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_SET_SYSTEM;                            
                }
                else if(enumSerialUse == SERIAL_USE_Meter)
                {
                    gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_SET_GRID;
                }
                gbEditFlag = STATUS_FALSE;
                sU8SerialSetCounter = 0;
                sU8NumberCounter = 0;
                Display_Set_UnderLine_Blink_Position(STATUS_FALSE,0,0);
            }
            break;
        case KEYACTION_DOWN:  //在串口设置界面下，Up键按下，选择对应的设置项+1
            {
                sU8NumberCounter++;
                
                if(gbEditFlag != STATUS_TRUE) //进入编辑模式  
                {
                    sprintf(tab_SerialAddress_edit_modify,"%s",tab_SerialAddress_edit);
                    sprintf(tab_SerialBaud_edit_modify,"%s",tab_SerialBaud_edit);
                    bMeterEnableFlag_modify = bMeterEnableFlag;
                    gbEditFlag = STATUS_TRUE;
                }
                
                if(sU8SerialSetCounter == 0)  //电表使能
                {
                    if(sU8NumberCounter == 0)
                    {
                       bMeterEnableFlag_modify = STATUS_FALSE;
                    }
                    else if (sU8NumberCounter == 1)
                    {
                       bMeterEnableFlag_modify = STATUS_TRUE;
                    }
                    else
                    {
                       sU8NumberCounter = 0; 
                       bMeterEnableFlag_modify = STATUS_FALSE;
                    }
                }
                if(sU8SerialSetCounter == 1) //串口地址第一个数字
                {
                    if(sU8NumberCounter <= 2)
                    {
                       tab_SerialAddress_edit_modify[0] =  '0' + sU8NumberCounter;
                    }
                    else
                    {
                       sU8NumberCounter = 0;
                       tab_SerialAddress_edit_modify[0] = '0';
                    }
                }
                else if(sU8SerialSetCounter == 2) //串口地址第二个数字
                {
                    if(tab_SerialAddress_edit_modify[0] == '2')
                    {
                        if(sU8NumberCounter <= 5)
                        {
                            tab_SerialAddress_edit_modify[1] =  '0' + sU8NumberCounter;
                        }
                        else
                        {
                            sU8NumberCounter = 0;
                            tab_SerialAddress_edit_modify[1] = '0';
                        }
                    }
                    else
                    {
                        if(sU8NumberCounter <= 9)
                        {
                            tab_SerialAddress_edit_modify[1] =  '0' + sU8NumberCounter;
                        }
                        else
                        {
                            sU8NumberCounter = 0;
                            tab_SerialAddress_edit_modify[1] = '0';
                        }
                    }
                }
                else if(sU8SerialSetCounter == 3) //串口地址第三个数字
                {
                    if((tab_SerialAddress_edit_modify[0] == '2')&&(tab_SerialAddress_edit_modify[1] == '5'))
                    {
                        if(sU8NumberCounter <= 5)
                        {
                            tab_SerialAddress_edit_modify[2] =  '0' + sU8NumberCounter;
                        }
                        else
                        {
                            sU8NumberCounter = 0;
                            tab_SerialAddress_edit_modify[2] = '0';
                        }
                    }
                    else
                    {
                        if(sU8NumberCounter <= 9)
                        {
                            tab_SerialAddress_edit_modify[2] =  '0' + sU8NumberCounter;
                        }
                        else
                        {
                            sU8NumberCounter = 0;
                            tab_SerialAddress_edit_modify[2] = '0';
                        }
                    }
                }
                else if(sU8SerialSetCounter == 4) //串口地址第四个数字
                { 
                    uint8_t u8BaudIndex = sU8NumberCounter % DISPLAY_SET_SYSTEM_SERIAL_BAUD_ITEM_COUNT;
                    if(u8BaudIndex == BAUD_9600)
                    {
                        sprintf(tab_SerialBaud_edit_modify,"09600");  
                    }
                    else if(u8BaudIndex == BAUD_19200)
                    {
                       sprintf(tab_SerialBaud_edit_modify,"19200"); 
                    }
                    else if(u8BaudIndex == BAUD_38400)
                    {
                       sprintf(tab_SerialBaud_edit_modify,"38400"); 
                    }
                }
                
                gCurrentMenu.eCurrentDisplayMenuType = nowDisplayType;   
            }
            break;
        case KEYACTION_UP://在串口设置界面下，Up键按下，选择对应的设置项-1
            {
                sU8NumberCounter--;
                
                if(gbEditFlag != STATUS_TRUE) //进入编辑模式  
                {
                    sprintf(tab_SerialAddress_edit_modify,"%s",tab_SerialAddress_edit);
                    sprintf(tab_SerialBaud_edit_modify,"%s",tab_SerialBaud_edit);
                    bMeterEnableFlag_modify = bMeterEnableFlag;
                    gbEditFlag = STATUS_TRUE;
                }

                if(sU8SerialSetCounter == 0)  //电表使能
                {
                    if(sU8NumberCounter == 0)
                    {
                       bMeterEnableFlag_modify = STATUS_FALSE;
                    }
                    else if (sU8NumberCounter == 1)
                    {
                       bMeterEnableFlag_modify = STATUS_TRUE;
                    }
                    else
                    {
                       sU8NumberCounter = 1;
                       bMeterEnableFlag_modify = STATUS_TRUE;
                    }
                }
                if(sU8SerialSetCounter == 1)  //串口地址第一个数字
                {
                    if(!(sU8NumberCounter <= 2))
                    {
                       sU8NumberCounter = 2;
                       tab_SerialAddress_edit_modify[0] = '0';
                    }
                    tab_SerialAddress_edit_modify[0] =  '0' + sU8NumberCounter;
                } 
                else if(sU8SerialSetCounter == 2)//串口地址第二个数字
                {
                    if(tab_SerialAddress_edit_modify[0] == '2')
                    {
                        if(!(sU8NumberCounter <= 5))
                        {
                            sU8NumberCounter = 5;
                            tab_SerialAddress_edit_modify[1] = '0';
                        }
                    }
                    else
                    {
                        if(!(sU8NumberCounter <= 9))
                        {
                            sU8NumberCounter = 9;
                            tab_SerialAddress_edit_modify[1] = '0';
                        }
                    }
                    tab_SerialAddress_edit_modify[1] =  '0' + sU8NumberCounter;
                }
                else if(sU8SerialSetCounter == 3)//串口地址第三个数字
                {
                    if((tab_SerialAddress_edit_modify[0] == '2')&&(tab_SerialAddress_edit_modify[1] == '5'))
                    {
                        if(!(sU8NumberCounter <= 5))
                        {
                            sU8NumberCounter = 5;
                            tab_SerialAddress_edit_modify[2] = '0';
                        }
                    }
                    else
                    {
                        if(!(sU8NumberCounter <= 9))
                        {
                            sU8NumberCounter = 9;
                            tab_SerialAddress_edit_modify[2] = '0';
                        }
                    }
                    tab_SerialAddress_edit_modify[2] =  '0' + sU8NumberCounter;
                } 
                else if(sU8SerialSetCounter == 4)
                {
                    uint8_t u8BaudIndex = sU8NumberCounter % DISPLAY_SET_SYSTEM_SERIAL_BAUD_ITEM_COUNT;
                    if(u8BaudIndex == 0)
                    {
                        sprintf(tab_SerialBaud_edit_modify,"09600");  
                    }
                    else if(u8BaudIndex == 1)
                    {
                       sprintf(tab_SerialBaud_edit_modify,"19200"); 
                    }
                    else if(u8BaudIndex == 2)
                    {
                       sprintf(tab_SerialBaud_edit_modify,"38400"); 
                    }
                }
                
                gCurrentMenu.eCurrentDisplayMenuType = nowDisplayType; 
            }
            break;
        case KEYACTION_UPDOWN://在系统串口地址设置界面下，Enter键按下，切换设置数字
            { 
                sU8SerialSetCounter++;
                sU8NumberCounter = 0;
                if(sU8SerialSetCounter == DISPLAY_SET_SYSTEM_SERIAL_ITEM_COUNT)
                {
                    sU8SerialSetCounter = 0;
                }
                gCurrentMenu.eCurrentDisplayMenuType = nowDisplayType;
            }
        case KEYACTION_NULL://无操作刷新主界面数据
        default:
            {
                if(gbEditFlag == STATUS_FALSE)
                {
                    getSysteSerialData(enumSerialUse);
                    if(enumSerialUse == SERIAL_USE_PCS)
                    {
                        sprintf(tab_SerialAddress_edit,"%03d",gDisplay.stDisplaySet.stDspUsartParas.u8Address);
                        sprintf(tab_SerialBaud_edit,"%05d",gDisplay.stDisplaySet.stDspUsartParas.u16BaudRate);
                    }
                    else if(enumSerialUse == SERIAL_USE_Meter)
                    {
                        sprintf(tab_SerialAddress_edit,"%03d",gDisplay.stDisplaySet.stGrid.stMeterParars.u8Address);
                        sprintf(tab_SerialBaud_edit,"%05d",gDisplay.stDisplaySet.stGrid.stMeterParars.u16BaudRate);
                        bMeterEnableFlag = (bool_t)gDisplay.stDisplaySet.stGrid.u8MterEnableFlag;
                    }
                }
                gCurrentMenu.eCurrentDisplayMenuType = nowDisplayType;
            }
            break;
    }
    
    if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_ENGLISH)//在串口设置界面下Serial 英文界面组装 
    { 
        if(gbEditFlag == STATUS_TRUE)
        {
            if(sU8SerialSetCounter == 0)
            {
                if(sU8NumberCounter == 0)
                {
                    Display_Set_UnderLine_Blink_Position(STATUS_TRUE,arrayFixSerialFlicker[sU8SerialSetCounter].u8StartPos,arrayFixSerialFlicker[sU8SerialSetCounter].u8EndPos+1);
                }
                else
                {
            Display_Set_UnderLine_Blink_Position(STATUS_TRUE,arrayFixSerialFlicker[sU8SerialSetCounter].u8StartPos,arrayFixSerialFlicker[sU8SerialSetCounter].u8EndPos);
                }
            }
            else
            {
                Display_Set_UnderLine_Blink_Position(STATUS_TRUE,arrayFixSerialFlicker[sU8SerialSetCounter].u8StartPos,arrayFixSerialFlicker[sU8SerialSetCounter].u8EndPos);
            }
            updateDisplaySystemSerialSetData_English(bMeterEnableFlag_modify,tab_SerialAddress_edit_modify,tab_SerialBaud_edit_modify,enumSerialUse);
        }
        else 
        {
            updateDisplaySystemSerialSetData_English(bMeterEnableFlag,tab_SerialAddress_edit,tab_SerialBaud_edit,enumSerialUse);
        }
    }
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_CHINESE)//在串口设置界面下Serial 中文界面组装
    {
        //updateDisplaySystemSerialSetData_Chinese(bMeterEnableFlag,tab_SerialAddress_edit,tab_SerialBaud_edit,enumSerialUse);
        if(gbEditFlag == STATUS_TRUE)
        {
            if(sU8SerialSetCounter == 0)
            {
                if(sU8NumberCounter == 0)
                {
                    //Display_Set_UnderLine_Blink_Position(STATUS_TRUE,arrayFixSerialFlickerChinese[sU8SerialSetCounter].u8StartPos,arrayFixSerialFlickerChinese[sU8SerialSetCounter].u8EndPos+1);
                }
                else
                {
                //Display_Set_UnderLine_Blink_Position(STATUS_TRUE,arrayFixSerialFlickerChinese[sU8SerialSetCounter].u8StartPos,arrayFixSerialFlickerChinese[sU8SerialSetCounter].u8EndPos);
                }
            }
            else
            {
                //Display_Set_UnderLine_Blink_Position(STATUS_TRUE,arrayFixSerialFlickerChinese[sU8SerialSetCounter].u8StartPos,arrayFixSerialFlickerChinese[sU8SerialSetCounter].u8EndPos);
			}
            updateDisplaySystemSerialSetData_Chinese(bMeterEnableFlag_modify,tab_SerialAddress_edit_modify,tab_SerialBaud_edit_modify,enumSerialUse);
        }
        else 
        {
            updateDisplaySystemSerialSetData_Chinese(bMeterEnableFlag,tab_SerialAddress_edit,tab_SerialBaud_edit,enumSerialUse);
        }
    }
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_SPANISH)//在串口设置界面下Serial 西班牙界面组装 
    {
        updateDisplaySystemSerialSetData_Spanish(bMeterEnableFlag,tab_SerialAddress_edit,tab_SerialBaud_edit,enumSerialUse);  
    }   
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_GERMAN)//在串口设置界面下Serial 德语界面组装
    {
        updateDisplaySystemSerialSetData_German(bMeterEnableFlag,tab_SerialAddress_edit,tab_SerialBaud_edit,enumSerialUse);  
    }   
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_FRENCH)//在串口设置界面下Serial 法语界面组装 
    {
        updateDisplaySystemSerialSetData_French(bMeterEnableFlag,tab_SerialAddress_edit,tab_SerialBaud_edit,enumSerialUse);    
    } 
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_POLISH)//在串口设置界面下Serial 波兰界面组装
    {
        updateDisplaySystemSerialSetData_Polish(bMeterEnableFlag,tab_SerialAddress_edit,tab_SerialBaud_edit,enumSerialUse); 
    }  
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_ITALIAN)//在串口设置界面下Serial 意大利界面组装
    {
        updateDisplaySystemSerialSetData_Italian(bMeterEnableFlag,tab_SerialAddress_edit,tab_SerialBaud_edit,enumSerialUse);  
    } 
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_CZECH)//在串口设置界面下Serial 捷克界面组装 
    {
        updateDisplaySystemSerialSetData_Czech(bMeterEnableFlag,tab_SerialAddress_edit,tab_SerialBaud_edit,enumSerialUse);   
    }        
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_DUTCH)//在串口设置界面下Serial 荷兰界面组装 
    {
        updateDisplaySystemSerialSetData_Dutch(bMeterEnableFlag,tab_SerialAddress_edit,tab_SerialBaud_edit,enumSerialUse);   
    }
    else
    {  
        updateDisplaySystemSerialSetData_English(bMeterEnableFlag,tab_SerialAddress_edit,tab_SerialBaud_edit,enumSerialUse);        
    }
}

/***************************************************************************
 功能:设置系统串口设置英文界面信息
****************************************************************************/
void updateDisplaySystemSerialSetData_English(bool_t bEnableFlag,char*strAddress,char*strBaud,SERIALUSE_TypeDef enumSerialUse)
{
    memset(tab_display,0,DISPLAY_CACHE_SIZE);
    
    if(enumSerialUse == SERIAL_USE_PCS)
    {
        if(bEnableFlag == STATUS_FALSE)
        {
            sprintf(tab_display,"   PCS Serial Set    \nEnable:Disable       \nAddress:%s          \nBaud:%s           \n",strAddress,strBaud);
        }
        else
        {
            sprintf(tab_display,"   PCS Serial Set    \nEnable:enable        \nAddress:%s          \nBaud:%s           \n",strAddress,strBaud);
        }        
    }
    else if(enumSerialUse == SERIAL_USE_Meter)
    {
        if(bEnableFlag == STATUS_FALSE)
        {
            sprintf(tab_display,"  Meter Serial Set   \nEnable:Disable       \nAddress:%s          \nBaud:%s           \n",strAddress,strBaud);
        }
        else
        {
            sprintf(tab_display,"  Meter Serial Set   \nEnable:enable        \nAddress:%s          \nBaud:%s           \n",strAddress,strBaud);
        }
    }
    
    //GUI_DispStringAt((uint8_t*)tab_display, 0, 0); 
    GUI_Display(tab_display, 0, 0);
}

/***************************************************************************
 功能:设置系统串口设置西班牙语界面信息
****************************************************************************/
void updateDisplaySystemSerialSetData_Spanish(bool_t bEnableFlag,char*strAddress,char*strBaud, SERIALUSE_TypeDef enumSerialUse)
{
    
}

/***************************************************************************
 功能:设置系统串口设置德语界面信息
****************************************************************************/
void updateDisplaySystemSerialSetData_German(bool_t bEnableFlag,char*strAddress,char*strBaud, SERIALUSE_TypeDef enumSerialUse)
{
    
}

/***************************************************************************
 功能:设置系统串口设置法语界面信息
****************************************************************************/
void updateDisplaySystemSerialSetData_French(bool_t bEnableFlag,char*strAddress,char*strBaud, SERIALUSE_TypeDef enumSerialUse)
{
    
}

/***************************************************************************
 功能:设置系统串口设置波兰语界面信息
****************************************************************************/
void updateDisplaySystemSerialSetData_Polish(bool_t bEnableFlag,char*strAddress,char*strBaud, SERIALUSE_TypeDef enumSerialUse)
{
    
}

/***************************************************************************
 功能:设置系统串口设置意大利语界面信息
****************************************************************************/
void updateDisplaySystemSerialSetData_Italian(bool_t bEnableFlag,char*strAddress,char*strBaud, SERIALUSE_TypeDef enumSerialUse)
{
    
}

/***************************************************************************
 功能:设置系统串口设置捷克语界面信息
****************************************************************************/
void updateDisplaySystemSerialSetData_Czech(bool_t bEnableFlag,char*strAddress,char*strBaud, SERIALUSE_TypeDef enumSerialUse)
{
    
}

/***************************************************************************
 功能:设置系统串口设置荷兰语界面信息
****************************************************************************/
void updateDisplaySystemSerialSetData_Dutch(bool_t bEnableFlag,char*strAddress,char*strBaud, SERIALUSE_TypeDef enumSerialUse)
{
    
}

/***************************************************************************
功能:从Flash读串口信息
****************************************************************************/
void getSysteSerialData(SERIALUSE_TypeDef enumSerialType)
{
    if(enumSerialType == SERIAL_USE_Meter)
    {
        Flash_Device_GridInfo_Read(&gDisplay.stDisplaySet.stGrid,sizeof(Display_SET_Grid));
    }
    else if(enumSerialType == SERIAL_USE_PCS)
    {
    }
}

/***************************************************************************
功能:设置串口信息到Flash
****************************************************************************/
void setSystemSerialData(SERIALUSE_TypeDef enumSerialType, bool_t bEnableFlag)
{
    if(enumSerialType == SERIAL_USE_Meter)
    {
        Flash_Device_GridInfo_Read(&gDisplay.stDisplaySet.stGrid,sizeof(Display_SET_Grid));
        gDisplay.stDisplaySet.stGrid.stMeterParars.u8Address = atoi(tab_SerialAddress_edit_modify);
        gDisplay.stDisplaySet.stGrid.stMeterParars.u16BaudRate = atoi(tab_SerialBaud_edit_modify);
        gDisplay.stDisplaySet.stGrid.u8MterEnableFlag = bEnableFlag;
        Flash_Device_GridInfo_Write(&gDisplay.stDisplaySet.stGrid,sizeof(Display_SET_Grid));
    }
    else if(enumSerialType == SERIAL_USE_PCS)
    {
        gDisplay.stDisplaySet.stDspUsartParas.u8Address = atoi(tab_SerialAddress_edit_modify);
        gDisplay.stDisplaySet.stDspUsartParas.u16BaudRate = atoi(tab_SerialBaud_edit_modify);
    }
}


/***************************************************************************
功能:设置系统出场设置
****************************************************************************/
void updateDisplaySystemFactorySetData(void)
{
    //所有设置恢复默认值，动态数据清空
    
    /*清除结束提示*/
    gCurrentMenu.stTip.eOccurTipAction = DISPLAY_SET_SYSTEM;
    gCurrentMenu.stTip.eConfirmSource = CONFIRMSOURCE_FACTORY;
    //gCurrentMenu.stTip.eTipType = TIP_PASSED;
    gCurrentMenu.stTip.u8PromptTime = 60;
    gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_CONFIRM;
}
/***************************************************************************
功能:设置系统通信复位
****************************************************************************/
void updateDisplaySystemCommResetData(KeyAction_TypeDef nowActionType,DisplayAction_TypeDef nowDisplayType)
{
    static uint8_t sU8CommResetCounter = 0;
    switch(nowActionType)
    {
        case KEYACTION_ENTER://在通信复位设置界面下，Enter键按下，进入选择的设置界面
            {
                if(sU8CommResetCounter == RESET_BLT_Index)
                {
                    gCurrentMenu.stTip.eConfirmSource = CONFIRMSOURCE_BLUETOOTHRESET;
                    //蓝牙复位接口
                }
                else if(sU8CommResetCounter == RESET_WIFI_Index)
                {
                    gCurrentMenu.stTip.eConfirmSource = CONFIRMSOURCE_WIFIRESET;
                    //WIFI复位接口
                }
                else
                {
                    
                }
                
               gCurrentMenu.stTip.eOccurTipAction = nowDisplayType;
               //gCurrentMenu.stTip.eTipType = TIP_PASSED;
               gCurrentMenu.stTip.u8PromptTime = 60;
               gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_CONFIRM;
            }
            break;
        case KEYACTION_ESC://在通信复位设置界面下，Esc键按下，进入上一级菜单
            {
                gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_SET_SYSTEM;
            }
            break;
        case KEYACTION_DOWN://在通信复位设置界面下，Up键按下，选择对应的设置项+1
            {
                sU8CommResetCounter++;
                if(sU8CommResetCounter == DISPLAY_SET_SYSTEM_RESET_ITEM_COUNT)
                {
                    sU8CommResetCounter = 0;
                }
                gCurrentMenu.eCurrentDisplayMenuType = nowDisplayType;
            }
            break;
        case KEYACTION_UP://在通信复位设置界面下，Down键按下，选择对应的设置项-1
            {
                sU8CommResetCounter--;
                if(sU8CommResetCounter >= DISPLAY_SET_SYSTEM_RESET_ITEM_COUNT)
                {
                    sU8CommResetCounter = DISPLAY_SET_SYSTEM_RESET_ITEM_COUNT-1;
                }
                gCurrentMenu.eCurrentDisplayMenuType = nowDisplayType;
            }
            break;
        case KEYACTION_NULL://无操作刷新界面数据
        default:
            {
                gCurrentMenu.eCurrentDisplayMenuType = nowDisplayType;
            }
            break;
    }
    
    if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_ENGLISH)//在通信复位设置界面下Serial 英文界面组装 
    { 
        updateDisplaySystemCommResetData_English((Baud_TypeDef)sU8CommResetCounter);                    
    }         
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_CHINESE)//在通信复位设置界面下Serial 中文界面组装
    {
        updateDisplaySystemCommResetData_Chinese((Baud_TypeDef)sU8CommResetCounter);
    }
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_SPANISH)//在通信复位设置界面下Serial 西班牙界面组装 
    {
        updateDisplaySystemCommResetData_Spanish((Baud_TypeDef)sU8CommResetCounter);  
    }   
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_GERMAN)//在通信复位设置界面下Serial 德语界面组装
    {
        updateDisplaySystemCommResetData_German((Baud_TypeDef)sU8CommResetCounter);  
    }   
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_FRENCH)//在通信复位设置界面下Serial 法语界面组装 
    {
        updateDisplaySystemCommResetData_French((Baud_TypeDef)sU8CommResetCounter);    
    } 
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_POLISH)//在通信复位设置界面下Serial 波兰界面组装
    {
        updateDisplaySystemCommResetData_Polish((Baud_TypeDef)sU8CommResetCounter); 
    }  
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_ITALIAN)//在通信复位设置界面下Serial 意大利界面组装
    {
        updateDisplaySystemCommResetData_Italian((Baud_TypeDef)sU8CommResetCounter);  
    } 
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_CZECH)//在通信复位设置界面下Serial 捷克界面组装 
    {
        updateDisplaySystemCommResetData_Czech((Baud_TypeDef)sU8CommResetCounter);   
    }        
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_DUTCH)//在通信复位设置界面下Serial 荷兰界面组装 
    {
        updateDisplaySystemCommResetData_Dutch((Baud_TypeDef)sU8CommResetCounter);   
    }
    else
    {  
        updateDisplaySystemCommResetData_English((Baud_TypeDef)sU8CommResetCounter);        
    }    
    
}

/***************************************************************************
 功能:设置系统通信复位设置英文界面信息
****************************************************************************/
void updateDisplaySystemCommResetData_English(Baud_TypeDef u8SetIndex)   
{
    memset(tab_display,0,DISPLAY_CACHE_SIZE);
    
    if(u8SetIndex == RESET_BLT_Index)
    {
        sprintf(tab_display,"       Reset Set     \n->BluetoothReset     \nWIFIReset            \n                     \n");                                                                               
    }
    else if(u8SetIndex == RESET_WIFI_Index)
    {
        sprintf(tab_display,"       Reset Set     \nBluetoothReset       \n->WIFIReset          \n                     \n");                                                                                  
    }

    //GUI_DispStringAt((uint8_t*)tab_display, 0, 0); 
    GUI_Display(tab_display, 0, 0);
}

/***************************************************************************
 功能:设置系统通信复位设置西班牙语界面信息
****************************************************************************/
void updateDisplaySystemCommResetData_Spanish(Baud_TypeDef u8SetIndex)
{
    
}

/***************************************************************************
 功能:设置系统通信复位设置德语界面信息
****************************************************************************/
void updateDisplaySystemCommResetData_German(Baud_TypeDef u8SetIndex)
{
    
}

/***************************************************************************
 功能:设置系统通信复位设置法语界面信息
****************************************************************************/
void updateDisplaySystemCommResetData_French(Baud_TypeDef u8SetIndex)
{
    
}

/***************************************************************************
 功能:设置系统通信复位设置波兰语界面信息
****************************************************************************/
void updateDisplaySystemCommResetData_Polish(Baud_TypeDef u8SetIndex)
{
    
}

/***************************************************************************
 功能:设置系统通信复位设置意大利语界面信息
****************************************************************************/
void updateDisplaySystemCommResetData_Italian(Baud_TypeDef u8SetIndex)
{
    
}

/***************************************************************************
 功能:设置系统通信复位设置捷克语界面信息
****************************************************************************/
void updateDisplaySystemCommResetData_Czech(Baud_TypeDef u8SetIndex)
{
    
}

/***************************************************************************
 功能:设置系统通信复位设置荷兰语界面信息
****************************************************************************/
void updateDisplaySystemCommResetData_Dutch(Baud_TypeDef u8SetIndex)
{
    
}

/***************************************************************************
功能:设置系统远程控制使能
****************************************************************************/
void updateDisplaySystemRemoteControlData(KeyAction_TypeDef nowActionType,DisplayAction_TypeDef nowDisplayType)
{
    static uint8_t sU8RemoteControlCounter = 0;
    switch(nowActionType)
    {
        case KEYACTION_ENTER://在远程控制设置界面下，Enter键按下，进入选择的设置界面
            {
                if(sU8RemoteControlCounter == ENABLE_YES)
                {
                    gDisplay.stDisplaySet.u8RemoteControl = 1;
                    generateOperationRecord(RECORD_SET_Remote_Control);
                }
                else if(sU8RemoteControlCounter == ENABLE_NO)
                {
                    gDisplay.stDisplaySet.u8RemoteControl = 0;
                    generateOperationRecord(RECORD_SET_Local_Control);
                    
                }
                else
                {
            
                }
                
                gCurrentMenu.stTip.eOccurTipAction = DISPLAY_SET_SYSTEM;
                gCurrentMenu.stTip.eTipType = TIP_PASSED;
                gCurrentMenu.stTip.u8PromptTime = 20;
                gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_PROMPT;
                
                sU8RemoteControlCounter = 0;
            }
            break;
        case KEYACTION_ESC://在远程控制设置界面下，Esc键按下，进入上一级菜单
            {
                gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_SET_SYSTEM;
            }
            break;
        case KEYACTION_DOWN://在远程控制设置界面下，Up键按下，选择对应的设置项+1
            {
                sU8RemoteControlCounter++;
                if(sU8RemoteControlCounter == DISPLAY_SET_SYSTEM_ENABLE_ITEM_COUNT)
                {
                    sU8RemoteControlCounter = 0;
                }
                gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_SET_SYSTEM_REMOTECONTROL;
            }
            break;
        case KEYACTION_UP://在远程控制设置界面下，Down键按下，选择对应的设置项-1
            {
                sU8RemoteControlCounter--;
                if(sU8RemoteControlCounter >= DISPLAY_SET_SYSTEM_ENABLE_ITEM_COUNT)
                {
                    sU8RemoteControlCounter = DISPLAY_SET_SYSTEM_ENABLE_ITEM_COUNT-1;
                }
                gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_SET_SYSTEM_REMOTECONTROL;
            }
            break; 
        case KEYACTION_NULL://无操作刷新界面数据
        default:
            {      
                gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_SET_SYSTEM_REMOTECONTROL;
            }
            break;     
    }
    
    if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_ENGLISH)//在远程控制设置界面下Serial 英文界面组装 
    { 
        updateDisplaySystemRemoteControlData_English((ENABLE_TypeDef)sU8RemoteControlCounter);                    
    }         
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_CHINESE)//在远程控制设置界面下Serial 中文界面组装
    {
       updateDisplaySystemRemoteControlData_Chinese((ENABLE_TypeDef)sU8RemoteControlCounter);
    }
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_SPANISH)//在远程控制设置界面下Serial 西班牙界面组装 
    {
        updateDisplaySystemRemoteControlData_Spanish((ENABLE_TypeDef)sU8RemoteControlCounter);  
    }   
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_GERMAN)//在远程控制设置界面下Serial 德语界面组装
    {
        updateDisplaySystemRemoteControlData_German((ENABLE_TypeDef)sU8RemoteControlCounter);  
    }   
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_FRENCH)//在远程控制设置界面下Serial 法语界面组装 
    {
        updateDisplaySystemRemoteControlData_French((ENABLE_TypeDef)sU8RemoteControlCounter);    
    } 
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_POLISH)//在远程控制设置界面下Serial 波兰界面组装
    {
        updateDisplaySystemRemoteControlData_Polish((ENABLE_TypeDef)sU8RemoteControlCounter); 
    }  
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_ITALIAN)//在远程控制设置界面下Serial 意大利界面组装
    {
        updateDisplaySystemRemoteControlData_Italian((ENABLE_TypeDef)sU8RemoteControlCounter);  
    } 
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_CZECH)//在远程控制设置界面下Serial 捷克界面组装 
    {
        updateDisplaySystemRemoteControlData_Czech((ENABLE_TypeDef)sU8RemoteControlCounter);   
    }        
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_DUTCH)//在远程控制设置界面下Serial 荷兰界面组装 
    {
        updateDisplaySystemRemoteControlData_Dutch((ENABLE_TypeDef)sU8RemoteControlCounter);   
    }
    else
    {  
        updateDisplaySystemRemoteControlData_English((ENABLE_TypeDef)sU8RemoteControlCounter);        
    }  
}

/***************************************************************************
 功能:设置系统远程控制使能设置英文界面信息
****************************************************************************/
void updateDisplaySystemRemoteControlData_English(ENABLE_TypeDef u8SetIndex)   
{
    memset(tab_display,0,DISPLAY_CACHE_SIZE);
    
    if(u8SetIndex == ENABLE_NO)
    {
        sprintf(tab_display,"  Remote Control Set \n->Local Control      \nRemote Control       \n                     \n");                                                                               
    }
    else if(u8SetIndex == ENABLE_YES)
    {
        sprintf(tab_display,"  Remote Control Set \nLocal Control        \n->Remote Control     \n                     \n");                                                                                  
    }

    //GUI_DispStringAt((uint8_t*)tab_display, 0, 0); 
    GUI_Display(tab_display, 0, 0);
}

/***************************************************************************
 功能:设置系统远程控制使能设置西班牙语界面信息
****************************************************************************/
void updateDisplaySystemRemoteControlData_Spanish(ENABLE_TypeDef u8SetIndex)
{
    
}

/***************************************************************************
 功能:设置系统远程控制使能设置德语界面信息
****************************************************************************/
void updateDisplaySystemRemoteControlData_German(ENABLE_TypeDef u8SetIndex)
{
    
}

/***************************************************************************
 功能:设置系统远程控制使能设置法语界面信息
****************************************************************************/
void updateDisplaySystemRemoteControlData_French(ENABLE_TypeDef u8SetIndex)
{
    
}

/***************************************************************************
 功能:设置系统远程控制使能设置波兰语界面信息
****************************************************************************/
void updateDisplaySystemRemoteControlData_Polish(ENABLE_TypeDef u8SetIndex)
{
    
}

/***************************************************************************
 功能:设置系统远程控制使能设置意大利语界面信息
****************************************************************************/
void updateDisplaySystemRemoteControlData_Italian(ENABLE_TypeDef u8SetIndex)
{
    
}

/***************************************************************************
 功能:设置系统远程控制使能设置捷克语界面信息
****************************************************************************/
void updateDisplaySystemRemoteControlData_Czech(ENABLE_TypeDef u8SetIndex)
{
    
}

/***************************************************************************
 功能:设置系统远程控制使能设置荷兰语界面信息
****************************************************************************/
void updateDisplaySystemRemoteControlData_Dutch(ENABLE_TypeDef u8SetIndex)
{
    
}

/***************************************************************************
 功能:根据上一次界面操作类型和本次操作类型判断本次系统策略设置 StrategySET界面切换
****************************************************************************/
void updateDisplaySystemStrategySetData(KeyAction_TypeDef nowActionType,DisplayAction_TypeDef nowDisplayType)  
{
    static uint8_t sU8StrategyCounter = 0;  
    
    switch(nowActionType) 
    {
        case KEYACTION_ENTER://在系统策略设置界面下，Enter键按下，进入选择对应的设置项
            {
                if(gbEditFlag != STATUS_FALSE)
                {
                    if(gU8StrategyCounter_modify == STRATEGY_NULL)
                    {
                        gCurrentMenu.eCurrentDisplayMenuType = nowDisplayType; 
                        gDisplay.stDisplaySet.stStrategy.u8StrategyType = STRATEGY_NULL;
                    }
                    else if(gU8StrategyCounter_modify == STRATEGY_SELF)
                    {
                        gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_SET_SYSTEM_STRATEGY_SELFUSE;
                        gDisplay.stDisplaySet.stStrategy.u8StrategyType = STRATEGY_SELF;                    
                    }
                    else if(gU8StrategyCounter_modify == STRATEGY_TPFV) 
                    {
                        gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_SET_SYSTEM_STRATEGY_TPFV;
                        gDisplay.stDisplaySet.stStrategy.u8StrategyType = STRATEGY_TPFV;
                    } 
                    else if(gU8StrategyCounter_modify == STRATEGY_REGULAR)
                    {
                        gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_SET_SYSTEM_STRATEGY_REGULAR; 
                        gDisplay.stDisplaySet.stStrategy.u8StrategyType = STRATEGY_REGULAR;
                    }
                    else if(gU8StrategyCounter_modify == STRATEGY_BACKUP)
                    {
                        gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_SET_SYSTEM_STRATEGY_BACKUP; 
                        gDisplay.stDisplaySet.stStrategy.u8StrategyType = STRATEGY_BACKUP; 
                    }
                    else if(gU8StrategyCounter_modify == STRATEGY_GEN)
                    {
                        gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_SET_SYSTEM_STRATEGY_GEN; 
                        gDisplay.stDisplaySet.stStrategy.u8StrategyType = STRATEGY_GEN;
                    }
                    else
                    {
                        gCurrentMenu.eCurrentDisplayMenuType = nowDisplayType;  
                    } 
                    gbEditFlag = STATUS_FALSE;
                    sU8StrategyCounter = gU8StrategyCounter_modify;
                    gU8StrategyCounter_modify = 0;
                    sU8StrategyCounter = 0;
                    Flash_Device_StrategyData_Write(&gDisplay.stDisplaySet.stStrategy, sizeof(Display_SET_System_Strategy));
                }
                else
                {
                    if(sU8StrategyCounter == STRATEGY_NULL)
                    {
                        gCurrentMenu.eCurrentDisplayMenuType = nowDisplayType; 
                        gDisplay.stDisplaySet.stStrategy.u8StrategyType = STRATEGY_NULL;
                    }
                    else if(sU8StrategyCounter == STRATEGY_SELF)
                    {
                        gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_SET_SYSTEM_STRATEGY_SELFUSE;
                        gDisplay.stDisplaySet.stStrategy.u8StrategyType = STRATEGY_SELF;
                    }
                    else if(sU8StrategyCounter == STRATEGY_TPFV) 
                    {
                        gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_SET_SYSTEM_STRATEGY_TPFV;
                        gDisplay.stDisplaySet.stStrategy.u8StrategyType = STRATEGY_TPFV;
                    } 
                    else if(sU8StrategyCounter == STRATEGY_REGULAR)
                    {
                        gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_SET_SYSTEM_STRATEGY_REGULAR; 
                        gDisplay.stDisplaySet.stStrategy.u8StrategyType = STRATEGY_REGULAR;
                    }
                    else if(sU8StrategyCounter == STRATEGY_BACKUP)
                    {
                        gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_SET_SYSTEM_STRATEGY_BACKUP; 
                        gDisplay.stDisplaySet.stStrategy.u8StrategyType = STRATEGY_BACKUP; 
                    }
                    else if(sU8StrategyCounter == STRATEGY_GEN)
                    {
                        gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_SET_SYSTEM_STRATEGY_GEN; 
                        gDisplay.stDisplaySet.stStrategy.u8StrategyType = STRATEGY_GEN;
                    }
                    else
                    {
                        gCurrentMenu.eCurrentDisplayMenuType = nowDisplayType;  
                    }
                }
            }
            break;
        case KEYACTION_DOWN://在系统策略设置界面下，UP键按下，选择对应的设置项+1
            {
                if(gbEditFlag != STATUS_TRUE) //进入编辑模式  
                {
                    gbEditFlag = STATUS_TRUE;
                    gU8StrategyCounter_modify = sU8StrategyCounter;
                }
                
                gU8StrategyCounter_modify++;
                if(gU8StrategyCounter_modify == DISPLAY_SET_SYSTEM_STRATEGY_CLASS_COUNT)
                {
                    gU8StrategyCounter_modify = 0;  
                }
                gCurrentMenu.eCurrentDisplayMenuType = nowDisplayType;
            }
            break;
        case KEYACTION_UP://在系统策略设置界面下，UP键按下，选择对应的设置项+1
            {
                if(gbEditFlag != STATUS_TRUE) //进入编辑模式  
                {
                    gbEditFlag = STATUS_TRUE;
                    gU8StrategyCounter_modify = sU8StrategyCounter;
                }
                
                gU8StrategyCounter_modify--;
                if(gU8StrategyCounter_modify >= DISPLAY_SET_SYSTEM_STRATEGY_CLASS_COUNT)
                {
                    gU8StrategyCounter_modify = DISPLAY_SET_SYSTEM_STRATEGY_CLASS_COUNT - 1;  
                }  
                gCurrentMenu.eCurrentDisplayMenuType = nowDisplayType;                
            }
            break;
        case KEYACTION_ESC://
            { 
                gbEditFlag = STATUS_FALSE;
                gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_SET_SYSTEM; 
                gU8StrategyCounter_modify = 0;
                sU8StrategyCounter = 0;                
            }
            break;
        case KEYACTION_NULL://无操作刷新主界面数据
        default:
            {
                if(gbEditFlag == STATUS_FALSE)
                {
                    sU8StrategyCounter = gDisplay.stDisplaySet.stStrategy.u8StrategyType;
                }
                gCurrentMenu.eCurrentDisplayMenuType = nowDisplayType;
            }
            break;
    }
    
    if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_ENGLISH) //在系统策略设置界面下 英文界面组装
    {       
        if(gbEditFlag == STATUS_TRUE)
        {
            updateDisplaySystemStrategySetData_English((STRATEGY_TypeDef)gU8StrategyCounter_modify);
        }
        else
        {
            updateDisplaySystemStrategySetData_English((STRATEGY_TypeDef)sU8StrategyCounter);            
        }         
    }
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_CHINESE)//在系统策略设置界面下 中文界面组装
    {
        //updateDisplaySystemStrategySetData_Chinese((STRATEGY_TypeDef)sU8StrategyCounter);
        if(gbEditFlag == STATUS_TRUE)
        {
            updateDisplaySystemStrategySetData_Chinese((STRATEGY_TypeDef)gU8StrategyCounter_modify);
        }
        else
        {
            updateDisplaySystemStrategySetData_Chinese((STRATEGY_TypeDef)sU8StrategyCounter);
        } 
    }    
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_SPANISH)//在系统策略设置界面下 西班牙界面组装
    { 
        updateDisplaySystemStrategySetData_Spanish((STRATEGY_TypeDef)sU8StrategyCounter);
    } 
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_GERMAN)//在系统策略设置界面下 德语界面组装
    { 
        updateDisplaySystemStrategySetData_German((STRATEGY_TypeDef)sU8StrategyCounter);
    } 
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_FRENCH)//在系统策略设置界面下 法语界面组装
    { 
        updateDisplaySystemStrategySetData_French((STRATEGY_TypeDef)sU8StrategyCounter);                     
    }   
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_POLISH)//在系统策略设置界面下 波兰界面组装
    {
        updateDisplaySystemStrategySetData_Polish((STRATEGY_TypeDef)sU8StrategyCounter);
    }    
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_ITALIAN)//在系统策略设置界面下 意大利界面组装
    {
        updateDisplaySystemStrategySetData_Italian((STRATEGY_TypeDef)sU8StrategyCounter);                   
    } 
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_CZECH)//在系统策略设置界面下 捷克界面组装
    { 
        updateDisplaySystemStrategySetData_Czech((STRATEGY_TypeDef)sU8StrategyCounter);                  
    }   
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_DUTCH)//在系统策略设置界面下 荷兰界面组装
    { 
        updateDisplaySystemStrategySetData_Dutch((STRATEGY_TypeDef)sU8StrategyCounter);                 
    }
    else
    {   
        updateDisplaySystemStrategySetData_English((STRATEGY_TypeDef)sU8StrategyCounter);                    
    }  
}

/***************************************************************************
 功能:策略设置英文界面信息
****************************************************************************/
void updateDisplaySystemStrategySetData_English(STRATEGY_TypeDef u8StrategyIndex)   
{
    memset(tab_display,0,DISPLAY_CACHE_SIZE);
    
    if(u8StrategyIndex == STRATEGY_NULL)
    {
        sprintf(tab_display,"     Strategy Set    \n->NULL               \nSELF                 \nTPFV                 \n");                                                                                  
    }
    else if(u8StrategyIndex == STRATEGY_SELF)
    {
        sprintf(tab_display,"     Strategy Set    \nNULL                 \n->SELF               \nTPFV                 \n");                                                                                  
    }
    else if(u8StrategyIndex == STRATEGY_TPFV)
    {
        sprintf(tab_display,"     Strategy Set    \nNULL                 \nSELF                 \n->TPFV               \n");                                                                               
    }
    else if(u8StrategyIndex == STRATEGY_REGULAR)
    {
        sprintf(tab_display,"     Strategy Set    \n->REGULAR            \nBACKUP               \nGEN                  \n");                                                                                  
    }
    else if(u8StrategyIndex == STRATEGY_BACKUP)
    {
        sprintf(tab_display,"     Strategy Set    \nREGULAR              \n->BACKUP             \nGEN                  \n");                                                                                  
    }
    else if(u8StrategyIndex == STRATEGY_GEN)
    {
        sprintf(tab_display,"     Strategy Set    \nREGULAR              \nBACKUP               \n->GEN                \n");                                                                                  
    }

    //GUI_DispStringAt((uint8_t*)tab_display, 0, 0); 
    GUI_Display(tab_display, 0, 0);
}

/***************************************************************************
 功能:策略设置西班牙语界面信息
****************************************************************************/
void updateDisplaySystemStrategySetData_Spanish(STRATEGY_TypeDef u8StrategyIndex)
{
    
}

/***************************************************************************
 功能:策略设置德语界面信息
****************************************************************************/
void updateDisplaySystemStrategySetData_German(STRATEGY_TypeDef u8StrategyIndex)
{
    
}

/***************************************************************************
 功能:策略设置法语界面信息
****************************************************************************/
void updateDisplaySystemStrategySetData_French(STRATEGY_TypeDef u8StrategyIndex)
{
    
}

/***************************************************************************
 功能:策略设置波兰语界面信息
****************************************************************************/
void updateDisplaySystemStrategySetData_Polish(STRATEGY_TypeDef u8StrategyIndex)
{
    
}

/***************************************************************************
 功能:策略设置意大利语界面信息
****************************************************************************/
void updateDisplaySystemStrategySetData_Italian(STRATEGY_TypeDef u8StrategyIndex)
{
    
}

/***************************************************************************
 功能:策略设置捷克语界面信息
****************************************************************************/
void updateDisplaySystemStrategySetData_Czech(STRATEGY_TypeDef u8StrategyIndex)
{
    
}

/***************************************************************************
 功能:策略设置荷兰语界面信息
****************************************************************************/
void updateDisplaySystemStrategySetData_Dutch(STRATEGY_TypeDef u8StrategyIndex)
{
    
}

/***************************************************************************
 功能:根据上一次界面操作类型和本次操作类型判断本次系统TPFV策略 SET界面切换
****************************************************************************/
void updateDisplaySystemTPFVStrategyAbstractSetData(KeyAction_TypeDef nowActionType,DisplayAction_TypeDef nowDisplayType) 
{
    static uint8_t sU8TPFVStrategyCounter = 1;
    switch(nowActionType) 
    {
        case KEYACTION_ENTER://在系统TPFV策略设置界面下，Enter键按下，进入选择对应的设置项
            {
                if(sU8TPFVStrategyCounter == TPFV_TIP) 
                {
                    gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_SET_SYSTEM_STRATEGY_TPFV_TIP;
                } 
                else if(sU8TPFVStrategyCounter == TPFV_PEAK)
                {
                    gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_SET_SYSTEM_STRATEGY_TPFV_PEAK;
                }
                else if(sU8TPFVStrategyCounter == TPFV_FLAT)
                {
                    gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_SET_SYSTEM_STRATEGY_TPFV_FLAT;                                                              
                }
                else if(sU8TPFVStrategyCounter == TPFV_VALLEY)
                {
                    gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_SET_SYSTEM_STRATEGY_TPFV_VALLEY; 
                }
            }
            break;
        case KEYACTION_ESC://在系统TPFV策略设置界面下，ESC键按下，返回上一级系统策略界面
            {
                gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_SET_SYSTEM_STRATEGY;                
            }
            break;
        case KEYACTION_DOWN://在系统TPFV策略设置界面下，UP键按下，选择对应的设置项+1
            {
                sU8TPFVStrategyCounter++;
                if(sU8TPFVStrategyCounter == DISPLAY_SET_SYSTEM_STRATEGY_TPFV_CLASS_COUNT)
                {
                    sU8TPFVStrategyCounter = 1;
                } 
                gCurrentMenu.eCurrentDisplayMenuType = nowDisplayType;                
            }
            break;
        case KEYACTION_UP://在系统TPFV策略设置界面下，DOWN键按下，选择对应的设置项-1
            {
                if(sU8TPFVStrategyCounter == TPFV_PEAK)
                {
                sU8TPFVStrategyCounter--;
                    sU8TPFVStrategyCounter--;
                }
                else
                {
                    sU8TPFVStrategyCounter--;
                }
                if(sU8TPFVStrategyCounter >= DISPLAY_SET_SYSTEM_STRATEGY_TPFV_CLASS_COUNT)
                {
                    sU8TPFVStrategyCounter = DISPLAY_SET_SYSTEM_STRATEGY_TPFV_CLASS_COUNT - 1;  
                } 
                gCurrentMenu.eCurrentDisplayMenuType = nowDisplayType;                 
            }
            break;
        case KEYACTION_NULL://无操作刷新主界面数据
        default:
            {
                gCurrentMenu.eCurrentDisplayMenuType = nowDisplayType;
            }
            break;
    }
    
    if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_ENGLISH) //系统TPFV策略设置 英文界面组装
    { 
        updateDisplaySystemTPFVStrategyAbstractSetData_English((TPFV_TypeDef)sU8TPFVStrategyCounter);                    
    }
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_CHINESE)//系统TPFV策略设置 中文界面组装
    {
        updateDisplaySystemTPFVStrategyAbstractSetData_Chinese((TPFV_TypeDef)sU8TPFVStrategyCounter);
    }    
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_SPANISH)//系统TPFV策略设置 西班牙界面组装
    { 
        updateDisplaySystemTPFVStrategyAbstractSetData_Spanish((TPFV_TypeDef)sU8TPFVStrategyCounter);
    } 
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_GERMAN)//系统TPFV策略设置 德语界面组装
    { 
        updateDisplaySystemTPFVStrategyAbstractSetData_German((TPFV_TypeDef)sU8TPFVStrategyCounter);
    } 
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_FRENCH)//系统TPFV策略设置 法语界面组装
    { 
        updateDisplaySystemTPFVStrategyAbstractSetData_French((TPFV_TypeDef)sU8TPFVStrategyCounter);                     
    }   
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_POLISH)//系统TPFV策略设置 波兰界面组装
    {
        updateDisplaySystemTPFVStrategyAbstractSetData_Polish((TPFV_TypeDef)sU8TPFVStrategyCounter);
    }    
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_ITALIAN)//系统TPFV策略设置 意大利界面组装
    {
        updateDisplaySystemTPFVStrategyAbstractSetData_Italian((TPFV_TypeDef)sU8TPFVStrategyCounter);                   
    } 
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_CZECH)//系统TPFV策略设置 捷克界面组装
    { 
        updateDisplaySystemTPFVStrategyAbstractSetData_Czech((TPFV_TypeDef)sU8TPFVStrategyCounter);                  
    }   
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_DUTCH)//系统TPFV策略设置 荷兰界面组装
    { 
        updateDisplaySystemTPFVStrategyAbstractSetData_Dutch((TPFV_TypeDef)sU8TPFVStrategyCounter);                 
    }
    else
    {   
        updateDisplaySystemTPFVStrategyAbstractSetData_English((TPFV_TypeDef)sU8TPFVStrategyCounter);                    
    }    
}    

/***************************************************************************
功能:电网电价设置 英文界面信息
****************************************************************************/
void updateDisplaySystemTPFVStrategyAbstractSetData_English(TPFV_TypeDef u8TPFVStrategyIndex)    
{
    memset(tab_display,0,DISPLAY_CACHE_SIZE);
    /*
    if(u8TPFVStrategyIndex == TPFV_TIP)
    {
        sprintf(tab_display,"    TPFV Strategy    \n->Tip                \nPeak                 \nFlat                 \n"); 
    }
    else if(u8TPFVStrategyIndex == TPFV_PEAK)
    {
        sprintf(tab_display,"    TPFV Strategy    \nTip                  \n->Peak               \nFlat                 \n");   
    }
    else if(u8TPFVStrategyIndex == TPFV_FLAT)
    {
        sprintf(tab_display,"    TPFV Strategy    \nTip                  \nPeak                 \n->Flat               \n");  
    }
    else if(u8TPFVStrategyIndex == TPFV_VALLEY)
    {
        sprintf(tab_display,"    TPFV Strategy    \n->Valley             \n                     \n                     \n");  
    }
    */
    
    if(u8TPFVStrategyIndex == TPFV_PEAK)
    {
        sprintf(tab_display,"    TPFV Strategy    \n->Peak               \nFlat                 \nValley               \n");
    }
    else if(u8TPFVStrategyIndex == TPFV_FLAT)
    {
        sprintf(tab_display,"    TPFV Strategy    \nPeak                 \n->Flat               \nValley               \n");
    }
    else if(u8TPFVStrategyIndex == TPFV_VALLEY)
    {
        sprintf(tab_display,"    TPFV Strategy    \nPeak                 \nFlat                 \n->Valley             \n");
    }
    
    //GUI_DispStringAt((uint8_t*)tab_display, 0, 0); 
    GUI_Display(tab_display, 0, 0);
}


/***************************************************************************
 功能:系统策略TPFV 西班牙界面信息
****************************************************************************/
void updateDisplaySystemTPFVStrategyAbstractSetData_Spanish(TPFV_TypeDef u8TPFVStrategyIndex)
{
    
}

/***************************************************************************
 功能:系统策略TPFV 德语界面信息
****************************************************************************/
void updateDisplaySystemTPFVStrategyAbstractSetData_German(TPFV_TypeDef u8TPFVStrategyIndex)
{
    
}

/***************************************************************************
 功能:系统策略TPFV 法语界面信息
****************************************************************************/
void updateDisplaySystemTPFVStrategyAbstractSetData_French(TPFV_TypeDef u8TPFVStrategyIndex)
{
    
}

/***************************************************************************
 功能:系统策略TPFV 波兰语界面信息
****************************************************************************/
void updateDisplaySystemTPFVStrategyAbstractSetData_Polish(TPFV_TypeDef u8TPFVStrategyIndex)
{
    
}

/***************************************************************************
 功能:系统策略TPFV 意大利语界面信息
****************************************************************************/
void updateDisplaySystemTPFVStrategyAbstractSetData_Italian(TPFV_TypeDef u8TPFVStrategyIndex)
{
    
}

/***************************************************************************
 功能:系统策略TPFV 捷克语界面信息
****************************************************************************/
void updateDisplaySystemTPFVStrategyAbstractSetData_Czech(TPFV_TypeDef u8TPFVStrategyIndex)
{
    
}

/***************************************************************************
 功能:系统策略TPFV 荷兰语界面信息
****************************************************************************/
void updateDisplaySystemTPFVStrategyAbstractSetData_Dutch(TPFV_TypeDef u8TPFVStrategyIndex)
{
    
}


/***************************************************************************
 功能:根据上一次界面操作类型和本次操作类型判断本次电价设置尖峰平谷分时 SET界面切换
****************************************************************************/
void updateDisplaySystemTPFVStrategySetData(KeyAction_TypeDef nowActionType,DisplayAction_TypeDef nowDisplayType,TPFV_TypeDef enum_tpfv)
{
    static uint8_t sU8TPFVSetCounter = 0;
    
    switch(nowActionType) 
    { 
        case KEYACTION_ENTER:
            {
                if(enum_tpfv == TPFV_TIP)
                {
                    if(sU8TPFVSetCounter == STRATEGY_TPFV_PERIOD_ONE)
                    {
                        gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_SET_SYSTEM_STRATEGY_TPFV_TIP_PERIOD_ONE;
                    }  
                    else if(sU8TPFVSetCounter == STRATEGY_TPFV_PERIOD_TWO)
                    {
                        gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_SET_SYSTEM_STRATEGY_TPFV_TIP_PERIOD_TWO;
                    } 
                    else if(sU8TPFVSetCounter == STRATEGY_TPFV_PERIOD_THREE)
                    {
                        gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_SET_SYSTEM_STRATEGY_TPFV_TIP_PERIOD_THREE;
                    } 
                }
                else if(enum_tpfv == TPFV_PEAK) 
                {
                    if(sU8TPFVSetCounter == STRATEGY_TPFV_PERIOD_ONE)
                    {
                        gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_SET_SYSTEM_STRATEGY_TPFV_PEAK_PERIOD_ONE;
                    }  
                    else if(sU8TPFVSetCounter == STRATEGY_TPFV_PERIOD_TWO)
                    {
                        gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_SET_SYSTEM_STRATEGY_TPFV_PEAK_PERIOD_TWO;
                    } 
                    else if(sU8TPFVSetCounter == STRATEGY_TPFV_PERIOD_THREE)
                    {
                        gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_SET_SYSTEM_STRATEGY_TPFV_PEAK_PERIOD_THREE;
                    }                    
                } 
                else if(enum_tpfv == TPFV_FLAT) 
                {
                    if(sU8TPFVSetCounter == STRATEGY_TPFV_PERIOD_ONE)
                    {
                        gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_SET_SYSTEM_STRATEGY_TPFV_FLAT_PERIOD_ONE;
                    }  
                    else if(sU8TPFVSetCounter == STRATEGY_TPFV_PERIOD_TWO)
                    {
                        gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_SET_SYSTEM_STRATEGY_TPFV_FLAT_PERIOD_TWO;
                    } 
                    else if(sU8TPFVSetCounter == STRATEGY_TPFV_PERIOD_THREE)
                    {
                        gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_SET_SYSTEM_STRATEGY_TPFV_FLAT_PERIOD_THREE;
                    }                    
                }
                else if(enum_tpfv == TPFV_VALLEY) 
                {
                    if(sU8TPFVSetCounter == STRATEGY_TPFV_PERIOD_ONE)
                    {
                        gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_SET_SYSTEM_STRATEGY_TPFV_VALLEY_PERIOD_ONE;
                    }  
                    else if(sU8TPFVSetCounter == STRATEGY_TPFV_PERIOD_TWO)
                    {
                        gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_SET_SYSTEM_STRATEGY_TPFV_VALLEY_PERIOD_TWO;
                    } 
                    else if(sU8TPFVSetCounter == STRATEGY_TPFV_PERIOD_THREE)
                    {
                        gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_SET_SYSTEM_STRATEGY_TPFV_VALLEY_PERIOD_THREE;
                    }                    
                }  
            }
            break;
        case KEYACTION_DOWN:
            {
                sU8TPFVSetCounter++;
                if(sU8TPFVSetCounter == DISPLAY_SET_SYSTEM_STRATEGY_TPFV_PERIOD_COUNT)
                {
                    sU8TPFVSetCounter = 0;  
                }
                gCurrentMenu.eCurrentDisplayMenuType = nowDisplayType;   
            }
            break;
        case KEYACTION_UP:
            {
                sU8TPFVSetCounter--;
                if(sU8TPFVSetCounter >= DISPLAY_SET_SYSTEM_STRATEGY_TPFV_PERIOD_COUNT)
                {
                    sU8TPFVSetCounter = DISPLAY_SET_SYSTEM_STRATEGY_TPFV_PERIOD_COUNT - 1;  
                }
                gCurrentMenu.eCurrentDisplayMenuType = nowDisplayType; 
            }
            break;
        case KEYACTION_ESC:
            { 
                gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_SET_SYSTEM_STRATEGY_TPFV;                  
            }
            break;
        case KEYACTION_NULL:
        default:
            {
                gCurrentMenu.eCurrentDisplayMenuType = nowDisplayType; 
            }
            break;
    }
    
    if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_ENGLISH) //系统时间设置界面TimeSystemSet 英文界面组装
    { 
        updateDisplaySystemTPFVStrategySetData_English(sU8TPFVSetCounter,enum_tpfv);                
    }
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_CHINESE) //系统时间设置界面TimeSystemSet 中文界面组装
    {
        updateDisplaySystemTPFVStrategySetData_Chinese(sU8TPFVSetCounter,enum_tpfv); 
    }
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_SPANISH)//系统时间设置界面TimeSystemSet 西班牙界面组装
    { 
        updateDisplaySystemTPFVStrategySetData_Spanish(sU8TPFVSetCounter,enum_tpfv); 
    }
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_GERMAN)//系统时间设置界面TimeSystemSet 德语界面组装
    { 
        updateDisplaySystemTPFVStrategySetData_German(sU8TPFVSetCounter,enum_tpfv);
    }
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_FRENCH) //系统时间设置界面TimeSystemSet 法语界面组装
    {
        updateDisplaySystemTPFVStrategySetData_French(sU8TPFVSetCounter,enum_tpfv);                    
    }
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_POLISH)//系统时间设置界面TimeSystemSet 波兰界面组装 
    {
        updateDisplaySystemTPFVStrategySetData_Polish(sU8TPFVSetCounter,enum_tpfv);
    }
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_ITALIAN)//系统时间设置界面TimeSystemSet 意大利界面组装
    {
        updateDisplaySystemTPFVStrategySetData_Italian(sU8TPFVSetCounter,enum_tpfv);                    
    }
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_CZECH)//系统时间设置界面TimeSystemSet 捷克界面组装
    { 
        updateDisplaySystemTPFVStrategySetData_Czech(sU8TPFVSetCounter,enum_tpfv);                    
    }
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_DUTCH)//系统时间设置界面TimeSystemSet 荷兰界面组装
    {
        updateDisplaySystemTPFVStrategySetData_Dutch(sU8TPFVSetCounter,enum_tpfv);                    
    }
    else
    { 
        updateDisplaySystemTPFVStrategySetData_English(sU8TPFVSetCounter,enum_tpfv);        
    }      
}


/***************************************************************************
功能:电网尖峰平谷分时设置 英文界面信息
****************************************************************************/
void updateDisplaySystemTPFVStrategySetData_English(uint8_t sU8TPFVSetCounter,TPFV_TypeDef enum_tpfv)    
{
    memset(tab_display,0,DISPLAY_CACHE_SIZE);
    
    if(enum_tpfv == TPFV_TIP)
    {
        if(sU8TPFVSetCounter == STRATEGY_TPFV_PERIOD_ONE)
        {
            sprintf(tab_display,"      Tip Perid      \n->Perid 1            \nPerid 2              \nPerid 3              \n");
        }
        else if(sU8TPFVSetCounter == STRATEGY_TPFV_PERIOD_TWO)
        {
            sprintf(tab_display,"      Tip Perid      \nPerid 1              \n->Perid 2            \nPerid 3              \n");
        }
        else if(sU8TPFVSetCounter == STRATEGY_TPFV_PERIOD_THREE)
        {
            sprintf(tab_display,"      Tip Perid      \nPerid 1              \nPerid 2              \n->Perid 3            \n");
        }      
    }
    else if(enum_tpfv == TPFV_PEAK)
    {
        if(sU8TPFVSetCounter == STRATEGY_TPFV_PERIOD_ONE)
        {
            sprintf(tab_display,"      Peak Perid     \n->Perid 1            \nPerid 2              \nPerid 3              \n");
        }
        else if(sU8TPFVSetCounter == STRATEGY_TPFV_PERIOD_TWO)
        {
            sprintf(tab_display,"      Peak Perid     \nPerid 1              \n->Perid 2            \nPerid 3              \n");
        }
        else if(sU8TPFVSetCounter == STRATEGY_TPFV_PERIOD_THREE)
        {
            sprintf(tab_display,"      Peak Perid     \nPerid 1              \nPerid 2              \n->Perid 3            \n");
        }  
    }
    else if(enum_tpfv == TPFV_FLAT)
    {
        if(sU8TPFVSetCounter == STRATEGY_TPFV_PERIOD_ONE)
        {
            sprintf(tab_display,"      Flat Perid     \n->Perid 1            \nPerid 2              \nPerid 3              \n");
        }
        else if(sU8TPFVSetCounter == STRATEGY_TPFV_PERIOD_TWO)
        {
            sprintf(tab_display,"      Flat Perid     \nPerid 1              \n->Perid 2            \nPerid 3              \n");
        }
        else if(sU8TPFVSetCounter == STRATEGY_TPFV_PERIOD_THREE)
        {
            sprintf(tab_display,"      Flat Perid     \nPerid 1              \nPerid 2              \n->Perid 3            \n");
        } 
    }
    else if(enum_tpfv == TPFV_VALLEY)
    {
        if(sU8TPFVSetCounter == STRATEGY_TPFV_PERIOD_ONE)
        {
            sprintf(tab_display,"     Valley Perid    \n->Perid 1            \nPerid 2              \nPerid 3              \n");
        }
        else if(sU8TPFVSetCounter == STRATEGY_TPFV_PERIOD_TWO)
        {
            sprintf(tab_display,"     Valley Perid    \nPerid 1              \n->Perid 2            \nPerid 3              \n");
        }
        else if(sU8TPFVSetCounter == STRATEGY_TPFV_PERIOD_THREE)
        {
            sprintf(tab_display,"     Valley Perid    \nPerid 1              \nPerid 2              \n->Perid 3            \n");
        }
    }  
                         
    //GUI_DispStringAt((uint8_t*)tab_display, 0, 0); 
    GUI_Display(tab_display, 0, 0);
}


/***************************************************************************
 功能:电网尖峰平谷分时设置 西班牙界面信息
****************************************************************************/
void updateDisplaySystemTPFVStrategySetData_Spanish(uint8_t sU8BMSSetCounter,TPFV_TypeDef enum_tpfv)
{
    
}

/***************************************************************************
 功能:电网尖峰平谷分时设置 德语界面信息
****************************************************************************/
void updateDisplaySystemTPFVStrategySetData_German(uint8_t sU8BMSSetCounter,TPFV_TypeDef enum_tpfv)
{
    
}

/***************************************************************************
 功能:电网尖峰平谷分时设置 法语界面信息
****************************************************************************/
void updateDisplaySystemTPFVStrategySetData_French(uint8_t sU8BMSSetCounter,TPFV_TypeDef enum_tpfv)
{
    
}

/***************************************************************************
 功能:电网尖峰平谷分时设置 波兰语界面信息
****************************************************************************/
void updateDisplaySystemTPFVStrategySetData_Polish(uint8_t sU8BMSSetCounter,TPFV_TypeDef enum_tpfv)
{
    
}

/***************************************************************************
 功能:电网尖峰平谷分时设置 意大利语界面信息
****************************************************************************/
void updateDisplaySystemTPFVStrategySetData_Italian(uint8_t sU8BMSSetCounter,TPFV_TypeDef enum_tpfv)
{
    
}

/***************************************************************************
 功能:电网尖峰平谷分时设置 捷克语界面信息
****************************************************************************/
void updateDisplaySystemTPFVStrategySetData_Czech(uint8_t sU8BMSSetCounter,TPFV_TypeDef enum_tpfv)
{
    
}

/***************************************************************************
 功能:电网尖峰平谷分时设置 荷兰语界面信息
****************************************************************************/
void updateDisplaySystemTPFVStrategySetData_Dutch(uint8_t sU8BMSSetCounter,TPFV_TypeDef enum_tpfv)
{
    
}

/***************************************************************************
 功能:根据上一次界面操作类型和本次操作类型判断本次电价设置分时电价起始时间设置 SET界面切换
****************************************************************************/
void updateDisplaySystemTPFVStrategyPeriodSetData(KeyAction_TypeDef nowActionType,DisplayAction_TypeDef nowDisplayType,TPFV_TypeDef enum_tpfv, TPFV_Strategy_TypeDef enumTPFVPeriod)
{
    static uint8_t sU8TPFVStrategyCounter     = 0;
    static uint8_t sU8TPFVCounter             = 0;
    
    switch(nowActionType) 
    {
        case KEYACTION_ENTER:
            {
                if(gbEditFlag != STATUS_FALSE)
                { 
                    int16_t s16Power = 0;
                    
                    if(enum_tpfv == TPFV_TIP)
                    {  
                        gDisplay.stDisplaySet.stStrategy.stTPFVStrategy.u8TPFVStatus = TPFV_TIP;
                        if(enumTPFVPeriod == STRATEGY_TPFV_PERIOD_ONE)
                        { 
                            s16Power = atoi(tab_Power_modify+1);
                            if(tab_Power[0] == '+')
                            {
                                s16Power = s16Power * 1;
                            }
                            else
                            {
                                s16Power = s16Power * -1;
                            }  
                            gDisplay.stDisplaySet.stStrategy.stTPFVStrategy.stTipPeriod.stPeriod1.s16Power = s16Power;
                            gDisplay.stDisplaySet.stStrategy.stTPFVStrategy.stTipPeriod.stPeriod1.u8StopSOC = atoi(tab_Stop_SOC_modify);
                            generateOperationRecord(RECORD_SET_TPFV_TIP_PERIOD_ONE);
                        }
                        else if(enumTPFVPeriod == STRATEGY_TPFV_PERIOD_TWO)
                        {
                            s16Power = atoi(tab_Power_modify+1);
                            if(tab_Power[0] == '+')
                            {
                                s16Power = s16Power * 1;
                            }
                            else
                            {
                                s16Power = s16Power * -1;
                            }  
                            gDisplay.stDisplaySet.stStrategy.stTPFVStrategy.stTipPeriod.stPeriod2.s16Power = s16Power;
                            gDisplay.stDisplaySet.stStrategy.stTPFVStrategy.stTipPeriod.stPeriod2.u8StopSOC = atoi(tab_Stop_SOC_modify);
                            generateOperationRecord(RECORD_SET_TPFV_TIP_PERIOD_TWO);                
                        }
                        else if(enumTPFVPeriod == STRATEGY_TPFV_PERIOD_THREE)
                        {
                            s16Power = atoi(tab_Power_modify+1);
                            if(tab_Power[0] == '+')
                            {
                                s16Power = s16Power * 1;
                            }
                            else
                            {
                                s16Power = s16Power * -1;
                            }
                            gDisplay.stDisplaySet.stStrategy.stTPFVStrategy.stTipPeriod.stPeriod3.s16Power = s16Power;
                            gDisplay.stDisplaySet.stStrategy.stTPFVStrategy.stTipPeriod.stPeriod3.u8StopSOC = atoi(tab_Stop_SOC_modify);
                            generateOperationRecord(RECORD_SET_TPFV_TIP_PERIOD_THREE); 
                        }
                    }
                    else if(enum_tpfv == TPFV_PEAK)
                    {
                        gDisplay.stDisplaySet.stStrategy.stTPFVStrategy.u8TPFVStatus = TPFV_PEAK;
                        if(enumTPFVPeriod == STRATEGY_TPFV_PERIOD_ONE)
                        { 
                            s16Power = atoi(tab_Power_modify+1);
                            if(tab_Power[0] == '+')
                            {
                                s16Power = s16Power * 1;
                            }
                            else
                            {
                                s16Power = s16Power * -1;
                            }  
                            gDisplay.stDisplaySet.stStrategy.stTPFVStrategy.stPeakPeriod.stPeriod1.s16Power = s16Power;
                            gDisplay.stDisplaySet.stStrategy.stTPFVStrategy.stPeakPeriod.stPeriod1.u8StopSOC = atoi(tab_Stop_SOC_modify);
                            generateOperationRecord(RECORD_SET_TPFV_PEAK_PERIOD_ONE); 
                        }
                        else if(enumTPFVPeriod == STRATEGY_TPFV_PERIOD_TWO)
                        {
                            s16Power = atoi(tab_Power_modify+1);
                            if(tab_Power[0] == '+')
                            {
                                s16Power = s16Power * 1;
                            }
                            else
                            {
                                s16Power = s16Power * -1;
                            }  
                            gDisplay.stDisplaySet.stStrategy.stTPFVStrategy.stPeakPeriod.stPeriod2.s16Power = s16Power;
                            gDisplay.stDisplaySet.stStrategy.stTPFVStrategy.stPeakPeriod.stPeriod2.u8StopSOC = atoi(tab_Stop_SOC_modify);
                            generateOperationRecord(RECORD_SET_TPFV_PEAK_PERIOD_TWO); 
                        }
                        else if(enumTPFVPeriod == STRATEGY_TPFV_PERIOD_THREE)
                        {
                            s16Power = atoi(tab_Power_modify+1);
                            if(tab_Power[0] == '+')
                            {
                                s16Power = s16Power * 1;
                            }
                            else
                            {
                                s16Power = s16Power * -1;
                            }  
                            gDisplay.stDisplaySet.stStrategy.stTPFVStrategy.stPeakPeriod.stPeriod3.s16Power = s16Power;
                            gDisplay.stDisplaySet.stStrategy.stTPFVStrategy.stPeakPeriod.stPeriod3.u8StopSOC = atoi(tab_Stop_SOC_modify);
                            generateOperationRecord(RECORD_SET_TPFV_PEAK_PERIOD_THREE);
                        }
                    }
                    else if(enum_tpfv == TPFV_FLAT)
                    {
                        gDisplay.stDisplaySet.stStrategy.stTPFVStrategy.u8TPFVStatus = TPFV_FLAT;
                        if(enumTPFVPeriod == STRATEGY_TPFV_PERIOD_ONE)
                        { 
                            s16Power = atoi(tab_Power_modify+1);
                            if(tab_Power[0] == '+')
                            {
                                s16Power = s16Power * 1;
                            }
                            else
                            {
                                s16Power = s16Power * -1;
                            }  
                            gDisplay.stDisplaySet.stStrategy.stTPFVStrategy.stFlatPeriod.stPeriod1.s16Power = s16Power;
                            gDisplay.stDisplaySet.stStrategy.stTPFVStrategy.stFlatPeriod.stPeriod1.u8StopSOC = atoi(tab_Stop_SOC_modify);
                            generateOperationRecord(RECORD_SET_TPFV_FLAT_PERIOD_ONE);
                        }
                        else if(enumTPFVPeriod == STRATEGY_TPFV_PERIOD_TWO)
                        {
                            s16Power = atoi(tab_Power_modify+1);
                            if(tab_Power[0] == '+')
                            {
                                s16Power = s16Power * 1;
                            }
                            else
                            {
                                s16Power = s16Power * -1;
                            }  
                            gDisplay.stDisplaySet.stStrategy.stTPFVStrategy.stFlatPeriod.stPeriod2.s16Power = s16Power;
                            gDisplay.stDisplaySet.stStrategy.stTPFVStrategy.stFlatPeriod.stPeriod2.u8StopSOC = atoi(tab_Stop_SOC_modify);
                            generateOperationRecord(RECORD_SET_TPFV_FLAT_PERIOD_TWO);
                        }
                        else if(enumTPFVPeriod == STRATEGY_TPFV_PERIOD_THREE)
                        {
                            s16Power = atoi(tab_Power_modify+1);
                            if(tab_Power[0] == '+')
                            {
                                s16Power = s16Power * 1;
                            }
                            else
                            {
                                s16Power = s16Power * -1;
                            }  
                            gDisplay.stDisplaySet.stStrategy.stTPFVStrategy.stFlatPeriod.stPeriod3.s16Power = s16Power;
                            gDisplay.stDisplaySet.stStrategy.stTPFVStrategy.stFlatPeriod.stPeriod3.u8StopSOC = atoi(tab_Stop_SOC_modify);
                            generateOperationRecord(RECORD_SET_TPFV_FLAT_PERIOD_THREE);
                        }
                    }
                    else if(enum_tpfv == TPFV_VALLEY)
                    {
                        gDisplay.stDisplaySet.stStrategy.stTPFVStrategy.u8TPFVStatus = TPFV_VALLEY;
                        if(enumTPFVPeriod == STRATEGY_TPFV_PERIOD_ONE)
                        { 
                            s16Power = atoi(tab_Power_modify+1);
                            if(tab_Power[0] == '+')
                            {
                                s16Power = s16Power * 1;
                            }
                            else
                            {
                                s16Power = s16Power * -1;
                            }  
                            gDisplay.stDisplaySet.stStrategy.stTPFVStrategy.stValleyPeriod.stPeriod1.s16Power = s16Power;
                            gDisplay.stDisplaySet.stStrategy.stTPFVStrategy.stValleyPeriod.stPeriod1.u8StopSOC = atoi(tab_Stop_SOC_modify);
                            generateOperationRecord(RECORD_SET_TPFV_VALLEY_PERIOD_ONE);            
                        }
                        else if(enumTPFVPeriod == STRATEGY_TPFV_PERIOD_TWO)
                        {
                            s16Power = atoi(tab_Power_modify+1);
                            if(tab_Power[0] == '+')
                            {
                                s16Power = s16Power * 1;
                            }
                            else
                            {
                                s16Power = s16Power * -1;
                            }  
                            gDisplay.stDisplaySet.stStrategy.stTPFVStrategy.stValleyPeriod.stPeriod2.s16Power = s16Power;
                            gDisplay.stDisplaySet.stStrategy.stTPFVStrategy.stValleyPeriod.stPeriod2.u8StopSOC = atoi(tab_Stop_SOC_modify);
                            generateOperationRecord(RECORD_SET_TPFV_VALLEY_PERIOD_TWO);                
                        }
                        else if(enumTPFVPeriod == STRATEGY_TPFV_PERIOD_THREE)
                        {
                            s16Power = atoi(tab_Power_modify+1);
                            if(tab_Power[0] == '+')
                            {
                                s16Power = s16Power * 1;
                            }
                            else
                            {
                                s16Power = s16Power * -1;
                            }  
                            gDisplay.stDisplaySet.stStrategy.stTPFVStrategy.stValleyPeriod.stPeriod3.s16Power = s16Power;
                            gDisplay.stDisplaySet.stStrategy.stTPFVStrategy.stValleyPeriod.stPeriod3.u8StopSOC = atoi(tab_Stop_SOC_modify);
                            generateOperationRecord(RECORD_SET_TPFV_VALLEY_PERIOD_THREE);   
                        }  
                    }
                    gbEditFlag = STATUS_FALSE;//退出编辑模式
                    sprintf(tab_Power,"%s",tab_Power_modify);
                    sprintf(tab_Stop_SOC,"%s",tab_Stop_SOC_modify);
                    sU8TPFVStrategyCounter = 0;
                    sU8TPFVCounter         = 0; 
                    gCurrentMenu.eCurrentDisplayMenuType = nowDisplayType;
                }
                Display_Set_UnderLine_Blink_Position(STATUS_FALSE,0,0);
            }
            break;
        case KEYACTION_DOWN:
            {
                if(gbEditFlag != STATUS_TRUE)
                {
                    gbEditFlag = STATUS_TRUE; 
                    sprintf(tab_Power_modify,"%s",tab_Power);
                    sprintf(tab_Stop_SOC_modify,"%s",tab_Stop_SOC);                    
                }
                
                sU8TPFVCounter++; 
                
                if(sU8TPFVStrategyCounter == 0) //停止SOC的第一个数字
                {
                   if(sU8TPFVCounter<=1)
                   {
                       tab_Stop_SOC_modify[0] =  '0' + sU8TPFVCounter;
                   }
                   else
                   {
                       sU8TPFVCounter = 0;
                       tab_Stop_SOC_modify[0] = '0';
                   } 
                } 
                else if(sU8TPFVStrategyCounter == 1)//停止SOC的第二个数字
                {
                   if(tab_Stop_SOC_modify[0] == '1')
                   {
                       sU8TPFVCounter = 0;
                       tab_Stop_SOC_modify[1] = '0';  
                   }
                   else 
                   {   
                       if(sU8TPFVCounter<=9)
                       {
                            tab_Stop_SOC_modify[1] =  '0' + sU8TPFVCounter;
                       }
                       else
                       {
                            sU8TPFVCounter = 0;
                            tab_Stop_SOC_modify[1] = '0';
                       }  
                   }   
                }
                else if(sU8TPFVStrategyCounter == 2)//停止SOC的第三个数字
                {
                   if(tab_Stop_SOC_modify[0] == '1')
                   {
                       sU8TPFVCounter = 0;
                       tab_Stop_SOC_modify[2] = '0';  
                   }
                   else 
                   {   
                       if(sU8TPFVCounter<=9)
                       {
                            tab_Stop_SOC_modify[2] =  '0' + sU8TPFVCounter;
                       }
                       else
                       {
                            sU8TPFVCounter = 0;
                            tab_Stop_SOC_modify[2] = '0';
                       }
                   }
                }
                else if(sU8TPFVStrategyCounter == 3)//功率正负符号
                {
                    /*
                   if(sU8TPFVCounter >= 2)
                   {
                       sU8TPFVCounter = 0;
                   }
                   
                   if(sU8TPFVCounter == 0)
                   {
                       tab_Power_modify[0] =  '+';
                   }
                   else 
                   {
                       tab_Power_modify[0] =  '-'; 
                   }
                  */
                  tab_Power_modify[0] =  '+';
                }
                else if(sU8TPFVStrategyCounter == 4)//功率第一个数字
                {
                   if(sU8TPFVCounter<=6)
                   {
                       tab_Power_modify[1] =  '0' + sU8TPFVCounter;
                   }
                   else
                   {
                       sU8TPFVCounter = 0;
                       tab_Power_modify[1] = '0';
                   }
                }
                else if(sU8TPFVStrategyCounter == 5)//功率第二个数字
                {
                    if(tab_Power_modify[1] != '6')
                    {
                        if(sU8TPFVCounter<=9)
                        {
                            tab_Power_modify[2] =  '0' + sU8TPFVCounter;
                        }
                        else
                        {
                            sU8TPFVCounter = 0;
                            tab_Power_modify[2] = '0';
                        }
                    }
                    else
                    {
                        tab_Power_modify[2] = '0';
                    }
                }
                else if(sU8TPFVStrategyCounter == 6)//功率第三个数字
                {
                    if(tab_Power_modify[1] != '6')
                    {
                        if(sU8TPFVCounter<=9)
                        {
                            tab_Power_modify[3] =  '0' + sU8TPFVCounter;
                        }
                        else
                        {
                            sU8TPFVCounter = 0;
                            tab_Power_modify[3] = '0';
                        }
                    }
                    else
                    {
                        tab_Power_modify[3] = '0';
                    }
                }
                else if(sU8TPFVStrategyCounter == 7)//功率第四个数字
                {
                    if(tab_Power_modify[1] != '6')
                    {
                        if(sU8TPFVCounter<=9)
                        {
                            tab_Power_modify[4] =  '0' + sU8TPFVCounter;
                        }
                        else
                        {
                            sU8TPFVCounter = 0;
                            tab_Power_modify[4] = '0';
                        }
                    }
                    else
                    {
                        tab_Power_modify[4] = '0';
                    }
                }
               gCurrentMenu.eCurrentDisplayMenuType = nowDisplayType;
            }
            break;
        case KEYACTION_UP:
            {
                if(gbEditFlag != STATUS_TRUE)
                {
                    gbEditFlag = STATUS_TRUE;    
                    sprintf(tab_Power_modify,"%s",tab_Power);
                    sprintf(tab_Stop_SOC_modify,"%s",tab_Stop_SOC);
                }
                
                sU8TPFVCounter--;
                
                if(sU8TPFVStrategyCounter == 0) //停止SOC的第一个数字
                {
                    if(!(sU8TPFVCounter<=1))
                    {
                        sU8TPFVCounter = 1;
                    }
                    tab_Stop_SOC_modify[0] =  '0' + sU8TPFVCounter;
                }
                else if(sU8TPFVStrategyCounter == 1) //停止SOC的第二个数字
                {
                    if(tab_Stop_SOC_modify[0] == '1')
                    {
                       sU8TPFVCounter = 0; 
                    }
                    else 
                    {
                        if(!(sU8TPFVCounter<=9))
                        {
                            sU8TPFVCounter = 9;
                        }
                          
                    } 
                    tab_Stop_SOC_modify[1] =  '0' + sU8TPFVCounter;
                }
                else if(sU8TPFVStrategyCounter == 2)//停止SOC的第三个数字
                {
                    if(tab_Stop_SOC_modify[0] == '1')
                    {
                       sU8TPFVCounter = 0; 
                    }
                    else 
                    {
                        if(!(sU8TPFVCounter<=9))
                        {
                            sU8TPFVCounter = 9;
                        }
                          
                    } 
                    tab_Stop_SOC_modify[2] =  '0' + sU8TPFVCounter;
                }
                else if(sU8TPFVStrategyCounter == 3)
                {
                    /*
                   if(sU8TPFVCounter >= 2)
                   {
                       sU8TPFVCounter = 1;
                   }
                   
                   if(sU8TPFVCounter == 0)
                   {     
                       tab_Power_modify[0] =  '+';
                   }
                   else 
                   {
                       tab_Power_modify[0] =  '-';
                   }
                    */
                   tab_Power_modify[0] =  '+';
                }
                else if(sU8TPFVStrategyCounter == 4)//功率第一个数字
                {
                    if(!(sU8TPFVCounter<=6))
                    {
                        sU8TPFVCounter = 6;
                    }
                    tab_Power_modify[1] =  '0' + sU8TPFVCounter;
                }
                else if(sU8TPFVStrategyCounter == 5)//功率第二个数字
                {
                    if(tab_Power_modify[1] !=  '6')
                    {
                        if(!(sU8TPFVCounter<=9))
                        {
                            sU8TPFVCounter = 9;
                        }
                    }
                    else
                    {
                        sU8TPFVCounter = 0;
                    }
                    tab_Power_modify[2] =  '0' + sU8TPFVCounter;
                }
                else if(sU8TPFVStrategyCounter == 6)//功率第三个数字
                {
                    if(tab_Power_modify[1] !=  '6')
                    {
                        if(!(sU8TPFVCounter<=9))
                        {
                            sU8TPFVCounter = 9;
                        }
                    }
                    else
                    {
                        sU8TPFVCounter = 0;
                    }
                    tab_Power_modify[3] =  '0' + sU8TPFVCounter;
                }
                else if(sU8TPFVStrategyCounter == 7)//功率第四个数字
                {
                    if(tab_Power_modify[1] !=  '6')
                    {
                        if(!(sU8TPFVCounter<=9))
                        {
                            sU8TPFVCounter = 9;
                        }
                    }
                    else
                    {
                        sU8TPFVCounter = 0;
                    }
                    tab_Power_modify[4] =  '0' + sU8TPFVCounter;
                }
                gCurrentMenu.eCurrentDisplayMenuType = nowDisplayType;
            }
            break;
        case KEYACTION_UPDOWN:
            {
                sU8TPFVStrategyCounter++;
                sU8TPFVCounter = 0;
                if(sU8TPFVStrategyCounter == DISPLAY_SET_SYSTEM_STRATEGY_TPFV_NUMBER_COUNT)
                {
                   sU8TPFVStrategyCounter = 0; 
                } 
                gCurrentMenu.eCurrentDisplayMenuType = nowDisplayType;
            }
            break;
        case KEYACTION_ESC:
            {
                if(enum_tpfv == TPFV_TIP)
                {
                    gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_SET_SYSTEM_STRATEGY_TPFV_TIP;                    
                }
                else if(enum_tpfv == TPFV_PEAK)
                {
                    gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_SET_SYSTEM_STRATEGY_TPFV_PEAK;                    
                }
                else if(enum_tpfv == TPFV_FLAT)
                { 
                    gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_SET_SYSTEM_STRATEGY_TPFV_FLAT;                     
                }
                else if(enum_tpfv == TPFV_VALLEY)
                {
                    gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_SET_SYSTEM_STRATEGY_TPFV_VALLEY;
                }
                gbEditFlag = STATUS_FALSE;//退出编辑模式
                Display_Set_UnderLine_Blink_Position(STATUS_FALSE,0,0);
            }
            break;
        case KEYACTION_NULL:
        default:
            {
                if(gbEditFlag == STATUS_FALSE)
                {
                    uint8_t u8StopSOC = 0;
                    int16_t s16Power = 0;
                    if(enum_tpfv == TPFV_TIP)
                    {
                        if(enumTPFVPeriod == STRATEGY_TPFV_PERIOD_ONE)
                        { 
                            u8StopSOC = gDisplay.stDisplaySet.stStrategy.stTPFVStrategy.stTipPeriod.stPeriod1.u8StopSOC;
                            s16Power = gDisplay.stDisplaySet.stStrategy.stTPFVStrategy.stTipPeriod.stPeriod1.s16Power;
                        }
                        else if(enumTPFVPeriod == STRATEGY_TPFV_PERIOD_TWO)
                        {
                            u8StopSOC = gDisplay.stDisplaySet.stStrategy.stTPFVStrategy.stTipPeriod.stPeriod2.u8StopSOC;
                            s16Power = gDisplay.stDisplaySet.stStrategy.stTPFVStrategy.stTipPeriod.stPeriod2.s16Power;       
                        }
                        else if(enumTPFVPeriod == STRATEGY_TPFV_PERIOD_THREE)
                        {
                            u8StopSOC = gDisplay.stDisplaySet.stStrategy.stTPFVStrategy.stTipPeriod.stPeriod3.u8StopSOC;
                            s16Power = gDisplay.stDisplaySet.stStrategy.stTPFVStrategy.stTipPeriod.stPeriod3.s16Power;                             
                        }
                    }
                    else if(enum_tpfv == TPFV_PEAK)
                    {
                        if(enumTPFVPeriod == STRATEGY_TPFV_PERIOD_ONE)
                        { 
                            u8StopSOC = gDisplay.stDisplaySet.stStrategy.stTPFVStrategy.stPeakPeriod.stPeriod1.u8StopSOC;
                            s16Power = gDisplay.stDisplaySet.stStrategy.stTPFVStrategy.stPeakPeriod.stPeriod1.s16Power;
                        }
                        else if(enumTPFVPeriod == STRATEGY_TPFV_PERIOD_TWO)
                        {
                            u8StopSOC = gDisplay.stDisplaySet.stStrategy.stTPFVStrategy.stPeakPeriod.stPeriod2.u8StopSOC;
                            s16Power = gDisplay.stDisplaySet.stStrategy.stTPFVStrategy.stPeakPeriod.stPeriod2.s16Power;       
                        }
                        else if(enumTPFVPeriod == STRATEGY_TPFV_PERIOD_THREE)
                        {
                            u8StopSOC = gDisplay.stDisplaySet.stStrategy.stTPFVStrategy.stPeakPeriod.stPeriod3.u8StopSOC;
                            s16Power = gDisplay.stDisplaySet.stStrategy.stTPFVStrategy.stPeakPeriod.stPeriod3.s16Power;                             
                        }
                    }
                    else if(enum_tpfv == TPFV_FLAT)
                    {
                        if(enumTPFVPeriod == STRATEGY_TPFV_PERIOD_ONE)
                        { 
                            u8StopSOC = gDisplay.stDisplaySet.stStrategy.stTPFVStrategy.stFlatPeriod.stPeriod1.u8StopSOC;
                            s16Power = gDisplay.stDisplaySet.stStrategy.stTPFVStrategy.stFlatPeriod.stPeriod1.s16Power;
                        }
                        else if(enumTPFVPeriod == STRATEGY_TPFV_PERIOD_TWO)
                        {
                            u8StopSOC = gDisplay.stDisplaySet.stStrategy.stTPFVStrategy.stFlatPeriod.stPeriod2.u8StopSOC;
                            s16Power = gDisplay.stDisplaySet.stStrategy.stTPFVStrategy.stFlatPeriod.stPeriod2.s16Power;       
                        }
                        else if(enumTPFVPeriod == STRATEGY_TPFV_PERIOD_THREE)
                        {
                            u8StopSOC = gDisplay.stDisplaySet.stStrategy.stTPFVStrategy.stFlatPeriod.stPeriod3.u8StopSOC;
                            s16Power = gDisplay.stDisplaySet.stStrategy.stTPFVStrategy.stFlatPeriod.stPeriod3.s16Power;                             
                        }
                    }
                    else if(enum_tpfv == TPFV_VALLEY)
                    {
                        if(enumTPFVPeriod == STRATEGY_TPFV_PERIOD_ONE)
                        { 
                            u8StopSOC = gDisplay.stDisplaySet.stStrategy.stTPFVStrategy.stValleyPeriod.stPeriod1.u8StopSOC;
                            s16Power = gDisplay.stDisplaySet.stStrategy.stTPFVStrategy.stValleyPeriod.stPeriod1.s16Power;
                        }
                        else if(enumTPFVPeriod == STRATEGY_TPFV_PERIOD_TWO)
                        {
                            u8StopSOC = gDisplay.stDisplaySet.stStrategy.stTPFVStrategy.stValleyPeriod.stPeriod2.u8StopSOC;
                            s16Power = gDisplay.stDisplaySet.stStrategy.stTPFVStrategy.stValleyPeriod.stPeriod2.s16Power;       
                        }
                        else if(enumTPFVPeriod == STRATEGY_TPFV_PERIOD_THREE)
                        {
                            u8StopSOC = gDisplay.stDisplaySet.stStrategy.stTPFVStrategy.stValleyPeriod.stPeriod3.u8StopSOC;
                            s16Power = gDisplay.stDisplaySet.stStrategy.stTPFVStrategy.stValleyPeriod.stPeriod3.s16Power;                             
                        }
                    }
                    sprintf(tab_Stop_SOC,"%03d",u8StopSOC); 
                    sprintf(tab_Power+1,"%04d",s16Power);
                    if(s16Power >= 0)
                    {
                        tab_Power_modify[0] = '+';
                    }
                    else
                    {
                        tab_Power_modify[0] = '-';
                    }
                }
                gCurrentMenu.eCurrentDisplayMenuType = nowDisplayType;
            }
            break;
    }

    if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_ENGLISH)//系统TPFV策略设置 英文界面组装
    {
        if(gbEditFlag == STATUS_TRUE)
        {
            Display_Set_UnderLine_Blink_Position(STATUS_TRUE,arrayTPFVStartegyFlicker[sU8TPFVStrategyCounter].u8StartPos,arrayTPFVStartegyFlicker[sU8TPFVStrategyCounter].u8EndPos);
            updateDisplaySystemTPFVStrategyPeriodSetData_English(tab_Stop_SOC_modify,tab_Power_modify,enum_tpfv,enumTPFVPeriod); 
        }
        else
        {
          updateDisplaySystemTPFVStrategyPeriodSetData_English(tab_Stop_SOC,tab_Power,enum_tpfv,enumTPFVPeriod);
        }
    }
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_CHINESE)//系统TPFV策略设置 中文界面组装
    {
        if(gbEditFlag == STATUS_TRUE)
        {
            //Display_Set_UnderLine_Blink_Position(STATUS_TRUE,arrayTPFVStartegyFlickerChinese[sU8TPFVStrategyCounter].u8StartPos,arrayTPFVStartegyFlickerChinese[sU8TPFVStrategyCounter].u8EndPos);
            updateDisplaySystemTPFVStrategyPeriodSetData_Chinese(tab_Stop_SOC_modify,tab_Power_modify,enum_tpfv,enumTPFVPeriod);
        }
        else
        {
            updateDisplaySystemTPFVStrategyPeriodSetData_Chinese(tab_Stop_SOC,tab_Power,enum_tpfv,enumTPFVPeriod);
        }
    }    
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_SPANISH)//系统TPFV策略设置 西班牙界面组装
    { 
        updateDisplaySystemTPFVStrategyPeriodSetData_Spanish(tab_Stop_SOC,tab_Power,enum_tpfv,enumTPFVPeriod);
    } 
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_GERMAN)//系统TPFV策略设置 德语界面组装
    { 
        updateDisplaySystemTPFVStrategyPeriodSetData_German(tab_Stop_SOC,tab_Power,enum_tpfv,enumTPFVPeriod);
    } 
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_FRENCH)//系统TPFV策略设置 法语界面组装
    { 
        updateDisplaySystemTPFVStrategyPeriodSetData_French(tab_Stop_SOC,tab_Power,enum_tpfv,enumTPFVPeriod);
    }   
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_POLISH)//系统TPFV策略设置 波兰界面组装
    {
        updateDisplaySystemTPFVStrategyPeriodSetData_Polish(tab_Stop_SOC,tab_Power,enum_tpfv,enumTPFVPeriod);
    }    
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_ITALIAN)//系统TPFV策略设置 意大利界面组装
    {
        updateDisplaySystemTPFVStrategyPeriodSetData_Italian(tab_Stop_SOC,tab_Power,enum_tpfv,enumTPFVPeriod);
    } 
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_CZECH)//系统TPFV策略设置 捷克界面组装
    { 
        updateDisplaySystemTPFVStrategyPeriodSetData_Czech(tab_Stop_SOC,tab_Power,enum_tpfv,enumTPFVPeriod);
    }   
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_DUTCH)//系统TPFV策略设置 荷兰界面组装
    { 
        updateDisplaySystemTPFVStrategyPeriodSetData_Dutch(tab_Stop_SOC,tab_Power,enum_tpfv,enumTPFVPeriod);
    }
    else
    {
        updateDisplaySystemTPFVStrategyPeriodSetData_English(tab_Stop_SOC,tab_Power,enum_tpfv,enumTPFVPeriod);
    }
}
/***************************************************************************
 功能:英文 系统TPFV策略时间段设置界面信息
****************************************************************************/
void updateDisplaySystemTPFVStrategyPeriodSetData_English(char* strStopSOC,char* strPower, TPFV_TypeDef enum_tpfv, TPFV_Strategy_TypeDef enumTPFVPeriod)
{  
    char tab_StartTime_Temp[9];
    memset(tab_StartTime_Temp,0,9);  
    char tab_EndTime_Temp[9] ;
    memset(tab_EndTime_Temp,0,9);
    memset(tab_display,0,DISPLAY_CACHE_SIZE);  
    
    if(enum_tpfv == TPFV_TIP)
    {
        if(enumTPFVPeriod == STRATEGY_TPFV_PERIOD_ONE)
        {    
            char tab_StartHour[2] ;
            uint8_t u8Temp = gDisplay.stDisplaySet.stGrid.stTimeDivisionElecPrice.stTipPeriod.stPeriod1.u8StartHour;
            sprintf(tab_StartHour,"%02d",u8Temp);
            tab_StartTime_Temp[0] = tab_StartHour[0];
            tab_StartTime_Temp[1] = tab_StartHour[1];
            
            tab_StartTime_Temp[2] = ':';
            
            char tab_StartMin[2] ;
            u8Temp = gDisplay.stDisplaySet.stGrid.stTimeDivisionElecPrice.stTipPeriod.stPeriod1.u8StartMin;
            sprintf(tab_StartMin,"%02d",u8Temp);
            tab_StartTime_Temp[3] = tab_StartMin[0];
            tab_StartTime_Temp[4] = tab_StartMin[1];
                 
            tab_StartTime_Temp[5] = ':';
            
            char tab_StartSec[2] ;
            u8Temp = gDisplay.stDisplaySet.stGrid.stTimeDivisionElecPrice.stTipPeriod.stPeriod1.u8StartSec;
            sprintf(tab_StartSec,"%02d",u8Temp);
            tab_StartTime_Temp[6] = tab_StartSec[0];
            tab_StartTime_Temp[7] = tab_StartSec[1];
            
            char tab_EndHour[2] ;
            u8Temp = gDisplay.stDisplaySet.stGrid.stTimeDivisionElecPrice.stTipPeriod.stPeriod1.u8EndHour;
            sprintf(tab_EndHour,"%02d",u8Temp);
            tab_EndTime_Temp[0] = tab_EndHour[0];
            tab_EndTime_Temp[1] = tab_EndHour[1];
            
            tab_EndTime_Temp[2] = ':';
            
            char tab_EndMin[2] ;
            u8Temp = gDisplay.stDisplaySet.stGrid.stTimeDivisionElecPrice.stTipPeriod.stPeriod1.u8EndMin;
            sprintf(tab_EndMin,"%02d",u8Temp);
            tab_EndTime_Temp[3] = tab_EndMin[0];
            tab_EndTime_Temp[4] = tab_EndMin[1];
                 
            tab_EndTime_Temp[5] = ':';
            
            char tab_EndSec[2] ;
            u8Temp = gDisplay.stDisplaySet.stGrid.stTimeDivisionElecPrice.stTipPeriod.stPeriod1.u8EndSec;
            sprintf(tab_EndSec,"%02d",u8Temp);
            tab_EndTime_Temp[6] = tab_EndSec[0];
            tab_EndTime_Temp[7] = tab_EndSec[1];
                        
            sprintf((char*)tab_display,"     Tip Perid 1     \nSOC:%s Power:%s  \nStart Time:%s  \nEnd Time:%s   \n",strStopSOC,strPower,tab_StartTime_Temp,tab_EndTime_Temp);
                        
        }
        else if(enumTPFVPeriod == STRATEGY_TPFV_PERIOD_TWO)
        { 
            char tab_StartHour[2] ;
            uint8_t u8Temp = gDisplay.stDisplaySet.stGrid.stTimeDivisionElecPrice.stTipPeriod.stPeriod2.u8StartHour;
            sprintf(tab_StartHour,"%02d",u8Temp);
            tab_StartTime_Temp[0] = tab_StartHour[0];
            tab_StartTime_Temp[1] = tab_StartHour[1];
            
            tab_StartTime_Temp[2] = ':';
            
            char tab_StartMin[2] ;
            u8Temp = gDisplay.stDisplaySet.stGrid.stTimeDivisionElecPrice.stTipPeriod.stPeriod2.u8StartMin;
            sprintf(tab_StartMin,"%02d",u8Temp);
            tab_StartTime_Temp[3] = tab_StartMin[0];
            tab_StartTime_Temp[4] = tab_StartMin[1];
                 
            tab_StartTime_Temp[5] = ':';
            
            char tab_StartSec[2] ;
            u8Temp = gDisplay.stDisplaySet.stGrid.stTimeDivisionElecPrice.stTipPeriod.stPeriod2.u8StartSec;
            sprintf(tab_StartSec,"%02d",u8Temp);
            tab_StartTime_Temp[6] = tab_StartSec[0];
            tab_StartTime_Temp[7] = tab_StartSec[1];
            
            char tab_EndHour[2] ;
            u8Temp = gDisplay.stDisplaySet.stGrid.stTimeDivisionElecPrice.stTipPeriod.stPeriod2.u8EndHour;
            sprintf(tab_EndHour,"%02d",u8Temp);
            tab_EndTime_Temp[0] = tab_EndHour[0];
            tab_EndTime_Temp[1] = tab_EndHour[1];
            
            tab_EndTime_Temp[2] = ':';
            
            char tab_EndMin[2] ;
            u8Temp = gDisplay.stDisplaySet.stGrid.stTimeDivisionElecPrice.stTipPeriod.stPeriod2.u8EndMin;
            sprintf(tab_EndMin,"%02d",u8Temp);
            tab_EndTime_Temp[3] = tab_EndMin[0];
            tab_EndTime_Temp[4] = tab_EndMin[1];
                 
            tab_EndTime_Temp[5] = ':';
            
            char tab_EndSec[2] ;
            u8Temp = gDisplay.stDisplaySet.stGrid.stTimeDivisionElecPrice.stTipPeriod.stPeriod2.u8EndSec;
            sprintf(tab_EndSec,"%02d",u8Temp);
            tab_EndTime_Temp[6] = tab_EndSec[0];
            tab_EndTime_Temp[7] = tab_EndSec[1];
                        
            sprintf((char*)tab_display,"     Tip Perid 2     \nSOC:%s Power:%s  \nStart Time:%s  \nEnd Time:%s   \n",strStopSOC,strPower,tab_StartTime_Temp,tab_EndTime_Temp);            
        }
        else if(enumTPFVPeriod == STRATEGY_TPFV_PERIOD_THREE)
        {  
            char tab_StartHour[2] ;
            uint8_t u8Temp = gDisplay.stDisplaySet.stGrid.stTimeDivisionElecPrice.stTipPeriod.stPeriod3.u8StartHour;
            sprintf(tab_StartHour,"%02d",u8Temp);
            tab_StartTime_Temp[0] = tab_StartHour[0];
            tab_StartTime_Temp[1] = tab_StartHour[1];
            
            tab_StartTime_Temp[2] = ':';
            
            char tab_StartMin[2] ;
            u8Temp = gDisplay.stDisplaySet.stGrid.stTimeDivisionElecPrice.stTipPeriod.stPeriod3.u8StartMin;
            sprintf(tab_StartMin,"%02d",u8Temp);
            tab_StartTime_Temp[3] = tab_StartMin[0];
            tab_StartTime_Temp[4] = tab_StartMin[1];
                 
            tab_StartTime_Temp[5] = ':';
            
            char tab_StartSec[2] ;
            u8Temp = gDisplay.stDisplaySet.stGrid.stTimeDivisionElecPrice.stTipPeriod.stPeriod3.u8StartSec;
            sprintf(tab_StartSec,"%02d",u8Temp);
            tab_StartTime_Temp[6] = tab_StartSec[0];
            tab_StartTime_Temp[7] = tab_StartSec[1];
            
            char tab_EndHour[2] ;
            u8Temp = gDisplay.stDisplaySet.stGrid.stTimeDivisionElecPrice.stTipPeriod.stPeriod3.u8EndHour;
            sprintf(tab_EndHour,"%02d",u8Temp);
            tab_EndTime_Temp[0] = tab_EndHour[0];
            tab_EndTime_Temp[1] = tab_EndHour[1];
            
            tab_EndTime_Temp[2] = ':';
            
            char tab_EndMin[2] ;
            u8Temp = gDisplay.stDisplaySet.stGrid.stTimeDivisionElecPrice.stTipPeriod.stPeriod3.u8EndMin;
            sprintf(tab_EndMin,"%02d",u8Temp);
            tab_EndTime_Temp[3] = tab_EndMin[0];
            tab_EndTime_Temp[4] = tab_EndMin[1];
                 
            tab_EndTime_Temp[5] = ':';
            
            char tab_EndSec[2] ;
            u8Temp = gDisplay.stDisplaySet.stGrid.stTimeDivisionElecPrice.stTipPeriod.stPeriod3.u8EndSec;
            sprintf(tab_EndSec,"%02d",u8Temp);
            tab_EndTime_Temp[6] = tab_EndSec[0];
            tab_EndTime_Temp[7] = tab_EndSec[1];
                        
            sprintf((char*)tab_display,"     Tip Perid 3     \nSOC:%s Power:%s  \nStart Time:%s  \nEnd Time:%s   \n",strStopSOC,strPower,tab_StartTime_Temp,tab_EndTime_Temp);
            
        }         
    }
    else if(enum_tpfv == TPFV_PEAK)
    {
        if(enumTPFVPeriod == STRATEGY_TPFV_PERIOD_ONE)
        {    
            char tab_StartHour[2] ;
            uint8_t u8Temp = gDisplay.stDisplaySet.stGrid.stTimeDivisionElecPrice.stPeakPeriod.stPeriod1.u8StartHour;
            sprintf(tab_StartHour,"%02d",u8Temp);
            tab_StartTime_Temp[0] = tab_StartHour[0];
            tab_StartTime_Temp[1] = tab_StartHour[1];
            
            tab_StartTime_Temp[2] = ':';
            
            char tab_StartMin[2] ;
            u8Temp = gDisplay.stDisplaySet.stGrid.stTimeDivisionElecPrice.stPeakPeriod.stPeriod1.u8StartMin;
            sprintf(tab_StartMin,"%02d",u8Temp);
            tab_StartTime_Temp[3] = tab_StartMin[0];
            tab_StartTime_Temp[4] = tab_StartMin[1];
                 
            tab_StartTime_Temp[5] = ':';
            
            char tab_StartSec[2] ;
            u8Temp = gDisplay.stDisplaySet.stGrid.stTimeDivisionElecPrice.stPeakPeriod.stPeriod1.u8StartSec;
            sprintf(tab_StartSec,"%02d",u8Temp);
            tab_StartTime_Temp[6] = tab_StartSec[0];
            tab_StartTime_Temp[7] = tab_StartSec[1];
            
            char tab_EndHour[2] ;
            u8Temp = gDisplay.stDisplaySet.stGrid.stTimeDivisionElecPrice.stPeakPeriod.stPeriod1.u8EndHour;
            sprintf(tab_EndHour,"%02d",u8Temp);
            tab_EndTime_Temp[0] = tab_EndHour[0];
            tab_EndTime_Temp[1] = tab_EndHour[1];
            
            tab_EndTime_Temp[2] = ':';
            
            char tab_EndMin[2] ;
            u8Temp = gDisplay.stDisplaySet.stGrid.stTimeDivisionElecPrice.stPeakPeriod.stPeriod1.u8EndMin;
            sprintf(tab_EndMin,"%02d",u8Temp);
            tab_EndTime_Temp[3] = tab_EndMin[0];
            tab_EndTime_Temp[4] = tab_EndMin[1];
                 
            tab_EndTime_Temp[5] = ':';
            
            char tab_EndSec[2] ;
            u8Temp = gDisplay.stDisplaySet.stGrid.stTimeDivisionElecPrice.stPeakPeriod.stPeriod1.u8EndSec;
            sprintf(tab_EndSec,"%02d",u8Temp);
            tab_EndTime_Temp[6] = tab_EndSec[0];
            tab_EndTime_Temp[7] = tab_EndSec[1];
             
            sprintf((char*)tab_display,"    Peak Perid 1     \nSOC:%s Power:%s  \nStart Time:%s  \nEnd Time:%s   \n",strStopSOC,strPower,tab_StartTime_Temp,tab_EndTime_Temp);            
        }
        else if(enumTPFVPeriod == STRATEGY_TPFV_PERIOD_TWO)
        { 
            char tab_StartHour[2] ;
            uint8_t u8Temp = gDisplay.stDisplaySet.stGrid.stTimeDivisionElecPrice.stPeakPeriod.stPeriod2.u8StartHour;
            sprintf(tab_StartHour,"%02d",u8Temp);
            tab_StartTime_Temp[0] = tab_StartHour[0];
            tab_StartTime_Temp[1] = tab_StartHour[1];
            
            tab_StartTime_Temp[2] = ':';
            
            char tab_StartMin[2] ;
            u8Temp = gDisplay.stDisplaySet.stGrid.stTimeDivisionElecPrice.stPeakPeriod.stPeriod2.u8StartMin;
            sprintf(tab_StartMin,"%02d",u8Temp);
            tab_StartTime_Temp[3] = tab_StartMin[0];
            tab_StartTime_Temp[4] = tab_StartMin[1];
                 
            tab_StartTime_Temp[5] = ':';
            
            char tab_StartSec[2] ;
            u8Temp = gDisplay.stDisplaySet.stGrid.stTimeDivisionElecPrice.stPeakPeriod.stPeriod2.u8StartSec;
            sprintf(tab_StartSec,"%02d",u8Temp);
            tab_StartTime_Temp[6] = tab_StartSec[0];
            tab_StartTime_Temp[7] = tab_StartSec[1];
            
            char tab_EndHour[2] ;
            u8Temp = gDisplay.stDisplaySet.stGrid.stTimeDivisionElecPrice.stPeakPeriod.stPeriod2.u8EndHour;
            sprintf(tab_EndHour,"%02d",u8Temp);
            tab_EndTime_Temp[0] = tab_EndHour[0];
            tab_EndTime_Temp[1] = tab_EndHour[1];
            
            tab_EndTime_Temp[2] = ':';
            
            char tab_EndMin[2] ;
            u8Temp = gDisplay.stDisplaySet.stGrid.stTimeDivisionElecPrice.stPeakPeriod.stPeriod2.u8EndMin;
            sprintf(tab_EndMin,"%02d",u8Temp);
            tab_EndTime_Temp[3] = tab_EndMin[0];
            tab_EndTime_Temp[4] = tab_EndMin[1];
                 
            tab_EndTime_Temp[5] = ':';
            
            char tab_EndSec[2] ;
            u8Temp = gDisplay.stDisplaySet.stGrid.stTimeDivisionElecPrice.stPeakPeriod.stPeriod2.u8EndSec;
            sprintf(tab_EndSec,"%02d",u8Temp);
            tab_EndTime_Temp[6] = tab_EndSec[0];
            tab_EndTime_Temp[7] = tab_EndSec[1];
                        
            sprintf((char*)tab_display,"    Peak Perid 2     \nSOC:%s Power:%s  \nStart Time:%s  \nEnd Time:%s   \n",strStopSOC,strPower,tab_StartTime_Temp,tab_EndTime_Temp);            
        }
        else if(enumTPFVPeriod == STRATEGY_TPFV_PERIOD_THREE)
        {  
            char tab_StartHour[2] ;
            uint8_t u8Temp = gDisplay.stDisplaySet.stGrid.stTimeDivisionElecPrice.stPeakPeriod.stPeriod3.u8StartHour;
            sprintf(tab_StartHour,"%02d",u8Temp);
            tab_StartTime_Temp[0] = tab_StartHour[0];
            tab_StartTime_Temp[1] = tab_StartHour[1];
            
            tab_StartTime_Temp[2] = ':';
            
            char tab_StartMin[2] ;                 
            u8Temp = gDisplay.stDisplaySet.stGrid.stTimeDivisionElecPrice.stPeakPeriod.stPeriod3.u8StartMin;
            sprintf(tab_StartMin,"%02d",u8Temp);
            tab_StartTime_Temp[3] = tab_StartMin[0];
            tab_StartTime_Temp[4] = tab_StartMin[1];
                 
            tab_StartTime_Temp[5] = ':';
            
            char tab_StartSec[2] ;
            u8Temp = gDisplay.stDisplaySet.stGrid.stTimeDivisionElecPrice.stPeakPeriod.stPeriod3.u8StartSec;
            sprintf(tab_StartSec,"%02d",u8Temp);
            tab_StartTime_Temp[6] = tab_StartSec[0];
            tab_StartTime_Temp[7] = tab_StartSec[1];
            
            char tab_EndHour[2] ;
            u8Temp = gDisplay.stDisplaySet.stGrid.stTimeDivisionElecPrice.stPeakPeriod.stPeriod3.u8EndHour;
            sprintf(tab_EndHour,"%02d",u8Temp);
            tab_EndTime_Temp[0] = tab_EndHour[0];
            tab_EndTime_Temp[1] = tab_EndHour[1];
            
            tab_EndTime_Temp[2] = ':';
            
            char tab_EndMin[2] ;
            u8Temp = gDisplay.stDisplaySet.stGrid.stTimeDivisionElecPrice.stPeakPeriod.stPeriod3.u8EndMin;
            sprintf(tab_EndMin,"%02d",u8Temp);
            tab_EndTime_Temp[3] = tab_EndMin[0];
            tab_EndTime_Temp[4] = tab_EndMin[1];
                 
            tab_EndTime_Temp[5] = ':';
            
            char tab_EndSec[2] ;
            u8Temp = gDisplay.stDisplaySet.stGrid.stTimeDivisionElecPrice.stPeakPeriod.stPeriod3.u8EndSec;
            sprintf(tab_EndSec,"%02d",u8Temp);
            tab_EndTime_Temp[6] = tab_EndSec[0];
            tab_EndTime_Temp[7] = tab_EndSec[1];
                        
            sprintf((char*)tab_display,"    Peak Perid 3     \nSOC:%s Power:%s  \nStart Time:%s  \nEnd Time:%s   \n",strStopSOC,strPower,tab_StartTime_Temp,tab_EndTime_Temp);
        }           
    }
    else if(enum_tpfv == TPFV_FLAT)
    {
        if(enumTPFVPeriod == STRATEGY_TPFV_PERIOD_ONE)
        {    
            char tab_StartHour[2] ;
            uint8_t u8Temp = gDisplay.stDisplaySet.stGrid.stTimeDivisionElecPrice.stFlatPeriod.stPeriod1.u8StartHour;
            sprintf(tab_StartHour,"%02d",u8Temp);
            tab_StartTime_Temp[0] = tab_StartHour[0];
            tab_StartTime_Temp[1] = tab_StartHour[1];
            
            tab_StartTime_Temp[2] = ':';
            
            char tab_StartMin[2] ;
            u8Temp = gDisplay.stDisplaySet.stGrid.stTimeDivisionElecPrice.stFlatPeriod.stPeriod1.u8StartMin;
            sprintf(tab_StartMin,"%02d",u8Temp);
            tab_StartTime_Temp[3] = tab_StartMin[0];
            tab_StartTime_Temp[4] = tab_StartMin[1];
                 
            tab_StartTime_Temp[5] = ':';
            
            char tab_StartSec[2] ;
            u8Temp = gDisplay.stDisplaySet.stGrid.stTimeDivisionElecPrice.stFlatPeriod.stPeriod1.u8StartSec;
            sprintf(tab_StartSec,"%02d",u8Temp);
            tab_StartTime_Temp[6] = tab_StartSec[0];
            tab_StartTime_Temp[7] = tab_StartSec[1];
            
            char tab_EndHour[2] ;
            u8Temp = gDisplay.stDisplaySet.stGrid.stTimeDivisionElecPrice.stFlatPeriod.stPeriod1.u8EndHour;
            sprintf(tab_EndHour,"%02d",u8Temp);
            tab_EndTime_Temp[0] = tab_EndHour[0];
            tab_EndTime_Temp[1] = tab_EndHour[1];
            
            tab_EndTime_Temp[2] = ':';
            
            char tab_EndMin[2] ;
            u8Temp = gDisplay.stDisplaySet.stGrid.stTimeDivisionElecPrice.stFlatPeriod.stPeriod1.u8EndMin;
            sprintf(tab_EndMin,"%02d",u8Temp);
            tab_EndTime_Temp[3] = tab_EndMin[0];
            tab_EndTime_Temp[4] = tab_EndMin[1];
                 
            tab_EndTime_Temp[5] = ':';
            
            char tab_EndSec[2] ;
            u8Temp = gDisplay.stDisplaySet.stGrid.stTimeDivisionElecPrice.stFlatPeriod.stPeriod1.u8EndSec;
            sprintf(tab_EndSec,"%02d",u8Temp);
            tab_EndTime_Temp[6] = tab_EndSec[0];
            tab_EndTime_Temp[7] = tab_EndSec[1];
            
            sprintf((char*)tab_display,"    Flat Perid 1     \nSOC:%s Power:%s  \nStart Time:%s  \nEnd Time:%s   \n",strStopSOC,strPower,tab_StartTime_Temp,tab_EndTime_Temp);
                        
        }
        else if(enumTPFVPeriod == STRATEGY_TPFV_PERIOD_TWO)
        { 
            char tab_StartHour[2] ;
            uint8_t u8Temp = gDisplay.stDisplaySet.stGrid.stTimeDivisionElecPrice.stFlatPeriod.stPeriod2.u8StartHour;
            sprintf(tab_StartHour,"%02d",u8Temp);
            tab_StartTime_Temp[0] = tab_StartHour[0];
            tab_StartTime_Temp[1] = tab_StartHour[1];
            
            tab_StartTime_Temp[2] = ':';
            
            char tab_StartMin[2] ;
            u8Temp = gDisplay.stDisplaySet.stGrid.stTimeDivisionElecPrice.stFlatPeriod.stPeriod2.u8StartMin;
            sprintf(tab_StartMin,"%02d",u8Temp);
            tab_StartTime_Temp[3] = tab_StartMin[0];
            tab_StartTime_Temp[4] = tab_StartMin[1];
                 
            tab_StartTime_Temp[5] = ':';
            
            char tab_StartSec[2] ;
            u8Temp = gDisplay.stDisplaySet.stGrid.stTimeDivisionElecPrice.stFlatPeriod.stPeriod2.u8StartSec;
            sprintf(tab_StartSec,"%02d",u8Temp);
            tab_StartTime_Temp[6] = tab_StartSec[0];
            tab_StartTime_Temp[7] = tab_StartSec[1];
            
            char tab_EndHour[2] ;
            u8Temp = gDisplay.stDisplaySet.stGrid.stTimeDivisionElecPrice.stFlatPeriod.stPeriod2.u8EndHour;
            sprintf(tab_EndHour,"%02d",u8Temp);
            tab_EndTime_Temp[0] = tab_EndHour[0];
            tab_EndTime_Temp[1] = tab_EndHour[1];
            
            tab_EndTime_Temp[2] = ':';
            
            char tab_EndMin[2] ;
            u8Temp = gDisplay.stDisplaySet.stGrid.stTimeDivisionElecPrice.stFlatPeriod.stPeriod2.u8EndMin;
            sprintf(tab_EndMin,"%02d",u8Temp);
            tab_EndTime_Temp[3] = tab_EndMin[0];
            tab_EndTime_Temp[4] = tab_EndMin[1];
                 
            tab_EndTime_Temp[5] = ':';
            
            char tab_EndSec[2] ;
            u8Temp = gDisplay.stDisplaySet.stGrid.stTimeDivisionElecPrice.stFlatPeriod.stPeriod2.u8EndSec;
            sprintf(tab_EndSec,"%02d",u8Temp);
            tab_EndTime_Temp[6] = tab_EndSec[0];
            tab_EndTime_Temp[7] = tab_EndSec[1];
                        
            sprintf((char*)tab_display,"    Flat Perid 2     \nSOC:%s Power:%s  \nStart Time:%s  \nEnd Time:%s   \n",strStopSOC,strPower,tab_StartTime_Temp,tab_EndTime_Temp);            
        }
        else if(enumTPFVPeriod == STRATEGY_TPFV_PERIOD_THREE)
        {  
            char tab_StartHour[2] ;
            uint8_t u8Temp = gDisplay.stDisplaySet.stGrid.stTimeDivisionElecPrice.stFlatPeriod.stPeriod3.u8StartHour;
            sprintf(tab_StartHour,"%02d",u8Temp);
            tab_StartTime_Temp[0] = tab_StartHour[0];
            tab_StartTime_Temp[1] = tab_StartHour[1];
            
            tab_StartTime_Temp[2] = ':';
            
            char tab_StartMin[2] ;
            u8Temp = gDisplay.stDisplaySet.stGrid.stTimeDivisionElecPrice.stFlatPeriod.stPeriod3.u8StartMin;
            sprintf(tab_StartMin,"%02d",u8Temp);
            tab_StartTime_Temp[3] = tab_StartMin[0];
            tab_StartTime_Temp[4] = tab_StartMin[1];
            
            tab_StartTime_Temp[5] = ':';
            
            char tab_StartSec[2] ;
            u8Temp = gDisplay.stDisplaySet.stGrid.stTimeDivisionElecPrice.stFlatPeriod.stPeriod3.u8StartSec;
            sprintf(tab_StartSec,"%02d",u8Temp);
            tab_StartTime_Temp[6] = tab_StartSec[0];
            tab_StartTime_Temp[7] = tab_StartSec[1];
            
            char tab_EndHour[2] ;
            u8Temp = gDisplay.stDisplaySet.stGrid.stTimeDivisionElecPrice.stFlatPeriod.stPeriod3.u8EndHour;
            sprintf(tab_EndHour,"%02d",u8Temp);
            tab_EndTime_Temp[0] = tab_EndHour[0];
            tab_EndTime_Temp[1] = tab_EndHour[1];
            
            tab_EndTime_Temp[2] = ':';
            
            char tab_EndMin[2] ;
            u8Temp = gDisplay.stDisplaySet.stGrid.stTimeDivisionElecPrice.stFlatPeriod.stPeriod3.u8EndMin;
            sprintf(tab_EndMin,"%02d",u8Temp);
            tab_EndTime_Temp[3] = tab_EndMin[0];
            tab_EndTime_Temp[4] = tab_EndMin[1];
                 
            tab_EndTime_Temp[5] = ':';
            
            char tab_EndSec[2] ;
            u8Temp = gDisplay.stDisplaySet.stGrid.stTimeDivisionElecPrice.stFlatPeriod.stPeriod3.u8EndSec;
            sprintf(tab_EndSec,"%02d",u8Temp);
            tab_EndTime_Temp[6] = tab_EndSec[0];
            tab_EndTime_Temp[7] = tab_EndSec[1];
            
            sprintf((char*)tab_display,"    Flat Perid 3     \nSOC:%s Power:%s  \nStart Time:%s  \nEnd Time:%s   \n",strStopSOC,strPower,tab_StartTime_Temp,tab_EndTime_Temp);
        } 
    }
    else if(enum_tpfv == TPFV_VALLEY)
    {
        if(enumTPFVPeriod == STRATEGY_TPFV_PERIOD_ONE)
        {
            char tab_StartHour[2] ;
            uint8_t u8Temp = gDisplay.stDisplaySet.stGrid.stTimeDivisionElecPrice.stValleyPeriod.stPeriod1.u8StartHour;
            sprintf(tab_StartHour,"%02d",u8Temp);
            tab_StartTime_Temp[0] = tab_StartHour[0];
            tab_StartTime_Temp[1] = tab_StartHour[1];
            
            tab_StartTime_Temp[2] = ':';
            
            char tab_StartMin[2] ;
            u8Temp = gDisplay.stDisplaySet.stGrid.stTimeDivisionElecPrice.stValleyPeriod.stPeriod1.u8StartMin;
            sprintf(tab_StartMin,"%02d",u8Temp);
            tab_StartTime_Temp[3] = tab_StartMin[0];
            tab_StartTime_Temp[4] = tab_StartMin[1];
                 
            tab_StartTime_Temp[5] = ':';
            
            char tab_StartSec[2] ;
            u8Temp = gDisplay.stDisplaySet.stGrid.stTimeDivisionElecPrice.stValleyPeriod.stPeriod1.u8StartSec;
            sprintf(tab_StartSec,"%02d",u8Temp);
            tab_StartTime_Temp[6] = tab_StartSec[0];
            tab_StartTime_Temp[7] = tab_StartSec[1];
            
            char tab_EndHour[2] ;
            u8Temp = gDisplay.stDisplaySet.stGrid.stTimeDivisionElecPrice.stValleyPeriod.stPeriod1.u8EndHour;
            sprintf(tab_EndHour,"%02d",u8Temp);
            tab_EndTime_Temp[0] = tab_EndHour[0];
            tab_EndTime_Temp[1] = tab_EndHour[1];
            
            tab_EndTime_Temp[2] = ':';
            
            char tab_EndMin[2] ;
            u8Temp = gDisplay.stDisplaySet.stGrid.stTimeDivisionElecPrice.stValleyPeriod.stPeriod1.u8EndMin;
            sprintf(tab_EndMin,"%02d",u8Temp);
            tab_EndTime_Temp[3] = tab_EndMin[0];
            tab_EndTime_Temp[4] = tab_EndMin[1];
                 
            tab_EndTime_Temp[5] = ':';
            
            char tab_EndSec[2] ;
            u8Temp = gDisplay.stDisplaySet.stGrid.stTimeDivisionElecPrice.stValleyPeriod.stPeriod1.u8EndSec;
            sprintf(tab_EndSec,"%02d",u8Temp);
            tab_EndTime_Temp[6] = tab_EndSec[0];
            tab_EndTime_Temp[7] = tab_EndSec[1];
            
            sprintf((char*)tab_display,"    Valley Perid 1   \nSOC:%s Power:%s  \nStart Time:%s  \nEnd Time:%s   \n",strStopSOC,strPower,tab_StartTime_Temp,tab_EndTime_Temp);
            
        }
        else if(enumTPFVPeriod == STRATEGY_TPFV_PERIOD_TWO)
        { 
            char tab_StartHour[2] ;
            uint8_t u8Temp = gDisplay.stDisplaySet.stGrid.stTimeDivisionElecPrice.stValleyPeriod.stPeriod2.u8StartHour;
            sprintf(tab_StartHour,"%02d",u8Temp);
            tab_StartTime_Temp[0] = tab_StartHour[0];
            tab_StartTime_Temp[1] = tab_StartHour[1];
            
            tab_StartTime_Temp[2] = ':';
            
            char tab_StartMin[2] ;
            u8Temp = gDisplay.stDisplaySet.stGrid.stTimeDivisionElecPrice.stValleyPeriod.stPeriod2.u8StartMin;
            sprintf(tab_StartMin,"%02d",u8Temp);
            tab_StartTime_Temp[3] = tab_StartMin[0];
            tab_StartTime_Temp[4] = tab_StartMin[1];
                 
            tab_StartTime_Temp[5] = ':';
            
            char tab_StartSec[2] ;
            u8Temp = gDisplay.stDisplaySet.stGrid.stTimeDivisionElecPrice.stValleyPeriod.stPeriod2.u8StartSec;
            sprintf(tab_StartSec,"%02d",u8Temp);
            tab_StartTime_Temp[6] = tab_StartSec[0];
            tab_StartTime_Temp[7] = tab_StartSec[1];
            
            char tab_EndHour[2] ;
            u8Temp = gDisplay.stDisplaySet.stGrid.stTimeDivisionElecPrice.stValleyPeriod.stPeriod2.u8EndHour;
            sprintf(tab_EndHour,"%02d",u8Temp);
            tab_EndTime_Temp[0] = tab_EndHour[0];
            tab_EndTime_Temp[1] = tab_EndHour[1];
            
            tab_EndTime_Temp[2] = ':';
            
            char tab_EndMin[2] ;
            u8Temp = gDisplay.stDisplaySet.stGrid.stTimeDivisionElecPrice.stValleyPeriod.stPeriod2.u8EndMin;
            sprintf(tab_EndMin,"%02d",u8Temp);
            tab_EndTime_Temp[3] = tab_EndMin[0];
            tab_EndTime_Temp[4] = tab_EndMin[1];
            
            tab_EndTime_Temp[5] = ':';
            
            char tab_EndSec[2] ;
            u8Temp = gDisplay.stDisplaySet.stGrid.stTimeDivisionElecPrice.stValleyPeriod.stPeriod2.u8EndSec;
            sprintf(tab_EndSec,"%02d",u8Temp);
            tab_EndTime_Temp[6] = tab_EndSec[0];
            tab_EndTime_Temp[7] = tab_EndSec[1];
                        
            sprintf((char*)tab_display,"    Valley Perid 2   \nSOC:%s Power:%s  \nStart Time:%s  \nEnd Time:%s   \n",strStopSOC,strPower,tab_StartTime_Temp,tab_EndTime_Temp);            
        }
        else if(enumTPFVPeriod == STRATEGY_TPFV_PERIOD_THREE)
        {  
            char tab_StartHour[2] ;
            uint8_t u8Temp = gDisplay.stDisplaySet.stGrid.stTimeDivisionElecPrice.stValleyPeriod.stPeriod3.u8StartHour;
            sprintf(tab_StartHour,"%02d",u8Temp);
            tab_StartTime_Temp[0] = tab_StartHour[0];
            tab_StartTime_Temp[1] = tab_StartHour[1];
            
            tab_StartTime_Temp[2] = ':';
            
            char tab_StartMin[2] ;
            u8Temp = gDisplay.stDisplaySet.stGrid.stTimeDivisionElecPrice.stValleyPeriod.stPeriod3.u8StartMin;
            sprintf(tab_StartMin,"%02d",u8Temp);
            tab_StartTime_Temp[3] = tab_StartMin[0];
            tab_StartTime_Temp[4] = tab_StartMin[1];
                 
            tab_StartTime_Temp[5] = ':';
            
            char tab_StartSec[2] ;
            u8Temp = gDisplay.stDisplaySet.stGrid.stTimeDivisionElecPrice.stValleyPeriod.stPeriod3.u8StartSec;
            sprintf(tab_StartSec,"%02d",u8Temp);
            tab_StartTime_Temp[6] = tab_StartSec[0];
            tab_StartTime_Temp[7] = tab_StartSec[1];
            
            char tab_EndHour[2] ;
            u8Temp = gDisplay.stDisplaySet.stGrid.stTimeDivisionElecPrice.stValleyPeriod.stPeriod3.u8EndHour;
            sprintf(tab_EndHour,"%02d",u8Temp);
            tab_EndTime_Temp[0] = tab_EndHour[0];
            tab_EndTime_Temp[1] = tab_EndHour[1];
            
            tab_EndTime_Temp[2] = ':';
            
            char tab_EndMin[2] ;
            u8Temp = gDisplay.stDisplaySet.stGrid.stTimeDivisionElecPrice.stValleyPeriod.stPeriod3.u8EndMin;
            sprintf(tab_EndMin,"%02d",u8Temp);
            tab_EndTime_Temp[3] = tab_EndMin[0];
            tab_EndTime_Temp[4] = tab_EndMin[1];
                 
            tab_EndTime_Temp[5] = ':';
            
            char tab_EndSec[2] ;
            u8Temp = gDisplay.stDisplaySet.stGrid.stTimeDivisionElecPrice.stValleyPeriod.stPeriod3.u8EndSec;
            sprintf(tab_EndSec,"%02d",u8Temp);
            tab_EndTime_Temp[6] = tab_EndSec[0];
            tab_EndTime_Temp[7] = tab_EndSec[1];
            
            sprintf((char*)tab_display,"    Valley Perid 3   \nSOC:%s Power:%s  \nStart Time:%s  \nEnd Time:%s   \n",strStopSOC,strPower,tab_StartTime_Temp,tab_EndTime_Temp);
        }
    }  
    //GUI_DispStringAt((uint8_t*)tab_display, 0, 0);  
    GUI_Display(tab_display, 0, 0);
}


/***************************************************************************
 功能:西班牙语 系统TPFV策略时间段设置界面信息
****************************************************************************/
void updateDisplaySystemTPFVStrategyPeriodSetData_Spanish(char* strStopSOC,char* strPower, TPFV_TypeDef enum_tpfv, TPFV_Strategy_TypeDef enumTPFVPeriod)
{
    
}
/***************************************************************************
 功能:德语 系统TPFV策略时间段设置界面信息
****************************************************************************/
void updateDisplaySystemTPFVStrategyPeriodSetData_German(char* strStopSOC,char* strPower, TPFV_TypeDef enum_tpfv, TPFV_Strategy_TypeDef enumTPFVPeriod)
{
    
}
/***************************************************************************
 功能:法语 系统TPFV策略时间段设置界面信息
****************************************************************************/
void updateDisplaySystemTPFVStrategyPeriodSetData_French(char* strStopSOC,char* strPower, TPFV_TypeDef enum_tpfv, TPFV_Strategy_TypeDef enumTPFVPeriod)
{
    
}
/***************************************************************************
 功能:波兰语 系统TPFV策略时间段设置界面信息
****************************************************************************/
void updateDisplaySystemTPFVStrategyPeriodSetData_Polish(char* strStopSOC,char* strPower, TPFV_TypeDef enum_tpfv, TPFV_Strategy_TypeDef enumTPFVPeriod)
{
    
}
/***************************************************************************
 功能:意大利语 系统TPFV策略时间段设置界面信息
****************************************************************************/
void updateDisplaySystemTPFVStrategyPeriodSetData_Italian(char* strStopSOC,char* strPower, TPFV_TypeDef enum_tpfv, TPFV_Strategy_TypeDef enumTPFVPeriod)
{
    
}
/***************************************************************************
 功能:捷克语 系统TPFV策略时间段设置界面信息
****************************************************************************/
void updateDisplaySystemTPFVStrategyPeriodSetData_Czech(char* strStopSOC,char* strPower, TPFV_TypeDef enum_tpfv, TPFV_Strategy_TypeDef enumTPFVPeriod)
{
    
}
/***************************************************************************
 功能:荷兰语 系统TPFV策略时间段设置界面信息
****************************************************************************/
void updateDisplaySystemTPFVStrategyPeriodSetData_Dutch(char* strStopSOC,char* strPower, TPFV_TypeDef enum_tpfv, TPFV_Strategy_TypeDef enumTPFVPeriod)
{
    
}

/***************************************************************************
 功能:根据上一次界面操作类型和本次操作类型判断本次系统自发自用策略设置 selfStrategySET界面切换
****************************************************************************/
void updateDisplaySystemSelfStrategySetData(KeyAction_TypeDef nowActionType,DisplayAction_TypeDef nowDisplayType) 
{
    //static uint8_t sU8TPFVStrategyCounter = 0;  
    switch(nowActionType) 
    {
        case KEYACTION_ENTER:
            {
                gCurrentMenu.eCurrentDisplayMenuType = nowDisplayType;
                generateOperationRecord(RECORD_SET_STRATEGY_SELFUSE);
            }
            break;
        case KEYACTION_ESC:
            {
                gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_SET_SYSTEM_STRATEGY;
            }
            break;
        case KEYACTION_NULL:
        default:
            {
                gCurrentMenu.eCurrentDisplayMenuType = nowDisplayType;
            }
            break;
    } 
    
    if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_ENGLISH) //系统SELF策略设置 英文界面组装
    { 
        updateDisplaySystemSelfStrategySetData_English();                    
    }
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_CHINESE)//系统SELF策略设置 中文界面组装
    {
        updateDisplaySystemSelfStrategySetData_Chinese();
    }    
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_SPANISH)//系统SELF策略设置 西班牙界面组装
    { 
        updateDisplaySystemSelfStrategySetData_Spanish();
    } 
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_GERMAN)//系统SELF策略设置 德语界面组装
    { 
        updateDisplaySystemSelfStrategySetData_German();
    } 
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_FRENCH)//系统SELF策略设置 法语界面组装
    { 
        updateDisplaySystemSelfStrategySetData_French();                     
    }   
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_POLISH)//系统SELF策略设置 波兰界面组装
    {
        updateDisplaySystemSelfStrategySetData_Polish();
    }    
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_ITALIAN)//系统SELF策略设置 意大利界面组装
    {
        updateDisplaySystemSelfStrategySetData_Italian();                   
    } 
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_CZECH)//系统SELF策略设置 捷克界面组装
    { 
        updateDisplaySystemSelfStrategySetData_Czech();                  
    }   
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_DUTCH)//系统SELF策略设置 荷兰界面组装
    { 
        updateDisplaySystemSelfStrategySetData_Dutch();                 
    }
    else
    {   
        updateDisplaySystemSelfStrategySetData_English();                    
    }       
}
/***************************************************************************
 功能:英文 系统SELF策略设置界面信息
****************************************************************************/
void updateDisplaySystemSelfStrategySetData_English()
{  
    memset(tab_display,0,DISPLAY_CACHE_SIZE);  
    sprintf(tab_display,"    SELF Strategy    \n                     \n                     \n                     \n");                                                                                                                                                              
    //GUI_DispStringAt((uint8_t*)tab_display, 0, 0);  
    GUI_Display(tab_display, 0, 0);
}


/***************************************************************************
 功能:西班牙 系统SELF策略设置界面信息
****************************************************************************/
void updateDisplaySystemSelfStrategySetData_Spanish()
{  
    
}

/***************************************************************************
 功能:德语 系统SELF策略设置界面信息
****************************************************************************/
void updateDisplaySystemSelfStrategySetData_German()
{   
    
}

/***************************************************************************
 功能:法语 系统SELF策略设置界面信息
****************************************************************************/
void updateDisplaySystemSelfStrategySetData_French()
{  
    
}

/***************************************************************************
 功能:波兰语 系统SELF策略设置界面信息
****************************************************************************/
void updateDisplaySystemSelfStrategySetData_Polish()
{  
    
}

/***************************************************************************
 功能:意大利语 系统SELF策略设置界面信息
****************************************************************************/
void updateDisplaySystemSelfStrategySetData_Italian()
{  
    
}

/***************************************************************************
 功能:捷克语 系统SELF策略设置界面信息
****************************************************************************/
void updateDisplaySystemSelfStrategySetData_Czech()
{ 
    
}

/***************************************************************************
 功能:荷兰语 系统SELF策略设置界面信息
****************************************************************************/
void updateDisplaySystemSelfStrategySetData_Dutch()
{  
    
}

/***************************************************************************
 功能:根据上一次界面操作类型和本次操作类型判断本次系统备电策略设置 selfStrategySET界面切换
****************************************************************************/
void updateDisplaySystemBackupStrategySetData(KeyAction_TypeDef nowActionType,DisplayAction_TypeDef nowDisplayType) 
{
    static uint8_t sU8BackupStrategyCounter = 0; 
    static uint8_t sU8BackupCounter  = 0;
    
    switch(nowActionType)
    {
        case KEYACTION_ENTER:
            {
                if(gbEditFlag != STATUS_FALSE)
                {
                    int16_t s16RatePower = atoi(tab_Rate_Power_modify+1);
                    if(tab_Rate_Power_modify[0] == '+')
                    {
                        s16RatePower = s16RatePower * 1;
                    }
                    else
                    {
                        s16RatePower = s16RatePower * -1;
                    }
                    gDisplay.stDisplaySet.stStrategy.stBackupStrategy.s16RatedPower = s16RatePower;
                    sprintf(tab_Rate_Power,"%s",tab_Rate_Power_modify);
                    sU8BackupStrategyCounter = 0;
                    sU8BackupCounter = 0;
                    gbEditFlag = STATUS_FALSE;
                    generateOperationRecord(RECORD_SET_STRATEGY_BACKUP);
                }
                Display_Set_UnderLine_Blink_Position(STATUS_FALSE,0,0);
                gCurrentMenu.eCurrentDisplayMenuType = nowDisplayType;
            }
            break;
        case KEYACTION_ESC:
            {
                gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_SET_SYSTEM_STRATEGY; 
                sU8BackupStrategyCounter = 0;
                sU8BackupCounter = 0;
                gbEditFlag = STATUS_FALSE;//退出编辑模式
                Display_Set_UnderLine_Blink_Position(STATUS_FALSE,0,0);
            }
            break;
        case KEYACTION_DOWN:
            {
                if(gbEditFlag != STATUS_TRUE)
                {
                    gbEditFlag = STATUS_TRUE;
                    sprintf(tab_Rate_Power_modify,"%s",tab_Rate_Power);
                }
                
                sU8BackupCounter++;
                
                if(sU8BackupStrategyCounter == 0) //额定功率的正负号
                {
                    /*
                   if(sU8BackupCounter >= 2)
                   {
                       sU8BackupCounter = 0;
                   }
                   
                   if(sU8BackupCounter == 0)
                   {
                       tab_Rate_Power_modify[0] =  '+';
                   }
                   else 
                   {
                       tab_Rate_Power_modify[0] =  '-'; 
                   }
                   */
                   tab_Rate_Power_modify[0] =  '+';
                } 
                else if(sU8BackupStrategyCounter == 1)//额定功率的第一个数字
                {
                    if(sU8BackupCounter > 6)
                    { 
                         sU8BackupCounter = 0;
                    }
                    tab_Rate_Power_modify[1] = '0' + sU8BackupCounter;
                }
                else if(sU8BackupStrategyCounter == 2)//额定功率的第二个数字
                {
                    if(tab_Rate_Power_modify[1] != '6')
                    {
                        if(sU8BackupCounter > 9)
                        { 
                            sU8BackupCounter = 0;
                        }
                    }
                    else
                    {
                        sU8BackupCounter = 0;
                    }
                    tab_Rate_Power_modify[2] =  '0' + sU8BackupCounter;
                }
                else if(sU8BackupStrategyCounter == 3)//额定功率的第三个数字
                {
                    if(tab_Rate_Power_modify[1] != '6')
                    {
                        if(sU8BackupCounter > 9)
                        { 
                            sU8BackupCounter = 0;
                        }
                    }
                    else
                    {
                        sU8BackupCounter = 0;
                    }
                    tab_Rate_Power_modify[3] =  '0' + sU8BackupCounter;
                }
                else if(sU8BackupStrategyCounter == 4)//额定功率的第四个数字
                {
                    if(tab_Rate_Power_modify[1] != '6')
                    {
                        if(sU8BackupCounter > 9)
                        { 
                            sU8BackupCounter = 0;
                        }
                    }
                    else
                    {
                        sU8BackupCounter = 0;
                    }
                    tab_Rate_Power_modify[4] =  '0' + sU8BackupCounter;
                }
                
                gCurrentMenu.eCurrentDisplayMenuType = nowDisplayType;
            }
            break;
        case KEYACTION_UP:
            {
                if(gbEditFlag != STATUS_TRUE)
                {
                    gbEditFlag = STATUS_TRUE;
                    sprintf(tab_Rate_Power_modify,"%s",tab_Rate_Power);
                }
                
                sU8BackupCounter--;
                
                if(sU8BackupStrategyCounter == 0) //额定功率的正负号
                {
                    /*
                   if(sU8BackupCounter >= 2)
                   {
                       sU8BackupCounter = 1;
                   }
                   
                   if(sU8BackupCounter == 0)
                   {     
                       tab_Rate_Power_modify[0] =  '+';
                   }
                   else 
                   {
                       tab_Rate_Power_modify[0] =  '-';
                   }
                   */
                   tab_Rate_Power_modify[0] =  '+';
                }
                else if(sU8BackupStrategyCounter == 1)
                {
                    if(!(sU8BackupCounter<=6))
                    {
                        sU8BackupCounter = 6;
                    }
                    tab_Rate_Power_modify[1] = '0' + sU8BackupCounter;
                }
                else if(sU8BackupStrategyCounter == 2)
                {
                    if(tab_Rate_Power_modify[1] != '6')
                    {
                        if(!(sU8BackupCounter<=9))
                        {
                            sU8BackupCounter = 9;
                        }
                    }
                    else
                    {
                        sU8BackupCounter = 0;
                    }

                    tab_Rate_Power_modify[2] = '0' + sU8BackupCounter;
                }
                else if(sU8BackupStrategyCounter == 3)
                {
                    if(tab_Rate_Power_modify[1] != '6')
                    {
                        if(!(sU8BackupCounter<=9))
                        {
                            sU8BackupCounter = 9;
                        }
                    }
                    else
                    {
                        sU8BackupCounter = 0;
                    }
                    tab_Rate_Power_modify[3] =  '0' + sU8BackupCounter;
                }
                else if(sU8BackupStrategyCounter == 4)
                {
                    if(tab_Rate_Power_modify[1] != '6')
                    {
                        if(!(sU8BackupCounter<=9))
                        {
                            sU8BackupCounter = 9;
                        }
                    }
                    else
                    {
                        sU8BackupCounter = 0;
                    }
                    tab_Rate_Power_modify[4] =  '0' + sU8BackupCounter;
                }
                
               gCurrentMenu.eCurrentDisplayMenuType = nowDisplayType;
            }
            break;
        case KEYACTION_UPDOWN://在尖峰平谷分时设置界面下，UP键 + DOWN键同时按下，切换设置下一个数据
            {
                sU8BackupCounter = 0;
                sU8BackupStrategyCounter++;
                if(sU8BackupStrategyCounter == DISPLAY_SET_SYSTEM_STRATEGY_BACKUP_RATEPOWER_COUNT)
                {
                    sU8BackupStrategyCounter = 0;
                }
                gCurrentMenu.eCurrentDisplayMenuType = nowDisplayType;
            }
            break;
        case KEYACTION_NULL:
        default:
            {
                if(gbEditFlag == STATUS_FALSE)
                {
                    sprintf(tab_Rate_Power_modify+1,"%04d",gDisplay.stDisplaySet.stStrategy.stBackupStrategy.s16RatedPower);
                }
                gCurrentMenu.eCurrentDisplayMenuType = nowDisplayType;
            }
            break;
    }
    
    if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_ENGLISH) //系统SELF策略设置 英文界面组装
    { 
        if(gbEditFlag == STATUS_TRUE)
        {
            Display_Set_UnderLine_Blink_Position(STATUS_TRUE,arrayBACKUPStartegyFlicker[sU8BackupStrategyCounter].u8StartPos,arrayBACKUPStartegyFlicker[sU8BackupStrategyCounter].u8EndPos);
            updateDisplaySystemBackupStrategySetData_English(tab_Rate_Power_modify);  
        }
        else
        {
            updateDisplaySystemBackupStrategySetData_English(tab_Rate_Power);
        }
    }
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_CHINESE)//系统SELF策略设置 中文界面组装
    {
        if(gbEditFlag == STATUS_TRUE)
        {
            //Display_Set_UnderLine_Blink_Position(STATUS_TRUE,arrayBACKUPStartegyFlickerChinese[sU8BackupStrategyCounter].u8StartPos,arrayBACKUPStartegyFlickerChinese[sU8BackupStrategyCounter].u8EndPos);
            updateDisplaySystemBackupStrategySetData_Chinese(tab_Rate_Power_modify);  
        }
        else
        {
            updateDisplaySystemBackupStrategySetData_Chinese(tab_Rate_Power);
        }
    }    
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_SPANISH)//系统SELF策略设置 西班牙界面组装
    {
        updateDisplaySystemBackupStrategySetData_Spanish(tab_Rate_Power);
    }
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_GERMAN)//系统SELF策略设置 德语界面组装
    {
        updateDisplaySystemBackupStrategySetData_German(tab_Rate_Power);
    }
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_FRENCH)//系统SELF策略设置 法语界面组装
    {
        updateDisplaySystemBackupStrategySetData_French(tab_Rate_Power);
    }
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_POLISH)//系统SELF策略设置 波兰界面组装
    {
        updateDisplaySystemBackupStrategySetData_Polish(tab_Rate_Power);
    }
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_ITALIAN)//系统SELF策略设置 意大利界面组装
    {
        updateDisplaySystemBackupStrategySetData_Italian(tab_Rate_Power);
    }
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_CZECH)//系统SELF策略设置 捷克界面组装
    {
        updateDisplaySystemBackupStrategySetData_Czech(tab_Rate_Power);
    }
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_DUTCH)//系统SELF策略设置 荷兰界面组装
    {
        updateDisplaySystemBackupStrategySetData_Dutch(tab_Rate_Power);
    }
    else
    {
        updateDisplaySystemBackupStrategySetData_English(tab_Rate_Power);
    }
}
/***************************************************************************
 功能:英文 系统SELF策略设置界面信息
****************************************************************************/
void updateDisplaySystemBackupStrategySetData_English(char* strPower)
{  
    memset(tab_display,0,DISPLAY_CACHE_SIZE);  
    sprintf(tab_display,"   BACKUP Strategy   \n                     \nRate Power:%s\n                     \n",strPower);                                                                                                                                                              
    //GUI_DispStringAt((uint8_t*)tab_display, 0, 0);  
    GUI_Display(tab_display, 0, 0);
}


/***************************************************************************
 功能:西班牙 系统SELF策略设置界面信息
****************************************************************************/
void updateDisplaySystemBackupStrategySetData_Spanish(char* strPower)
{  
    
}

/***************************************************************************
 功能:德语 系统SELF策略设置界面信息
****************************************************************************/
void updateDisplaySystemBackupStrategySetData_German(char* strPower)
{   
    
}

/***************************************************************************
 功能:法语 系统SELF策略设置界面信息
****************************************************************************/
void updateDisplaySystemBackupStrategySetData_French(char* strPower)
{  
    
}

/***************************************************************************
 功能:波兰语 系统SELF策略设置界面信息
****************************************************************************/
void updateDisplaySystemBackupStrategySetData_Polish(char* strPower)
{  
    
}

/***************************************************************************
 功能:意大利语 系统SELF策略设置界面信息
****************************************************************************/
void updateDisplaySystemBackupStrategySetData_Italian(char* strPower)
{  
    
}

/***************************************************************************
 功能:捷克语 系统SELF策略设置界面信息
****************************************************************************/
void updateDisplaySystemBackupStrategySetData_Czech(char* strPower)
{
    
}

/***************************************************************************
 功能:荷兰语 系统SELF策略设置界面信息
****************************************************************************/
void updateDisplaySystemBackupStrategySetData_Dutch(char* strPower)
{  
    
}

/***************************************************************************
功能:根据上一次界面操作类型和本次操作类型判断本次系统发电机策略设置 GenStrategySET界面切换
****************************************************************************/
void updateDisplaySystemGenStrategySetData(KeyAction_TypeDef nowActionType,DisplayAction_TypeDef nowDisplayType) 
{
    static uint8_t sU8GenStrategyCounter = 0;
    static uint8_t sU8GenCounter  = 0;
    
    switch(nowActionType) 
    {
        case KEYACTION_ENTER:
            {
                if(gbEditFlag != STATUS_FALSE)
                {
                    uint8_t u8ForbidSOC = atoi(tab_Forbid_SOC_modify); 
                    gDisplay.stDisplaySet.stStrategy.stGenStrategy.u8ForbidSOC = u8ForbidSOC;
                    uint8_t u8SupplySOC = atoi(tab_Supply_SOC_modify); 
                    gDisplay.stDisplaySet.stStrategy.stGenStrategy.u8SupplySOC = u8SupplySOC;
                    
                    sprintf(tab_Forbid_SOC,"%s",tab_Forbid_SOC_modify);
                    sprintf(tab_Supply_SOC,"%s",tab_Supply_SOC_modify);
                    sU8GenStrategyCounter = 0;
                    sU8GenCounter = 0;
                    gCurrentMenu.eCurrentDisplayMenuType = nowDisplayType;
                    gbEditFlag = STATUS_FALSE;
                    Display_Set_UnderLine_Blink_Position(STATUS_FALSE,0,0);
                    generateOperationRecord(RECORD_SET_STRATEGY_GEN);
                }
            }
            break;
        case KEYACTION_ESC:
            {
                sU8GenCounter = 0;
                sU8GenStrategyCounter = 0;
                gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_SET_SYSTEM_STRATEGY;
                gbEditFlag = STATUS_FALSE;
                Display_Set_UnderLine_Blink_Position(STATUS_FALSE,0,0);
            }
            break;
        case KEYACTION_DOWN:
            { 
                if(gbEditFlag != STATUS_TRUE)
                {
                    gbEditFlag = STATUS_TRUE;
                    sprintf(tab_Forbid_SOC_modify,"%s",tab_Forbid_SOC);
                    sprintf(tab_Supply_SOC_modify,"%s",tab_Supply_SOC);
                }
                
                sU8GenCounter++;
                
                if(sU8GenStrategyCounter == 0) 
                {
                    if(sU8GenCounter > 1)
                    {
                        sU8GenCounter = 0;
                    } 
                    
                    tab_Forbid_SOC_modify[0] =  '0' + sU8GenCounter;
                    
                    if(tab_Forbid_SOC_modify[0] == '1')
                    {
                       tab_Forbid_SOC_modify[1] =  '0';
                       tab_Forbid_SOC_modify[2] =  '0';
                    } 
                } 
                else if(sU8GenStrategyCounter == 1)
                {
                    if(tab_Forbid_SOC_modify[0] == '1')
                    {
                        sU8GenCounter = 0;
                    }
                    else
                    {
                        if(sU8GenCounter > 9)
                        {
                            sU8GenCounter = 0;
                        }
                    }
                    tab_Forbid_SOC_modify[1] =  '0' + sU8GenCounter; 
                }
                else if(sU8GenStrategyCounter == 2)
                {
                    if(tab_Forbid_SOC_modify[0] == '1')
                    {
                        sU8GenCounter = 0;
                    }
                    else
                    {
                        if(sU8GenCounter > 9)
                        {
                            sU8GenCounter = 0;
                        }
                    } 
                    tab_Forbid_SOC_modify[2] =  '0' + sU8GenCounter;  
                }
                else if(sU8GenStrategyCounter == 3)
                {
                    if(sU8GenCounter > 1)
                    {
                        sU8GenCounter = 0;
                    }
                    tab_Supply_SOC_modify[0] =  '0' + sU8GenCounter;  

                    if(tab_Supply_SOC_modify[0] == '1')
                    {
                       tab_Supply_SOC_modify[1] =  '0';
                       tab_Supply_SOC_modify[2] =  '0';
                    }
                }
                else if(sU8GenStrategyCounter == 4)
                {
                    if(tab_Supply_SOC_modify[0] == '1')
                    {
                        sU8GenCounter = 0;
                    }
                    else
                    {
                        if(sU8GenCounter > 9)
                        {
                            sU8GenCounter = 1;
                        }
                    } 
                    tab_Supply_SOC_modify[1] =  '0' + sU8GenCounter;
                }
                else if(sU8GenStrategyCounter == 5)
                {
                    if(tab_Supply_SOC_modify[0] == '1')
                    {
                        sU8GenCounter = 0;
                    }
                    else
                    {
                        if(sU8GenCounter > 9)
                        {
                            sU8GenCounter = 0;
                        }
                    } 
                    tab_Supply_SOC_modify[2] =  '0' + sU8GenCounter;  
                }
                gCurrentMenu.eCurrentDisplayMenuType = nowDisplayType;
            }
            break;
        case KEYACTION_UP:
            {
                if(gbEditFlag != STATUS_TRUE)
                {
                    gbEditFlag = STATUS_TRUE;   
                    sprintf(tab_Forbid_SOC_modify,"%s",tab_Forbid_SOC);
                    sprintf(tab_Supply_SOC_modify,"%s",tab_Supply_SOC);
                }
                
                sU8GenCounter--;
                
                if(sU8GenStrategyCounter == 0)
                {
                    if(!(sU8GenCounter <= 1))
                    {
                        sU8GenCounter = 1;
                    }
                    tab_Forbid_SOC_modify[0] =  '0' + sU8GenCounter;
                    
                    if(tab_Forbid_SOC_modify[0] == '1')
                    {
                       tab_Forbid_SOC_modify[1] =  '0';
                       tab_Forbid_SOC_modify[2] =  '0';
                    }
                }
                else if(sU8GenStrategyCounter == 1)
                {
                    if(tab_Forbid_SOC_modify[0] == '1')
                    {
                       sU8GenCounter = 0;
                    }
                    else
                    {
                        if(!(sU8GenCounter<=9))
                        {
                            sU8GenCounter = 9;
                        }
                    }
                    tab_Forbid_SOC_modify[1] =  '0' + sU8GenCounter;
                }
                else if(sU8GenStrategyCounter == 2)
                {
                    if(tab_Forbid_SOC_modify[0] == '1')
                    {
                       sU8GenCounter = 0; 
                    }
                    else
                    {
                        if(!(sU8GenCounter<=9))
                        {
                            sU8GenCounter = 9;
                        }  
                    } 
                    tab_Forbid_SOC_modify[2] =  '0' + sU8GenCounter;
                }
                else if(sU8GenStrategyCounter == 3)
                {
                    if(!(sU8GenCounter <= 1))
                    {
                        sU8GenCounter = 1;
                    }
                    tab_Supply_SOC_modify[0] =  '0' + sU8GenCounter;
                    
                    if(tab_Supply_SOC_modify[0] == '1')
                    {
                       tab_Supply_SOC_modify[1] =  '0';
                       tab_Supply_SOC_modify[2] =  '0';
                    }  
                }
                else if(sU8GenStrategyCounter == 4)
                {
                    if(tab_Supply_SOC_modify[0] == '1')
                    {
                       sU8GenCounter = 0; 
                    }
                    else
                    {
                        if(!((sU8GenCounter<=9)&&((sU8GenCounter>=1))))
                        {
                            sU8GenCounter = 9;
                        }  
                    } 
                    tab_Supply_SOC_modify[1] =  '0' + sU8GenCounter;
                }
                else if(sU8GenStrategyCounter == 5)
                {
                    if(tab_Supply_SOC_modify[0] == '1')
                    {
                       sU8GenCounter = 0; 
                    }
                    else
                    {
                        if(!(sU8GenCounter<=9))
                        {
                            sU8GenCounter = 9;
                        }  
                    } 
                    tab_Supply_SOC_modify[2] =  '0' + sU8GenCounter;
                }
                gCurrentMenu.eCurrentDisplayMenuType = nowDisplayType;
            }
            break;
        case KEYACTION_UPDOWN:
            {
                sU8GenCounter = 0;
                sU8GenStrategyCounter++;
                if(sU8GenStrategyCounter == DISPLAY_SET_SYSTEM_STRATEGY_GEN_SOC_COUNT)
                {
                    sU8GenStrategyCounter = 0;
                }
                gCurrentMenu.eCurrentDisplayMenuType = nowDisplayType;
            }break;
        case KEYACTION_NULL:
        default:
            {
                if(gbEditFlag == STATUS_FALSE)
                {
                    sprintf(tab_Forbid_SOC_modify,"%03d",gDisplay.stDisplaySet.stStrategy.stGenStrategy.u8ForbidSOC);
                    sprintf(tab_Supply_SOC_modify,"%03d",gDisplay.stDisplaySet.stStrategy.stGenStrategy.u8SupplySOC);
                }
                gCurrentMenu.eCurrentDisplayMenuType = nowDisplayType;
            }
            break;
    }
    
    if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_ENGLISH) //系统Gen策略设置 英文界面组装
    {
        if(gbEditFlag == STATUS_TRUE)
        {
            Display_Set_UnderLine_Blink_Position(STATUS_TRUE,arrayGENStartegyFlicker[sU8GenStrategyCounter].u8StartPos,arrayGENStartegyFlicker[sU8GenStrategyCounter].u8EndPos);
            updateDisplaySystemGenStrategySetData_English(tab_Forbid_SOC_modify,tab_Supply_SOC_modify); 
        }
        else 
        {
            updateDisplaySystemGenStrategySetData_English(tab_Forbid_SOC,tab_Supply_SOC);
        }
    }
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_CHINESE)//系统Gen策略设置 中文界面组装
    {
        if(gbEditFlag == STATUS_TRUE)
        {
            //Display_Set_UnderLine_Blink_Position(STATUS_TRUE,arrayGENStartegyFlickerChinese[sU8GenStrategyCounter].u8StartPos,arrayGENStartegyFlickerChinese[sU8GenStrategyCounter].u8EndPos);
            updateDisplaySystemGenStrategySetData_Chinese(tab_Forbid_SOC_modify,tab_Supply_SOC_modify); 
        }
        else 
        {
            updateDisplaySystemGenStrategySetData_Chinese(tab_Forbid_SOC,tab_Supply_SOC);  
        }  
    }    
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_SPANISH)//系统Gen策略设置 西班牙界面组装
    {
        updateDisplaySystemGenStrategySetData_Spanish(tab_Forbid_SOC,tab_Supply_SOC);
    }
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_GERMAN)//系统Gen策略设置 德语界面组装
    {
        updateDisplaySystemGenStrategySetData_German(tab_Forbid_SOC,tab_Supply_SOC);
    }
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_FRENCH)//系统Gen策略设置 法语界面组装
    {
        updateDisplaySystemGenStrategySetData_French(tab_Forbid_SOC,tab_Supply_SOC);                     
    }   
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_POLISH)//系统Gen策略设置 波兰界面组装
    {
        updateDisplaySystemGenStrategySetData_Polish(tab_Forbid_SOC,tab_Supply_SOC);
    }    
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_ITALIAN)//系统Gen策略设置 意大利界面组装
    {
        updateDisplaySystemGenStrategySetData_Italian(tab_Forbid_SOC,tab_Supply_SOC);                   
    }
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_CZECH)//系统Gen策略设置 捷克界面组装
    {
        updateDisplaySystemGenStrategySetData_Czech(tab_Forbid_SOC,tab_Supply_SOC);                  
    }   
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_DUTCH)//系统Gen策略设置 荷兰界面组装
    {
        updateDisplaySystemGenStrategySetData_Dutch(tab_Forbid_SOC,tab_Supply_SOC);                 
    }
    else
    {   
        updateDisplaySystemGenStrategySetData_English(tab_Forbid_SOC,tab_Supply_SOC);                    
    }
}

/***************************************************************************
 功能:英文 系统发电机策略设置界面信息
****************************************************************************/
void updateDisplaySystemGenStrategySetData_English(char* strForbidSOC,char* strSupplySOC)
{
    memset(tab_display,0,DISPLAY_CACHE_SIZE);
    sprintf(tab_display,"     Gen Strategy    \nDisable SOC:%s      \nSupply SOC:%s       \n                     \n",strForbidSOC,strSupplySOC);
    //GUI_DispStringAt((uint8_t*)tab_display, 0, 0);
    GUI_Display(tab_display, 0, 0);
}


/***************************************************************************
 功能:西班牙 系统发电机策略设置界面信息
****************************************************************************/
void updateDisplaySystemGenStrategySetData_Spanish(char* strForbidSOC,char* strSupplySOC)
{  
    
}

/***************************************************************************
 功能:德语 系统发电机策略设置界面信息
****************************************************************************/
void updateDisplaySystemGenStrategySetData_German(char* strForbidSOC,char* strSupplySOC)
{   
    
}

/***************************************************************************
 功能:法语 系统发电机策略设置界面信息
****************************************************************************/
void updateDisplaySystemGenStrategySetData_French(char* strForbidSOC,char* strSupplySOC)
{  
    
}

/***************************************************************************
 功能:波兰语 系统发电机策略设置界面信息
****************************************************************************/
void updateDisplaySystemGenStrategySetData_Polish(char* strForbidSOC,char* strSupplySOC)
{  
    
}

/***************************************************************************
 功能:意大利语 系统发电机策略设置界面信息
****************************************************************************/
void updateDisplaySystemGenStrategySetData_Italian(char* strForbidSOC,char* strSupplySOC)
{  
    
}

/***************************************************************************
 功能:捷克语 系统发电机策略设置界面信息
****************************************************************************/
void updateDisplaySystemGenStrategySetData_Czech(char* strForbidSOC,char* strSupplySOC)
{ 
    
}

/***************************************************************************
功能:荷兰语 系统发电机策略设置界面信息
****************************************************************************/
void updateDisplaySystemGenStrategySetData_Dutch(char* strForbidSOC,char* strSupplySOC)
{  
    
}

/***************************************************************************
功能:根据上一次界面操作类型和本次操作类型判断本次系统定时充放电策略策略设置 RegularStrategySET界面切换
****************************************************************************/
void updateDisplaySystemRegularStrategyAbstractSetData(KeyAction_TypeDef nowActionType,DisplayAction_TypeDef nowDisplayType) 
{
    static uint8_t sU8RegularStrategyCounter = 0; 
    switch(nowActionType) 
    { 
        case KEYACTION_ENTER:
            {
                if(sU8RegularStrategyCounter == REGULAR_CHARGE) 
                {
                    gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_SET_SYSTEM_STRATEGY_REGULAR_CHARGE;
                } 
                else if(sU8RegularStrategyCounter == REGULAR_DISCHARGE)
                {
                    gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_SET_SYSTEM_STRATEGY_REGULAR_DISCHARGE;
                }
                sU8RegularStrategyCounter = 0;
            }
            break;
        case KEYACTION_ESC:
            {
                gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_SET_SYSTEM_STRATEGY;                
            }
            break;
        case KEYACTION_DOWN:
            {
                sU8RegularStrategyCounter++;
                if(sU8RegularStrategyCounter == DISPLAY_SET_SYSTEM_STRATEGY_REGULAR_CLASS_COUNT)
                {
                    sU8RegularStrategyCounter = 0;  
                }  
                gCurrentMenu.eCurrentDisplayMenuType = nowDisplayType;                
            }
            break;
        case KEYACTION_UP:
            {
                sU8RegularStrategyCounter--;
                if(sU8RegularStrategyCounter >= DISPLAY_SET_SYSTEM_STRATEGY_REGULAR_CLASS_COUNT)
                {
                    sU8RegularStrategyCounter = DISPLAY_SET_SYSTEM_STRATEGY_REGULAR_CLASS_COUNT - 1;  
                } 
                gCurrentMenu.eCurrentDisplayMenuType = nowDisplayType;                 
            }
            break;
        case KEYACTION_NULL:
        default:
            {
                gCurrentMenu.eCurrentDisplayMenuType = nowDisplayType;
            }
            break;
    } 
    
    if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_ENGLISH) //系统定时充放电策略设置 英文界面组装
    { 
        updateDisplaySystemRegularStrategyAbstractSetData_English((REGULAR_TypeDef)sU8RegularStrategyCounter);                    
    }
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_CHINESE)//系统定时充放电策略设置 中文界面组装
    {
        updateDisplaySystemRegularStrategyAbstractSetData_Chinese((REGULAR_TypeDef)sU8RegularStrategyCounter);
    }    
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_SPANISH)//系统定时充放电策略设置 西班牙界面组装
    { 
        updateDisplaySystemRegularStrategyAbstractSetData_Spanish((REGULAR_TypeDef)sU8RegularStrategyCounter);
    } 
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_GERMAN)//系统定时充放电策略设置 德语界面组装
    { 
        updateDisplaySystemRegularStrategyAbstractSetData_German((REGULAR_TypeDef)sU8RegularStrategyCounter);
    } 
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_FRENCH)//系统定时充放电策略设置 法语界面组装
    { 
        updateDisplaySystemRegularStrategyAbstractSetData_French((REGULAR_TypeDef)sU8RegularStrategyCounter);                     
    }   
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_POLISH)//系统定时充放电策略设置 波兰界面组装
    {
        updateDisplaySystemRegularStrategyAbstractSetData_Polish((REGULAR_TypeDef)sU8RegularStrategyCounter);
    }    
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_ITALIAN)//系统定时充放电策略设置 意大利界面组装
    {
        updateDisplaySystemRegularStrategyAbstractSetData_Italian((REGULAR_TypeDef)sU8RegularStrategyCounter);                   
    } 
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_CZECH)//系统定时充放电策略设置 捷克界面组装
    { 
        updateDisplaySystemRegularStrategyAbstractSetData_Czech((REGULAR_TypeDef)sU8RegularStrategyCounter);                  
    }   
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_DUTCH)//系统定时充放电策略设置 荷兰界面组装
    { 
        updateDisplaySystemRegularStrategyAbstractSetData_Dutch((REGULAR_TypeDef)sU8RegularStrategyCounter);                 
    }
    else
    {   
        updateDisplaySystemRegularStrategyAbstractSetData_English((REGULAR_TypeDef)sU8RegularStrategyCounter);                    
    }        
}

/***************************************************************************
功能:定时充放电设置 英文界面信息
****************************************************************************/
void updateDisplaySystemRegularStrategyAbstractSetData_English(REGULAR_TypeDef u8RegularStrategyIndex)    
{
    memset(tab_display,0,DISPLAY_CACHE_SIZE);
    
    if(u8RegularStrategyIndex == REGULAR_CHARGE)
    {
        sprintf(tab_display,"   Regular Strategy  \n->Charge             \nDisCharge            \n                     \n"); 
    }
    else if(u8RegularStrategyIndex == REGULAR_DISCHARGE)
    {
        sprintf(tab_display,"   Regular Strategy  \nCharge               \n->DisCharge          \n                     \n");   
    }
                     
    //GUI_DispStringAt((uint8_t*)tab_display, 0, 0); 
    GUI_Display(tab_display, 0, 0);
}


/***************************************************************************
功能:定时充放电设置西班牙界面信息
****************************************************************************/
void updateDisplaySystemRegularStrategyAbstractSetData_Spanish(REGULAR_TypeDef u8RegularStrategyIndex)   
{
    
}
/***************************************************************************
功能:定时充放电设置德语界面信息
****************************************************************************/
void updateDisplaySystemRegularStrategyAbstractSetData_German(REGULAR_TypeDef u8RegularStrategyIndex)   
{
    
}
/***************************************************************************
功能:定时充放电设置法语界面信息
****************************************************************************/
void updateDisplaySystemRegularStrategyAbstractSetData_French(REGULAR_TypeDef u8RegularStrategyIndex)   
{
    
}
/***************************************************************************
功能:定时充放电设置波兰语界面信息
****************************************************************************/
void updateDisplaySystemRegularStrategyAbstractSetData_Polish(REGULAR_TypeDef u8RegularStrategyIndex)   
{
    
}
/***************************************************************************
功能:定时充放电设置荷兰语界面信息
****************************************************************************/
void updateDisplaySystemRegularStrategyAbstractSetData_Dutch(REGULAR_TypeDef u8RegularStrategyIndex)   
{
    
}
/***************************************************************************
功能:定时充放电设置捷克语界面信息
****************************************************************************/
void updateDisplaySystemRegularStrategyAbstractSetData_Czech(REGULAR_TypeDef u8RegularStrategyIndex)   
{
    
}
/***************************************************************************
功能:定时充放电设置意大利语界面信息
****************************************************************************/
void updateDisplaySystemRegularStrategyAbstractSetData_Italian(REGULAR_TypeDef u8RegularStrategyIndex)   
{
    
}

/***************************************************************************
功能:根据上一次界面操作类型和本次操作类型判断本次系统定时充放电策略策略设置 RegularStrategySET界面切换
****************************************************************************/
void updateDisplaySystemRegularStrategySetData(KeyAction_TypeDef nowActionType,DisplayAction_TypeDef nowDisplayType,REGULAR_TypeDef enum_RegularClass) 
{
    static uint8_t sU8RegularSetCounter = 0;
    
    switch(nowActionType) 
    { 
        case KEYACTION_ENTER:
            {
                if(enum_RegularClass == REGULAR_CHARGE)
                {
                    if(sU8RegularSetCounter == STRATEGY_REGULAR_PERIOD_ONE)
                    {
                        gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_SET_SYSTEM_STRATEGY_REGULAR_CHARGE_PERIOD_ONE;
                    }  
                    else if(sU8RegularSetCounter == STRATEGY_REGULAR_PERIOD_TWO)
                    {
                        gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_SET_SYSTEM_STRATEGY_REGULAR_CHARGE_PERIOD_TWO;
                    } 
                    else if(sU8RegularSetCounter == STRATEGY_REGULAR_PERIOD_THREE)
                    {
                        gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_SET_SYSTEM_STRATEGY_REGULAR_CHARGE_PERIOD_THREE;
                    } 
                    else if(sU8RegularSetCounter == STRATEGY_REGULAR_PERIOD_FOUR)
                    {
                        gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_SET_SYSTEM_STRATEGY_REGULAR_CHARGE_PERIOD_FOUR;
                    } 
                }
                else if(enum_RegularClass == REGULAR_DISCHARGE) 
                {
                    if(sU8RegularSetCounter == STRATEGY_REGULAR_PERIOD_ONE)
                    {
                        gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_SET_SYSTEM_STRATEGY_REGULAR_DISCHARGE_PERIOD_ONE;
                    }  
                    else if(sU8RegularSetCounter == STRATEGY_REGULAR_PERIOD_TWO)
                    {
                        gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_SET_SYSTEM_STRATEGY_REGULAR_DISCHARGE_PERIOD_TWO;
                    } 
                    else if(sU8RegularSetCounter == STRATEGY_REGULAR_PERIOD_THREE)
                    {
                        gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_SET_SYSTEM_STRATEGY_REGULAR_DISCHARGE_PERIOD_THREE;
                    } 
                    else if(sU8RegularSetCounter == STRATEGY_REGULAR_PERIOD_FOUR)
                    {
                        gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_SET_SYSTEM_STRATEGY_REGULAR_DISCHARGE_PERIOD_FOUR;
                    }                    
                }                 
            }
            break;
        case KEYACTION_DOWN:
            {
                sU8RegularSetCounter++;
                if(sU8RegularSetCounter == DISPLAY_SET_SYSTEM_STRATEGY_REGULAR_PERIOD_COUNT)
                {
                    sU8RegularSetCounter = 0;  
                }
                gCurrentMenu.eCurrentDisplayMenuType = nowDisplayType;  
            }
            break;
        case KEYACTION_UP:
            {
                sU8RegularSetCounter--;
                if(sU8RegularSetCounter >= DISPLAY_SET_SYSTEM_STRATEGY_REGULAR_PERIOD_COUNT)
                {
                    sU8RegularSetCounter = DISPLAY_SET_SYSTEM_STRATEGY_REGULAR_PERIOD_COUNT - 1;  
                }      
                gCurrentMenu.eCurrentDisplayMenuType = nowDisplayType;    
            }
            break;
        case KEYACTION_ESC:
            { 
                gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_SET_SYSTEM_STRATEGY_REGULAR;                
            }
            break;
        case KEYACTION_NULL:
        default:
            {
                gCurrentMenu.eCurrentDisplayMenuType = nowDisplayType; 
            }
            break;
    }
    
    if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_ENGLISH)
    { 
        updateDisplaySystemRegularStrategySetData_English(enum_RegularClass,(REGULAR_Strategy_TypeDef)sU8RegularSetCounter);                    
    }
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_CHINESE)
    {
        updateDisplaySystemRegularStrategySetData_Chinese(enum_RegularClass,(REGULAR_Strategy_TypeDef)sU8RegularSetCounter); 
    }
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_SPANISH)
    { 
        updateDisplaySystemRegularStrategySetData_Spanish(enum_RegularClass,(REGULAR_Strategy_TypeDef)sU8RegularSetCounter); 
    }
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_GERMAN)
    { 
        updateDisplaySystemRegularStrategySetData_German(enum_RegularClass,(REGULAR_Strategy_TypeDef)sU8RegularSetCounter);
    }
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_FRENCH)
    {
        updateDisplaySystemRegularStrategySetData_French(enum_RegularClass,(REGULAR_Strategy_TypeDef)sU8RegularSetCounter);                    
    }
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_POLISH)
    {
        updateDisplaySystemRegularStrategySetData_Polish(enum_RegularClass,(REGULAR_Strategy_TypeDef)sU8RegularSetCounter);
    }
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_ITALIAN)
    {
        updateDisplaySystemRegularStrategySetData_Italian(enum_RegularClass,(REGULAR_Strategy_TypeDef)sU8RegularSetCounter);                    
    }
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_CZECH)
    { 
        updateDisplaySystemRegularStrategySetData_Czech(enum_RegularClass,(REGULAR_Strategy_TypeDef)sU8RegularSetCounter);                    
    }
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_DUTCH)
    {
        updateDisplaySystemRegularStrategySetData_Dutch(enum_RegularClass,(REGULAR_Strategy_TypeDef)sU8RegularSetCounter);                    
    }
    else
    { 
        updateDisplaySystemRegularStrategySetData_English(enum_RegularClass,(REGULAR_Strategy_TypeDef)sU8RegularSetCounter);        
    }      
}

/***************************************************************************
功能:定时充放电设置 英文界面信息
****************************************************************************/
void updateDisplaySystemRegularStrategySetData_English(REGULAR_TypeDef enum_RegularClass,REGULAR_Strategy_TypeDef u8RegularStrategyIndex)    
{
    memset(tab_display,0,DISPLAY_CACHE_SIZE);
    
    if(enum_RegularClass == REGULAR_CHARGE)
    {
        if(u8RegularStrategyIndex == STRATEGY_REGULAR_PERIOD_ONE)
        {
            sprintf(tab_display,"        Charge       \n->Period One         \nPeriod Two           \nPeriod Three         \n"); 
        }
        else if(u8RegularStrategyIndex == STRATEGY_REGULAR_PERIOD_TWO)
        {
            sprintf(tab_display,"        Charge       \nPeriod One           \n->Period Two         \nPeriod Three         \n");    
        }
        else if(u8RegularStrategyIndex == STRATEGY_REGULAR_PERIOD_THREE)
        {
            sprintf(tab_display,"        Charge       \nPeriod One           \nPeriod Two           \n->Period Three       \n");   
        } 
        else if(u8RegularStrategyIndex == STRATEGY_REGULAR_PERIOD_FOUR)
        {
            sprintf(tab_display,"        Charge       \n->Period Four        \n                     \n                     \n");   
        }         
    }
    else if(enum_RegularClass == REGULAR_DISCHARGE)
    {
        if(u8RegularStrategyIndex == STRATEGY_REGULAR_PERIOD_ONE)
        {
            sprintf(tab_display,"      DisCharge      \n->Period One         \nPeriod Two           \nPeriod Three         \n"); 
        }
        else if(u8RegularStrategyIndex == STRATEGY_REGULAR_PERIOD_TWO)
        {
            sprintf(tab_display,"      DisCharge      \nPeriod One           \n->Period Two         \nPeriod Three         \n");    
        }
        else if(u8RegularStrategyIndex == STRATEGY_REGULAR_PERIOD_THREE)
        {
            sprintf(tab_display,"      DisCharge      \nPeriod One           \nPeriod Two           \n->Period Three       \n");   
        } 
        else if(u8RegularStrategyIndex == STRATEGY_REGULAR_PERIOD_FOUR)
        {
            sprintf(tab_display,"      DisCharge      \n->Period Four        \n                     \n                     \n");   
        }          
    }
                       
    //GUI_DispStringAt((uint8_t*)tab_display, 0, 0); 
    GUI_Display(tab_display, 0, 0);
}


/***************************************************************************
功能:定时充放电设置西班牙界面信息
****************************************************************************/
void updateDisplaySystemRegularStrategySetData_Spanish(REGULAR_TypeDef enum_RegularClass,REGULAR_Strategy_TypeDef u8RegularStrategyIndex)   
{
    
}
/***************************************************************************
功能:定时充放电设置德语界面信息
****************************************************************************/
void updateDisplaySystemRegularStrategySetData_German(REGULAR_TypeDef enum_RegularClass,REGULAR_Strategy_TypeDef u8RegularStrategyIndex)   
{
    
}
/***************************************************************************
功能:定时充放电设置法语界面信息
****************************************************************************/
void updateDisplaySystemRegularStrategySetData_French(REGULAR_TypeDef enum_RegularClass,REGULAR_Strategy_TypeDef u8RegularStrategyIndex)   
{
    
}
/***************************************************************************
功能:定时充放电设置波兰语界面信息
****************************************************************************/
void updateDisplaySystemRegularStrategySetData_Polish(REGULAR_TypeDef enum_RegularClass,REGULAR_Strategy_TypeDef u8RegularStrategyIndex)   
{
    
}
/***************************************************************************
功能:定时充放电设置荷兰语界面信息
****************************************************************************/
void updateDisplaySystemRegularStrategySetData_Dutch(REGULAR_TypeDef enum_RegularClass,REGULAR_Strategy_TypeDef u8RegularStrategyIndex)   
{
    
}
/***************************************************************************
功能:定时充放电设置捷克语界面信息
****************************************************************************/
void updateDisplaySystemRegularStrategySetData_Czech(REGULAR_TypeDef enum_RegularClass,REGULAR_Strategy_TypeDef u8RegularStrategyIndex)   
{
    
}
/***************************************************************************
功能:定时充放电设置意大利语界面信息
****************************************************************************/
void updateDisplaySystemRegularStrategySetData_Italian(REGULAR_TypeDef enum_RegularClass,REGULAR_Strategy_TypeDef u8RegularStrategyIndex)   
{
    
}

/***************************************************************************
功能:根据上一次界面操作类型和本次操作类型判断本次系统定时充放电策略策略设置 RegularStrategySET界面切换
****************************************************************************/
void updateDisplaySystemRegularStrategyPeriodSetData(KeyAction_TypeDef nowActionType,DisplayAction_TypeDef nowDisplayType,REGULAR_TypeDef enum_RegularClass,REGULAR_Strategy_TypeDef enum_Period) 
{
    static uint8_t sU8RegularStrategyCounter     = 0;
    static uint8_t sU8RegularCounter             = 0;
    
    switch(nowActionType) 
    {
        case KEYACTION_ENTER:
            {   
                if(gbEditFlag != STATUS_FALSE)
                {
                    if(enum_RegularClass == REGULAR_CHARGE)
                    {
                        if(enum_Period == STRATEGY_REGULAR_PERIOD_ONE)
                        { 
                            gDisplay.stDisplaySet.stStrategy.stTimerStrategy.stChargePeriod.stPeriod1.s16Power = atoi(tab_RegularPower_modify) * 1;
                            gDisplay.stDisplaySet.stStrategy.stTimerStrategy.stChargePeriod.stPeriod1.u8StopSOC = atoi(tab_RegularStop_SOC_modify);
                            
                            char tabTempTime[3] = {""};
                            tabTempTime[0] = tab_Regular_Time_Start_modify[0];
                            tabTempTime[1] = tab_Regular_Time_Start_modify[1];
                            uint16_t u16StartHour = atoi(tabTempTime); 
                            gDisplay.stDisplaySet.stStrategy.stTimerStrategy.stChargePeriod.stPeriod1.stPeriod.u8StartHour = u16StartHour;
                        
                            tabTempTime[0] = tab_Regular_Time_Start_modify[3];
                            tabTempTime[1] = tab_Regular_Time_Start_modify[4];
                            uint16_t u16StartMin = atoi(tabTempTime); 
                            gDisplay.stDisplaySet.stStrategy.stTimerStrategy.stChargePeriod.stPeriod1.stPeriod.u8StartMin = u16StartMin;
                        
                            tabTempTime[0] = tab_Regular_Time_Start_modify[6];
                            tabTempTime[1] = tab_Regular_Time_Start_modify[7];
                            uint16_t u16StartSec = atoi(tabTempTime); 
                            gDisplay.stDisplaySet.stStrategy.stTimerStrategy.stChargePeriod.stPeriod1.stPeriod.u8StartSec = u16StartSec;
                            
                            tabTempTime[0] = tab_Regular_Time_End_modify[0];
                            tabTempTime[1] = tab_Regular_Time_End_modify[1];
                            uint16_t u16EndHour = atoi(tabTempTime); 
                            gDisplay.stDisplaySet.stStrategy.stTimerStrategy.stChargePeriod.stPeriod1.stPeriod.u8EndHour = u16EndHour;
                            
                            tabTempTime[0] = tab_Regular_Time_End_modify[3];
                            tabTempTime[1] = tab_Regular_Time_End_modify[4];
                            uint16_t u16EndMin = atoi(tabTempTime); 
                            gDisplay.stDisplaySet.stStrategy.stTimerStrategy.stChargePeriod.stPeriod1.stPeriod.u8EndMin = u16EndMin;
                            
                            tabTempTime[0] = tab_Regular_Time_End_modify[6];
                            tabTempTime[1] = tab_Regular_Time_End_modify[7];
                            uint16_t u16EndSec = atoi(tabTempTime);
                            gDisplay.stDisplaySet.stStrategy.stTimerStrategy.stChargePeriod.stPeriod1.stPeriod.u8EndSec = u16EndSec;
                            generateOperationRecord(RECORD_SET_CHARGE_ONE); 
                        }
                        else if(enum_Period == STRATEGY_REGULAR_PERIOD_TWO)
                        {
                            gDisplay.stDisplaySet.stStrategy.stTimerStrategy.stChargePeriod.stPeriod2.s16Power = atoi(tab_RegularPower_modify) * 1;
                            gDisplay.stDisplaySet.stStrategy.stTimerStrategy.stChargePeriod.stPeriod2.u8StopSOC = atoi(tab_RegularStop_SOC_modify);
                            
                            char tabTempTime[3] = {""};
                            tabTempTime[0] = tab_Regular_Time_Start_modify[0];
                            tabTempTime[1] = tab_Regular_Time_Start_modify[1];
                            uint16_t u16StartHour = atoi(tabTempTime); 
                            gDisplay.stDisplaySet.stStrategy.stTimerStrategy.stChargePeriod.stPeriod2.stPeriod.u8StartHour = u16StartHour;
                        
                            tabTempTime[0] = tab_Regular_Time_Start_modify[3];
                            tabTempTime[1] = tab_Regular_Time_Start_modify[4];
                            uint16_t u16StartMin = atoi(tabTempTime);
                            gDisplay.stDisplaySet.stStrategy.stTimerStrategy.stChargePeriod.stPeriod2.stPeriod.u8StartMin = u16StartMin;
                        
                            tabTempTime[0] = tab_Regular_Time_Start_modify[6];
                            tabTempTime[1] = tab_Regular_Time_Start_modify[7];
                            uint16_t u16StartSec = atoi(tabTempTime);
                            gDisplay.stDisplaySet.stStrategy.stTimerStrategy.stChargePeriod.stPeriod2.stPeriod.u8StartSec = u16StartSec;
                            
                            tabTempTime[0] = tab_Regular_Time_End_modify[0];
                            tabTempTime[1] = tab_Regular_Time_End_modify[1];
                            uint16_t u16EndHour = atoi(tabTempTime);
                            gDisplay.stDisplaySet.stStrategy.stTimerStrategy.stChargePeriod.stPeriod2.stPeriod.u8EndHour = u16EndHour;
                            
                            tabTempTime[0] = tab_Regular_Time_End_modify[3];
                            tabTempTime[1] = tab_Regular_Time_End_modify[4];
                            uint16_t u16EndMin = atoi(tabTempTime);
                            gDisplay.stDisplaySet.stStrategy.stTimerStrategy.stChargePeriod.stPeriod2.stPeriod.u8EndMin = u16EndMin;
                            
                            tabTempTime[0] = tab_Regular_Time_End_modify[6];
                            tabTempTime[1] = tab_Regular_Time_End_modify[7];
                            uint16_t u16EndSec = atoi(tabTempTime);
                            gDisplay.stDisplaySet.stStrategy.stTimerStrategy.stChargePeriod.stPeriod2.stPeriod.u8EndSec = u16EndSec;
                            generateOperationRecord(RECORD_SET_CHARGE_TWO);   
                        }
                        else if(enum_Period == STRATEGY_REGULAR_PERIOD_THREE)
                        {
                            gDisplay.stDisplaySet.stStrategy.stTimerStrategy.stChargePeriod.stPeriod3.s16Power = atoi(tab_RegularPower_modify) * 1;
                            gDisplay.stDisplaySet.stStrategy.stTimerStrategy.stChargePeriod.stPeriod3.u8StopSOC = atoi(tab_RegularStop_SOC_modify);
                            
                            char tabTempTime[3] = {""};
                            tabTempTime[0] = tab_Regular_Time_Start_modify[0];
                            tabTempTime[1] = tab_Regular_Time_Start_modify[1];
                            uint16_t u16StartHour = atoi(tabTempTime);
                            gDisplay.stDisplaySet.stStrategy.stTimerStrategy.stChargePeriod.stPeriod3.stPeriod.u8StartHour = u16StartHour;
                        
                            tabTempTime[0] = tab_Regular_Time_Start_modify[3];
                            tabTempTime[1] = tab_Regular_Time_Start_modify[4];
                            uint16_t u16StartMin = atoi(tabTempTime);
                            gDisplay.stDisplaySet.stStrategy.stTimerStrategy.stChargePeriod.stPeriod3.stPeriod.u8StartMin = u16StartMin;
                        
                            tabTempTime[0] = tab_Regular_Time_Start_modify[6];
                            tabTempTime[1] = tab_Regular_Time_Start_modify[7];
                            uint16_t u16StartSec = atoi(tabTempTime);
                            gDisplay.stDisplaySet.stStrategy.stTimerStrategy.stChargePeriod.stPeriod3.stPeriod.u8StartSec = u16StartSec;
                            
                            tabTempTime[0] = tab_Regular_Time_End_modify[0];
                            tabTempTime[1] = tab_Regular_Time_End_modify[1];
                            uint16_t u16EndHour = atoi(tabTempTime);
                            gDisplay.stDisplaySet.stStrategy.stTimerStrategy.stChargePeriod.stPeriod3.stPeriod.u8EndHour = u16EndHour;
                            
                            tabTempTime[0] = tab_Regular_Time_End_modify[3];
                            tabTempTime[1] = tab_Regular_Time_End_modify[4];
                            uint16_t u16EndMin = atoi(tabTempTime);
                            gDisplay.stDisplaySet.stStrategy.stTimerStrategy.stChargePeriod.stPeriod3.stPeriod.u8EndMin = u16EndMin;
                            
                            tabTempTime[0] = tab_Regular_Time_End_modify[6];
                            tabTempTime[1] = tab_Regular_Time_End_modify[7];
                            uint16_t u16EndSec = atoi(tabTempTime);
                            gDisplay.stDisplaySet.stStrategy.stTimerStrategy.stChargePeriod.stPeriod3.stPeriod.u8EndSec = u16EndSec;
                            generateOperationRecord(RECORD_SET_CHARGE_THREE);       
                        }
                        else if(enum_Period == STRATEGY_REGULAR_PERIOD_FOUR)
                        {
                            gDisplay.stDisplaySet.stStrategy.stTimerStrategy.stChargePeriod.stPeriod4.s16Power = atoi(tab_RegularPower_modify) * 1;
                            gDisplay.stDisplaySet.stStrategy.stTimerStrategy.stChargePeriod.stPeriod4.u8StopSOC = atoi(tab_RegularStop_SOC_modify);
                            
                            char tabTempTime[3] = {""};
                            tabTempTime[0] = tab_Regular_Time_Start_modify[0];
                            tabTempTime[1] = tab_Regular_Time_Start_modify[1];
                            uint16_t u16StartHour = atoi(tabTempTime);
                            gDisplay.stDisplaySet.stStrategy.stTimerStrategy.stChargePeriod.stPeriod4.stPeriod.u8StartHour = u16StartHour;
                        
                            tabTempTime[0] = tab_Regular_Time_Start_modify[3];
                            tabTempTime[1] = tab_Regular_Time_Start_modify[4];
                            uint16_t u16StartMin = atoi(tabTempTime);
                            gDisplay.stDisplaySet.stStrategy.stTimerStrategy.stChargePeriod.stPeriod4.stPeriod.u8StartMin = u16StartMin;
                        
                            tabTempTime[0] = tab_Regular_Time_Start_modify[6];
                            tabTempTime[1] = tab_Regular_Time_Start_modify[7];
                            uint16_t u16StartSec = atoi(tabTempTime);
                            gDisplay.stDisplaySet.stStrategy.stTimerStrategy.stChargePeriod.stPeriod4.stPeriod.u8StartSec = u16StartSec;
                            
                            tabTempTime[0] = tab_Regular_Time_End_modify[0];
                            tabTempTime[1] = tab_Regular_Time_End_modify[1];
                            uint16_t u16EndHour = atoi(tabTempTime);
                            gDisplay.stDisplaySet.stStrategy.stTimerStrategy.stChargePeriod.stPeriod4.stPeriod.u8EndHour = u16EndHour;
                            
                            tabTempTime[0] = tab_Regular_Time_End_modify[3];
                            tabTempTime[1] = tab_Regular_Time_End_modify[4];
                            uint16_t u16EndMin = atoi(tabTempTime);
                            gDisplay.stDisplaySet.stStrategy.stTimerStrategy.stChargePeriod.stPeriod4.stPeriod.u8EndMin = u16EndMin;
                            
                            tabTempTime[0] = tab_Regular_Time_End_modify[6];
                            tabTempTime[1] = tab_Regular_Time_End_modify[7];
                            uint16_t u16EndSec = atoi(tabTempTime);
                            gDisplay.stDisplaySet.stStrategy.stTimerStrategy.stChargePeriod.stPeriod4.stPeriod.u8EndSec = u16EndSec;
                            generateOperationRecord(RECORD_SET_CHARGE_FOUR);   
                        }
                    }
                    else
                    {
                        if(enum_Period == STRATEGY_REGULAR_PERIOD_ONE)
                        { 
                            gDisplay.stDisplaySet.stStrategy.stTimerStrategy.stDisChargePeriod.stPeriod1.s16Power = atoi(tab_RegularPower_modify) * -1;
                            gDisplay.stDisplaySet.stStrategy.stTimerStrategy.stDisChargePeriod.stPeriod1.u8StopSOC = atoi(tab_RegularStop_SOC_modify);
                            
                            char tabTempTime[3] = {""};
                            tabTempTime[0] = tab_Regular_Time_Start_modify[0];
                            tabTempTime[1] = tab_Regular_Time_Start_modify[1];
                            uint16_t u16StartHour = atoi(tabTempTime);
                            gDisplay.stDisplaySet.stStrategy.stTimerStrategy.stDisChargePeriod.stPeriod1.stPeriod.u8StartHour = u16StartHour;
                        
                            tabTempTime[0] = tab_Regular_Time_Start_modify[3];
                            tabTempTime[1] = tab_Regular_Time_Start_modify[4];
                            uint16_t u16StartMin = atoi(tabTempTime);
                            gDisplay.stDisplaySet.stStrategy.stTimerStrategy.stDisChargePeriod.stPeriod1.stPeriod.u8StartMin = u16StartMin;
                        
                            tabTempTime[0] = tab_Regular_Time_Start_modify[6];
                            tabTempTime[1] = tab_Regular_Time_Start_modify[7];
                            uint16_t u16StartSec = atoi(tabTempTime);
                            gDisplay.stDisplaySet.stStrategy.stTimerStrategy.stDisChargePeriod.stPeriod1.stPeriod.u8StartSec = u16StartSec;
                            
                            tabTempTime[0] = tab_Regular_Time_End_modify[0];
                            tabTempTime[1] = tab_Regular_Time_End_modify[1];
                            uint16_t u16EndHour = atoi(tabTempTime);
                            gDisplay.stDisplaySet.stStrategy.stTimerStrategy.stDisChargePeriod.stPeriod1.stPeriod.u8EndHour = u16EndHour;
                            
                            tabTempTime[0] = tab_Regular_Time_End_modify[3];
                            tabTempTime[1] = tab_Regular_Time_End_modify[4];
                            uint16_t u16EndMin = atoi(tabTempTime);
                            gDisplay.stDisplaySet.stStrategy.stTimerStrategy.stDisChargePeriod.stPeriod1.stPeriod.u8EndMin = u16EndMin;
                            
                            tabTempTime[0] = tab_Regular_Time_End_modify[6];
                            tabTempTime[1] = tab_Regular_Time_End_modify[7];
                            uint16_t u16EndSec = atoi(tabTempTime);
                            gDisplay.stDisplaySet.stStrategy.stTimerStrategy.stDisChargePeriod.stPeriod1.stPeriod.u8EndSec = u16EndSec;
                            generateOperationRecord(RECORD_SET_DISCHARGE_ONE);    
                        }
                        else if(enum_Period == STRATEGY_REGULAR_PERIOD_TWO)
                        {
                            gDisplay.stDisplaySet.stStrategy.stTimerStrategy.stDisChargePeriod.stPeriod2.s16Power = atoi(tab_RegularPower_modify) * -1;
                            gDisplay.stDisplaySet.stStrategy.stTimerStrategy.stDisChargePeriod.stPeriod2.u8StopSOC = atoi(tab_RegularStop_SOC_modify);
                            
                            char tabTempTime[3] = {""};
                            tabTempTime[0] = tab_Regular_Time_Start_modify[0];
                            tabTempTime[1] = tab_Regular_Time_Start_modify[1];
                            uint16_t u16StartHour = atoi(tabTempTime);
                            gDisplay.stDisplaySet.stStrategy.stTimerStrategy.stDisChargePeriod.stPeriod2.stPeriod.u8StartHour = u16StartHour;
                        
                            tabTempTime[0] = tab_Regular_Time_Start_modify[3];
                            tabTempTime[1] = tab_Regular_Time_Start_modify[4];
                            uint16_t u16StartMin = atoi(tabTempTime);
                            gDisplay.stDisplaySet.stStrategy.stTimerStrategy.stDisChargePeriod.stPeriod2.stPeriod.u8StartMin = u16StartMin;
                        
                            tabTempTime[0] = tab_Regular_Time_Start_modify[6];
                            tabTempTime[1] = tab_Regular_Time_Start_modify[7];
                            uint16_t u16StartSec = atoi(tabTempTime);
                            gDisplay.stDisplaySet.stStrategy.stTimerStrategy.stDisChargePeriod.stPeriod2.stPeriod.u8StartSec = u16StartSec;
                            
                            tabTempTime[0] = tab_Regular_Time_End_modify[0];
                            tabTempTime[1] = tab_Regular_Time_End_modify[1];
                            uint16_t u16EndHour = atoi(tabTempTime);
                            gDisplay.stDisplaySet.stStrategy.stTimerStrategy.stDisChargePeriod.stPeriod2.stPeriod.u8EndHour = u16EndHour;
                            
                            tabTempTime[0] = tab_Regular_Time_End_modify[3];
                            tabTempTime[1] = tab_Regular_Time_End_modify[4];
                            uint16_t u16EndMin = atoi(tabTempTime);
                            gDisplay.stDisplaySet.stStrategy.stTimerStrategy.stDisChargePeriod.stPeriod2.stPeriod.u8EndMin = u16EndMin;
                            
                            tabTempTime[0] = tab_Regular_Time_End_modify[6];
                            tabTempTime[1] = tab_Regular_Time_End_modify[7];
                            uint16_t u16EndSec = atoi(tabTempTime);
                            gDisplay.stDisplaySet.stStrategy.stTimerStrategy.stDisChargePeriod.stPeriod2.stPeriod.u8EndSec = u16EndSec;
                            generateOperationRecord(RECORD_SET_DISCHARGE_TWO);   
                        }
                        else if(enum_Period == STRATEGY_REGULAR_PERIOD_THREE)
                        {
                            gDisplay.stDisplaySet.stStrategy.stTimerStrategy.stDisChargePeriod.stPeriod3.s16Power = atoi(tab_RegularPower_modify) * -1;
                            gDisplay.stDisplaySet.stStrategy.stTimerStrategy.stDisChargePeriod.stPeriod3.u8StopSOC = atoi(tab_RegularStop_SOC_modify);
                            
                            char tabTempTime[3] = {""};
                            tabTempTime[0] = tab_Regular_Time_Start_modify[0];
                            tabTempTime[1] = tab_Regular_Time_Start_modify[1];
                            uint16_t u16StartHour = atoi(tabTempTime);
                            gDisplay.stDisplaySet.stStrategy.stTimerStrategy.stDisChargePeriod.stPeriod3.stPeriod.u8StartHour = u16StartHour;
                        
                            tabTempTime[0] = tab_Regular_Time_Start_modify[3];
                            tabTempTime[1] = tab_Regular_Time_Start_modify[4];
                            uint16_t u16StartMin = atoi(tabTempTime);
                            gDisplay.stDisplaySet.stStrategy.stTimerStrategy.stDisChargePeriod.stPeriod3.stPeriod.u8StartMin = u16StartMin;
                        
                            tabTempTime[0] = tab_Regular_Time_Start_modify[6];
                            tabTempTime[1] = tab_Regular_Time_Start_modify[7];
                            uint16_t u16StartSec = atoi(tabTempTime);
                            gDisplay.stDisplaySet.stStrategy.stTimerStrategy.stDisChargePeriod.stPeriod3.stPeriod.u8StartSec = u16StartSec;
                            
                            tabTempTime[0] = tab_Regular_Time_End_modify[0];
                            tabTempTime[1] = tab_Regular_Time_End_modify[1];
                            uint16_t u16EndHour = atoi(tabTempTime);
                            gDisplay.stDisplaySet.stStrategy.stTimerStrategy.stDisChargePeriod.stPeriod3.stPeriod.u8EndHour = u16EndHour;
                            
                            tabTempTime[0] = tab_Regular_Time_End_modify[3];
                            tabTempTime[1] = tab_Regular_Time_End_modify[4];
                            uint16_t u16EndMin = atoi(tabTempTime);
                            gDisplay.stDisplaySet.stStrategy.stTimerStrategy.stDisChargePeriod.stPeriod3.stPeriod.u8EndMin = u16EndMin;
                            
                            tabTempTime[0] = tab_Regular_Time_End_modify[6];
                            tabTempTime[1] = tab_Regular_Time_End_modify[7];
                            uint16_t u16EndSec = atoi(tabTempTime);
                            gDisplay.stDisplaySet.stStrategy.stTimerStrategy.stDisChargePeriod.stPeriod3.stPeriod.u8EndSec = u16EndSec; 
                            generateOperationRecord(RECORD_SET_DISCHARGE_THREE);   
                        }
                        else if(enum_Period == STRATEGY_REGULAR_PERIOD_FOUR)
                        {
                            gDisplay.stDisplaySet.stStrategy.stTimerStrategy.stDisChargePeriod.stPeriod4.s16Power = atoi(tab_RegularPower_modify) * -1;
                            gDisplay.stDisplaySet.stStrategy.stTimerStrategy.stDisChargePeriod.stPeriod4.u8StopSOC = atoi(tab_RegularStop_SOC_modify);
                            
                            char tabTempTime[3] = {""};
                            tabTempTime[0] = tab_Regular_Time_Start_modify[0];
                            tabTempTime[1] = tab_Regular_Time_Start_modify[1];
                            uint16_t u16StartHour = atoi(tabTempTime);
                            gDisplay.stDisplaySet.stStrategy.stTimerStrategy.stDisChargePeriod.stPeriod4.stPeriod.u8StartHour = u16StartHour;
                        
                            tabTempTime[0] = tab_Regular_Time_Start_modify[3];
                            tabTempTime[1] = tab_Regular_Time_Start_modify[4];
                            uint16_t u16StartMin = atoi(tabTempTime);
                            gDisplay.stDisplaySet.stStrategy.stTimerStrategy.stDisChargePeriod.stPeriod4.stPeriod.u8StartMin = u16StartMin;
                        
                            tabTempTime[0] = tab_Regular_Time_Start_modify[6];
                            tabTempTime[1] = tab_Regular_Time_Start_modify[7];
                            uint16_t u16StartSec = atoi(tabTempTime);
                            gDisplay.stDisplaySet.stStrategy.stTimerStrategy.stDisChargePeriod.stPeriod4.stPeriod.u8StartSec = u16StartSec;
                            
                            tabTempTime[0] = tab_Regular_Time_End_modify[0];
                            tabTempTime[1] = tab_Regular_Time_End_modify[1];
                            uint16_t u16EndHour = atoi(tabTempTime);
                            gDisplay.stDisplaySet.stStrategy.stTimerStrategy.stDisChargePeriod.stPeriod4.stPeriod.u8EndHour = u16EndHour;
                            
                            tabTempTime[0] = tab_Regular_Time_End_modify[3];
                            tabTempTime[1] = tab_Regular_Time_End_modify[4];
                            uint16_t u16EndMin = atoi(tabTempTime);
                            gDisplay.stDisplaySet.stStrategy.stTimerStrategy.stDisChargePeriod.stPeriod4.stPeriod.u8EndMin = u16EndMin;
                            
                            tabTempTime[0] = tab_Regular_Time_End_modify[6];
                            tabTempTime[1] = tab_Regular_Time_End_modify[7];
                            uint16_t u16EndSec = atoi(tabTempTime);
                            gDisplay.stDisplaySet.stStrategy.stTimerStrategy.stDisChargePeriod.stPeriod4.stPeriod.u8EndSec = u16EndSec;
                            generateOperationRecord(RECORD_SET_DISCHARGE_FOUR);   
                        }
                    }
                    gbEditFlag = STATUS_FALSE;  
                    sprintf(tab_Regular_Time_Start,"%s",tab_Regular_Time_Start_modify);
                    sprintf(tab_Regular_Time_End,"%s",tab_Regular_Time_End_modify);
                    sprintf(tab_RegularPower,"%s",tab_RegularPower_modify);
                    sprintf(tab_RegularStop_SOC,"%s",tab_RegularStop_SOC_modify);
                    sU8RegularStrategyCounter     = 0;
                    sU8RegularCounter             = 0; 
                }
                gCurrentMenu.eCurrentDisplayMenuType = nowDisplayType;
                Display_Set_UnderLine_Blink_Position(STATUS_FALSE,0,0);
            }
            break;
        case KEYACTION_DOWN:
            {
                if(gbEditFlag != STATUS_TRUE)
                {
                    gbEditFlag = STATUS_TRUE;
                    sprintf(tab_Regular_Time_Start_modify,"%s",tab_Regular_Time_Start);
                    sprintf(tab_Regular_Time_End_modify,"%s",tab_Regular_Time_End);
                    sprintf(tab_RegularPower_modify,"%s",tab_RegularPower); 
                    sprintf(tab_RegularStop_SOC_modify,"%s",tab_RegularStop_SOC);
                }
                
                sU8RegularCounter++;
                
                if(sU8RegularStrategyCounter == 0)//功率第一个数字
                {
                   if(sU8RegularCounter > 6)
                   {
                      sU8RegularCounter = 0;
                   }
                   tab_RegularPower_modify[0] =  '0' + sU8RegularCounter;
                }
                else if(sU8RegularStrategyCounter == 1)//功率第二个数字
                {
                    if(tab_RegularPower_modify[0] != '6')
                    {
                        if(sU8RegularCounter > 9)
                        {
                            sU8RegularCounter = 0;
                        }
                    }
                    else
                    {
                        sU8RegularCounter = 0;
                    }
                    tab_RegularPower_modify[1] =  '0' + sU8RegularCounter;
                }
                else if(sU8RegularStrategyCounter == 2)//功率第三个数字
                {
                    if(tab_RegularPower_modify[0] != '6')
                    {
                        if(sU8RegularCounter > 9)
                        {
                            sU8RegularCounter = 0;
                        }
                    }
                    else
                    {
                        sU8RegularCounter = 0;
                    }
                    tab_RegularPower_modify[2] =  '0' + sU8RegularCounter;
                }
                else if(sU8RegularStrategyCounter == 3)//功率第四个数字
                {
                    if(tab_RegularPower_modify[0] != '6')
                    {
                        if(sU8RegularCounter > 9)
                        {
                            sU8RegularCounter = 0;
                        }
                    }
                    else
                    {
                        sU8RegularCounter = 0;
                    }
                    tab_RegularPower_modify[3] =  '0' + sU8RegularCounter;
                }
                else if(sU8RegularStrategyCounter == 4)//停止SOC第一个数字
                { 
                   if(sU8RegularCounter > 1)
                   {
                      sU8RegularCounter = 0;
                   }
                   tab_RegularStop_SOC_modify[0] =  '0' + sU8RegularCounter;

                   if(tab_RegularStop_SOC_modify[0] == '1')
                   {
                      tab_RegularStop_SOC_modify[1] =  '0';
                      tab_RegularStop_SOC_modify[2] =  '0';
                   }
                }
                else if(sU8RegularStrategyCounter == 5)//停止SOC第二个数字
                {
                    if(tab_RegularStop_SOC_modify[0] == '1')
                    {
                        sU8RegularCounter = 0;
                    }
                    else 
                    {
                        if(sU8RegularCounter > 9)
                        {
                            sU8RegularCounter = 0;
                        }
                        
                   }
                   tab_RegularStop_SOC_modify[1] =  '0' + sU8RegularCounter;
                }
                else if(sU8RegularStrategyCounter == 6)//停止SOC第三个个数字
                {
                    if(tab_RegularStop_SOC_modify[0] == '1')
                    {
                        sU8RegularCounter = 0;
                    }
                    else 
                    {
                        if(sU8RegularCounter > 9)
                        {
                            sU8RegularCounter = 0;
                        }
                        
                   }
                   tab_RegularStop_SOC_modify[2] =  '0' + sU8RegularCounter;
                }
                else if(sU8RegularStrategyCounter == 7)//开始时间第一个数字
                { 
                   if(sU8RegularCounter > 2)
                   {
                      sU8RegularCounter = 0;
                   }
                   tab_Regular_Time_Start_modify[0] =  '0' + sU8RegularCounter;
                }
                else if(sU8RegularStrategyCounter == 8)//开始时间第二个数字
                {
                    if(tab_Regular_Time_Start_modify[0] == '2')
                    {
                        if(sU8RegularCounter > 4)
                        {
                            sU8RegularCounter = 0;
                        }
                    }
                    else 
                    {
                        if(sU8RegularCounter > 9)
                        {
                            sU8RegularCounter = 0;
                        }
                   }
                    
                   tab_Regular_Time_Start_modify[1] =  '0' + sU8RegularCounter;
                   
                   if((tab_Regular_Time_Start_modify[0] == '2')&&(tab_Regular_Time_Start_modify[1] == '4'))     
                   {
                       tab_Regular_Time_Start_modify[3] = '0';
                       tab_Regular_Time_Start_modify[4] = '0';
                       tab_Regular_Time_Start_modify[6] = '0';
                       tab_Regular_Time_Start_modify[7] = '0';
                   }
                }
                else if(sU8RegularStrategyCounter == 9)//开始时间第三个数字
                {
                   if((tab_Regular_Time_Start_modify[0] == '2')&&(tab_Regular_Time_Start_modify[1] == '4')) 
                   {
                        sU8RegularCounter = 0;
                   }
                   else 
                   {
                       if(sU8RegularCounter > 5)
                       {
                           sU8RegularCounter = 0;
                       }
                   }
                   tab_Regular_Time_Start_modify[3] =  '0' + sU8RegularCounter;
                }
                else if(sU8RegularStrategyCounter == 10)//开始时间第四个数字
                {
                   if((tab_Regular_Time_Start_modify[0] == '2')&&(tab_Regular_Time_Start_modify[1] == '4')) 
                   {
                        sU8RegularCounter = 0;
                   }
                   else 
                   {
                       if(sU8RegularCounter > 9)
                       {
                           sU8RegularCounter = 0;
                       }     
                   }
                   tab_Regular_Time_Start_modify[4] =  '0' + sU8RegularCounter;
                }
                else if(sU8RegularStrategyCounter == 11)//开始时间第五个数字
                {
                   if((tab_Regular_Time_Start_modify[0] == '2')&&(tab_Regular_Time_Start_modify[1] == '4')) 
                   {
                        sU8RegularCounter = 0;
                   }
                   else 
                   {
                       if(sU8RegularCounter > 5)
                       {
                           sU8RegularCounter = 0;
                       }     
                   }
                   tab_Regular_Time_Start_modify[6] =  '0' + sU8RegularCounter;
                }
                else if(sU8RegularStrategyCounter == 12)//开始时间第六个数字
                {
                   if((tab_Regular_Time_Start_modify[0] == '2')&&(tab_Regular_Time_Start_modify[1] == '4')) 
                   {
                        sU8RegularCounter = 0;
                   }
                   else 
                   {
                       if(sU8RegularCounter > 9)
                       {
                           sU8RegularCounter = 0;
                       }     
                   }
                   tab_Regular_Time_Start_modify[7] =  '0' + sU8RegularCounter;
                }
                else if(sU8RegularStrategyCounter == 13)//开始时间第七个数字
                {
                    if(sU8RegularCounter > 2)
                    {
                        sU8RegularCounter = 0;
                    }
                    tab_Regular_Time_End_modify[0] =  '0' + sU8RegularCounter;
                }
                else if(sU8RegularStrategyCounter == 14)//开始时间第八个数字
                {
                    if(tab_Regular_Time_End_modify[0] == '2')
                    {
                        if(sU8RegularCounter > 4)
                        {
                            sU8RegularCounter = 0;
                        }
                    }
                    else 
                    {
                        if(sU8RegularCounter > 9)
                        {
                            sU8RegularCounter = 0; 
                        }
                   } 
                   tab_Regular_Time_End_modify[1] =  '0' + sU8RegularCounter;
                   
                   if((tab_Regular_Time_End_modify[0] == '2')&&(tab_Regular_Time_End_modify[1] == '4'))     
                   {
                       tab_Regular_Time_End_modify[3] = '0';
                       tab_Regular_Time_End_modify[4] = '0';
                       tab_Regular_Time_End_modify[6] = '0';
                       tab_Regular_Time_End_modify[7] = '0';
                   }
                }
                else if(sU8RegularStrategyCounter == 15)//结束时间第一个数字
                {
                   if((tab_Regular_Time_End_modify[0] == '2')&&(tab_Regular_Time_End_modify[1] == '4')) 
                   {
                        sU8RegularCounter = 0;
                   }
                   else 
                   {
                       if(sU8RegularCounter > 5)
                       {
                           sU8RegularCounter = 0;
                       }
                   }
                   tab_Regular_Time_End_modify[3] =  '0' + sU8RegularCounter;
                }
                else if(sU8RegularStrategyCounter == 16)//结束时间第二个数字
                {
                   if((tab_Regular_Time_End_modify[0] == '2')&&(tab_Regular_Time_End_modify[1] == '4')) 
                   {
                        sU8RegularCounter = 0;
                   }
                   else 
                   {
                       if(sU8RegularCounter > 9)
                       {
                           sU8RegularCounter = 0;
                       }
                   }
                   tab_Regular_Time_End_modify[4] =  '0' + sU8RegularCounter;
                }
                else if(sU8RegularStrategyCounter == 17)//结束时间第三个数字
                {
                   if((tab_Regular_Time_End_modify[0] == '2')&&(tab_Regular_Time_End_modify[1] == '4')) 
                   {
                        sU8RegularCounter = 0;
                   }
                   else 
                   {
                       if(sU8RegularCounter > 5)
                       {
                           sU8RegularCounter = 0;
                       }
                   }
                   tab_Regular_Time_End_modify[6] =  '0' + sU8RegularCounter;
                }
                else if(sU8RegularStrategyCounter == 18)//结束时间第四个数字
                {
                   if((tab_Regular_Time_End_modify[0] == '2')&&(tab_Regular_Time_End_modify[1] == '4')) 
                   {
                        sU8RegularCounter = 0;
                   }
                   else 
                   {
                       if(sU8RegularCounter > 9)
                       {
                           sU8RegularCounter = 0;
                       }
                   }
                   tab_Regular_Time_End_modify[7] =  '0' + sU8RegularCounter;
                }
                gCurrentMenu.eCurrentDisplayMenuType = nowDisplayType;
            }
            break;
        case KEYACTION_UP:
            {
                if(gbEditFlag != STATUS_TRUE)
                {
                    gbEditFlag = STATUS_TRUE;  
                    sprintf(tab_Regular_Time_Start_modify,"%s",tab_Regular_Time_Start); 
                    sprintf(tab_Regular_Time_End_modify,"%s",tab_Regular_Time_End);
                    sprintf(tab_RegularPower_modify,"%s",tab_RegularPower); 
                    sprintf(tab_RegularStop_SOC_modify,"%s",tab_RegularStop_SOC);
                }
                
                sU8RegularCounter--;
                
                if(sU8RegularStrategyCounter == 0)//功率的第一个数字
                {
                    if(!(sU8RegularCounter <= 6))
                    {
                        sU8RegularCounter = 6;
                    }
                    tab_RegularPower_modify[0] =  '0' + sU8RegularCounter;    
                }
                else if(sU8RegularStrategyCounter == 1) //功率的第二个数字
                {
                    if(tab_RegularPower_modify[0] != '6')
                    {
                        if(!(sU8RegularCounter <= 9))
                        {
                            sU8RegularCounter = 9;
                        }
                    }
                    else
                    {
                        sU8RegularCounter = 0;
                    }
                    tab_RegularPower_modify[1] =  '0' + sU8RegularCounter;
                }
                else if(sU8RegularStrategyCounter == 2) //功率的第三个数字
                {
                    if(tab_RegularPower_modify[0] != '6')
                    {
                        if(!(sU8RegularCounter <= 9))
                        {
                            sU8RegularCounter = 9;
                        }
                    }
                    else
                    {
                        sU8RegularCounter = 0;
                    }
                    tab_RegularPower_modify[2] =  '0' + sU8RegularCounter;
                }
                else if(sU8RegularStrategyCounter == 3) //功率的第四个数字
                {
                    if(tab_RegularPower_modify[0] != '6')
                    {
                        if(!(sU8RegularCounter <= 9))
                        {
                            sU8RegularCounter = 9;
                        }
                    }
                    else
                    {
                        sU8RegularCounter = 0;
                    }
                    tab_RegularPower_modify[3] =  '0' + sU8RegularCounter;
                }
                else if(sU8RegularStrategyCounter == 4) //停止SOC的第一个数字
                {
                    if(!(sU8RegularCounter <= 1))
                    {
                        sU8RegularCounter = 1;
                    }
                    tab_RegularStop_SOC_modify[0] =  '0' + sU8RegularCounter;

                    if(tab_RegularStop_SOC_modify[0] == '1')
                    {
                      tab_RegularStop_SOC_modify[1] =  '0';
                      tab_RegularStop_SOC_modify[2] =  '0';
                    }
                }
                else if(sU8RegularStrategyCounter == 5) //停止SOC的第二个数字
                {
                    if(tab_RegularStop_SOC_modify[0] == '1')
                    {
                        sU8RegularCounter = 0;
                    }
                    else 
                    {
                       if(!(sU8RegularCounter <= 9))
                       {
                            sU8RegularCounter = 9;
                       }
                   }
                   tab_RegularStop_SOC_modify[1] =  '0' + sU8RegularCounter;
                }
                else if(sU8RegularStrategyCounter == 6) //停止SOC的第三个数字
                {
                    if(tab_RegularStop_SOC_modify[0] == '1')
                    {
                        sU8RegularCounter = 0;
                    }
                    else 
                    {
                       if(!(sU8RegularCounter <= 9))
                       {
                            sU8RegularCounter = 9;
                       }
                   }
                   tab_RegularStop_SOC_modify[2] =  '0' + sU8RegularCounter;
                }
                else if(sU8RegularStrategyCounter == 7) //开始时间的第一个数字
                {
                    if(!(sU8RegularCounter <= 2))
                    {
                        sU8RegularCounter = 2;
                    }
                    tab_Regular_Time_Start_modify[0] =  '0' + sU8RegularCounter;
                }
                else if(sU8RegularStrategyCounter == 8) //开始时间的第二个数字
                {
                    if(tab_Regular_Time_Start_modify[0] == '2')
                    {
                        if(!(sU8RegularCounter <= 4))
                        {
                            sU8RegularCounter = 4;
                        }
                    }
                    else 
                    {
                        if(!(sU8RegularCounter <= 9))
                        {
                            sU8RegularCounter = 9;
                        }
                   }
                    
                   tab_Regular_Time_Start_modify[1] =  '0' + sU8RegularCounter; 
                   
                   if((tab_Regular_Time_Start_modify[0] == '2')&&(tab_Regular_Time_Start_modify[1] == '4'))
                   {
                       tab_Regular_Time_Start_modify[3] = '0';
                       tab_Regular_Time_Start_modify[4] = '0';
                       tab_Regular_Time_Start_modify[6] = '0';
                       tab_Regular_Time_Start_modify[7] = '0';
                   }
                }
                else if(sU8RegularStrategyCounter == 9) //开始时间的第三个数字
                { 
                   if((tab_Regular_Time_Start_modify[0] == '2')&&(tab_Regular_Time_Start_modify[1] == '4'))
                   {
                        sU8RegularCounter = 0;
                   }
                   else 
                   {
                       if(!(sU8RegularCounter <= 5))
                       {
                            sU8RegularCounter = 5;
                       }
                   }
                   
                   tab_Regular_Time_Start_modify[3] =  '0' + sU8RegularCounter;
                }
                else if(sU8RegularStrategyCounter == 10) //开始时间的第四个数字
                {
                    if(!(sU8RegularCounter <= 9))
                    {
                        sU8RegularCounter = 9;
                    }
                    tab_Regular_Time_Start_modify[4] =  '0' + sU8RegularCounter;
                }
                else if(sU8RegularStrategyCounter == 11) //开始时间的第五个数字
                {
                    if((tab_Regular_Time_Start_modify[0] == '2')&&(tab_Regular_Time_Start_modify[1] == '4')) 
                    {
                        sU8RegularCounter = 0;
                    }
                    else 
                    {
                        if(!(sU8RegularCounter <= 5))
                        {
                            sU8RegularCounter = 5;
                        }
                    }
                    tab_Regular_Time_Start_modify[6] =  '0' + sU8RegularCounter;
                }
                else if(sU8RegularStrategyCounter == 12) //开始时间的第六个数字
                {
                    if((tab_Regular_Time_Start_modify[0] == '2')&&(tab_Regular_Time_Start_modify[1] == '4')) 
                    {
                        sU8RegularCounter = 0;
                    }
                    else 
                    {
                        if(!(sU8RegularCounter <= 9))
                        {
                            sU8RegularCounter = 9;
                        }
                    }
                    tab_Regular_Time_Start_modify[7] =  '0' + sU8RegularCounter;
                }
                else if(sU8RegularStrategyCounter == 13) //开始时间的第七个数字
                {
                    if(!(sU8RegularCounter <= 2))
                    {
                        sU8RegularCounter = 2;
                    }
                    tab_Regular_Time_End_modify[0] =  '0' + sU8RegularCounter;
                }
                else if(sU8RegularStrategyCounter == 14) //开始时间的第八个数字
                {
                    if(tab_Regular_Time_End_modify[0] == '2')
                    {
                        if(!(sU8RegularCounter <= 4))
                        {
                            sU8RegularCounter = 4;
                        }
                    }
                    else 
                    {
                        if(!(sU8RegularCounter <= 9))
                        {
                            sU8RegularCounter = 9;
                        }     
                   } 
                    
                   tab_Regular_Time_End_modify[1] =  '0' + sU8RegularCounter;
                   
                   if((tab_Regular_Time_End_modify[0] == '2')&&(tab_Regular_Time_End_modify[1] == '4'))     
                   {
                       tab_Regular_Time_End_modify[3] = '0';
                       tab_Regular_Time_End_modify[4] = '0';
                       tab_Regular_Time_End_modify[6] = '0';
                       tab_Regular_Time_End_modify[7] = '0';
                   }
                }
                else if(sU8RegularStrategyCounter == 15) //结束时间的第一个数字
                {
                   if((tab_Regular_Time_End_modify[0] == '2')&&(tab_Regular_Time_End_modify[1] == '4')) 
                   {
                        sU8RegularCounter = 0;
                   }
                   else 
                   {
                       if(!(sU8RegularCounter <= 5))
                       {
                            sU8RegularCounter = 5;
                       }
                   }
                   tab_Regular_Time_End_modify[3] =  '0' + sU8RegularCounter;
                }
                else if(sU8RegularStrategyCounter == 16) //结束时间的第二个数字
                {
                   if((tab_Regular_Time_End_modify[0] == '2')&&(tab_Regular_Time_End_modify[1] == '4')) 
                   {
                        sU8RegularCounter = 0;
                   }
                   else 
                   {
                       if(!(sU8RegularCounter <= 9))
                       {
                            sU8RegularCounter = 9;
                       }
                   }
                   tab_Regular_Time_End_modify[4] =  '0' + sU8RegularCounter;
                }
                else if(sU8RegularStrategyCounter == 17) //结束时间的第三个数字
                {
                   if((tab_Regular_Time_End_modify[0] == '2')&&(tab_Regular_Time_End_modify[1] == '4')) 
                   {
                        sU8RegularCounter = 0;
                   }
                   else 
                   {
                       if(!(sU8RegularCounter <= 5))
                       {
                            sU8RegularCounter = 5;
                       }
                   }
                   tab_Regular_Time_End_modify[6] =  '0' + sU8RegularCounter;
                }
                else if(sU8RegularStrategyCounter == 18) //结束时间的第四个数字
                {
                   if((tab_Regular_Time_End_modify[0] == '2')&&(tab_Regular_Time_End_modify[1] == '4')) 
                   {
                        sU8RegularCounter = 0;
                   }
                   else
                   {
                       if(!(sU8RegularCounter <= 9))
                       {
                            sU8RegularCounter = 9;
                       }
                   }
                   tab_Regular_Time_End_modify[7] =  '0' + sU8RegularCounter;
                }
                
                gCurrentMenu.eCurrentDisplayMenuType = nowDisplayType;
            }
            break;
        case KEYACTION_UPDOWN:
            {
                sU8RegularCounter = 0;
                sU8RegularStrategyCounter++;
                if(sU8RegularStrategyCounter == DISPLAY_SET_SYSTEM_STRATEGY_REGULAR_INPUT_COUNT)
                {
                    sU8RegularStrategyCounter = 0;
                }
                
                gCurrentMenu.eCurrentDisplayMenuType = nowDisplayType;
            }
            break;
        case KEYACTION_ESC:
            {    
                gbEditFlag = STATUS_FALSE;
                sU8RegularCounter = 0;
                sU8RegularStrategyCounter     = 0;
                if(enum_RegularClass == REGULAR_CHARGE)
                {
                    gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_SET_SYSTEM_STRATEGY_REGULAR_CHARGE;
                }
                else if(enum_RegularClass == REGULAR_DISCHARGE)
                {
                    gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_SET_SYSTEM_STRATEGY_REGULAR_DISCHARGE;       
                }
                Display_Set_UnderLine_Blink_Position(STATUS_FALSE,0,0);
            }
            break;
        case KEYACTION_NULL:
        default:
            {
                if(gbEditFlag == STATUS_FALSE)
                {
                    if(enum_RegularClass == REGULAR_CHARGE)
                    {
                        if(enum_Period == STRATEGY_REGULAR_PERIOD_ONE)
                        {
                            sprintf(tab_RegularPower_modify,"%04d",gDisplay.stDisplaySet.stStrategy.stTimerStrategy.stChargePeriod.stPeriod1.s16Power); 
                            sprintf(tab_RegularStop_SOC_modify,"%03d",gDisplay.stDisplaySet.stStrategy.stTimerStrategy.stChargePeriod.stPeriod1.u8StopSOC);
                                    
                            char tab_time_Hour_Start[2] = {0};
                            sprintf(tab_time_Hour_Start,"%02d",gDisplay.stDisplaySet.stStrategy.stTimerStrategy.stChargePeriod.stPeriod1.stPeriod.u8StartHour);
                            tab_Regular_Time_Start_modify[0] = tab_time_Hour_Start[0];
                            tab_Regular_Time_Start_modify[1] = tab_time_Hour_Start[1];
                            
                            char tab_time_Min_Start[2] = {0};
                            sprintf(tab_time_Min_Start,"%02d",gDisplay.stDisplaySet.stStrategy.stTimerStrategy.stChargePeriod.stPeriod1.stPeriod.u8StartMin);
                            tab_Regular_Time_Start_modify[3] = tab_time_Min_Start[0];
                            tab_Regular_Time_Start_modify[4] = tab_time_Min_Start[1];
                            
                            char tab_time_Sec_Start[2] = {0};
                            sprintf(tab_time_Sec_Start,"%02d",gDisplay.stDisplaySet.stStrategy.stTimerStrategy.stChargePeriod.stPeriod1.stPeriod.u8StartSec);
                            tab_Regular_Time_Start_modify[6] = tab_time_Sec_Start[0];
                            tab_Regular_Time_Start_modify[7] = tab_time_Sec_Start[1];
                            
                            
                            char tab_time_End_Start[2] = {0};
                            sprintf(tab_time_End_Start,"%02d",gDisplay.stDisplaySet.stStrategy.stTimerStrategy.stChargePeriod.stPeriod1.stPeriod.u8EndHour);
                            tab_Regular_Time_End_modify[0] = tab_time_End_Start[0];
                            tab_Regular_Time_End_modify[1] = tab_time_End_Start[1];
                            
                            char tab_time_End_Min[2] = {0};
                            sprintf(tab_time_End_Min,"%02d",gDisplay.stDisplaySet.stStrategy.stTimerStrategy.stChargePeriod.stPeriod1.stPeriod.u8EndMin);
                            tab_Regular_Time_End_modify[3] = tab_time_End_Min[0];
                            tab_Regular_Time_End_modify[4] = tab_time_End_Min[1];
                            
                            char tab_time_End_Sec[2] = {0};
                            sprintf(tab_time_End_Sec,"%02d",gDisplay.stDisplaySet.stStrategy.stTimerStrategy.stChargePeriod.stPeriod1.stPeriod.u8EndSec);
                            tab_Regular_Time_End_modify[6] = tab_time_End_Sec[0];
                            tab_Regular_Time_End_modify[7] = tab_time_End_Sec[1];
                        }
                        else if(enum_Period == STRATEGY_REGULAR_PERIOD_TWO)
                        {
                            sprintf(tab_RegularPower_modify,"%04d",gDisplay.stDisplaySet.stStrategy.stTimerStrategy.stChargePeriod.stPeriod2.s16Power); 
                            sprintf(tab_RegularStop_SOC_modify,"%03d",gDisplay.stDisplaySet.stStrategy.stTimerStrategy.stChargePeriod.stPeriod2.u8StopSOC);
                                    
                            char tab_time_Hour_Start[2] = {0};
                            sprintf(tab_time_Hour_Start,"%02d",gDisplay.stDisplaySet.stStrategy.stTimerStrategy.stChargePeriod.stPeriod2.stPeriod.u8StartHour);
                            tab_Regular_Time_Start_modify[0] = tab_time_Hour_Start[0];
                            tab_Regular_Time_Start_modify[1] = tab_time_Hour_Start[1];
                            
                            char tab_time_Min_Start[2] = {0};
                            sprintf(tab_time_Min_Start,"%02d",gDisplay.stDisplaySet.stStrategy.stTimerStrategy.stChargePeriod.stPeriod2.stPeriod.u8StartMin);
                            tab_Regular_Time_Start_modify[3] = tab_time_Min_Start[0];
                            tab_Regular_Time_Start_modify[4] = tab_time_Min_Start[1];
                            
                            char tab_time_Sec_Start[2] = {0};
                            sprintf(tab_time_Sec_Start,"%02d",gDisplay.stDisplaySet.stStrategy.stTimerStrategy.stChargePeriod.stPeriod2.stPeriod.u8StartSec);
                            tab_Regular_Time_Start_modify[6] = tab_time_Sec_Start[0];
                            tab_Regular_Time_Start_modify[7] = tab_time_Sec_Start[1];
                            
                            
                            char tab_time_End_Start[2] = {0};
                            sprintf(tab_time_End_Start,"%02d",gDisplay.stDisplaySet.stStrategy.stTimerStrategy.stChargePeriod.stPeriod2.stPeriod.u8EndHour);
                            tab_Regular_Time_End_modify[0] = tab_time_End_Start[0];
                            tab_Regular_Time_End_modify[1] = tab_time_End_Start[1];
                            
                            char tab_time_End_Min[2] = {0};
                            sprintf(tab_time_End_Min,"%02d",gDisplay.stDisplaySet.stStrategy.stTimerStrategy.stChargePeriod.stPeriod2.stPeriod.u8EndMin);
                            tab_Regular_Time_End_modify[3] = tab_time_End_Min[0];
                            tab_Regular_Time_End_modify[4] = tab_time_End_Min[1];
                            
                            char tab_time_End_Sec[2] = {0};
                            sprintf(tab_time_End_Sec,"%02d",gDisplay.stDisplaySet.stStrategy.stTimerStrategy.stChargePeriod.stPeriod2.stPeriod.u8EndSec);
                            tab_Regular_Time_End_modify[6] = tab_time_End_Sec[0];
                            tab_Regular_Time_End_modify[7] = tab_time_End_Sec[1];
                        }
                        else if(enum_Period == STRATEGY_REGULAR_PERIOD_THREE)
                        {
                            sprintf(tab_RegularPower_modify,"%04d",gDisplay.stDisplaySet.stStrategy.stTimerStrategy.stChargePeriod.stPeriod3.s16Power); 
                            sprintf(tab_RegularStop_SOC_modify,"%03d",gDisplay.stDisplaySet.stStrategy.stTimerStrategy.stChargePeriod.stPeriod3.u8StopSOC);
                            
                            char tab_time_Hour_Start[2] = {0}; 
                            sprintf(tab_time_Hour_Start,"%02d",gDisplay.stDisplaySet.stStrategy.stTimerStrategy.stChargePeriod.stPeriod3.stPeriod.u8StartHour);
                            tab_Regular_Time_Start_modify[0] = tab_time_Hour_Start[0];
                            tab_Regular_Time_Start_modify[1] = tab_time_Hour_Start[1];
                            
                            char tab_time_Min_Start[2] = {0}; 
                            sprintf(tab_time_Min_Start,"%02d",gDisplay.stDisplaySet.stStrategy.stTimerStrategy.stChargePeriod.stPeriod3.stPeriod.u8StartMin);
                            tab_Regular_Time_Start_modify[3] = tab_time_Min_Start[0];
                            tab_Regular_Time_Start_modify[4] = tab_time_Min_Start[1];
                            
                            char tab_time_Sec_Start[2] = {0}; 
                            sprintf(tab_time_Sec_Start,"%02d",gDisplay.stDisplaySet.stStrategy.stTimerStrategy.stChargePeriod.stPeriod3.stPeriod.u8StartSec);
                            tab_Regular_Time_Start_modify[6] = tab_time_Sec_Start[0];
                            tab_Regular_Time_Start_modify[7] = tab_time_Sec_Start[1];
                            
                            
                            char tab_time_End_Start[2] = {0}; 
                            sprintf(tab_time_End_Start,"%02d",gDisplay.stDisplaySet.stStrategy.stTimerStrategy.stChargePeriod.stPeriod3.stPeriod.u8EndHour);
                            tab_Regular_Time_End_modify[0] = tab_time_End_Start[0];
                            tab_Regular_Time_End_modify[1] = tab_time_End_Start[1];
                            
                            char tab_time_End_Min[2] = {0}; 
                            sprintf(tab_time_End_Min,"%02d",gDisplay.stDisplaySet.stStrategy.stTimerStrategy.stChargePeriod.stPeriod3.stPeriod.u8EndMin);
                            tab_Regular_Time_End_modify[3] = tab_time_End_Min[0];
                            tab_Regular_Time_End_modify[4] = tab_time_End_Min[1];
                            
                            char tab_time_End_Sec[2] = {0}; 
                            sprintf(tab_time_End_Sec,"%02d",gDisplay.stDisplaySet.stStrategy.stTimerStrategy.stChargePeriod.stPeriod3.stPeriod.u8EndSec);
                            tab_Regular_Time_End_modify[6] = tab_time_End_Sec[0];
                            tab_Regular_Time_End_modify[7] = tab_time_End_Sec[1];
                        }
                        else if(enum_Period == STRATEGY_REGULAR_PERIOD_FOUR)
                        {
                            sprintf(tab_RegularPower_modify,"%04d",gDisplay.stDisplaySet.stStrategy.stTimerStrategy.stChargePeriod.stPeriod4.s16Power); 
                            sprintf(tab_RegularStop_SOC_modify,"%03d",gDisplay.stDisplaySet.stStrategy.stTimerStrategy.stChargePeriod.stPeriod4.u8StopSOC);
                                    
                            char tab_time_Hour_Start[2] = {0}; 
                            sprintf(tab_time_Hour_Start,"%02d",gDisplay.stDisplaySet.stStrategy.stTimerStrategy.stChargePeriod.stPeriod4.stPeriod.u8StartHour);
                            tab_Regular_Time_Start_modify[0] = tab_time_Hour_Start[0];
                            tab_Regular_Time_Start_modify[1] = tab_time_Hour_Start[1];
                            
                            char tab_time_Min_Start[2] = {0}; 
                            sprintf(tab_time_Min_Start,"%02d",gDisplay.stDisplaySet.stStrategy.stTimerStrategy.stChargePeriod.stPeriod4.stPeriod.u8StartMin);
                            tab_Regular_Time_Start_modify[3] = tab_time_Min_Start[0];
                            tab_Regular_Time_Start_modify[4] = tab_time_Min_Start[1];
                            
                            char tab_time_Sec_Start[2] = {0}; 
                            sprintf(tab_time_Sec_Start,"%02d",gDisplay.stDisplaySet.stStrategy.stTimerStrategy.stChargePeriod.stPeriod4.stPeriod.u8StartSec);
                            tab_Regular_Time_Start_modify[6] = tab_time_Sec_Start[0];
                            tab_Regular_Time_Start_modify[7] = tab_time_Sec_Start[1];
                            
                            
                            char tab_time_End_Start[2] = {0}; 
                            sprintf(tab_time_End_Start,"%02d",gDisplay.stDisplaySet.stStrategy.stTimerStrategy.stChargePeriod.stPeriod4.stPeriod.u8EndHour);
                            tab_Regular_Time_End_modify[0] = tab_time_End_Start[0];
                            tab_Regular_Time_End_modify[1] = tab_time_End_Start[1];
                            
                            char tab_time_End_Min[2] = {0}; 
                            sprintf(tab_time_End_Min,"%02d",gDisplay.stDisplaySet.stStrategy.stTimerStrategy.stChargePeriod.stPeriod4.stPeriod.u8EndMin);
                            tab_Regular_Time_End_modify[3] = tab_time_End_Min[0];
                            tab_Regular_Time_End_modify[4] = tab_time_End_Min[1];
                            
                            char tab_time_End_Sec[2] = {0}; 
                            sprintf(tab_time_End_Sec,"%02d",gDisplay.stDisplaySet.stStrategy.stTimerStrategy.stChargePeriod.stPeriod4.stPeriod.u8EndSec);
                            tab_Regular_Time_End_modify[6] = tab_time_End_Sec[0];
                            tab_Regular_Time_End_modify[7] = tab_time_End_Sec[1];    
                        }
                    }
                    else if(enum_RegularClass == REGULAR_DISCHARGE)
                    {
                        if(enum_Period == STRATEGY_REGULAR_PERIOD_ONE)
                        {
                            sprintf(tab_RegularPower_modify,"%04d",gDisplay.stDisplaySet.stStrategy.stTimerStrategy.stDisChargePeriod.stPeriod1.s16Power * -1); 
                            sprintf(tab_RegularStop_SOC_modify,"%03d",gDisplay.stDisplaySet.stStrategy.stTimerStrategy.stDisChargePeriod.stPeriod1.u8StopSOC);
                                    
                            char tab_time_Hour_Start[2] = {0}; 
                            sprintf(tab_time_Hour_Start,"%02d",gDisplay.stDisplaySet.stStrategy.stTimerStrategy.stDisChargePeriod.stPeriod1.stPeriod.u8StartHour);
                            tab_Regular_Time_Start_modify[0] = tab_time_Hour_Start[0];
                            tab_Regular_Time_Start_modify[1] = tab_time_Hour_Start[1];
                            
                            char tab_time_Min_Start[2] = {0}; 
                            sprintf(tab_time_Min_Start,"%02d",gDisplay.stDisplaySet.stStrategy.stTimerStrategy.stDisChargePeriod.stPeriod1.stPeriod.u8StartMin);
                            tab_Regular_Time_Start_modify[3] = tab_time_Min_Start[0];
                            tab_Regular_Time_Start_modify[4] = tab_time_Min_Start[1];
                            
                            char tab_time_Sec_Start[2] = {0}; 
                            sprintf(tab_time_Sec_Start,"%02d",gDisplay.stDisplaySet.stStrategy.stTimerStrategy.stDisChargePeriod.stPeriod1.stPeriod.u8StartSec);
                            tab_Regular_Time_Start_modify[6] = tab_time_Sec_Start[0];
                            tab_Regular_Time_Start_modify[7] = tab_time_Sec_Start[1];
                            
                            
                            char tab_time_End_Start[2] = {0}; 
                            sprintf(tab_time_End_Start,"%02d",gDisplay.stDisplaySet.stStrategy.stTimerStrategy.stDisChargePeriod.stPeriod1.stPeriod.u8EndHour);
                            tab_Regular_Time_End_modify[0] = tab_time_End_Start[0];
                            tab_Regular_Time_End_modify[1] = tab_time_End_Start[1];
                            
                            char tab_time_End_Min[2] = {0}; 
                            sprintf(tab_time_End_Min,"%02d",gDisplay.stDisplaySet.stStrategy.stTimerStrategy.stDisChargePeriod.stPeriod1.stPeriod.u8EndMin);
                            tab_Regular_Time_End_modify[3] = tab_time_End_Min[0];
                            tab_Regular_Time_End_modify[4] = tab_time_End_Min[1];
                            
                            char tab_time_End_Sec[2] = {0}; 
                            sprintf(tab_time_End_Sec,"%02d",gDisplay.stDisplaySet.stStrategy.stTimerStrategy.stDisChargePeriod.stPeriod1.stPeriod.u8EndSec);
                            tab_Regular_Time_End_modify[6] = tab_time_End_Sec[0];
                            tab_Regular_Time_End_modify[7] = tab_time_End_Sec[1];
                        }
                        else if(enum_Period == STRATEGY_REGULAR_PERIOD_TWO)
                        {
                            sprintf(tab_RegularPower_modify,"%04d",gDisplay.stDisplaySet.stStrategy.stTimerStrategy.stDisChargePeriod.stPeriod2.s16Power * -1); 
                            sprintf(tab_RegularStop_SOC_modify,"%03d",gDisplay.stDisplaySet.stStrategy.stTimerStrategy.stDisChargePeriod.stPeriod2.u8StopSOC);
                                    
                            char tab_time_Hour_Start[2] = {0}; 
                            sprintf(tab_time_Hour_Start,"%02d",gDisplay.stDisplaySet.stStrategy.stTimerStrategy.stDisChargePeriod.stPeriod2.stPeriod.u8StartHour);
                            tab_Regular_Time_Start_modify[0] = tab_time_Hour_Start[0];
                            tab_Regular_Time_Start_modify[1] = tab_time_Hour_Start[1];
                            
                            char tab_time_Min_Start[2] = {0}; 
                            sprintf(tab_time_Min_Start,"%02d",gDisplay.stDisplaySet.stStrategy.stTimerStrategy.stDisChargePeriod.stPeriod2.stPeriod.u8StartMin);
                            tab_Regular_Time_Start_modify[3] = tab_time_Min_Start[0];
                            tab_Regular_Time_Start_modify[4] = tab_time_Min_Start[1];
                            
                            char tab_time_Sec_Start[2] = {0}; 
                            sprintf(tab_time_Sec_Start,"%02d",gDisplay.stDisplaySet.stStrategy.stTimerStrategy.stDisChargePeriod.stPeriod2.stPeriod.u8StartSec);
                            tab_Regular_Time_Start_modify[6] = tab_time_Sec_Start[0];
                            tab_Regular_Time_Start_modify[7] = tab_time_Sec_Start[1];
                            
                            
                            char tab_time_End_Start[2] = {0}; 
                            sprintf(tab_time_End_Start,"%02d",gDisplay.stDisplaySet.stStrategy.stTimerStrategy.stDisChargePeriod.stPeriod2.stPeriod.u8EndHour);
                            tab_Regular_Time_End_modify[0] = tab_time_End_Start[0];
                            tab_Regular_Time_End_modify[1] = tab_time_End_Start[1];
                            
                            char tab_time_End_Min[2] = {0}; 
                            sprintf(tab_time_End_Min,"%02d",gDisplay.stDisplaySet.stStrategy.stTimerStrategy.stDisChargePeriod.stPeriod2.stPeriod.u8EndMin);
                            tab_Regular_Time_End_modify[3] = tab_time_End_Min[0];
                            tab_Regular_Time_End_modify[4] = tab_time_End_Min[1];
                            
                            char tab_time_End_Sec[2] = {0}; 
                            sprintf(tab_time_End_Sec,"%02d",gDisplay.stDisplaySet.stStrategy.stTimerStrategy.stDisChargePeriod.stPeriod2.stPeriod.u8EndSec);
                            tab_Regular_Time_End_modify[6] = tab_time_End_Sec[0];
                            tab_Regular_Time_End_modify[7] = tab_time_End_Sec[1];
                        }
                        else if(enum_Period == STRATEGY_REGULAR_PERIOD_THREE)
                        {
                            sprintf(tab_RegularPower_modify,"%04d",gDisplay.stDisplaySet.stStrategy.stTimerStrategy.stDisChargePeriod.stPeriod3.s16Power * -1); 
                            sprintf(tab_RegularStop_SOC_modify,"%03d",gDisplay.stDisplaySet.stStrategy.stTimerStrategy.stDisChargePeriod.stPeriod3.u8StopSOC);
                                    
                            char tab_time_Hour_Start[2] = {0}; 
                            sprintf(tab_time_Hour_Start,"%02d",gDisplay.stDisplaySet.stStrategy.stTimerStrategy.stDisChargePeriod.stPeriod3.stPeriod.u8StartHour);
                            tab_Regular_Time_Start_modify[0] = tab_time_Hour_Start[0];
                            tab_Regular_Time_Start_modify[1] = tab_time_Hour_Start[1];
                            
                            char tab_time_Min_Start[2] = {0}; 
                            sprintf(tab_time_Min_Start,"%02d",gDisplay.stDisplaySet.stStrategy.stTimerStrategy.stDisChargePeriod.stPeriod3.stPeriod.u8StartMin);
                            tab_Regular_Time_Start_modify[3] = tab_time_Min_Start[0];
                            tab_Regular_Time_Start_modify[4] = tab_time_Min_Start[1];
                            
                            char tab_time_Sec_Start[2] = {0}; 
                            sprintf(tab_time_Sec_Start,"%02d",gDisplay.stDisplaySet.stStrategy.stTimerStrategy.stDisChargePeriod.stPeriod3.stPeriod.u8StartSec);
                            tab_Regular_Time_Start_modify[6] = tab_time_Sec_Start[0];
                            tab_Regular_Time_Start_modify[7] = tab_time_Sec_Start[1];
                            
                            
                            char tab_time_End_Start[2] = {0}; 
                            sprintf(tab_time_End_Start,"%02d",gDisplay.stDisplaySet.stStrategy.stTimerStrategy.stDisChargePeriod.stPeriod3.stPeriod.u8EndHour);
                            tab_Regular_Time_End_modify[0] = tab_time_End_Start[0];
                            tab_Regular_Time_End_modify[1] = tab_time_End_Start[1];
                            
                            char tab_time_End_Min[2] = {0}; 
                            sprintf(tab_time_End_Min,"%02d",gDisplay.stDisplaySet.stStrategy.stTimerStrategy.stDisChargePeriod.stPeriod3.stPeriod.u8EndMin);
                            tab_Regular_Time_End_modify[3] = tab_time_End_Min[0];
                            tab_Regular_Time_End_modify[4] = tab_time_End_Min[1];
                            
                            char tab_time_End_Sec[2] = {0}; 
                            sprintf(tab_time_End_Sec,"%02d",gDisplay.stDisplaySet.stStrategy.stTimerStrategy.stDisChargePeriod.stPeriod3.stPeriod.u8EndSec);
                            tab_Regular_Time_End_modify[6] = tab_time_End_Sec[0];
                            tab_Regular_Time_End_modify[7] = tab_time_End_Sec[1];
                        }
                        else if(enum_Period == STRATEGY_REGULAR_PERIOD_FOUR)
                        {
                            sprintf(tab_RegularPower_modify,"%04d",gDisplay.stDisplaySet.stStrategy.stTimerStrategy.stDisChargePeriod.stPeriod4.s16Power * -1); 
                            sprintf(tab_RegularStop_SOC_modify,"%03d",gDisplay.stDisplaySet.stStrategy.stTimerStrategy.stDisChargePeriod.stPeriod4.u8StopSOC);
                                    
                            char tab_time_Hour_Start[2] = {0}; 
                            sprintf(tab_time_Hour_Start,"%02d",gDisplay.stDisplaySet.stStrategy.stTimerStrategy.stDisChargePeriod.stPeriod4.stPeriod.u8StartHour);
                            tab_Regular_Time_Start_modify[0] = tab_time_Hour_Start[0];
                            tab_Regular_Time_Start_modify[1] = tab_time_Hour_Start[1];
                            
                            char tab_time_Min_Start[2] = {0}; 
                            sprintf(tab_time_Min_Start,"%02d",gDisplay.stDisplaySet.stStrategy.stTimerStrategy.stDisChargePeriod.stPeriod4.stPeriod.u8StartMin);
                            tab_Regular_Time_Start_modify[3] = tab_time_Min_Start[0];
                            tab_Regular_Time_Start_modify[4] = tab_time_Min_Start[1];
                            
                            char tab_time_Sec_Start[2] = {0}; 
                            sprintf(tab_time_Sec_Start,"%02d",gDisplay.stDisplaySet.stStrategy.stTimerStrategy.stDisChargePeriod.stPeriod4.stPeriod.u8StartSec);
                            tab_Regular_Time_Start_modify[6] = tab_time_Sec_Start[0];
                            tab_Regular_Time_Start_modify[7] = tab_time_Sec_Start[1];
                            
                            
                            char tab_time_End_Start[2] = {0}; 
                            sprintf(tab_time_End_Start,"%02d",gDisplay.stDisplaySet.stStrategy.stTimerStrategy.stDisChargePeriod.stPeriod4.stPeriod.u8EndHour);
                            tab_Regular_Time_End_modify[0] = tab_time_End_Start[0];
                            tab_Regular_Time_End_modify[1] = tab_time_End_Start[1];
                            
                            char tab_time_End_Min[2] = {0}; 
                            sprintf(tab_time_End_Min,"%02d",gDisplay.stDisplaySet.stStrategy.stTimerStrategy.stDisChargePeriod.stPeriod4.stPeriod.u8EndMin);
                            tab_Regular_Time_End_modify[3] = tab_time_End_Min[0];
                            tab_Regular_Time_End_modify[4] = tab_time_End_Min[1];
                            
                            char tab_time_End_Sec[2] = {0}; 
                            sprintf(tab_time_End_Sec,"%02d",gDisplay.stDisplaySet.stStrategy.stTimerStrategy.stDisChargePeriod.stPeriod4.stPeriod.u8EndSec);
                            tab_Regular_Time_End_modify[6] = tab_time_End_Sec[0];
                            tab_Regular_Time_End_modify[7] = tab_time_End_Sec[1];
                        }      
                    }
           
                    sprintf(tab_RegularPower,"%s",tab_RegularPower_modify);
                    sprintf(tab_RegularStop_SOC,"%s",tab_RegularStop_SOC_modify); 
					sprintf(tab_Regular_Time_Start,"%s",tab_Regular_Time_Start_modify);
                    sprintf(tab_Regular_Time_End,"%s",tab_Regular_Time_End_modify);
                }
                gCurrentMenu.eCurrentDisplayMenuType = nowDisplayType;
            }
            break;
    }
    
    if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_ENGLISH) //定时充放电策略时间段设置 英文界面组装
    { 
        if(gbEditFlag == STATUS_TRUE)
        {
            Display_Set_UnderLine_Blink_Position(STATUS_TRUE,arrayREGULARStartegyFlicker[sU8RegularStrategyCounter].u8StartPos,arrayREGULARStartegyFlicker[sU8RegularStrategyCounter].u8EndPos);
            updateDisplaySystemRegularStrategyPeriodSetData_English(tab_RegularStop_SOC_modify,tab_RegularPower_modify,tab_Regular_Time_Start_modify,tab_Regular_Time_End_modify,enum_RegularClass,enum_Period);
        }
        else
        {
            updateDisplaySystemRegularStrategyPeriodSetData_English(tab_RegularStop_SOC,tab_RegularPower,tab_Regular_Time_Start,tab_Regular_Time_End,enum_RegularClass,enum_Period);  
        }
    }
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_CHINESE)//定时充放电策略时间段设置 中文界面组装
    {
        if(gbEditFlag == STATUS_TRUE)
        {
            //Display_Set_UnderLine_Blink_Position(STATUS_TRUE,arrayREGULARStartegyFlickerChinese[sU8RegularStrategyCounter].u8StartPos,arrayREGULARStartegyFlickerChinese[sU8RegularStrategyCounter].u8EndPos);
            updateDisplaySystemRegularStrategyPeriodSetData_Chinese(tab_RegularStop_SOC_modify,tab_RegularPower_modify,tab_Regular_Time_Start_modify,tab_Regular_Time_End_modify,enum_RegularClass,enum_Period);
        }
        else
        {
            updateDisplaySystemRegularStrategyPeriodSetData_Chinese(tab_RegularStop_SOC,tab_RegularPower,tab_Regular_Time_Start,tab_Regular_Time_End,enum_RegularClass,enum_Period);  
        } 
    }    
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_SPANISH)//定时充放电策略时间段设置 西班牙界面组装
    { 
        updateDisplaySystemRegularStrategyPeriodSetData_Spanish(tab_RegularStop_SOC,tab_RegularPower,tab_Regular_Time_Start,tab_Regular_Time_End,enum_RegularClass,enum_Period);
    } 
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_GERMAN)//定时充放电策略时间段设置 德语界面组装
    { 
        updateDisplaySystemRegularStrategyPeriodSetData_German(tab_RegularStop_SOC,tab_RegularPower,tab_Regular_Time_Start,tab_Regular_Time_End,enum_RegularClass,enum_Period);
    } 
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_FRENCH)//定时充放电策略时间段设置 法语界面组装
    { 
        updateDisplaySystemRegularStrategyPeriodSetData_French(tab_RegularStop_SOC,tab_RegularPower,tab_Regular_Time_Start,tab_Regular_Time_End,enum_RegularClass,enum_Period);                     
    }   
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_POLISH)//定时充放电策略时间段设置 波兰界面组装
    {
        updateDisplaySystemRegularStrategyPeriodSetData_Polish(tab_RegularStop_SOC,tab_RegularPower,tab_Regular_Time_Start,tab_Regular_Time_End,enum_RegularClass,enum_Period);
    }    
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_ITALIAN)//定时充放电策略时间段设置 意大利界面组装
    {
        updateDisplaySystemRegularStrategyPeriodSetData_Italian(tab_RegularStop_SOC,tab_RegularPower,tab_Regular_Time_Start,tab_Regular_Time_End,enum_RegularClass,enum_Period);                   
    } 
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_CZECH)//定时充放电策略时间段设置 捷克界面组装
    { 
        updateDisplaySystemRegularStrategyPeriodSetData_Czech(tab_RegularStop_SOC,tab_RegularPower,tab_Regular_Time_Start,tab_Regular_Time_End,enum_RegularClass,enum_Period);                  
    }   
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_DUTCH)//定时充放电策略时间段设置 荷兰界面组装
    { 
        updateDisplaySystemRegularStrategyPeriodSetData_Dutch(tab_RegularStop_SOC,tab_RegularPower,tab_Regular_Time_Start,tab_Regular_Time_End,enum_RegularClass,enum_Period);                 
    }
    else
    {
        updateDisplaySystemRegularStrategyPeriodSetData_English(tab_RegularStop_SOC,tab_RegularPower,tab_Regular_Time_Start,tab_Regular_Time_End,enum_RegularClass,enum_Period);                    
    }

}

/***************************************************************************
 功能:英文 系统定时充放电时间段设置界面信息
****************************************************************************/
void updateDisplaySystemRegularStrategyPeriodSetData_English(char* strStopSOC,char* strPower, char* strStartTime, char* strEndTime,REGULAR_TypeDef enum_RegularClass,REGULAR_Strategy_TypeDef enum_Period)
{  
    memset(tab_display,0,DISPLAY_CACHE_SIZE); 
    if(enum_RegularClass == REGULAR_CHARGE)
    {
        if(enum_Period == STRATEGY_REGULAR_PERIOD_ONE)
        {
            sprintf(tab_display,"    Charge Perid 1   \nPower:%s SOC:%s   \nStart Time:%s  \nEnd Time:%s   \n",strPower,strStopSOC,strStartTime,strEndTime);               
        }
        else if(enum_Period == STRATEGY_REGULAR_PERIOD_TWO)
        {
            sprintf(tab_display,"    Charge Perid 2   \nPower:%s SOC:%s   \nStart Time:%s  \nEnd Time:%s   \n",strPower,strStopSOC,strStartTime,strEndTime);          
        }
        else if(enum_Period == STRATEGY_REGULAR_PERIOD_THREE)
        {
            sprintf(tab_display,"    Charge Perid 3   \nPower:%s SOC:%s   \nStart Time:%s  \nEnd Time:%s   \n",strPower,strStopSOC,strStartTime,strEndTime);
        } 
        else if(enum_Period == STRATEGY_REGULAR_PERIOD_FOUR)
        {
            sprintf(tab_display,"    Charge Perid 4   \nPower:%s SOC:%s   \nStart Time:%s  \nEnd Time:%s   \n",strPower,strStopSOC,strStartTime,strEndTime);
        }
    }
    else if(enum_RegularClass == REGULAR_DISCHARGE)
    {
        if(enum_Period == STRATEGY_REGULAR_PERIOD_ONE)
        {
            sprintf(tab_display,"  DisCharge Perid 1  \nPower:%s SOC:%s   \nStart Time:%s  \nEnd Time:%s   \n",strPower,strStopSOC,strStartTime,strEndTime);               
        }
        else if(enum_Period == STRATEGY_REGULAR_PERIOD_TWO)
        {
            sprintf(tab_display,"  DisCharge Perid 2  \nPower:%s SOC:%s   \nStart Time:%s  \nEnd Time:%s   \n",strPower,strStopSOC,strStartTime,strEndTime);          
        }
        else if(enum_Period == STRATEGY_REGULAR_PERIOD_THREE)
        {
            sprintf(tab_display,"  DisCharge Perid 3  \nPower:%s SOC:%s   \nStart Time:%s  \nEnd Time:%s   \n",strPower,strStopSOC,strStartTime,strEndTime);
        }
        else if(enum_Period == STRATEGY_REGULAR_PERIOD_FOUR)
        {
            sprintf(tab_display,"  DisCharge Perid 4  \nPower:%s SOC:%s   \nStart Time:%s  \nEnd Time:%s   \n",strPower,strStopSOC,strStartTime,strEndTime);
        }
    }
    //GUI_DispStringAt((uint8_t*)tab_display, 0, 0);
    GUI_Display(tab_display, 0, 0);
}


/***************************************************************************
 功能:西班牙语 系统定时充放电时间段设置界面信息
****************************************************************************/
void updateDisplaySystemRegularStrategyPeriodSetData_Spanish(char* strStopSOC,char* strPower, char* strStartTime, char* strEndTime,REGULAR_TypeDef enum_RegularClass,REGULAR_Strategy_TypeDef enum_Period)
{ 
    
}

/***************************************************************************
 功能:德语 系统定时充放电时间段设置界面信息
****************************************************************************/
void updateDisplaySystemRegularStrategyPeriodSetData_German(char* strStopSOC,char* strPower, char* strStartTime, char* strEndTime,REGULAR_TypeDef enum_RegularClass,REGULAR_Strategy_TypeDef enum_Period)
{ 
    
}

/***************************************************************************
 功能:法语 系统定时充放电时间段设置界面信息
****************************************************************************/
void updateDisplaySystemRegularStrategyPeriodSetData_French(char* strStopSOC,char* strPower, char* strStartTime, char* strEndTime,REGULAR_TypeDef enum_RegularClass,REGULAR_Strategy_TypeDef enum_Period)
{ 
    
}

/***************************************************************************
 功能:波兰语 系统定时充放电时间段设置界面信息
****************************************************************************/
void updateDisplaySystemRegularStrategyPeriodSetData_Polish(char* strStopSOC,char* strPower, char* strStartTime, char* strEndTime,REGULAR_TypeDef enum_RegularClass,REGULAR_Strategy_TypeDef enum_Period)
{ 
    
}

/***************************************************************************
 功能:意大利语 系统定时充放电时间段设置界面信息
****************************************************************************/
void updateDisplaySystemRegularStrategyPeriodSetData_Italian(char* strStopSOC,char* strPower, char* strStartTime, char* strEndTime,REGULAR_TypeDef enum_RegularClass,REGULAR_Strategy_TypeDef enum_Period)
{ 
    
}

/***************************************************************************
 功能:捷克语 系统定时充放电时间段设置界面信息
****************************************************************************/
void updateDisplaySystemRegularStrategyPeriodSetData_Czech(char* strStopSOC,char* strPower, char* strStartTime, char* strEndTime,REGULAR_TypeDef enum_RegularClass,REGULAR_Strategy_TypeDef enum_Period)
{ 
    
}

/***************************************************************************
 功能:荷兰语 系统定时充放电时间段设置界面信息
****************************************************************************/
void updateDisplaySystemRegularStrategyPeriodSetData_Dutch(char* strStopSOC,char* strPower, char* strStartTime, char* strEndTime,REGULAR_TypeDef enum_RegularClass,REGULAR_Strategy_TypeDef enum_Period)
{ 
    
}


/***************************************************************************
功能:设置系统CT变比设置
****************************************************************************/
void updateDisplaySystemCTRatioData(KeyAction_TypeDef nowActionType,DisplayAction_TypeDef nowDisplayType)
{
    static uint8_t sU8CTRadioCounter = 0;
    static uint8_t sU8NumberCounter = 0;
    
    switch(nowActionType) 
    {
        case KEYACTION_ENTER://在CT变比设置界面下，Enter键按下，在系统设置对应的时间
            { 
                if(gbEditFlag != STATUS_FALSE)
                {
                    setSystemCTRatioData(bCTEnableFlag_modify);
                    sprintf(tab_CurrentCT_edit,"%s",tab_CurrentCT_edit_modify);
                    sprintf(tab_VoltageCT_edit,"%s",tab_VoltageCT_edit_modify);
                    bCTEnableFlag = bCTEnableFlag_modify;
                    
                    gCurrentMenu.stTip.eOccurTipAction = DISPLAY_SET_SYSTEM;
                    gCurrentMenu.stTip.eTipType = TIP_PASSED;
                    gCurrentMenu.stTip.u8PromptTime = 20;
                    gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_PROMPT;

                    gbEditFlag = STATUS_FALSE;
                    sU8CTRadioCounter = 0;
                    sU8NumberCounter = 0;
                    Display_Set_UnderLine_Blink_Position(STATUS_FALSE,0,0);
                }
            }
            break;
        case KEYACTION_DOWN://在CT变比设置界面下，UP键按下，要设置的数字+1
            {
                if(gbEditFlag != STATUS_TRUE) //进入编辑模式  
                {
                    gbEditFlag = STATUS_TRUE;
                    sprintf(tab_CurrentCT_edit_modify,"%s",tab_CurrentCT_edit);
                    sprintf(tab_VoltageCT_edit_modify,"%s",tab_VoltageCT_edit);
                    bCTEnableFlag_modify = bCTEnableFlag;
                }
                
                sU8NumberCounter++;
                
                if(sU8CTRadioCounter == 0)  //电表使能
                {
                    if(sU8NumberCounter == 0)
                    {
                       bCTEnableFlag_modify = STATUS_FALSE;
                    }
                    else if (sU8NumberCounter == 1)
                    {
                       bCTEnableFlag_modify = STATUS_TRUE;
                    }
                    else
                    {
                       sU8NumberCounter = 0; 
                       bCTEnableFlag_modify = STATUS_FALSE;
                    }
                }
                else if(sU8CTRadioCounter == 1) //电流变比第一个数字
                {
                    if(sU8NumberCounter<=9)
                    {
                       tab_CurrentCT_edit_modify[0] =  '0' + sU8NumberCounter;
                    }
                    else
                    {
                       sU8NumberCounter = 0;
                       tab_CurrentCT_edit_modify[0] = '0';
                    }
                }
                else if(sU8CTRadioCounter == 2) //电流变比第二个数字
                {
                    if(sU8NumberCounter<=9)
                    {
                       tab_CurrentCT_edit_modify[1] =  '0' + sU8NumberCounter;
                    }
                    else
                    {
                       sU8NumberCounter = 0;
                       tab_CurrentCT_edit_modify[1] = '0';
                    }
                }
                else if(sU8CTRadioCounter == 3) //电流变比第三个数字
                {
                    if(sU8NumberCounter<=9)
                    {
                       tab_CurrentCT_edit_modify[2] =  '0' + sU8NumberCounter;
                    }
                    else
                    {
                       sU8NumberCounter = 0;
                       tab_CurrentCT_edit_modify[2] = '0';
                    }
                }
                else if(sU8CTRadioCounter == 4)//电流变比第四个数字
                {
                    if(sU8NumberCounter<=9)
                    {
                       tab_CurrentCT_edit_modify[3] =  '0' + sU8NumberCounter;
                    }
                    else
                    {
                       sU8NumberCounter = 0;
                       tab_CurrentCT_edit_modify[3] = '0';
                    }
                }
                else if(sU8CTRadioCounter == 5)//电压变比第一个数字
                {
                    if(sU8NumberCounter<=9)
                    {
                       tab_VoltageCT_edit_modify[0] =  '0' + sU8NumberCounter;
                    }
                    else
                    {
                       sU8NumberCounter = 0;
                       tab_VoltageCT_edit_modify[0] = '0';
                    }
                }
                else if(sU8CTRadioCounter == 6)//电压变比第二个数字
                {
                    if(sU8NumberCounter<=9)
                    {
                       tab_VoltageCT_edit_modify[1] =  '0' + sU8NumberCounter;
                    }
                    else
                    {
                       sU8NumberCounter = 0;
                       tab_VoltageCT_edit_modify[1] = '0';
                    }
                }
                else if(sU8CTRadioCounter == 7)//电压变比第三个数字
                {
                    if(sU8NumberCounter<=9)
                    {
                       tab_VoltageCT_edit_modify[2] =  '0' + sU8NumberCounter;
                    }
                    else
                    {
                       sU8NumberCounter = 0;
                       tab_VoltageCT_edit_modify[2] = '0';
                    }
                }
                else if(sU8CTRadioCounter == 8)//电压变比第四个数字
                {
                    if(sU8NumberCounter<=9)
                    {
                       tab_VoltageCT_edit_modify[3] =  '0' + sU8NumberCounter;
                    }
                    else
                    {
                       sU8NumberCounter = 0;
                       tab_VoltageCT_edit_modify[3] = '0';
                    }
                }
                
                gCurrentMenu.eCurrentDisplayMenuType = nowDisplayType;
            }
            break;
        case KEYACTION_UP://
            { 
                if(gbEditFlag != STATUS_TRUE)//进入编辑模式 
                {
                    gbEditFlag = STATUS_TRUE;
                    sprintf(tab_CurrentCT_edit_modify,"%s",tab_CurrentCT_edit);
                    sprintf(tab_VoltageCT_edit_modify,"%s",tab_VoltageCT_edit);
                    bCTEnableFlag_modify = bCTEnableFlag;
                }
                
                sU8NumberCounter--;
                
                if(sU8CTRadioCounter == 0)  //电表使能
                {
                    if(sU8NumberCounter == 0)
                    {
                       bCTEnableFlag_modify = STATUS_FALSE;
                    }
                    else if (sU8NumberCounter == 1)
                    {
                       bCTEnableFlag_modify = STATUS_TRUE;
                    }
                    else
                    {
                       sU8NumberCounter = 1; 
                       bCTEnableFlag_modify = STATUS_TRUE;
                    }
                    
                }
                else if(sU8CTRadioCounter == 1)  //电流变比第一个数字
                {
                    if(!(sU8NumberCounter <= 9))
                    {
                       sU8NumberCounter = 9;
                       tab_CurrentCT_edit_modify[0] = '0';
                    }
                    tab_CurrentCT_edit_modify[0] =  '0' + sU8NumberCounter;
                } 
                else if(sU8CTRadioCounter == 2)//电流变比第二个数字
                {  
                    if(!(sU8NumberCounter <= 9))
                    {
                       sU8NumberCounter = 9;
                       tab_CurrentCT_edit_modify[1] = '0';
                    }
                    tab_CurrentCT_edit_modify[1] =  '0' + sU8NumberCounter;
                }
                else if(sU8CTRadioCounter == 3)//电流变比第三个数字
                {
                    if(!(sU8NumberCounter <= 9))
                    {
                       sU8NumberCounter = 9;
                       tab_CurrentCT_edit_modify[2] = '0';
                    }
                    tab_CurrentCT_edit_modify[2] =  '0' + sU8NumberCounter;
                }
                else if(sU8CTRadioCounter == 4)//电流变比第四个数字
                {
                    if(!(sU8NumberCounter <= 9))
                    {
                       sU8NumberCounter = 9;
                       tab_CurrentCT_edit_modify[3] = '0';
                    }
                    tab_CurrentCT_edit_modify[3] =  '0' + sU8NumberCounter;
                }
                else if(sU8CTRadioCounter == 5)//电压变比第一个数字
                {
                    if(!(sU8NumberCounter <= 9))
                    {
                       sU8NumberCounter = 9;
                       tab_VoltageCT_edit_modify[0] = '0';
                    }
                    tab_VoltageCT_edit_modify[0] =  '0' + sU8NumberCounter;
                }
                else if(sU8CTRadioCounter == 6)//电压变比第二个数字
                {
                    if(!(sU8NumberCounter <= 9))
                    {
                       sU8NumberCounter = 9;
                       tab_VoltageCT_edit_modify[1] = '0';
                    }
                    tab_VoltageCT_edit_modify[1] =  '0' + sU8NumberCounter;
                }
                else if(sU8CTRadioCounter == 7)//电压变比第三个数字
                {
                    if(!(sU8NumberCounter <= 9))
                    {
                       sU8NumberCounter = 9;
                       tab_VoltageCT_edit_modify[2] = '0';
                    }
                    tab_VoltageCT_edit_modify[2] =  '0' + sU8NumberCounter;
                }
                else if(sU8CTRadioCounter == 8)//电压变比第四个数字
                {
                    if(!(sU8NumberCounter <= 9))
                    {
                       sU8NumberCounter = 9;
                       tab_VoltageCT_edit_modify[3] = '0';
                    }
                    tab_VoltageCT_edit_modify[3] =  '0' + sU8NumberCounter;
                }
                
                gCurrentMenu.eCurrentDisplayMenuType = nowDisplayType;
                
            }
            break;
        case KEYACTION_UPDOWN://在CT变比设置界面下，UP键 + DOWN键同时按下，切换设置下一个数据
            { 
                sU8CTRadioCounter++;
                sU8NumberCounter = 0;
                if(sU8CTRadioCounter == DISPLAY_SET_SYSTEM_CT_ITEM_COUNT)
                {
                    sU8CTRadioCounter = 0;
                }
                gCurrentMenu.eCurrentDisplayMenuType = nowDisplayType;
            }
            break;
        case KEYACTION_ESC://在CT变比设置界面下，UP键 + DOWN键同时按下，切换设置下一个数据
            { 
                gbEditFlag = STATUS_FALSE;
                sU8NumberCounter = 0;
                gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_SET_SYSTEM;
                Display_Set_UnderLine_Blink_Position(STATUS_FALSE,0,0);
            }
            break;
        case KEYACTION_NULL://无操作刷新CT变比设置界面数据
        default:
        {
            if(gbEditFlag == STATUS_FALSE)
            {
                getSysteCTRatioData();
                sprintf(tab_VoltageCT_edit,"%04d",gDisplay.stDisplaySet.stCTRadio.u16CTVoltage);
                sprintf(tab_CurrentCT_edit,"%04d",gDisplay.stDisplaySet.stCTRadio.u16CTCurrent);
                bCTEnableFlag = (bool_t)gDisplay.stDisplaySet.stCTRadio.u8CTEnableFlag;
            }
            gCurrentMenu.eCurrentDisplayMenuType = nowDisplayType;
        }
    }
    
    if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_ENGLISH) //CT变比设置界面CTRadioSystemSet 英文界面组装
    { 
        if(gbEditFlag == STATUS_TRUE)
        {
            if(sU8CTRadioCounter == 0)
            {
                if(sU8NumberCounter == 0)
                {
                    Display_Set_UnderLine_Blink_Position(STATUS_TRUE,arrayFixCTFlicker[sU8CTRadioCounter].u8StartPos,arrayFixCTFlicker[sU8CTRadioCounter].u8EndPos+1);
                }
                else
                {
            Display_Set_UnderLine_Blink_Position(STATUS_TRUE,arrayFixCTFlicker[sU8CTRadioCounter].u8StartPos,arrayFixCTFlicker[sU8CTRadioCounter].u8EndPos);
                }
            }
            else
            {
                Display_Set_UnderLine_Blink_Position(STATUS_TRUE,arrayFixCTFlicker[sU8CTRadioCounter].u8StartPos,arrayFixCTFlicker[sU8CTRadioCounter].u8EndPos);
            }
            updateDisplaySystemCTRatioData_English(bCTEnableFlag_modify,tab_CurrentCT_edit_modify,tab_VoltageCT_edit_modify);
        }
        else 
        {
            updateDisplaySystemCTRatioData_English(bCTEnableFlag,tab_CurrentCT_edit,tab_VoltageCT_edit);
        }
    }
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_CHINESE) //CT变比设置界面CTRadioSystemSet 中文界面组装 
    {
        if(gbEditFlag == STATUS_TRUE)
        {
            if(sU8CTRadioCounter == 0)
            {
                if(sU8NumberCounter == 0)
                {
                    //Display_Set_UnderLine_Blink_Position(STATUS_TRUE,arrayFixCTFlickerChinese[sU8CTRadioCounter].u8StartPos,arrayFixCTFlickerChinese[sU8CTRadioCounter].u8EndPos+1);
                }
                else
                {
                    //Display_Set_UnderLine_Blink_Position(STATUS_TRUE,arrayFixCTFlickerChinese[sU8CTRadioCounter].u8StartPos,arrayFixCTFlickerChinese[sU8CTRadioCounter].u8EndPos);
                }
            }
            else
            {
                //Display_Set_UnderLine_Blink_Position(STATUS_TRUE,arrayFixCTFlickerChinese[sU8CTRadioCounter].u8StartPos,arrayFixCTFlickerChinese[sU8CTRadioCounter].u8EndPos);
            }
            updateDisplaySystemCTRatioData_Chinese(bCTEnableFlag_modify,tab_CurrentCT_edit_modify,tab_VoltageCT_edit_modify);
        }
        else 
        {
            updateDisplaySystemCTRatioData_Chinese(bCTEnableFlag,tab_CurrentCT_edit,tab_VoltageCT_edit);
        }
    }
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_SPANISH)//CT变比设置界面CTRadioSystemSet 西班牙界面组装 
    { 
        updateDisplaySystemCTRatioData_Spanish(bCTEnableFlag,tab_CurrentCT_edit,tab_VoltageCT_edit); 
    }
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_GERMAN)//CT变比设置界面CTRadioSystemSet 德语界面组装 
    { 
        updateDisplaySystemCTRatioData_German(bCTEnableFlag,tab_CurrentCT_edit,tab_VoltageCT_edit); 
    }
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_FRENCH)//CT变比设置界面CTRadioSystemSet 法语界面组装 
    { 
        updateDisplaySystemCTRatioData_French(bCTEnableFlag,tab_CurrentCT_edit,tab_VoltageCT_edit);
    }
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_POLISH)//CT变比设置界面CTRadioSystemSet 波兰界面组装 
    {
        updateDisplaySystemCTRatioData_Polish(bCTEnableFlag,tab_CurrentCT_edit,tab_VoltageCT_edit); 
    }
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_ITALIAN)//CT变比设置界面CTRadioSystemSet 意大利界面组装 
    {
        updateDisplaySystemCTRatioData_Italian(bCTEnableFlag,tab_CurrentCT_edit,tab_VoltageCT_edit);
    }
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_CZECH)//CT变比设置界面CTRadioSystemSet 捷克界面组装
    { 
        updateDisplaySystemCTRatioData_Czech(bCTEnableFlag,tab_CurrentCT_edit,tab_VoltageCT_edit);
    }
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_DUTCH) //CT变比设置界面CTRadioSystemSet 荷兰界面组装 
    {
        updateDisplaySystemCTRatioData_Dutch(bCTEnableFlag,tab_CurrentCT_edit,tab_VoltageCT_edit);
    }
    else
    { 
        updateDisplaySystemCTRatioData_English(bCTEnableFlag,tab_CurrentCT_edit,tab_VoltageCT_edit);
    }
}

/***************************************************************************
 功能:设置系统CT变比设置英文界面信息
****************************************************************************/
void updateDisplaySystemCTRatioData_English(bool_t bEnableFlag,char* sCurrentCT,char* sVoltageCT)   
{
    memset(tab_display,0,DISPLAY_CACHE_SIZE);
    if(bEnableFlag == STATUS_FALSE)
    {
        sprintf(tab_display,"  Transformer Ratio  \nEnable:disable        \nCT:%s              \nVT:%s             \n",sCurrentCT,sVoltageCT);
    }
    else
    {
        sprintf(tab_display,"  Transformer Ratio  \nEnable:enable        \nCT:%s              \nVT:%s             \n",sCurrentCT,sVoltageCT);        
    }
    //GUI_DispStringAt((uint8_t*)tab_display, 0, 0); 
    GUI_Display(tab_display, 0, 0);
}
/***************************************************************************
 功能:设置系统CT变比设置中文界面信息
****************************************************************************/
void updateDisplaySystemCTRatioData_Chinese(bool_t bEnableFlag,char* sCurrentCT,char* sVoltageCT)
{
    
}

/***************************************************************************
 功能:设置系统CT变比设置西班牙语界面信息
****************************************************************************/
void updateDisplaySystemCTRatioData_Spanish(bool_t bEnableFlag,char* sCurrentCT,char* sVoltageCT)
{
    
}

/***************************************************************************
 功能:设置系统CT变比设置德语界面信息
****************************************************************************/
void updateDisplaySystemCTRatioData_German(bool_t bEnableFlag,char* sCurrentCT,char* sVoltageCT)
{
    
}

/***************************************************************************
 功能:设置系统CT变比设置法语界面信息
****************************************************************************/
void updateDisplaySystemCTRatioData_French(bool_t bEnableFlag,char* sCurrentCT,char* sVoltageCT)
{
    
}

/***************************************************************************
 功能:设置系统CT变比设置波兰语界面信息
****************************************************************************/
void updateDisplaySystemCTRatioData_Polish(bool_t bEnableFlag,char* sCurrentCT,char* sVoltageCT)
{
    
}

/***************************************************************************
 功能:设置系统CT变比设置意大利语界面信息
****************************************************************************/
void updateDisplaySystemCTRatioData_Italian(bool_t bEnableFlag,char* sCurrentCT,char* sVoltageCT)
{
    
}

/***************************************************************************
 功能:设置系统CT变比设置捷克语界面信息
****************************************************************************/
void updateDisplaySystemCTRatioData_Czech(bool_t bEnableFlag,char* sCurrentCT,char* sVoltageCT)
{
    
}

/***************************************************************************
 功能:设置系统CT变比设置荷兰语界面信息
****************************************************************************/
void updateDisplaySystemCTRatioData_Dutch(bool_t bEnableFlag,char* sCurrentCT,char* sVoltageCT)
{
    
}

/***************************************************************************
功能:从Flash读串口信息
****************************************************************************/
void getSysteCTRatioData()
{
    Flash_Device_CTRadio_Read(&gDisplay.stDisplaySet.stCTRadio,sizeof(Display_SET_System_CTRadio));
}
/***************************************************************************
功能:设置串口信息到Flash
****************************************************************************/
void setSystemCTRatioData(bool_t bEnableFlag)
{
    Flash_Device_CTRadio_Read(&gDisplay.stDisplaySet.stCTRadio,sizeof(Display_SET_System_CTRadio));
    gDisplay.stDisplaySet.stCTRadio.u16CTCurrent = atoi(tab_CurrentCT_edit_modify);
    gDisplay.stDisplaySet.stCTRadio.u16CTVoltage = atoi(tab_VoltageCT_edit_modify);
    gDisplay.stDisplaySet.stCTRadio.u8CTEnableFlag = bEnableFlag;
    Flash_Device_CTRadio_Write(&gDisplay.stDisplaySet.stCTRadio,sizeof(Display_SET_System_CTRadio));
}

/***************************************************************************
 功能:设置系统绝缘检测使能
****************************************************************************/
void updateDisplaySystemInsulationDetetionData(KeyAction_TypeDef nowActionType,DisplayAction_TypeDef nowDisplayType)
{
    static uint8_t sU8InsulationDetetionCounter = 0;
    switch(nowActionType)
    {
        case KEYACTION_ENTER://在绝缘检测使能设置界面下，Enter键按下，进入选择的设置界面
            {
                if(sU8InsulationDetetionCounter == ENABLE_YES)
                {
                    gDisplay.stDisplaySet.u8InsulationImpedanceDetectionFlag = 1;
                }
                else if(sU8InsulationDetetionCounter == ENABLE_NO)
                {
                    gDisplay.stDisplaySet.u8InsulationImpedanceDetectionFlag = 0;
                }
                else
                {
            
                }
                
                gCurrentMenu.stTip.eOccurTipAction = nowDisplayType;
                gCurrentMenu.stTip.eTipType = TIP_PASSED;
                gCurrentMenu.stTip.u8PromptTime = 20;
                gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_PROMPT;
                
                sU8InsulationDetetionCounter = 0;
                generateOperationRecord(RECORD_SET_SYSTEM_DETECTION);
            }
            break;
        case KEYACTION_ESC://在绝缘检测使能设置界面下，Esc键按下，进入上一级菜单
            {
                gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_SET_SYSTEM;
            }
            break;
        case KEYACTION_DOWN://在绝缘检测使能设置界面下，Up键按下，选择对应的设置项+1
            {
                sU8InsulationDetetionCounter++;
                if(sU8InsulationDetetionCounter == DISPLAY_SET_SYSTEM_ENABLE_ITEM_COUNT)
                {
                    sU8InsulationDetetionCounter = 0;
                }
                gCurrentMenu.eCurrentDisplayMenuType = nowDisplayType;
            }
            break;
        case KEYACTION_UP://在绝缘检测使能设置界面下，Down键按下，选择对应的设置项-1
            {
                sU8InsulationDetetionCounter--;
                if(sU8InsulationDetetionCounter >= DISPLAY_SET_SYSTEM_ENABLE_ITEM_COUNT)
                {
                    sU8InsulationDetetionCounter = DISPLAY_SET_SYSTEM_ENABLE_ITEM_COUNT-1;
                }
                gCurrentMenu.eCurrentDisplayMenuType = nowDisplayType;
            }
            break; 
        case KEYACTION_NULL://无操作刷新界面数据
        default:
            {      
                gCurrentMenu.eCurrentDisplayMenuType = nowDisplayType;
            }
            break;     
    }
    
    if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_ENGLISH)//在绝缘检测使能设置界面下 英文界面组装 
    { 
        updateDisplaySystemInsulationDetetionData_English((ENABLE_TypeDef)sU8InsulationDetetionCounter);                    
    }         
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_CHINESE)//在绝缘检测使能设置界面下 中文界面组装
    {
        updateDisplaySystemInsulationDetetionData_Chinese((ENABLE_TypeDef)sU8InsulationDetetionCounter);
    }
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_SPANISH)//在绝缘检测使能设置界面下 西班牙界面组装 
    {
        updateDisplaySystemInsulationDetetionData_Spanish((ENABLE_TypeDef)sU8InsulationDetetionCounter);  
    }   
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_GERMAN)//在绝缘检测使能设置界面下 德语界面组装
    {
        updateDisplaySystemInsulationDetetionData_German((ENABLE_TypeDef)sU8InsulationDetetionCounter);  
    }   
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_FRENCH)//在绝缘检测使能设置界面下 法语界面组装 
    {
        updateDisplaySystemInsulationDetetionData_French((ENABLE_TypeDef)sU8InsulationDetetionCounter);    
    } 
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_POLISH)//在绝缘检测使能设置界面下 波兰界面组装
    {
        updateDisplaySystemInsulationDetetionData_Polish((ENABLE_TypeDef)sU8InsulationDetetionCounter); 
    }  
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_ITALIAN)//在绝缘检测使能设置界面下 意大利界面组装
    {
        updateDisplaySystemInsulationDetetionData_Italian((ENABLE_TypeDef)sU8InsulationDetetionCounter);  
    } 
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_CZECH)//在绝缘检测使能设置界面下 捷克界面组装 
    {
        updateDisplaySystemInsulationDetetionData_Czech((ENABLE_TypeDef)sU8InsulationDetetionCounter);   
    }        
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_DUTCH)//在绝缘检测使能设置界面下 荷兰界面组装 
    {
        updateDisplaySystemInsulationDetetionData_Dutch((ENABLE_TypeDef)sU8InsulationDetetionCounter);   
    }
    else
    {  
        updateDisplaySystemInsulationDetetionData_English((ENABLE_TypeDef)sU8InsulationDetetionCounter);        
    }    
}

/***************************************************************************
 功能:设置系统绝缘检测使能设置英文界面信息
****************************************************************************/
void updateDisplaySystemInsulationDetetionData_English(ENABLE_TypeDef u8SetIndex)   
{
    memset(tab_display,0,DISPLAY_CACHE_SIZE);
    
    if(u8SetIndex == ENABLE_YES)
    {
        sprintf(tab_display,"    Detection Set    \n->Enable             \nDisable              \n                     \n");                                                                               
    }
    else if(u8SetIndex == ENABLE_NO)
    {
        sprintf(tab_display,"    Detection Set    \nEnable               \n->Disable            \n                     \n");                                                                                  
    }
    
    //GUI_DispStringAt((uint8_t*)tab_display, 0, 0); 
    GUI_Display(tab_display, 0, 0);
}

/***************************************************************************
 功能:设置系统绝缘检测使能设置西班牙语界面信息
****************************************************************************/
void updateDisplaySystemInsulationDetetionData_Spanish(ENABLE_TypeDef u8SetIndex)
{
    
}

/***************************************************************************
 功能:设置系统远绝缘检测使能设置德语界面信息
****************************************************************************/
void updateDisplaySystemInsulationDetetionData_German(ENABLE_TypeDef u8SetIndex)
{
    
}

/***************************************************************************
 功能:设置系统绝缘检测使能设置法语界面信息
****************************************************************************/
void updateDisplaySystemInsulationDetetionData_French(ENABLE_TypeDef u8SetIndex)
{
    
}

/***************************************************************************
 功能:设置系统绝缘检测使能设置波兰语界面信息
****************************************************************************/
void updateDisplaySystemInsulationDetetionData_Polish(ENABLE_TypeDef u8SetIndex)
{
    
}

/***************************************************************************
 功能:设置系统绝缘检测使能设置意大利语界面信息
****************************************************************************/
void updateDisplaySystemInsulationDetetionData_Italian(ENABLE_TypeDef u8SetIndex)
{
    
}

/***************************************************************************
 功能:设置系统绝缘检测使能设置捷克语界面信息
****************************************************************************/
void updateDisplaySystemInsulationDetetionData_Czech(ENABLE_TypeDef u8SetIndex)
{
    
}

/***************************************************************************
 功能:设置系统绝缘检测使能设置荷兰语界面信息
****************************************************************************/
void updateDisplaySystemInsulationDetetionData_Dutch(ENABLE_TypeDef u8SetIndex)
{
    
}

/***************************************************************************
 功能:设置系统保护使能
****************************************************************************/
void updateDisplayProtectSetData(KeyAction_TypeDef nowActionType,DisplayAction_TypeDef nowDisplayType)
{
    static uint8_t u8ProtectSetIndex = 0;
       
    switch(nowActionType) //本次界面操作类型
    {
        case KEYACTION_ENTER://在保护使能设置界面下，Enter键按下，进入选择对应的设置项
            {
                if(u8ProtectSetIndex == SET_PROTECT_ISLAND_Index)//孤岛保护使能
                {
                    gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_SET_SYSTEM_PROTECT_ISLAND;
                }
                else if(u8ProtectSetIndex == SET_PROTECT_GROUND_Index)//接地保护使能
                {
                    gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_SET_SYSTEM_PROTECT_GROUND;
                }
//                 else if(u8ProtectSetIndex == SET_PROTECT_LEAKAGE_Index)//漏电保护使能
//                 {
//                     gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_SET_SYSTEM_PROTECT_LEAKAGE;
//                 }
//                 else if(u8ProtectSetIndex == SET_PROTECT_ARC_Index)//拉弧保护使能
//                 {
//                     gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_SET_SYSTEM_PROTECT_ARC;
//                 }
// //                else if(u8ProtectSetIndex == SET_PROTECT_OVERHEAT_Index)//过热保护使能
// //                {
// //                    gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_SET_SYSTEM_PROTECT_OVERHEAT;
// //                }
//                 else if(u8ProtectSetIndex == SET_PROTECT_LVRT_Index)//低电压穿越保护使能
//                 {
//                     gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_SET_SYSTEM_PROTECT_LVRT;
//                 }  
//                 else if(u8ProtectSetIndex == SET_PROTECT_HVRT_Index) //高电压穿越保护使能
//                 {
//                     gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_SET_SYSTEM_PROTECT_HVRT;
//                 } 
//                 else if(u8ProtectSetIndex == SET_PROTECT_LIGHT_Index) //防雷保护使能
//                 {
//                     gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_SET_SYSTEM_PROTECT_LIGHT;
//                 }                  
//                 else if(u8ProtectSetIndex == SET_PROTECT_GEN_Index)//发电机使能
//                 {
//                     gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_SET_SYSTEM_PROTECT_GEN;
//                 } 
//                 else if(u8ProtectSetIndex == SET_PROTECT_LFRT_Index)//低频率穿越保护使能
//                 {
//                     gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_SET_SYSTEM_PROTECT_LFRT;
//                 } 
//                 else if(u8ProtectSetIndex == SET_PROTECT_HFRT_Index)//高频率穿越保护使能
//                 {
//                     gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_SET_SYSTEM_PROTECT_HFRT;
//                 }  
//                 else if(u8ProtectSetIndex == SET_PROTECT_P_V_Index)//P(V)保护使能
//                 {
//                     gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_SET_SYSTEM_PROTECT_P_V;
//                 }  
//                 else if(u8ProtectSetIndex == SET_PROTECT_P_F_Index)//P(F)保护使能
//                 {
//                     gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_SET_SYSTEM_PROTECT_P_F;
//                 }  
//                 else if(u8ProtectSetIndex == SET_PROTECT_Q_V_Index)//Q(V)保护使能
//                 {
//                     gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_SET_SYSTEM_PROTECT_Q_V;
//                 }  
//                 else if(u8ProtectSetIndex == SET_PROTECT_Q_P_Index)//Q(P)保护使能
//                 {
//                     gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_SET_SYSTEM_PROTECT_Q_P;
//                 }                  
//                 else if(u8ProtectSetIndex == SET_PROTECT_CPF_Index)//CPF保护使能
//                 {
//                     gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_SET_SYSTEM_PROTECT_CPF;
//                 }  
//                 else if(u8ProtectSetIndex == SET_PROTECT_CQ_Index)//CQ保护使能
//                 {
//                     gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_SET_SYSTEM_PROTECT_CQ;
//                 }                          
            }
            break;
        case KEYACTION_DOWN://在保护使能设置界面下，Up同时键按下，选择对应的设置项
            {
                u8ProtectSetIndex++;
                if(u8ProtectSetIndex == DISPLAY_SET_SYSTEM_PROTECT_ITEM_COUNT)
                {
                    u8ProtectSetIndex = 0;
                }
                gCurrentMenu.eCurrentDisplayMenuType = nowDisplayType;
            } 
            break;
        case KEYACTION_UP://在保护使能设置界面下，Up同时键按下，选择对应的设置项
            {
                u8ProtectSetIndex--;
                if(u8ProtectSetIndex >= DISPLAY_SET_SYSTEM_PROTECT_ITEM_COUNT)
                {
                    u8ProtectSetIndex = DISPLAY_SET_SYSTEM_PROTECT_ITEM_COUNT -1;
                }
                gCurrentMenu.eCurrentDisplayMenuType = nowDisplayType;
            } 
            break;
        case KEYACTION_ESC://在保护使能设置界面下，Up同时键按下，选择对应的设置项
            {
                gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_SET_SYSTEM;
            } 
            break;             
        case KEYACTION_NULL://无操作刷新主界面数据
        default:
            {
                 gCurrentMenu.eCurrentDisplayMenuType = nowDisplayType;
            }
            break;       
    }
    if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_ENGLISH) //在保护使能设置界面下 中文界面组装
    { 
        updateDisplayProtectSetData_English((PROTECTSETAction_TypeDef)u8ProtectSetIndex);                    
    }
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_CHINESE)//在保护使能设置界面下 英文界面组装
    {
        updateDisplayProtectSetData_Chinese((PROTECTSETAction_TypeDef)u8ProtectSetIndex);
    } 
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_SPANISH)//在保护使能设置界面下 西班牙界面组装
    {
        updateDisplayProtectSetData_Spanish((PROTECTSETAction_TypeDef)u8ProtectSetIndex);  
    } 
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_GERMAN)//在保护使能设置界面下 德语界面组装
    {
        updateDisplayProtectSetData_German((PROTECTSETAction_TypeDef)u8ProtectSetIndex);  
    }
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_FRENCH)//在保护使能设置界面下 法语界面组装
    {
        updateDisplayProtectSetData_French((PROTECTSETAction_TypeDef)u8ProtectSetIndex);    
    }
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_POLISH) //在保护使能设置界面下 波兰界面组装
    {
        updateDisplayProtectSetData_Polish((PROTECTSETAction_TypeDef)u8ProtectSetIndex); 
    }
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_ITALIAN)//在保护使能设置界面下 意大利界面组装
    {
        updateDisplayProtectSetData_Italian((PROTECTSETAction_TypeDef)u8ProtectSetIndex);  
    } 
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_CZECH)//在保护使能设置界面下 捷克界面组装
    {
        updateDisplayProtectSetData_Czech((PROTECTSETAction_TypeDef)u8ProtectSetIndex);   
    }
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_DUTCH)//在保护使能设置界面下 荷兰界面组装
    {
        updateDisplayProtectSetData_Dutch((PROTECTSETAction_TypeDef)u8ProtectSetIndex);   
    }
    else
    {  
        updateDisplayProtectSetData_English((PROTECTSETAction_TypeDef)u8ProtectSetIndex);        
    }
 
}

/***************************************************************************
 功能:设置系统保护使能设置英文界面信息
****************************************************************************/
void updateDisplayProtectSetData_English(PROTECTSETAction_TypeDef u8SetIndex)   
{
    memset(tab_display,0,DISPLAY_CACHE_SIZE);
    
    if(u8SetIndex == SET_PROTECT_ISLAND_Index)
    {
        sprintf(tab_display,"     Protect Set     \n->Island             \nGround               \nLeakage              \n");                                                                               
    }
    else if(u8SetIndex == SET_PROTECT_GROUND_Index)
    {
        sprintf(tab_display,"     Protect Set     \nIsland               \n->Ground             \nLeakage              \n");                                                                                  
    }
 //   else if(u8SetIndex == SET_PROTECT_LEAKAGE_Index)
    {
        sprintf(tab_display,"     Protect Set     \nIsland               \nGround               \n->Leakage            \n");                                                                                  
    }
/*  请保留此段代码，以防热管理策略失效，无法主动关闭热保护 
//    else if(u8SetIndex == SET_PROTECT_ARC_Index)
//    {
//        sprintf(tab_display,"     Protect Set      \n->Arc                \nOverheat             \nLVRT                 \n");                                                                                  
//    }
//    else if(u8SetIndex == SET_PROTECT_OVERHEAT_Index)
//    {
//        sprintf(tab_display,"     Protect Set      \nArc                  \n->Overheat           \nLVRT                 \n");                                                                                  
//    }
//    else if(u8SetIndex == SET_PROTECT_LVRT_Index)
//    {
//        sprintf(tab_display,"     Protect Set      \nArc                  \nOverheat             \n->LVRT               \n");                                                                                  
//    }  
//    else if(u8SetIndex == SET_PROTECT_HVRT_Index)
//    {
//        sprintf(tab_display,"     Protect Set      \n->HVRT               \nLight                \nGen                  \n");                                                                                  
//    }
//    else if(u8SetIndex == SET_PROTECT_LIGHT_Index)
//    {
//        sprintf(tab_display,"     Protect Set      \nHVRT                 \n->Light              \nGen                  \n");                                                                                  
//    }
//    else if(u8SetIndex == SET_PROTECT_GEN_Index)
//    {
//        sprintf(tab_display,"     Protect Set      \nHVRT                 \nLight                \n->Gen                \n");                                                                                  
//    }
//    else if(u8SetIndex == SET_PROTECT_LFRT_Index)
//    {
//        sprintf(tab_display,"     Protect Set      \n->LFRT               \nHFRT                 \nP(V)                 \n");                                                                                  
//    }    
//    else if(u8SetIndex == SET_PROTECT_HFRT_Index)
//    {
//        sprintf(tab_display,"     Protect Set      \nLFRT                 \n->HFRT               \nP(V)                 \n");                                                                                  
//    }
//    else if(u8SetIndex == SET_PROTECT_P_V_Index)
//    {
//        sprintf(tab_display,"     Protect Set      \nLFRT                 \nHFRT                 \n->P(V)               \n");                                                                                  
//    }  
//    else if(u8SetIndex == SET_PROTECT_P_F_Index)
//    {
//        sprintf(tab_display,"     Protect Set      \n->P(F)               \nQ(V)                 \nQ(P)                 \n");                                                                                  
//    } 
//    else if(u8SetIndex == SET_PROTECT_Q_V_Index)
//    {
//        sprintf(tab_display,"     Protect Set      \nP(F)                 \n->Q(V)               \nQ(P)                 \n");                                                                                  
//    }     
//    else if(u8SetIndex == SET_PROTECT_Q_P_Index)
//    {
//        sprintf(tab_display,"     Protect Set      \nP(F)                 \nQ(V)                 \n->Q(P)               \n");                                                                                  
//    }    
//    else if(u8SetIndex == SET_PROTECT_CPF_Index)
//    {
//        sprintf(tab_display,"     Protect Set      \n->CPF                \nCQ                   \n                     \n");                                                                                  
//    }      
//    else if(u8SetIndex == SET_PROTECT_CQ_Index)
//    {
//        sprintf(tab_display,"     Protect Set      \nCPF                  \n->CQ                 \n                     \n");                                                                                  
//    }  
*/
//    else if(u8SetIndex == SET_PROTECT_ARC_Index)
//    {
//        sprintf(tab_display,"     Protect Set     \n->Arc                \nLVRT                 \nHVRT                 \n");                                                                                  
//    }
//    else if(u8SetIndex == SET_PROTECT_LVRT_Index)
//    {
//        sprintf(tab_display,"     Protect Set     \nArc                  \n->LVRT               \nHVRT                 \n");                                                                                  
//    }  
//    else if(u8SetIndex == SET_PROTECT_HVRT_Index)
//    {
//        sprintf(tab_display,"     Protect Set     \nArc                  \nLVRT                 \n->HVRT               \n");                                                                                  
//    }
//    else if(u8SetIndex == SET_PROTECT_LIGHT_Index)
//    {
//        sprintf(tab_display,"     Protect Set     \n->Light              \nGen                  \nLFRT                 \n");                                                                                  
//    }
//    else if(u8SetIndex == SET_PROTECT_GEN_Index)
//    {
//        sprintf(tab_display,"     Protect Set     \nLight                \n->Gen                \nLFRT                 \n");                                                                                  
//    }
//    else if(u8SetIndex == SET_PROTECT_LFRT_Index)
//    {
//        sprintf(tab_display,"     Protect Set     \nLight                \nGen                  \n->LFRT               \n");                                                                                  
//    }    
//    else if(u8SetIndex == SET_PROTECT_HFRT_Index)
//    {
//        sprintf(tab_display,"     Protect Set     \n->HFRT               \nP(V)                 \nP(F)                 \n");                                                                                  
//    }
//    else if(u8SetIndex == SET_PROTECT_P_V_Index)
//    {
//        sprintf(tab_display,"     Protect Set     \nHFRT                 \n->P(V)               \nP(F)                 \n");                                                                                  
//    }  
//    else if(u8SetIndex == SET_PROTECT_P_F_Index)
//    {
//        sprintf(tab_display,"     Protect Set     \nHFRT                 \nP(V)                 \n->P(F)               \n");                                                                                  
//    } 
//    else if(u8SetIndex == SET_PROTECT_Q_V_Index)
//    {
//        sprintf(tab_display,"     Protect Set     \n->Q(V)               \nQ(P)                 \nCPF                 \n");                                                                                  
//    }     
//    else if(u8SetIndex == SET_PROTECT_Q_P_Index)
//    {
//        sprintf(tab_display,"     Protect Set     \nQ(V)                 \n->Q(P)               \nCPF                  \n");                                                                                  
//    }    
//    else if(u8SetIndex == SET_PROTECT_CPF_Index)
//    {
//        sprintf(tab_display,"     Protect Set     \nQ(V)                 \nQ(P)                 \n->CPF                \n");                                                                                  
//    }      
//    else if(u8SetIndex == SET_PROTECT_CQ_Index)
//    {
//        sprintf(tab_display,"     Protect Set     \n->CQ                 \n                     \n                     \n");                                                                                  
//    } 
    //GUI_DispStringAt((uint8_t*)tab_display, 0, 0); 
    GUI_Display(tab_display, 0, 0);
}

/***************************************************************************
 功能:设置系统保护使能设置西班牙语界面信息
****************************************************************************/
void updateDisplayProtectSetData_Spanish(PROTECTSETAction_TypeDef u8SetIndex)
{
    
}

/***************************************************************************
 功能:设置系统保护使能设置德语界面信息
****************************************************************************/
void updateDisplayProtectSetData_German(PROTECTSETAction_TypeDef u8SetIndex)
{
    
}

/***************************************************************************
 功能:设置系统保护使能设置法语界面信息
****************************************************************************/
void updateDisplayProtectSetData_French(PROTECTSETAction_TypeDef u8SetIndex)
{
    
}

/***************************************************************************
 功能:设置系统保护使能设置波兰语界面信息
****************************************************************************/
void updateDisplayProtectSetData_Polish(PROTECTSETAction_TypeDef u8SetIndex)
{
    
}

/***************************************************************************
 功能:设置系统保护使能设置意大利语界面信息
****************************************************************************/
void updateDisplayProtectSetData_Italian(PROTECTSETAction_TypeDef u8SetIndex)
{
    
}

/***************************************************************************
 功能:设置系统保护使能设置捷克语界面信息
****************************************************************************/
void updateDisplayProtectSetData_Czech(PROTECTSETAction_TypeDef u8SetIndex)
{
    
}

/***************************************************************************
 功能:设置系统保护使能设置荷兰语界面信息
****************************************************************************/
void updateDisplayProtectSetData_Dutch(PROTECTSETAction_TypeDef u8SetIndex)
{
    
}

/***************************************************************************
 功能:设置系统具体保护项使能
****************************************************************************/
void updateDisplayProtectItemSetData(DisplayAction_TypeDef dispalyAction,KeyAction_TypeDef nowDisplayActionType,ENABLE_CLASS_TypeDef enableClass)
{
    static uint8_t sU8ProtectItemCounter = 0;
    switch(nowDisplayActionType)
    {
        case KEYACTION_ENTER:
            { 
                if(gbEditFlag != STATUS_FALSE)
                {
                    if(enableClass == ENABLE_CLASS_CURVE_SCAN)
                    {
                        gDisplay.stDisplaySet.stPV.u8IVCurveScan = gU8EnableProtect_modify;
                        generateOperationRecord(RECORD_SET_PV_SCAN);
                    }
                    else if(enableClass == ENABLE_CLASS_BATTERY_WAKEUP)
                    {
                        gDisplay.stDisplaySet.stBMS.u8WakeupFlag = gU8EnableProtect_modify;
                        generateOperationRecord(RECORD_SET_BATTERY_WAKEUP);
                    }
                    else if(enableClass == ENABLE_CLASS_BATTERY_ENABLE)
                    {
                        gDisplay.stDisplaySet.stBMS.u8EnableFlag = gU8EnableProtect_modify;
                        generateOperationRecord(RECORD_SET_BATTERY_ENABLE);
                    }  
                    else if(enableClass == ENABLE_CLASS_SELL)
                    {
                        gDisplay.stDisplaySet.stGrid.u8SellElectricityFlag = gU8EnableProtect_modify;
                        gDisplay.stDisplaySet.stGrid.u8PreventReverseFlowControlFlag = 1 - gU8EnableProtect_modify;
                        generateOperationRecord(RECORD_SET_SELL);
                    }
//                    else if(enableClass == ENABLE_CLASS_ANTIREFLUX)
//                    {
//                        gDisplay.stDisplaySet.stGrid.u8PreventReverseFlowControlFlag = gU8EnableProtect_modify;
//                    }
                    else if(enableClass == ENABLE_CLASS_GEN)
                    {
                        gDisplay.stDisplaySet.stGen.stGenPara.u8EnableFlag = gU8EnableProtect_modify;
                        generateOperationRecord(RECORD_SET_GEN);

                    }
                    else if(enableClass == ENABLE_CLASS_ISLAND)
                    {
                        gDisplay.stDisplaySet.stGen.stGenPara.u8EnableFlag = gU8EnableProtect_modify;
                        generateOperationRecord(RECORD_SET_PROTECT_ISLAND);
                    }
                    else if(enableClass == ENABLE_CLASS_GROUND)
                    {
                        gDisplay.stDisplaySet.stProtectEnable.u8GroundProtection = gU8EnableProtect_modify;
                        generateOperationRecord(RECORD_SET_PROTECT_GROUND);
                    }
                    else if(enableClass == ENABLE_CLASS_LEAKAGE)
                    {
                        gDisplay.stDisplaySet.stProtectEnable.u8LeakageProtection = gU8EnableProtect_modify;
                        generateOperationRecord(RECORD_SET_PROTECT_LEAKAG);
                    }
                    else if(enableClass == ENABLE_CLASS_ARC)
                    {
                        gDisplay.stDisplaySet.stProtectEnable.u8ArcPullingProtection = gU8EnableProtect_modify;
                        generateOperationRecord(RECORD_SET_PROTECT_ARC);
                    }
//                    else if(enableClass == ENABLE_CLASS_OVERHEAT)
//                    {
//                        gDisplay.stDisplaySet.stProtectEnable.u8OverheatProtection = gU8EnableProtect_modify;
//                    }
                    else if(enableClass == ENABLE_CLASS_LVRT)
                    {
                        gDisplay.stDisplaySet.stProtectEnable.u8LowVoltageCrossProtection = gU8EnableProtect_modify;
                        generateOperationRecord(RECORD_SET_PROTECT_LVRT);
                    }
                    else if(enableClass == ENABLE_CLASS_HVRT)
                    {
                        gDisplay.stDisplaySet.stProtectEnable.u8HighVoltageCrossProtection = gU8EnableProtect_modify;
                        generateOperationRecord(RECORD_SET_PROTECT_HVRT);
                    }
                    else if(enableClass == ENABLE_CLASS_LIGHT)
                    {
                        gDisplay.stDisplaySet.stProtectEnable.u8LightProtection = gU8EnableProtect_modify;
                        generateOperationRecord(RECORD_SET_PROTECT_LIGHT);
                    }
                    else if(enableClass == ENABLE_CLASS_GEN_PROTECT)
                    {
                        gDisplay.stDisplaySet.stProtectEnable.u8GeneratorProtection = gU8EnableProtect_modify;
                        generateOperationRecord(RECORD_SET_PROTECT_GEN);
                    }
                    else if(enableClass == ENABLE_CLASS_INSULATION_IMPEDANCE)
                    {
                        gDisplay.stDisplaySet.stProtectEnable.u8GeneratorProtection = gU8EnableProtect_modify;
                    }
                    else if(enableClass == ENABLE_CLASS_LFRT)
                    {
                        gDisplay.stDisplaySet.stProtectEnable.u8LowFrequencyCrossProtection = gU8EnableProtect_modify;
                        generateOperationRecord(RECORD_SET_PROTECT_LFRT);
                    }
                    else if(enableClass == ENABLE_CLASS_HFRT)
                    {
                        gDisplay.stDisplaySet.stProtectEnable.u8HighFrequencyCrossProtection = gU8EnableProtect_modify;
                        generateOperationRecord(RECORD_SET_PROTECT_HFRT);
                    }
                    else if(enableClass == ENABLE_CLASS_P_V)
                    {
                        gDisplay.stDisplaySet.stProtectEnable.u8P_V_Protection = gU8EnableProtect_modify;
                        generateOperationRecord(RECORD_SET_PROTECT_P_V);
                    }
                    else if(enableClass == ENABLE_CLASS_P_F)
                    {
                        gDisplay.stDisplaySet.stProtectEnable.u8P_F_Protection = gU8EnableProtect_modify;
                        generateOperationRecord(RECORD_SET_PROTECT_P_F);
                    }
                    else if(enableClass == ENABLE_CLASS_Q_V)
                    {
                        gDisplay.stDisplaySet.stProtectEnable.u8Q_V_Protection = gU8EnableProtect_modify;
                        generateOperationRecord(RECORD_SET_PROTECT_Q_V);
                    }
                    else if(enableClass == ENABLE_CLASS_Q_P)
                    {
                        gDisplay.stDisplaySet.stProtectEnable.u8Q_P_Protection = gU8EnableProtect_modify;
                        generateOperationRecord(RECORD_SET_PROTECT_Q_P);
                    }
                    else if(enableClass == ENABLE_CLASS_CPF)
                    {
                        gDisplay.stDisplaySet.stProtectEnable.u8CPF_Protection = gU8EnableProtect_modify;
                        generateOperationRecord(RECORD_SET_PROTECT_CPF);
                    }
                    else if(enableClass == ENABLE_CLASS_CQ)
                    {
                        gDisplay.stDisplaySet.stProtectEnable.u8CQ_Protection = gU8EnableProtect_modify;
                        generateOperationRecord(RECORD_SET_PROTECT_CQ);
                    }
                    // 低功耗使能
                    else if(enableClass == ENABLE_CLASS_LOWPOWER)
                    {
                        gDisplay.stDisplaySet.stProtectEnable.u8LOWPOER = gU8EnableProtect_modify;
                        generateOperationRecord(RECORD_SET_LOWPOWER);
                    }
                      
                    sU8ProtectItemCounter = gU8EnableProtect_modify;
                    gbEditFlag = STATUS_FALSE;
                }
                gCurrentMenu.eCurrentDisplayMenuType = dispalyAction;
            }
            break;
        case KEYACTION_ESC:
            {
                if(enableClass ==  ENABLE_CLASS_CURVE_SCAN)
                {
                   gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_SET_PV; 
                }
                else if(enableClass == ENABLE_CLASS_BATTERY_ENABLE)
                {  
                    gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_SET_BATTERY;
                }
                else if(enableClass == ENABLE_CLASS_BATTERY_WAKEUP)
                {  
                    gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_SET_BATTERY;
                }
                else if(enableClass == ENABLE_CLASS_SELL)
                {  
                    gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_SET_GRID;
                }
                else if(enableClass == ENABLE_CLASS_ANTIREFLUX)
                { 
                    gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_SET_GRID;
                }
                else if(enableClass == ENABLE_CLASS_GEN)
                { 
                    gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_SET;
                }
                else
                {
                    gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_SET_SYSTEM;
                } 
                
                gbEditFlag = STATUS_FALSE;
            }
            break;
        case KEYACTION_DOWN:
            {
                if(gbEditFlag != STATUS_TRUE)
                {
                    gbEditFlag = STATUS_TRUE;
                    gU8EnableProtect_modify = sU8ProtectItemCounter;
                }  
                
                gU8EnableProtect_modify++;
                
                if(gU8EnableProtect_modify == DISPLAY_SET_SYSTEM_ENABLE_ITEM_COUNT)
                {
                    gU8EnableProtect_modify = 0;
                }
                gCurrentMenu.eCurrentDisplayMenuType = dispalyAction;
            }
            break;
        case KEYACTION_UP:
            {
                if(gbEditFlag != STATUS_TRUE)
                {
                    gbEditFlag = STATUS_TRUE;
                    gU8EnableProtect_modify = sU8ProtectItemCounter;
                }  
                
                gU8EnableProtect_modify--;
                
                if(gU8EnableProtect_modify >= DISPLAY_SET_SYSTEM_ENABLE_ITEM_COUNT)
                {
                    gU8EnableProtect_modify = DISPLAY_SET_SYSTEM_ENABLE_ITEM_COUNT-1;
                }
                
                gCurrentMenu.eCurrentDisplayMenuType = dispalyAction;
            }
            break;
        case KEYACTION_NULL:
        default:
            {  
                if(gbEditFlag == STATUS_FALSE)
                {
                    if(enableClass == ENABLE_CLASS_CURVE_SCAN)
                    {
                        sU8ProtectItemCounter = gDisplay.stDisplaySet.stPV.u8IVCurveScan;
                    } 
                    else if(enableClass == ENABLE_CLASS_BATTERY_WAKEUP)
                    {
                        sU8ProtectItemCounter = gDisplay.stDisplaySet.stBMS.u8WakeupFlag;
                    }
                    else if(enableClass == ENABLE_CLASS_BATTERY_ENABLE)
                    {
                        sU8ProtectItemCounter =  gDisplay.stDisplaySet.stBMS.u8EnableFlag;
                    }
                    else if(enableClass == ENABLE_CLASS_SELL)
                    {
                        sU8ProtectItemCounter =  gDisplay.stDisplaySet.stGrid.u8SellElectricityFlag;
                    }
                    else if(enableClass == ENABLE_CLASS_ANTIREFLUX)
                    {
                        sU8ProtectItemCounter =  gDisplay.stDisplaySet.stGrid.u8PreventReverseFlowControlFlag;
                    }
                    else if(enableClass == ENABLE_CLASS_GEN)
                    {
                        sU8ProtectItemCounter = gDisplay.stDisplaySet.stGen.stGenPara.u8EnableFlag;
                    }
                    else if(enableClass == ENABLE_CLASS_ISLAND)
                    {
                        sU8ProtectItemCounter =  gDisplay.stDisplaySet.stProtectEnable.u8IslandProtection;
                    }
                    else if(enableClass == ENABLE_CLASS_GROUND)
                    {
                        sU8ProtectItemCounter =  gDisplay.stDisplaySet.stProtectEnable.u8GroundProtection;
                    }
                    else if(enableClass == ENABLE_CLASS_LEAKAGE)
                    {
                        sU8ProtectItemCounter =  gDisplay.stDisplaySet.stProtectEnable.u8LeakageProtection;
                    }
                    else if(enableClass == ENABLE_CLASS_ARC)
                    {
                        sU8ProtectItemCounter =  gDisplay.stDisplaySet.stProtectEnable.u8ArcPullingProtection;
                    }
//                    else if(enableClass == ENABLE_CLASS_OVERHEAT)
//                    {
//                        sU8ProtectItemCounter =  gDisplay.stDisplaySet.stProtectEnable.u8OverheatProtection;
//                    }
                    else if(enableClass == ENABLE_CLASS_LVRT)
                    {
                        sU8ProtectItemCounter =  gDisplay.stDisplaySet.stProtectEnable.u8LowVoltageCrossProtection;
                    }
                    else if(enableClass == ENABLE_CLASS_HVRT)
                    {
                        sU8ProtectItemCounter =  gDisplay.stDisplaySet.stProtectEnable.u8HighVoltageCrossProtection;
                    }
                    else if(enableClass == ENABLE_CLASS_LIGHT)
                    {
                        sU8ProtectItemCounter =  gDisplay.stDisplaySet.stProtectEnable.u8LightProtection;
                    }
                    else if(enableClass == ENABLE_CLASS_GEN_PROTECT)
                    {
                        sU8ProtectItemCounter =  gDisplay.stDisplaySet.stProtectEnable.u8GeneratorProtection;
                    }
                    else if(enableClass == ENABLE_CLASS_INSULATION_IMPEDANCE)
                    {
                        sU8ProtectItemCounter =  gDisplay.stDisplaySet.stProtectEnable.u8InsulationImpedanceProtection;
                    }
                    else if(enableClass == ENABLE_CLASS_LFRT)
                    {
                        sU8ProtectItemCounter =  gDisplay.stDisplaySet.stProtectEnable.u8LowFrequencyCrossProtection;
                    }
                    else if(enableClass == ENABLE_CLASS_HFRT)
                    {
                        sU8ProtectItemCounter =  gDisplay.stDisplaySet.stProtectEnable.u8HighFrequencyCrossProtection;
                    }
                    else if(enableClass == ENABLE_CLASS_P_V)
                    {
                        sU8ProtectItemCounter =  gDisplay.stDisplaySet.stProtectEnable.u8P_V_Protection;
                    }
                    else if(enableClass == ENABLE_CLASS_P_F)
                    {
                        sU8ProtectItemCounter =  gDisplay.stDisplaySet.stProtectEnable.u8P_F_Protection;
                    }
                    else if(enableClass == ENABLE_CLASS_Q_V)
                    {
                        sU8ProtectItemCounter =  gDisplay.stDisplaySet.stProtectEnable.u8Q_V_Protection;
                    }
                    else if(enableClass == ENABLE_CLASS_Q_P)
                    {
                        sU8ProtectItemCounter =  gDisplay.stDisplaySet.stProtectEnable.u8Q_P_Protection;
                    }
                    else if(enableClass == ENABLE_CLASS_CPF)
                    {
                        sU8ProtectItemCounter =  gDisplay.stDisplaySet.stProtectEnable.u8CPF_Protection;
                    }
                    else if(enableClass == ENABLE_CLASS_CQ)
                    {
                        sU8ProtectItemCounter =  gDisplay.stDisplaySet.stProtectEnable.u8CQ_Protection;
                    }
                }
                
                gCurrentMenu.eCurrentDisplayMenuType = dispalyAction;
            }
            break; 
    } 
    
    if(gbEditFlag == STATUS_TRUE)
    {
        updateDisplayProtectItemNameSetData((ENABLE_TypeDef)gU8EnableProtect_modify,enableClass);
    }
    else 
    {
        updateDisplayProtectItemNameSetData((ENABLE_TypeDef)sU8ProtectItemCounter,enableClass);
    } 
    
}


/***************************************************************************
 功能:设置系统绝缘检测使能设置英文界面信息
****************************************************************************/
void updateDisplayProtectItemNameSetData(ENABLE_TypeDef sU8ProtectSelected,ENABLE_CLASS_TypeDef enableClass)
{
    memset(tab_display,0,DISPLAY_CACHE_SIZE);
    
    if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_ENGLISH)//在绝缘检测使能设置界面下 英文界面组装
    { 
        char sEnableName_English[22] = {""}; 
        if(enableClass == ENABLE_CLASS_CURVE_SCAN)
        {  
            sprintf(sEnableName_English,"%s","    IV Curve Scan    ");
        }
        else if(enableClass == ENABLE_CLASS_BATTERY_ENABLE)
        {
            sprintf(sEnableName_English,"%s","     BMS Enable      ");
        }
        else if(enableClass == ENABLE_CLASS_BATTERY_WAKEUP)
        {
            sprintf(sEnableName_English,"%s","     BMS Wakeup      ");
        }
        else if(enableClass == ENABLE_CLASS_SELL)
        {
            sprintf(sEnableName_English,"%s","      Grid Sell      ");
        }
        else if(enableClass == ENABLE_CLASS_ANTIREFLUX)
        {
            sprintf(sEnableName_English,"%s","     Anti-reflux     ");
        }    
        else if(enableClass == ENABLE_CLASS_GEN)
        {
            sprintf(sEnableName_English,"%s","     Gen Enable      ");
        }
        else if(enableClass == ENABLE_CLASS_ISLAND)
        {
            sprintf(sEnableName_English,"%s","    Island Protect   ");
        }
        else if(enableClass == ENABLE_CLASS_GROUND)
        {
            sprintf(sEnableName_English,"%s","    Ground Protect   ");
        }
        else if(enableClass == ENABLE_CLASS_LEAKAGE)
        {
            sprintf(sEnableName_English,"%s","   Leakage Protect   ");
        }
        else if(enableClass == ENABLE_CLASS_ARC)
        {
            sprintf(sEnableName_English,"%s","     ARC Protect     ");
        }
//        else if(enableClass == ENABLE_CLASS_OVERHEAT)
//        {
//            sprintf(sEnableName_English,"%s","   Overheat Protect  ");
//        }
        else if(enableClass == ENABLE_CLASS_LVRT)
        {
            sprintf(sEnableName_English,"%s","     LVRT Protect    "); //LVRT：low voltage ride through 
        }
        else if(enableClass == ENABLE_CLASS_HVRT)
        {
            sprintf(sEnableName_English,"%s","     HVRT Protect    "); //HVRT：High voltage ride through
        }
        else if(enableClass == ENABLE_CLASS_LIGHT)
        {
            sprintf(sEnableName_English,"%s","    Light Protect    ");
        }
        else if(enableClass == ENABLE_CLASS_GEN_PROTECT)
        {
            sprintf(sEnableName_English,"%s","     Gen Protect     ");
        }
        else if(enableClass == ENABLE_CLASS_INSULATION_IMPEDANCE)
        {
            sprintf(sEnableName_English,"%s","     II Protect      ");  //II:Insulation impedance
        }
        else if(enableClass == ENABLE_CLASS_LFRT)
        {
            sprintf(sEnableName_English,"%s","     LFRT Protect    ");  //LVRT：low frequency ride through 
        }
        else if(enableClass == ENABLE_CLASS_HFRT)
        {
            sprintf(sEnableName_English,"%s","     HFRT Protect    ");  //HVRT：High frequency ride through
        }
        else if(enableClass == ENABLE_CLASS_P_V)
        {
            sprintf(sEnableName_English,"%s","     P(V) Protect    ");  //
        }
        else if(enableClass == ENABLE_CLASS_P_F)
        {
            sprintf(sEnableName_English,"%s","     P(F) Protect    ");  //
        }
        else if(enableClass == ENABLE_CLASS_Q_V)
        {
            sprintf(sEnableName_English,"%s","     Q(V) Protect    ");  //
        }
        else if(enableClass == ENABLE_CLASS_Q_P)
        {
            sprintf(sEnableName_English,"%s","     Q(P) Protect    ");  //
        }
        else if(enableClass == ENABLE_CLASS_CPF)
        {
            sprintf(sEnableName_English,"%s","     CPF Protect     ");  //
        }
        else if(enableClass == ENABLE_CLASS_CQ)
        {
            sprintf(sEnableName_English,"%s","      CQ Protect     ");  //
        }
        
        updateDisplayProtectItemSetData_English(sU8ProtectSelected,sEnableName_English);
    }
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_CHINESE)
    {
        char sEnableName_Chinese[16] = {""}; 
        updateDisplayProtectItemNameSetData_Chinese(enableClass,sEnableName_Chinese);
        updateDisplayProtectItemSetData_Chinese(sU8ProtectSelected,sEnableName_Chinese);
    }   
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_SPANISH)
    {
        char sEnableName_Spanish[17] = {""}; 
        updateDisplayProtectItemSetData_Spanish(sU8ProtectSelected,sEnableName_Spanish);
    } 
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_GERMAN)
    {
        char sEnableName_German[17] = {""}; 
        updateDisplayProtectItemSetData_German(sU8ProtectSelected,sEnableName_German);
    } 
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_FRENCH)
    {
        char sEnableName_French[17] = {""}; 
        updateDisplayProtectItemSetData_French(sU8ProtectSelected,sEnableName_French);
    } 
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_POLISH)
    {
        char sEnableName_French[17] = {""}; 
        updateDisplayProtectItemSetData_Polish(sU8ProtectSelected,sEnableName_French);
    } 
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_ITALIAN)
    {
        char sEnableName_Italish[17] = {""}; 
        updateDisplayProtectItemSetData_Italian(sU8ProtectSelected,sEnableName_Italish);
    } 
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_CZECH)
    {
        char sEnableName_Czech[17] = {""}; 
        updateDisplayProtectItemSetData_Czech(sU8ProtectSelected,sEnableName_Czech);
    } 
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_DUTCH)
    {
        char sEnableName_Dutch[17] = {""}; 
        updateDisplayProtectItemSetData_Dutch(sU8ProtectSelected,sEnableName_Dutch);
    }     
    
    //GUI_DispStringAt((uint8_t*)tab_display, 0, 0); 
    GUI_Display(tab_display, 0, 0);
}

/***************************************************************************
 功能:设置系统绝缘检测使能设置英文界面信息
****************************************************************************/
void updateDisplayProtectItemSetData_English(ENABLE_TypeDef sU8ProtectSelected,char * sEnableName)
{
    memset(tab_display,0,DISPLAY_CACHE_SIZE);
    
    if(sU8ProtectSelected == ENABLE_NO)
    {
       sprintf(tab_display,"%s\nEnable               \n->Disable            \n                     \n",sEnableName);
    }
    else
    {
       sprintf(tab_display,"%s\n->Enable             \nDisable              \n                     \n",sEnableName);
    } 
    
    //GUI_DispStringAt((uint8_t*)tab_display, 0, 0); 
    GUI_Display(tab_display, 0, 0);
}

/***************************************************************************
 功能:设置系统绝缘检测使能设置西班牙语界面信息
****************************************************************************/
void updateDisplayProtectItemSetData_Spanish(ENABLE_TypeDef sU8ProtectSelected,char * sEnableName)
{
    
}

/***************************************************************************
 功能:设置系统远绝缘检测使能设置德语界面信息
****************************************************************************/
void updateDisplayProtectItemSetData_German(ENABLE_TypeDef sU8ProtectSelected,char * sEnableName)
{
    
}

/***************************************************************************
 功能:设置系统绝缘检测使能设置法语界面信息
****************************************************************************/
void updateDisplayProtectItemSetData_French(ENABLE_TypeDef sU8ProtectSelected,char * sEnableName)
{
    
}

/***************************************************************************
 功能:设置系统绝缘检测使能设置波兰语界面信息
****************************************************************************/
void updateDisplayProtectItemSetData_Polish(ENABLE_TypeDef sU8ProtectSelected,char * sEnableName)
{
    
}

/***************************************************************************
 功能:设置系统绝缘检测使能设置意大利语界面信息
****************************************************************************/
void updateDisplayProtectItemSetData_Italian(ENABLE_TypeDef sU8ProtectSelected,char * sEnableName)
{
    
}

/***************************************************************************
 功能:设置系统绝缘检测使能设置捷克语界面信息
****************************************************************************/
void updateDisplayProtectItemSetData_Czech(ENABLE_TypeDef sU8ProtectSelected,char * sEnableName)
{
    
}

/***************************************************************************
 功能:设置系统绝缘检测使能设置荷兰语界面信息
****************************************************************************/
void updateDisplayProtectItemSetData_Dutch(ENABLE_TypeDef sU8ProtectSelected,char * sEnableName)
{
    
}
/***************************************************************************
 功能:实时统计数据更新
****************************************************************************/
void updateDisplayStatisticsData(KeyAction_TypeDef nowActionType,DisplayAction_TypeDef nowDisplayType)
{
    static uint8_t sU8StatisticsCounter = 0;

    gLastMenu.eLastDisplayMenuType = DISPLAY_DATA_DISPLAYSTACISTICS;
    switch(nowActionType) //本次界面操作类型
    {
        case KEYACTION_DOWN://在实时统计数据界面下，UP键按下，页面数字加一
            {
                sU8StatisticsCounter++;
                if(sU8StatisticsCounter == DISPLAY_STATISTICS_ITEM_COUNT)
                {
                    sU8StatisticsCounter = 0;  
                }
                gCurrentMenu.eCurrentDisplayMenuType = nowDisplayType;
                
            }
            break;
        case KEYACTION_UP://在实时统计数据界面下，UP键按下，页面数字加一
            {
                sU8StatisticsCounter--;                
                if(sU8StatisticsCounter >= DISPLAY_STATISTICS_ITEM_COUNT)
                {
                    sU8StatisticsCounter = DISPLAY_STATISTICS_ITEM_COUNT - 1;
                }
                gCurrentMenu.eCurrentDisplayMenuType = nowDisplayType;      
            }
            break;
        case KEYACTION_ESC://在实时统计数据界面下，Esc键按下，回退到主界面
            {
                sU8StatisticsCounter = 0;
                gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_HOME;
            }
            break;
        case KEYACTION_NULL://无操作
        default:
            {
                gCurrentMenu.eCurrentDisplayMenuType = nowDisplayType;
            }
            break;
    }
    
    if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_ENGLISH) //实时统计数据显示界面 英文界面组装
    { 
        updateDisplayStatisticsData_English(sU8StatisticsCounter);                    
    }
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_CHINESE)//实时统计数据显示界面 中文界面组装
    {
        updateDisplayStatisticsData_Chinese(sU8StatisticsCounter);
    }    
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_SPANISH)//实时统计数据显示界面 西班牙界面组装
    { 
        updateDisplayStatisticsData_Spanish(sU8StatisticsCounter);
    } 
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_GERMAN)//实时统计数据显示界面 德语界面组装
    { 
        updateDisplayStatisticsData_German(sU8StatisticsCounter);
    } 
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_FRENCH)//实时统计数据显示界面 法语界面组装
    { 
        updateDisplayStatisticsData_French(sU8StatisticsCounter);                     
    }   
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_POLISH)//实时统计数据显示界面 波兰界面组装
    {
        updateDisplayStatisticsData_Polish(sU8StatisticsCounter);
    }    
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_ITALIAN)//实时统计数据显示界面 意大利界面组装
    {
        updateDisplayStatisticsData_Italian(sU8StatisticsCounter);                   
    } 
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_CZECH)//实时统计数据显示界面 捷克界面组装
    { 
        updateDisplayStatisticsData_Czech(sU8StatisticsCounter);                  
    }   
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_DUTCH)//实时统计数据显示界面 荷兰界面组装
    { 
        updateDisplayStatisticsData_Dutch(sU8StatisticsCounter);                 
    }
    else
    {   
        updateDisplayStatisticsData_English(sU8StatisticsCounter);                    
    }
}

/***************************************************************************
功能:实时统计数据显示 英文界面信息
****************************************************************************/
void updateDisplayStatisticsData_English(uint8_t sU8StatisticsCounter)    
{
    memset(tab_display,0,DISPLAY_CACHE_SIZE);
    
    if(sU8StatisticsCounter == PAGE_ONE)
    {
        float fPvData = gDisplay.stDisplayData.stStatistical.stDayStatisticaldata.stPVPowerGeneration / 10.0;        //后续优化除法
        float fInputData = gDisplay.stDisplayData.stStatistical.stDayStatisticaldata.stInputPowerGeneration / 10.0;        //后续优化除法
        float fOutputData = gDisplay.stDisplayData.stStatistical.stDayStatisticaldata.stOutputPowerGeneration / 10.0;        //后续优化除法
        sprintf(tab_display,"    Day Statistics   \nPV:       %8.1fkWh\nSell:     %8.1fkWh\nBuy:      %8.1fkWh\n",fPvData,fInputData,fOutputData);
    }
    else if(sU8StatisticsCounter == PAGE_TWO)                                                              
    {
        float fChargeData = gDisplay.stDisplayData.stStatistical.stDayStatisticaldata.stChagePowerGeneration / 10.0;       //后续优化除法
        float fDisChargeData = gDisplay.stDisplayData.stStatistical.stDayStatisticaldata.stDisChagePowerGeneration / 10.0; //后续优化除法
        float fLoadData = gDisplay.stDisplayData.stStatistical.stDayStatisticaldata.stLoadPowerGeneration / 10.0;    //后续优化除法
        sprintf(tab_display,"    Day Statistics   \nCharge:   %8.1fkWh\nDisCharge:%8.1fkWh\nLoad:     %8.1fkWh\n",fChargeData,fDisChargeData,fLoadData);
    }    
    else if(sU8StatisticsCounter == PAGE_THREE)
    {
        float fPvData = gDisplay.stDisplayData.stStatistical.stMonthStatisticaldata.stPVPowerGeneration / 10.0;        //后续优化除法
        float fInputData = gDisplay.stDisplayData.stStatistical.stMonthStatisticaldata.stInputPowerGeneration / 10.0;        //后续优化除法
        float fOutputData = gDisplay.stDisplayData.stStatistical.stMonthStatisticaldata.stOutputPowerGeneration / 10.0;//后续优化除法
        sprintf(tab_display,"   Month Statistics  \nPV:       %8.1fkWh\nSell:     %8.1fkWh\nBuy:      %8.1fkWh\n",fPvData,fInputData,fOutputData);
    }
    else if(sU8StatisticsCounter == PAGE_FOUR)
    {
        float fChargeData = gDisplay.stDisplayData.stStatistical.stMonthStatisticaldata.stChagePowerGeneration / 10.0;       //后续优化除法
        float fDisChargeData = gDisplay.stDisplayData.stStatistical.stMonthStatisticaldata.stDisChagePowerGeneration / 10.0; //后续优化除法
        float fLoadData = gDisplay.stDisplayData.stStatistical.stMonthStatisticaldata.stLoadPowerGeneration / 10.0;    //后续优化除法
        sprintf(tab_display,"   Month Statistics  \nCharge:   %8.1fkWh\nDisCharge:%8.1fkWh\nLoad:     %8.1fkWh\n",fChargeData,fDisChargeData,fLoadData);
    } 
    else if(sU8StatisticsCounter == PAGE_FIVE)
    {
        float fPvData = gDisplay.stDisplayData.stStatistical.stYearStatisticaldata.stPVPowerGeneration / 10.0;        //后续优化除法
        float fInputData = gDisplay.stDisplayData.stStatistical.stYearStatisticaldata.stInputPowerGeneration / 10.0;        //后续优化除法
        float fOutputData = gDisplay.stDisplayData.stStatistical.stYearStatisticaldata.stOutputPowerGeneration / 10.0;//后续优化除法
        sprintf(tab_display,"   Year Statistics   \nPV:       %8.1fkWh\nSell:     %8.1fkWh\nBuy:      %8.1fkWh\n",fPvData,fInputData,fOutputData);
    }
    else if(sU8StatisticsCounter == PAGE_SIX)
    {
        float fChargeData = gDisplay.stDisplayData.stStatistical.stYearStatisticaldata.stChagePowerGeneration / 10.0;       //后续优化除法
        float fDisChargeData = gDisplay.stDisplayData.stStatistical.stYearStatisticaldata.stDisChagePowerGeneration / 10.0; //后续优化除法
        float fLoadData = gDisplay.stDisplayData.stStatistical.stYearStatisticaldata.stLoadPowerGeneration / 10.0;    //后续优化除法
        sprintf(tab_display,"   Year Statistics   \nCharge:   %8.1fkWh\nDisCharge:%8.1fkWh\nLoad:     %8.1fkWh\n",fChargeData,fDisChargeData,fLoadData);
    }  
    else if(sU8StatisticsCounter == PAGE_SEVEN)
    {
        float fPvData = gDisplay.stDisplayData.stStatistical.stTotalStatisticaldata.stPVPowerGeneration / 10.0;        //后续优化除法
        float fInputData = gDisplay.stDisplayData.stStatistical.stTotalStatisticaldata.stInputPowerGeneration / 10.0;        //后续优化除法
        float fOutputData = gDisplay.stDisplayData.stStatistical.stTotalStatisticaldata.stOutputPowerGeneration / 10.0;//后续优化除法
        sprintf(tab_display,"   Total Statistics  \nPV:       %8.1fkWh\nSell:     %8.1fkWh\nBuy:      %8.1fkWh\n",fPvData,fInputData,fOutputData);
    }
    else if(sU8StatisticsCounter == PAGE_EIGHT)
    {
        float fChargeData = gDisplay.stDisplayData.stStatistical.stTotalStatisticaldata.stChagePowerGeneration / 10.0;       //后续优化除法
        float fDisChargeData = gDisplay.stDisplayData.stStatistical.stTotalStatisticaldata.stDisChagePowerGeneration / 10.0; //后续优化除法
        float fLoadData = gDisplay.stDisplayData.stStatistical.stTotalStatisticaldata.stLoadPowerGeneration / 10.0;    //后续优化除法
        sprintf(tab_display,"   Total Statistics   \nCharge:   %8.1fkWh\nDisCharge:%8.1fkWh\nLoad:     %8.1fkWh\n",fChargeData,fDisChargeData,fLoadData);
    }    
    
    //GUI_DispStringAt((uint8_t*)tab_display, 0, 0); 
    GUI_Display(tab_display, 0, 0);
}


/***************************************************************************
 功能:实时统计数据显示 西班牙界面信息
****************************************************************************/
void updateDisplayStatisticsData_Spanish(uint8_t sU8StatisticsCounter)
{
    
}

/***************************************************************************
 功能:实时统计数据显示 德语界面信息
****************************************************************************/
void updateDisplayStatisticsData_German(uint8_t sU8StatisticsCounter)
{
    
}

/***************************************************************************
 功能:实时统计数据显示 法语界面信息
****************************************************************************/
void updateDisplayStatisticsData_French(uint8_t sU8StatisticsCounter)
{
    
}

/***************************************************************************
 功能:实时统计数据显示 波兰语界面信息
****************************************************************************/
void updateDisplayStatisticsData_Polish(uint8_t sU8StatisticsCounter)
{
    
}

/***************************************************************************
 功能:实时统计数据显示 意大利语界面信息
****************************************************************************/
void updateDisplayStatisticsData_Italian(uint8_t sU8StatisticsCounter)
{
    
}

/***************************************************************************
 功能:实时统计数据显示 捷克语界面信息
****************************************************************************/
void updateDisplayStatisticsData_Czech(uint8_t sU8StatisticsCounter)
{
    
}

/***************************************************************************
 功能:实时统计数据显示 荷兰语界面信息
****************************************************************************/
void updateDisplayStatisticsData_Dutch(uint8_t sU8StatisticsCounter)
{
    
}
/***************************************************************************
 功能:系统数据更新
****************************************************************************/
void updateDisplaySystemData(KeyAction_TypeDef nowActionType,DisplayAction_TypeDef nowDisplayType)
{
    static uint8_t sU8SystemCounter = 0;
    
    gLastMenu.eLastDisplayMenuType = DISPLAY_SET_SYSTEM;
    switch(nowActionType) //本次界面操作类型
    {
        case KEYACTION_DOWN://在实时系统数据界面下，UP键按下，页面数字加一
            {
                sU8SystemCounter++;
                if(sU8SystemCounter == DISPLAY_REALTIME_ITEM_COUNT)
                {
                    sU8SystemCounter = 0;  
                }
                gCurrentMenu.eCurrentDisplayMenuType = nowDisplayType;
                
            }
            break;
        case KEYACTION_UP://在实时系统数据界面下，Down键按下，页面数字减一
            {
                sU8SystemCounter--;
                if(sU8SystemCounter >= DISPLAY_REALTIME_ITEM_COUNT)
                {
                    sU8SystemCounter = DISPLAY_REALTIME_ITEM_COUNT - 1;  
                }
                gCurrentMenu.eCurrentDisplayMenuType = nowDisplayType;
                
            }
            break;
        case KEYACTION_ESC://在实时统计数据界面下，Esc键按下，回退到主界面
            {
                sU8SystemCounter = 0;
                gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_HOME;
            }
            break;
        case KEYACTION_NULL://无操作
        default:
            {
                gCurrentMenu.eCurrentDisplayMenuType = nowDisplayType;
            }
            break;
    }
    
    if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_ENGLISH) //系统数据显示界面 英文界面组装
    { 
        updateDisplaySystemData_English(sU8SystemCounter);                    
    }
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_CHINESE)//系统数据显示界面 中文界面组装
    {
        updateDisplaySystemData_Chinese(sU8SystemCounter);
    }    
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_SPANISH)//系统数据显示界面 西班牙界面组装
    { 
        updateDisplaySystemData_Spanish(sU8SystemCounter);
    } 
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_GERMAN)//系统数据显示界面 德语界面组装
    { 
        updateDisplaySystemData_German(sU8SystemCounter);
    } 
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_FRENCH)//系统数据显示界面 法语界面组装
    { 
        updateDisplaySystemData_French(sU8SystemCounter);                     
    }   
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_POLISH)//系统数据显示界面 波兰界面组装
    {
        updateDisplaySystemData_Polish(sU8SystemCounter);
    }    
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_ITALIAN)//系统数据显示界面 意大利界面组装
    {
        updateDisplaySystemData_Italian(sU8SystemCounter);                   
    } 
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_CZECH)//系统数据显示界面 捷克界面组装
    { 
        updateDisplaySystemData_Czech(sU8SystemCounter);                  
    }   
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_DUTCH)//系统数据显示界面 荷兰界面组装
    { 
        updateDisplaySystemData_Dutch(sU8SystemCounter);                 
    }
    else
    {   
        updateDisplaySystemData_English(sU8SystemCounter);                    
    }
}

/***************************************************************************
功能:系统数据显示 英文界面信息
****************************************************************************/
void updateDisplaySystemData_English(uint8_t sU8SystemCounter)    
{
    memset(tab_display,0,DISPLAY_CACHE_SIZE);
    
    if(sU8SystemCounter == PAGE_ONE)
    {
        char tab_SR[10] = {""}; //zh-cn  
        if(gDisplay.stDisplaySet.stGrid.u8SafetyRegulationType == SR_EURTEN) 
        {
            sprintf(tab_SR,"%s","EurUnion");      
        }
        if(gDisplay.stDisplaySet.stGrid.u8SafetyRegulationType == SR_DE) 
        {
            sprintf(tab_SR,"%s","DE      ");      
        }
        else if(gDisplay.stDisplaySet.stGrid.u8SafetyRegulationType == SR_UK)
        {
            sprintf(tab_SR,"%s","UK      ");
        }
        else if(gDisplay.stDisplaySet.stGrid.u8SafetyRegulationType == SR_ZA)
        {
            sprintf(tab_SR,"%s","ZA      ");
        }
        else if(gDisplay.stDisplaySet.stGrid.u8SafetyRegulationType == SR_AU)
        {
            sprintf(tab_SR,"%s","AU      ");
        }
        else
        {
            sprintf(tab_SR,"%s","Null    ");
        }
        
        char tab_PVWay[9] = {""}; 

        if(gDisplay.stDisplaySet.stPV.u8PVControlWay == PV_WAY_ALONE) 
        {
            sprintf(tab_PVWay,"%s","Alone   ");      
        }
        else
        {
            sprintf(tab_PVWay,"%s","Parallel"); 
        }
                
        sprintf(tab_display,"    System Data %d    \nLanguage:%s     \nGridStandard:%s\nPV Way:%s      \n",sU8SystemCounter+1,"English",tab_SR,tab_PVWay);  
    }
    else if(sU8SystemCounter == PAGE_TWO)
    {
        char tab_Work[9] = {""}; 
        
        if(gDisplay.stDisplaySet.stStrategy.u8StrategyType == STRATEGY_TPFV)
        {
            sprintf(tab_Work,"%s","TPFV    ");
        }
        else if(gDisplay.stDisplaySet.stStrategy.u8StrategyType == STRATEGY_REGULAR)
        {
            sprintf(tab_Work,"%s","Regular "); 
        }
        else if(gDisplay.stDisplaySet.stStrategy.u8StrategyType == STRATEGY_SELF)
        {
            sprintf(tab_Work,"%s","Self use"); 
        }
        else if(gDisplay.stDisplaySet.stStrategy.u8StrategyType == STRATEGY_BACKUP)
        {
            sprintf(tab_Work,"%s","Backup  "); 
        }
        else if(gDisplay.stDisplaySet.stStrategy.u8StrategyType == STRATEGY_GEN)
        {
            sprintf(tab_Work,"%s","Gen     "); 
        }
         
        char tab_Anti[5] = {""}; 
        
        if(gDisplay.stDisplaySet.stGrid.u8PreventReverseFlowControlFlag == ENABLE_YES)
        {   
            sprintf(tab_Anti,"%s","Yes ");  
        }
        else
        {
            sprintf(tab_Anti,"%s","No  "); 
        } 
        
        char tab_BMS_Manufacturer[7] = {""}; 
        
        if(gDisplay.stDisplaySet.stBMS.u8ProtocolType == BMS_MANU_CVTE)
        {   
            sprintf(tab_BMS_Manufacturer,"%s","CVTE  ");  
        }
        //else if(gDisplay.stDisplaySet.stBMS.u8ProtocolType == BMS_MANU_LG)
        //{
        //    sprintf(tab_BMS_Manufacturer,"%s","LG    ");
        //}
        else if(gDisplay.stDisplaySet.stBMS.u8ProtocolType == BMS_MANU_Pylon)
        {
            sprintf(tab_BMS_Manufacturer,"%s","Pylon ");
        }
     
        sprintf(tab_display,"    System Data %d    \nWork Mode:%s   \nAnti-reflux:%s     \nBMS-Menu:%s     \n",sU8SystemCounter+1,tab_Work,tab_Anti,tab_BMS_Manufacturer);  
    }    
    else if(sU8SystemCounter == PAGE_THREE)
    {
        Display_DSP_MCU_Version stVersion;
        memset(&stVersion,0,sizeof(Display_DSP_MCU_Version));
        GetDisplaySoftwareVersion(&stVersion);
        char tab_Dsp_Version[13];
        sprintf(tab_Dsp_Version,"V%03d.%03d.%03d",stVersion.u16MainDspVerV,stVersion.u16MainDspVerB,stVersion.u16MainDspVerD);
        char tab_Ems_Version[13];
        sprintf(tab_Ems_Version,"V%03d.%03d.%03d",VER_V,VER_B,VER_D);
        char tab_Bak_Version[13];
        sprintf(tab_Bak_Version,"V%03d.%03d.%03d",stVersion.u16BackMcuVerV,stVersion.u16BackMcuVerB,stVersion.u16BackMcuVerD);
        sprintf(tab_display,"    System Data %d    \nDSPVer:%s  \nEMSVer:%s  \nAuxVer:%s  \n",sU8SystemCounter+1,tab_Dsp_Version,tab_Ems_Version,tab_Bak_Version); 
    }
    else if(sU8SystemCounter == PAGE_FOUR)
    {
        float fSystemTemp = gDisplay.stDisplayData.stSystemData.s16SystemTemperature / 10.0;        //后续优化除法   
        sprintf(tab_display,"    System Data %d    \nSys Temperature:%-5.1f\n                     \n                     \n",sU8SystemCounter+1,fSystemTemp); 
    }    
    
    GUI_Display(tab_display, 0, 0);
}


/***************************************************************************
 功能:系统数据显示 西班牙界面信息
****************************************************************************/
void updateDisplaySystemData_Spanish(uint8_t sU8StatisticsCounter)
{
    
}

/***************************************************************************
 功能:系统数据显示 德语界面信息
****************************************************************************/
void updateDisplaySystemData_German(uint8_t sU8StatisticsCounter)
{
    
}

/***************************************************************************
 功能:系统数据显示 法语界面信息
****************************************************************************/
void updateDisplaySystemData_French(uint8_t sU8StatisticsCounter)
{
    
}

/***************************************************************************
 功能:系统数据显示 波兰语界面信息
****************************************************************************/
void updateDisplaySystemData_Polish(uint8_t sU8StatisticsCounter)
{
    
}

/***************************************************************************
 功能:系统数据显示 意大利语界面信息
****************************************************************************/
void updateDisplaySystemData_Italian(uint8_t sU8StatisticsCounter)
{
    
}

/***************************************************************************
 功能:系统数据显示 捷克语界面信息
****************************************************************************/
void updateDisplaySystemData_Czech(uint8_t sU8StatisticsCounter)
{
    
}

/***************************************************************************
 功能:系统数据显示 荷兰语界面信息
****************************************************************************/
void updateDisplaySystemData_Dutch(uint8_t sU8StatisticsCounter)
{
    
}
/***************************************************************************
 功能:实时数据更新
****************************************************************************/
void updateDisplayRealtimeData(KeyAction_TypeDef nowActionType,DisplayAction_TypeDef nowDisplayType)
{
    static uint8_t sU8RealtimeCounter = 0;
    static uint16_t sU16AutoCounter = 0;
    static uint8_t sU8DisplayMaxCount = 0;
   
    DisplayGenGridState_t  tGenRunState;
    memset(& tGenRunState,0,sizeof(tGenRunState));
    GetDisplayGridGenState(&tGenRunState);
    
    if (tGenRunState.Bits.bGenDetected  == BIT_SET)
    {
         sU8DisplayMaxCount = DISPLAY_REALTIME_ITEM_COUNT + 2; 
    } 
    else
    {
         sU8DisplayMaxCount = DISPLAY_REALTIME_ITEM_COUNT;
    }
    
    gLastMenu.eLastDisplayMenuType = DISPLAY_DATA_DISPLAYREALTIMEDATA;
    switch(nowActionType)
    {
        case KEYACTION_DOWN://在实时数据界面下，UP键按下，页面数字加一
            {
                sU8RealtimeCounter++;
                sU16AutoCounter = 0 ;
                if(sU8RealtimeCounter == sU8DisplayMaxCount)
                {
                    sU8RealtimeCounter = 0;  
                }
                gCurrentMenu.eCurrentDisplayMenuType = nowDisplayType;
                
            }
            break;
        case KEYACTION_UP://在实时数据界面下，Down键按下，页面数字减一
            {
                sU8RealtimeCounter--;
                sU16AutoCounter = 0 ;
                if(sU8RealtimeCounter >= sU8DisplayMaxCount)
                {
                    sU8RealtimeCounter = sU8DisplayMaxCount - 1;  
                }
                gCurrentMenu.eCurrentDisplayMenuType = nowDisplayType;                
            }
            break;
        case KEYACTION_ESC://在实时统计数据界面下，Esc键按下，回退到主界面
            {
                sU8RealtimeCounter = 0;
                sU16AutoCounter = 0 ;
                gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_HOME;
            }
            break;
        case KEYACTION_NULL://无操作
        default:
            {
                gCurrentMenu.eCurrentDisplayMenuType = nowDisplayType;
                sU16AutoCounter ++;
                if(sU16AutoCounter >= AUTOPAGERCONTER)
                {
                    sU8RealtimeCounter++;
                    sU16AutoCounter = 0 ;
                    if(sU8RealtimeCounter == sU8DisplayMaxCount)
                    {
                        sU8RealtimeCounter = 0;  
                    }    
                }
            }                            
            break;
    }
    
    if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_ENGLISH) //实时数据显示界面 英文界面组装
    { 
        updateDisplayRealtimeData_English(sU8RealtimeCounter);                    
    }
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_CHINESE)//实时数据显示界面 中文界面组装
    {
        updateDisplayRealtimeData_Chinese(sU8RealtimeCounter);
    }    
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_SPANISH)//实时数据显示界面 西班牙界面组装
    { 
        updateDisplayRealtimeData_Spanish(sU8RealtimeCounter);
    } 
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_GERMAN)//实时数据显示界面 德语界面组装
    { 
        updateDisplayRealtimeData_German(sU8RealtimeCounter);
    } 
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_FRENCH)//实时数据显示界面 法语界面组装
    { 
        updateDisplayRealtimeData_French(sU8RealtimeCounter);                     
    }   
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_POLISH)//实时数据显示界面 波兰界面组装
    {
        updateDisplayRealtimeData_Polish(sU8RealtimeCounter);
    }    
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_ITALIAN)//实时数据显示界面 意大利界面组装
    {
        updateDisplayRealtimeData_Italian(sU8RealtimeCounter);                   
    } 
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_CZECH)//实时数据显示界面 捷克界面组装
    { 
        updateDisplayRealtimeData_Czech(sU8RealtimeCounter);                  
    }   
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_DUTCH)//实时数据显示界面 荷兰界面组装
    { 
        updateDisplayRealtimeData_Dutch(sU8RealtimeCounter);                 
    }
    else
    {   
        updateDisplayRealtimeData_English(sU8RealtimeCounter);                    
    }
}
/***************************************************************************
功能:实时数据显示 英文界面信息
****************************************************************************/
void updateDisplayRealtimeData_English(uint8_t sU8RealtimeCounter)    
{
    memset(tab_display,0,DISPLAY_CACHE_SIZE);
    
    if(sU8RealtimeCounter == PAGE_ONE)
    {
        char tab_pv[11] = {""};
        if((gDisplay.stDisplayData.stPV.stPV1.u8PVStatus == 0x00)&&(gDisplay.stDisplayData.stPV.stPV2.u8PVStatus == 0x00))
        {
            sprintf(tab_pv,"%s","Standby    ");
        }
        else if((gDisplay.stDisplayData.stPV.stPV1.u8PVStatus == 0x01)||(gDisplay.stDisplayData.stPV.stPV2.u8PVStatus == 0x01))
        {
            sprintf(tab_pv,"%s","Running    ");
        }
        else
        {
            sprintf(tab_pv,"%s","unknown    ");
        }
        char tab_Grid[9] = {""};
        if(gDisplay.stDisplayData.stGridData.u8GridStatus == 0x00)
        {
            sprintf(tab_Grid,"%s","On-grid  ");
        }
        else if(gDisplay.stDisplayData.stGridData.u8GridStatus == 0x01)
        {
            sprintf(tab_Grid,"%s","Off-grid ");
        }
        else if(gDisplay.stDisplayData.stGridData.u8GridStatus == 0x02)
        {
            sprintf(tab_Grid,"%s","Have-Grid");
        }
        else if(gDisplay.stDisplayData.stGridData.u8GridStatus == 0x04)
        {
            sprintf(tab_Grid,"%s","Closed   ");
        }
        else
        {
            sprintf(tab_Grid,"%s","unknown  ");
        }
        char tab_battery[10] = {""};
        if(gDisplay.stDisplayData.stBMS.u8BMSStatus == 0x00)
        {
            sprintf(tab_battery,"%s","Normal    ");
        }
        else if(gDisplay.stDisplayData.stBMS.u8BMSStatus == 0x01)
        {
            sprintf(tab_battery,"%s","Fault     ");
        }
        else
        {
            sprintf(tab_battery,"%s","unknown  ");
        }
        char tab_Gen[10] = {""};
        if(gDisplay.stDisplayData.stGenData.u8GenStatus == 0x00)
        {
            sprintf(tab_Gen,"%s","Gen Run  ");
        }
        else if(gDisplay.stDisplayData.stGenData.u8GenStatus == 0x01)
        {
            sprintf(tab_Gen,"%s","EPS Run  ");
        }
        else if(gDisplay.stDisplayData.stGenData.u8GenStatus == 0x02)
        {
            sprintf(tab_Gen,"%s","Have Gen ");
        }
        else if(gDisplay.stDisplayData.stGenData.u8GenStatus == 0x04)
        {
            sprintf(tab_Gen,"%s","No Gen   ");
        }
        else
        {
            sprintf(tab_Gen,"%s","unknown  ");
        }
        sprintf(tab_display,"PV Status:%s\nBat Status:%s\nGrid Status:%s\nGen Status:%s\n",tab_pv,tab_battery,tab_Grid,tab_Gen);
    }
    else if(sU8RealtimeCounter == PAGE_TWO)
    {
        float fCurrent   = gDisplay.stDisplayData.stGridData.sGridcurrent / 10.0;
        float fVoltage   = gDisplay.stDisplayData.stGridData.u16GridVoltage / 10.0;
        float fFrequency = gDisplay.stDisplayData.stGridData.u16GridFrequency / 100.00;
        
        sprintf(tab_display,"     Grid Data 1     \nVoltage:    %8.1fV\nCurrent:    %8.1fA\nFrequency: %8.2fHz\n",fVoltage,fCurrent,fFrequency);
    }
    else if(sU8RealtimeCounter == PAGE_THREE)
    {
        float fReactivePower   = gDisplay.stDisplayData.stGridData.sGridReactivePower / 10.0;
        float fGridActivePower = gDisplay.stDisplayData.stGridData.sGridActivePower / 10.0;
        
        sprintf(tab_display,"     Grid Data 2     \nAct-Power:    %6.1fW\nReact-Power:%6.1fVar\n                     \n",fGridActivePower,fReactivePower);  
    }    
    else if(sU8RealtimeCounter == PAGE_FOUR)
    {
        float fVoltage   = gDisplay.stDisplayData.stPV.stPV1.u16PVVoltage / 10.0;
        float fCurrent   = gDisplay.stDisplayData.stPV.stPV1.sPVCurrent / 10.0;
        float fPower     = gDisplay.stDisplayData.stPV.stPV1.sPVPower / 10.0;
        
        sprintf(tab_display,"      PV1 Data 1     \nVoltage:    %8.1fV\nCurrent:    %8.1fA\nPower:      %8.3fW\n",fVoltage,fCurrent,fPower);  
    }
    else if(sU8RealtimeCounter == PAGE_FIVE)
    {
        float fVoltage   = gDisplay.stDisplayData.stPV.stPV2.u16PVVoltage / 10.0;
        float fCurrent   = gDisplay.stDisplayData.stPV.stPV2.sPVCurrent / 10.0;
        float fPower     = gDisplay.stDisplayData.stPV.stPV2.sPVPower / 10.0;
        
        sprintf(tab_display,"      PV2 Data 1     \nVoltage:    %8.1fV\nCurrent:    %8.1fA\nPower:      %8.3fW\n",fVoltage,fCurrent,fPower);  
    } 
    else if(sU8RealtimeCounter == PAGE_SIX)
    {
        float fVoltage   = gDisplay.stDisplayData.stLoad.u16LoadVoltage / 10.0;
        float fCurrent   = gDisplay.stDisplayData.stLoad.sLoadcurrent / 10.0;
        float fPower     = gDisplay.stDisplayData.stLoad.sLoadPower / 10.0;
        sprintf(tab_display,"     Load Data 1     \nVoltage:    %8.1fV\nCurrent:    %8.1fA\nPower:      %8.3fW\n",fVoltage,fCurrent,fPower);  
    } 
    else if(sU8RealtimeCounter == PAGE_SEVEN)
    {
        float fLoadRate = (float) gDisplay.stDisplayData.stLoad.sLoadPower / DEVICERATEDPOWER;
        sprintf(tab_display,"     Load Data 2     \nLoadRate:        %3.1f%%\n                     \n                     \n",fLoadRate);  
    } 
    else if(sU8RealtimeCounter == PAGE_EIGHT)
    {
        float fVoltage   = gDisplay.stDisplayData.stBMS.u16BMSVoltage / 10.0;
        float fCurrent   = gDisplay.stDisplayData.stBMS.sBMSCurrent / 10.0;
        if(gDisplay.stDisplayData.stBMS.sBMSCurrent > 0)
        {
            sprintf(tab_display,"      BMS Data 1     \nState:      DisCharge\nVoltage:    %8.1fV\nCurrent:    %8.1fA\n",fVoltage,fCurrent);
        }
        else if(gDisplay.stDisplayData.stBMS.sBMSCurrent <= 0)
        {
            fCurrent   = abs(gDisplay.stDisplayData.stBMS.sBMSCurrent);
            sprintf(tab_display,"      BMS Data 1     \nState:         Charge\nVoltage:    %8.1fV\nCurrent:    %8.1fA\n",fVoltage,fCurrent);
        }
    }  
    else if(sU8RealtimeCounter == PAGE_NINE)
    {
        float fSOC        = gDisplay.stDisplayData.stBMS.u8SOC;
        if(gDisplay.stDisplayData.stBMS.sBMSCurrent > 0)
        {
            float fPower   = gDisplay.stDisplayData.stBMS.sDisChargePower / 10.0;
            sprintf(tab_display,"      BMS Data 2     \nPower:      %8.1fW\n        SOC:%8.1f%%\n                     \n",fPower,fSOC);
        }
        else if(gDisplay.stDisplayData.stBMS.sBMSCurrent <= 0)
        {
            float fPower   = abs(gDisplay.stDisplayData.stBMS.sChargePower) / 10.0;
            sprintf(tab_display,"      BMS Data 2     \nPower:      %8.1fW\nSOC:        %8.1f%%\n                     \n",fPower,fSOC);
        }
//        float fOutPower   = gDisplay.stDisplayData.stBMS.sDisChargePower / 10.0;
//        float fSOC        = gDisplay.stDisplayData.stBMS.u8SOC;
//        float fSOH        = gDisplay.stDisplayData.stBMS.u8SOH;
           
//        sprintf(tab_display,"      BMS Data 2     \nOut-Power:%-8.1f   \nSOC:%-8.1f         \nSOH:%-8.1f         \n",fOutPower,fSOC,fSOH);  //Out-P 放电功率 
    } 
    else if(sU8RealtimeCounter == PAGE_TEN)
    {
        float fCurrent   = gDisplay.stDisplayData.stGenData.sGencurrent / 10.0;
        float fVoltage   = gDisplay.stDisplayData.stGenData.u16GenVoltage / 10.0;
        float fFrequency = gDisplay.stDisplayData.stGenData.u16GenFrequency / 100.00;
        
        sprintf(tab_display,"     Gen Data 1      \nVoltage:    %8.1fV\nCurrent:    %8.1fA\nFrequency: %8.2fHz\n",fVoltage,fCurrent,fFrequency);
    }
    else if(sU8RealtimeCounter == PAGE_ELEVEN)
    {
        float fActivePower   = gDisplay.stDisplayData.stGenData.sGenPower / 10.0;
        
        sprintf(tab_display,"     Gen Data 2      \nAct-Power:  %8.1fW\n                     \n                     \n",fActivePower);  
    }  
/*    if(sU8RealtimeCounter == PAGE_SEVEN)
    {
        float fOutPower   = gDisplay.stDisplayData.stBMS.sDisChargePower / 10.0;
        float fSOC        = gDisplay.stDisplayData.stBMS.u8SOC;
        float fSOH        = gDisplay.stDisplayData.stBMS.u8SOH;
           
        sprintf(tab_display,"      BMS Data 2     \nOut-Power:%-8.1f   \nSOC:%-8.1f         \nSOH:%-8.1f         \n",fOutPower,fSOC,fSOH);  //Out-P 放电功率 
    } 
    if(sU8RealtimeCounter == PAGE_EIGHT)
    {
        //
        char tab_BMS_Type[6] = {""};
        
        if(gDisplay.stDisplayData.stBMS.u8BMSType == BMS_TYPE_PB_AC)
        {
           sprintf(tab_BMS_Type,"%s","PB-AC"); 
        }
        else if(gDisplay.stDisplayData.stBMS.u8BMSType == BMS_TYPE_Ni_MH)
        {
            sprintf(tab_BMS_Type,"%s","NI-MH");
        }
        else if(gDisplay.stDisplayData.stBMS.u8BMSType == BMS_TYPE_LFP)
        {
            sprintf(tab_BMS_Type,"%s","LFP  ");
        }
        else if(gDisplay.stDisplayData.stBMS.u8BMSType == BMS_TYPE_MA_LI)
        {
            sprintf(tab_BMS_Type,"%s","MA-LI");
        }
        else if(gDisplay.stDisplayData.stBMS.u8BMSType == BMS_TYPE_LCO)
        {
            sprintf(tab_BMS_Type,"%s","LCO  ");
        }
        else if(gDisplay.stDisplayData.stBMS.u8BMSType == BMS_TYPE_NMP)
        {
            sprintf(tab_BMS_Type,"%s","NMP  ");
        }
        else if(gDisplay.stDisplayData.stBMS.u8BMSType == BMS_TYPE_LI_PO)
        {
            sprintf(tab_BMS_Type,"%s","LI-PO");
        }
        else if(gDisplay.stDisplayData.stBMS.u8BMSType == BMS_TYPE_LTO)
        {
            sprintf(tab_BMS_Type,"%s","LTO  ");
        }
             
        float fCapacity   = gDisplay.stDisplayData.stBMS.u16BMSCapacity / 10.0;
        float fOverVoltage   = gDisplay.stDisplayData.stBMS.u16OverValtagevalue / 10.0;
        
        sprintf(tab_display,"      BMS Data 3     \nType:%s           \nCapacity:%-8.1f    \nOver-Voltage:%-8.3f\n",tab_BMS_Type,fCapacity,fOverVoltage);  
    } 
    if(sU8RealtimeCounter == PAGE_NINE)
    {
        //
        float fDOD     = gDisplay.stDisplayData.stBMS.u8DOD / 10.0;               //后续优化除法
        float fCurrent = gDisplay.stDisplayData.stBMS.sMaxChargeCurrent / 10.0;   //后续优化除法
        float fVoltage = gDisplay.stDisplayData.stBMS.u16MaxChargeVoltage / 10.0; //后续优化除法
           
        sprintf(tab_display,"      BMS Data 4     \nDOD:%-8.1f         \nCurrent-In-Max:%-6.1f\nVoltage-In-Max:%-6.1f\n",fDOD,fCurrent,fVoltage);  
    }  
    if(sU8RealtimeCounter == PAGE_TEN)
    {
        //
        float fUnderValtage = gDisplay.stDisplayData.stBMS.u16UnderValtagevalue / 10.0; //后续优化除法
        float fCurrent = gDisplay.stDisplayData.stBMS.sMaxDisChargeCurrent / 10.0;      //后续优化除法
        float fVoltage = gDisplay.stDisplayData.stBMS.u16MaxDisChargeVoltage / 10.0;    //后续优化除法
           
        sprintf(tab_display,"      BMS Data 5     \nUnder-Voltage:%-7.1f\nCurrent-Out-Max:%-5.1f\nVoltage-Out-Max:%-5.1f\n",fUnderValtage,fCurrent,fVoltage);  
    }    
*/    
    //GUI_DispStringAt((uint8_t*)tab_display, 0, 0); 
    GUI_Display(tab_display, 0, 0);
}


/***************************************************************************
 功能:实时数据显示 西班牙界面信息
****************************************************************************/
void updateDisplayRealtimeData_Spanish(uint8_t sU8RealtimeCounter)
{
    
}

/***************************************************************************
 功能:实时数据显示 德语界面信息
****************************************************************************/
void updateDisplayRealtimeData_German(uint8_t sU8RealtimeCounter)
{
    
}

/***************************************************************************
 功能:实时数据显示 法语界面信息
****************************************************************************/
void updateDisplayRealtimeData_French(uint8_t sU8RealtimeCounter)
{
    
}

/***************************************************************************
 功能:实时数据显示 波兰语界面信息
****************************************************************************/
void updateDisplayRealtimeData_Polish(uint8_t sU8RealtimeCounter)
{
    
}

/***************************************************************************
 功能:实时数据显示 意大利语界面信息
****************************************************************************/
void updateDisplayRealtimeData_Italian(uint8_t sU8RealtimeCounter)
{
    
}

/***************************************************************************
 功能:实时数据显示 捷克语界面信息
****************************************************************************/
void updateDisplayRealtimeData_Czech(uint8_t sU8RealtimeCounter)
{
    
}

/***************************************************************************
 功能:实时数据显示 荷兰语界面信息
****************************************************************************/
void updateDisplayRealtimeData_Dutch(uint8_t sU8RealtimeCounter)
{
    
}

/***************************************************************************
 功能:实时故障告警数据更新
****************************************************************************/
void updateDisplayRealFaultData(KeyAction_TypeDef nowActionType,DisplayAction_TypeDef nowDisplayType)
{   
    static uint8_t sU8RealFaultCounter = 0;
    Fault_Info_Real * pStReal = Display_Get_RealFaultData();
    
    uint8_t u8PageNumber = pStReal->u8RealFaultIndex / DISPLAY_DATA_PERPAGE_MAX_ITEM;//总共分多少页
    uint8_t u8LastItemCouter = pStReal->u8RealFaultIndex % DISPLAY_DATA_PERPAGE_MAX_ITEM;//最后一页Item数量
    
    if(u8LastItemCouter != 0)
    {
        u8PageNumber = u8PageNumber + 1;
    }

    gLastMenu.eLastDisplayMenuType       = DISPLAY_DATA_DISPLAYREALFAULTRECORD;
    switch(nowActionType) //本次界面操作类型
    {
        case KEYACTION_DOWN://在实时故障告警界面下，UP键按下，页面数字加一
            {
                sU8RealFaultCounter++;
                if((sU8RealFaultCounter == u8PageNumber) || (u8PageNumber == 0))
                {
                    sU8RealFaultCounter = 0;  
                }
                gCurrentMenu.eCurrentDisplayMenuType = nowDisplayType;
                
            }
            break;
        case KEYACTION_UP://在实时故障告警界面下，DOWN键按下，页面数字减一
            {  
                sU8RealFaultCounter--;                
                if(sU8RealFaultCounter >= u8PageNumber)
                {
                    if(u8PageNumber == 0)
                    {
                         sU8RealFaultCounter = 0;
                    }
                    else
                    {
                       sU8RealFaultCounter = u8PageNumber - 1; 
                    }
                }
                gCurrentMenu.eCurrentDisplayMenuType = nowDisplayType;
                
            }
            break;
        case KEYACTION_ESC://在实时故障告警界面下，Esc键按下，回退到主界面
            {
                sU8RealFaultCounter = 0;
                gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_HOME;
            }
            break;
        case KEYACTION_NULL://无操作
        default:
            {
                gCurrentMenu.eCurrentDisplayMenuType = nowDisplayType;
            }
            break;
    }
    
    if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_ENGLISH) //实时故障告警显示界面 英文界面组装
    { 
        updateDisplayRealFaultData_English(sU8RealFaultCounter,u8PageNumber,u8LastItemCouter);                    
    }
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_CHINESE)//实时故障告警显示界面 中文界面组装
    {
        updateDisplayRealFaultData_Chinese(sU8RealFaultCounter,u8PageNumber,u8LastItemCouter);
    }    
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_SPANISH)//实时故障告警显示界面 西班牙界面组装
    { 
        updateDisplayRealFaultData_Spanish(sU8RealFaultCounter,u8PageNumber,u8LastItemCouter);
    } 
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_GERMAN)//实时故障告警显示界面 德语界面组装
    { 
        updateDisplayRealFaultData_German(sU8RealFaultCounter,u8PageNumber,u8LastItemCouter);
    } 
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_FRENCH)//实时故障告警显示界面 法语界面组装
    { 
        updateDisplayRealFaultData_French(sU8RealFaultCounter,u8PageNumber,u8LastItemCouter);                     
    }   
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_POLISH)//实时故障告警显示界面 波兰界面组装
    {
        updateDisplayRealFaultData_Polish(sU8RealFaultCounter,u8PageNumber,u8LastItemCouter);
    }    
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_ITALIAN)//实时故障告警显示界面 意大利界面组装
    {
        updateDisplayRealFaultData_Italian(sU8RealFaultCounter,u8PageNumber,u8LastItemCouter);                   
    } 
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_CZECH)//实时故障告警显示界面 捷克界面组装
    { 
        updateDisplayRealFaultData_Czech(sU8RealFaultCounter,u8PageNumber,u8LastItemCouter);                  
    }   
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_DUTCH)//实时故障告警显示界面 荷兰界面组装
    { 
        updateDisplayRealFaultData_Dutch(sU8RealFaultCounter,u8PageNumber,u8LastItemCouter);                 
    }
    else
    {   
        updateDisplayRealFaultData_English(sU8RealFaultCounter,u8PageNumber,u8LastItemCouter);                    
    } 
    pStReal = NULL;
}
/***************************************************************************
 功能:英文 实时故障告警组装界面
****************************************************************************/
void updateDisplayRealFaultData_English(uint8_t u8CurrentPage,uint8_t u8TotalPageNumber,uint8_t u8LastItemNumber)
{  
    memset(tab_display,0,DISPLAY_CACHE_SIZE); 
    Fault_Info_Real * pStReal = Display_Get_RealFaultData();
    if((u8CurrentPage == 0)&&(u8TotalPageNumber == 0))
    {
        sprintf(tab_display,"                     \n                     \n    No Real Fault    \n                     \n");
    }
    else if(((u8CurrentPage+1) == u8TotalPageNumber)&&(u8LastItemNumber == 1))
    {
        uint16_t u16TempCode  = pStReal->stRealFault[u8CurrentPage*DISPLAY_DATA_PERPAGE_MAX_ITEM+0].u16FaultCode;
        char tab_Fault_Name[DISPLAY_DATA_NAME_CACHE_SIZE]; //Display显示缓存
        memset(tab_Fault_Name,0,DISPLAY_DATA_NAME_CACHE_SIZE);
        getFaultNameByFaultCode(tab_Fault_Name,u16TempCode);//根据故障码获取故障名称
        sprintf(tab_display,"    Real Fault %02d    \n%04x:%16s\n                     \n                     \n",u8CurrentPage+1,u16TempCode,tab_Fault_Name);
    }
    else if(((u8CurrentPage+1) == u8TotalPageNumber) &&(u8LastItemNumber == 2))
    {
        uint16_t u8TempCode1  = pStReal->stRealFault[u8CurrentPage*DISPLAY_DATA_PERPAGE_MAX_ITEM+0].u16FaultCode;
        char tab_Fault_Name1[DISPLAY_DATA_NAME_CACHE_SIZE]; //Display显示缓存
        memset(tab_Fault_Name1,0,DISPLAY_DATA_NAME_CACHE_SIZE);
        getFaultNameByFaultCode(tab_Fault_Name1,u8TempCode1);//根据故障码获取故障名称

        uint16_t u8TempCode2  = pStReal->stRealFault[u8CurrentPage*DISPLAY_DATA_PERPAGE_MAX_ITEM+1].u16FaultCode;
        char tab_Fault_Name2[DISPLAY_DATA_NAME_CACHE_SIZE]; //Display显示缓存
        memset(tab_Fault_Name2,0,DISPLAY_DATA_NAME_CACHE_SIZE);
        getFaultNameByFaultCode(tab_Fault_Name2,u8TempCode2);//根据故障码获取故障名称
        sprintf(tab_display,"    Real Fault %02d    \n%04x:%16s\n%04x:%16s\n                     \n",u8CurrentPage+1,u8TempCode1,tab_Fault_Name1,u8TempCode2,tab_Fault_Name2);
    }
    else
    {
        uint16_t u8TempCode1  = pStReal->stRealFault[u8CurrentPage*DISPLAY_DATA_PERPAGE_MAX_ITEM+0].u16FaultCode;
        char tab_Fault_Name1[DISPLAY_DATA_NAME_CACHE_SIZE]; //Display显示缓存
        memset(tab_Fault_Name1,0,DISPLAY_DATA_NAME_CACHE_SIZE);
        getFaultNameByFaultCode(tab_Fault_Name1,u8TempCode1);//根据故障码获取故障名称
        
        uint16_t u8TempCode2  = pStReal->stRealFault[u8CurrentPage*DISPLAY_DATA_PERPAGE_MAX_ITEM+1].u16FaultCode;
        char tab_Fault_Name2[DISPLAY_DATA_NAME_CACHE_SIZE]; //Display显示缓存
        memset(tab_Fault_Name2,0,DISPLAY_DATA_NAME_CACHE_SIZE);
        getFaultNameByFaultCode(tab_Fault_Name2,u8TempCode2);//根据故障码获取故障名称
        
        uint16_t u8TempCode3  = pStReal->stRealFault[u8CurrentPage*DISPLAY_DATA_PERPAGE_MAX_ITEM+2].u16FaultCode;
        char tab_Fault_Name3[DISPLAY_DATA_NAME_CACHE_SIZE]; //Display显示缓存
        memset(tab_Fault_Name3,0,DISPLAY_DATA_NAME_CACHE_SIZE);
        getFaultNameByFaultCode(tab_Fault_Name3,u8TempCode3);//根据故障码获取故障名称
        
        sprintf(tab_display,"    Real Fault %02d    \n%04x:%16s\n%04x:%16s\n%04x:%16s\n",u8CurrentPage+1,u8TempCode1,tab_Fault_Name1,u8TempCode2,tab_Fault_Name2,u8TempCode3,tab_Fault_Name3);    
    }
    pStReal = NULL;
    //GUI_DispStringAt((uint8_t*)tab_display, 0, 0);
    GUI_Display(tab_display, 0, 0);
}
/***************************************************************************
 功能:西班牙语 实时故障告警组装界面
****************************************************************************/
void updateDisplayRealFaultData_Spanish(uint8_t u8CurrentPage,uint8_t u8TotalPageNumber,uint8_t u8LastItemNumber)
{   
}
/***************************************************************************
 功能:德语 实时故障告警组装界面
****************************************************************************/
void updateDisplayRealFaultData_German(uint8_t u8CurrentPage,uint8_t u8TotalPageNumber,uint8_t u8LastItemNumber)
{   
}
/***************************************************************************
 功能:法语 实时故障告警组装界面
****************************************************************************/
void updateDisplayRealFaultData_French(uint8_t u8CurrentPage,uint8_t u8TotalPageNumber,uint8_t u8LastItemNumber)
{   
}
/***************************************************************************
 功能:波兰语 实时故障告警组装界面
****************************************************************************/
void updateDisplayRealFaultData_Polish(uint8_t u8CurrentPage,uint8_t u8TotalPageNumber,uint8_t u8LastItemNumber)
{   
}
/***************************************************************************
 功能:意大利语 实时故障告警组装界面
****************************************************************************/
void updateDisplayRealFaultData_Italian(uint8_t u8CurrentPage,uint8_t u8TotalPageNumber,uint8_t u8LastItemNumber)
{   
}
/***************************************************************************
 功能:捷克语 实时故障告警组装界面
****************************************************************************/
void updateDisplayRealFaultData_Czech(uint8_t u8CurrentPage,uint8_t u8TotalPageNumber,uint8_t u8LastItemNumber)
{   
}
/***************************************************************************
 功能:荷兰语 实时故障告警组装界面
****************************************************************************/
void updateDisplayRealFaultData_Dutch(uint8_t u8CurrentPage,uint8_t u8TotalPageNumber,uint8_t u8LastItemNumber)
{   
}
/***************************************************************************
 功能:历史故障告警数据更新
****************************************************************************/
void updateDisplayHistoryFaultData(KeyAction_TypeDef nowActionType,DisplayAction_TypeDef nowDisplayType)
{   
    static uint8_t sU8HistoryFaultCounter = 0;
    Fault_Info_History * pStHistory = Display_Get_HistoryFaultData();                

    gLastMenu.eLastDisplayMenuType = DISPLAY_DATA_DISPLAYHISTORYFAULTRECORD;
    switch(nowActionType) //本次界面操作类型
    {            
        case KEYACTION_DOWN://在历史故障告警界面下，UP键按下，页面数字加一
            {
                sU8HistoryFaultCounter++;
                if(sU8HistoryFaultCounter == pStHistory->u8HistoryFaultIndex)
                {
                    sU8HistoryFaultCounter = 0;  
                }
                gCurrentMenu.eCurrentDisplayMenuType = nowDisplayType;
                
            }
            break;
        case KEYACTION_UP://在历史故障告警界面下，DOWN键按下，页面数字减一
            {  
                sU8HistoryFaultCounter--;  
                
                if(sU8HistoryFaultCounter >= pStHistory->u8HistoryFaultIndex)
                {
                    sU8HistoryFaultCounter = pStHistory->u8HistoryFaultIndex - 1;
                }
                
                gCurrentMenu.eCurrentDisplayMenuType = nowDisplayType;
                
            }
            break;          
        case KEYACTION_ESC://在历史故障告警界面下，Esc键按下，回退到主界面
            {
                sU8HistoryFaultCounter = 0;
                gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_HOME;
            }
            break;
        case KEYACTION_NULL://无操作
        default:
            {
                gCurrentMenu.eCurrentDisplayMenuType = nowDisplayType;
            }
            break;
    }
    
    if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_ENGLISH) //历史故障告警显示界面 英文界面组装
    { 
        updateDisplayHistoryFaultData_English(sU8HistoryFaultCounter);                    
    }
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_CHINESE)//历史故障告警显示界面 中文界面组装
    {
        updateDisplayHistoryFaultData_Chinese(sU8HistoryFaultCounter);
    }    
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_SPANISH)//历史故障告警显示界面 西班牙界面组装
    { 
        updateDisplayHistoryFaultData_Spanish(sU8HistoryFaultCounter);
    } 
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_GERMAN)//历史故障告警显示界面 德语界面组装
    { 
        updateDisplayHistoryFaultData_German(sU8HistoryFaultCounter);
    } 
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_FRENCH)//历史故障告警显示界面 法语界面组装
    { 
        updateDisplayHistoryFaultData_French(sU8HistoryFaultCounter);                     
    }   
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_POLISH)//历史故障告警显示界面 波兰界面组装
    {
        updateDisplayHistoryFaultData_Polish(sU8HistoryFaultCounter);
    }    
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_ITALIAN)//历史故障告警显示界面 意大利界面组装
    {
        updateDisplayHistoryFaultData_Italian(sU8HistoryFaultCounter);                   
    } 
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_CZECH)//历史故障告警显示界面 捷克界面组装
    { 
        updateDisplayHistoryFaultData_Czech(sU8HistoryFaultCounter);                  
    }   
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_DUTCH)//历史故障告警显示界面 荷兰界面组装
    { 
        updateDisplayHistoryFaultData_Dutch(sU8HistoryFaultCounter);                 
    }
    else
    {   
        updateDisplayHistoryFaultData_English(sU8HistoryFaultCounter);                    
    } 
}

/***************************************************************************
 功能:英文 历史故障告警组装界面
****************************************************************************/
void updateDisplayHistoryFaultData_English(uint8_t u8CurrentPage)
{  
    Fault_Info_History * pStHistory = Display_Get_HistoryFaultData();
    memset(tab_display,0,DISPLAY_CACHE_SIZE);

    if(pStHistory->u8HistoryFaultIndex == 0) 
    {
        sprintf(tab_display,"                     \n                     \n   No History Fault  \n                     \n");
        GUI_Display(tab_display, 0, 0);
        return;
    }

    uint16_t u16TempCode  = pStHistory->stHistoryFault[u8CurrentPage].u16FaultCode;
    char tab_Fault_Name[DISPLAY_DATA_NAME_CACHE_SIZE];  //Display显示缓存
    memset(tab_Fault_Name,0,DISPLAY_DATA_NAME_CACHE_SIZE);
    getFaultNameByFaultCode(tab_Fault_Name,u16TempCode); //根据故障码获取故障名称
    
    char tab_Time_Occur[DISPLAY_TIME_CACHE_SIZE];
    uint16_t u16Year_Occur = pStHistory->stHistoryFault[u8CurrentPage].stOccurTime.u16Year;
    uint8_t  u8Month_Occur = pStHistory->stHistoryFault[u8CurrentPage].stOccurTime.u8Month;
    uint8_t  u8Day_Occur   = pStHistory->stHistoryFault[u8CurrentPage].stOccurTime.u8Day;
    uint8_t  u8Hour_Occur  = pStHistory->stHistoryFault[u8CurrentPage].stOccurTime.u8Hour;
    uint8_t  u8Min_Occur   = pStHistory->stHistoryFault[u8CurrentPage].stOccurTime.u8Min;
    uint8_t  u8Sec_Occur   = pStHistory->stHistoryFault[u8CurrentPage].stOccurTime.u8Sec;
    sprintf(tab_Time_Occur,"%04d-%02d-%02d %02d:%02d:%02d",u16Year_Occur,u8Month_Occur,u8Day_Occur,u8Hour_Occur,u8Min_Occur,u8Sec_Occur); 
    
    char tab_Time_Clear[DISPLAY_TIME_CACHE_SIZE];
    uint16_t u16Year_Clear = pStHistory->stHistoryFault[u8CurrentPage].stOccurTime.u16Year;
    uint8_t  u8Month_Clear = pStHistory->stHistoryFault[u8CurrentPage].stOccurTime.u8Month;
    uint8_t  u8Day_Clear   = pStHistory->stHistoryFault[u8CurrentPage].stOccurTime.u8Day;
    uint8_t  u8Hour_Clear  = pStHistory->stHistoryFault[u8CurrentPage].stOccurTime.u8Hour;
    uint8_t  u8Min_Clear   = pStHistory->stHistoryFault[u8CurrentPage].stOccurTime.u8Min;
    uint8_t  u8Sec_Clear   = pStHistory->stHistoryFault[u8CurrentPage].stOccurTime.u8Sec;
    sprintf(tab_Time_Clear,"%04d-%02d-%02d %02d:%02d:%02d",u16Year_Clear,u8Month_Clear,u8Day_Clear,u8Hour_Clear,u8Min_Clear,u8Sec_Clear);     
    
    sprintf(tab_display,"   History Fault %02d  \n%04x:%16s\nOccur:%15s\nClear:%15s\n",u8CurrentPage+1,u16TempCode,tab_Fault_Name,tab_Time_Occur+5,tab_Time_Clear+5);  //O=Occur 故障产生时间  C=clear 故障清楚时间

    //GUI_DispStringAt((uint8_t*)tab_display, 0, 0);
    GUI_Display(tab_display, 0, 0);
}
/***************************************************************************
 功能:西班牙语 历史故障告警组装界面
****************************************************************************/
void updateDisplayHistoryFaultData_Spanish(uint8_t u8CurrentPage)
{   
}
/***************************************************************************
 功能:德语 历史故障告警组装界面
****************************************************************************/
void updateDisplayHistoryFaultData_German(uint8_t u8CurrentPage)
{   
}
/***************************************************************************
 功能:法语 历史故障告警组装界面
****************************************************************************/
void updateDisplayHistoryFaultData_French(uint8_t u8CurrentPage)
{   
}
/***************************************************************************
 功能:波兰语 历史故障告警组装界面
****************************************************************************/
void updateDisplayHistoryFaultData_Polish(uint8_t u8CurrentPage)
{   
}
/***************************************************************************
 功能:意大利语 历史故障告警组装界面
****************************************************************************/
void updateDisplayHistoryFaultData_Italian(uint8_t u8CurrentPage)
{   
}
/***************************************************************************
 功能:捷克语 历史故障告警组装界面
****************************************************************************/
void updateDisplayHistoryFaultData_Czech(uint8_t u8CurrentPage)
{   
}
/***************************************************************************
 功能:荷兰语 历史故障告警组装界面
****************************************************************************/
void updateDisplayHistoryFaultData_Dutch(uint8_t u8CurrentPage)
{   
}
/***************************************************************************
 功能:操作记录数据更新
****************************************************************************/
void updateDisplayOperationRecordData(KeyAction_TypeDef nowActionType,DisplayAction_TypeDef nowDisplayType)
{     
    static uint8_t sU8RecordCounter = 0;
    Record_Info * pStRecord = Display_Get_OperationRecordData();

    gLastMenu.eLastDisplayMenuType = DISPLAY_DATA_DISPLAYOPERATIONRECORD;
    switch(nowActionType) //本次界面操作类型
    {            
        case KEYACTION_DOWN://在历史故障告警界面下，UP键按下，页面数字加一
            {
                sU8RecordCounter++;
                if((sU8RecordCounter == pStRecord->u8RecordIndex) ||(pStRecord->u8RecordIndex == 0))
                {
                    sU8RecordCounter = 0;  
                }

                gCurrentMenu.eCurrentDisplayMenuType = nowDisplayType;
                
            }
            break;
        case KEYACTION_UP://在历史故障告警界面下，DOWN键按下，页面数字减一
            {  
                sU8RecordCounter--; 
                if(sU8RecordCounter >= pStRecord->u8RecordIndex)
                {
                    if(pStRecord->u8RecordIndex == 0)
                    {
                        sU8RecordCounter = 0;
                    }
                    else
                    {
                        sU8RecordCounter = pStRecord->u8RecordIndex - 1;
                    }  
                }

                gCurrentMenu.eCurrentDisplayMenuType = nowDisplayType;
                
            }
            break;          
        case KEYACTION_ESC://在历史故障告警界面下，Esc键按下，回退到主界面
            {
                sU8RecordCounter = 0;
                gCurrentMenu.eCurrentDisplayMenuType = DISPLAY_HOME;
            }
            break;
        case KEYACTION_NULL://无操作
        default:
            {
                gCurrentMenu.eCurrentDisplayMenuType = nowDisplayType;
            }
            break;
    }
    
    if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_ENGLISH) //操作记录显示界面 英文界面组装
    { 
        updateDisplayOperationRecordData_English(sU8RecordCounter);                    
    }
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_CHINESE)//操作记录显示界面 中文界面组装
    {
        updateDisplayOperationRecordData_Chinese(sU8RecordCounter);
    }    
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_SPANISH)//操作记录显示界面 西班牙界面组装
    { 
        updateDisplayOperationRecordData_Spanish(sU8RecordCounter);
    } 
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_GERMAN)//操作记录显示界面 德语界面组装
    { 
        updateDisplayOperationRecordData_German(sU8RecordCounter);
    } 
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_FRENCH)//操作记录显示界面 法语界面组装
    { 
        updateDisplayOperationRecordData_French(sU8RecordCounter);                     
    }   
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_POLISH)//操作记录显示界面 波兰界面组装
    {
        updateDisplayOperationRecordData_Polish(sU8RecordCounter);
    }    
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_ITALIAN)//操作记录显示界面 意大利界面组装
    {
        updateDisplayOperationRecordData_Italian(sU8RecordCounter);                   
    } 
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_CZECH)//操作记录显示界面 捷克界面组装
    { 
        updateDisplayOperationRecordData_Czech(sU8RecordCounter);                  
    }   
    else if(gDisplay.stDisplayData.stSystemData.u8LanguageType == LANGUAGE_DUTCH)//操作记录显示界面 荷兰界面组装
    { 
        updateDisplayOperationRecordData_Dutch(sU8RecordCounter);                 
    }
    else
    {   
        updateDisplayOperationRecordData_English(sU8RecordCounter);                    
    } 
    pStRecord = NULL;
}
/***************************************************************************
功能:英文 操作记录显示组装界面
****************************************************************************/
void updateDisplayOperationRecordData_English(uint8_t u8CurrentPage)
{
    memset(tab_display,0,DISPLAY_CACHE_SIZE);
    Record_Info * pStRecord = Display_Get_OperationRecordData();
    
    if(pStRecord->u8RecordIndex == 0) 
    {
        sprintf(tab_display,"                     \n                     \n No Operation Record \n                     \n");
        GUI_Display(tab_display, 0, 0);
        return;
    }
    
    uint8_t u8TempCode  = pStRecord->stRecord[u8CurrentPage].u16RecordType;
    char tab_Operate_Name[DISPLAY_DATA_NAME_CACHE_SIZE];  //Display显示缓存
    memset(tab_Operate_Name,0,DISPLAY_DATA_NAME_CACHE_SIZE);
    getOperateNameByOperateCode(tab_Operate_Name,u8TempCode); //根据故障码获取故障名称
    
    char tab_Time_Operate[DISPLAY_TIME_CACHE_SIZE];
    memset(tab_Time_Operate,0,DISPLAY_TIME_CACHE_SIZE);
    uint16_t u16Year_Operate = pStRecord->stRecord[u8CurrentPage].stOperateTime.u16Year;
    uint8_t  u8Month_Operate = pStRecord->stRecord[u8CurrentPage].stOperateTime.u8Month;
    uint8_t  u8Day_Operate   = pStRecord->stRecord[u8CurrentPage].stOperateTime.u8Day;
    uint8_t  u8Hour_Operate  = pStRecord->stRecord[u8CurrentPage].stOperateTime.u8Hour;
    uint8_t  u8Min_Operate   = pStRecord->stRecord[u8CurrentPage].stOperateTime.u8Min;
    uint8_t  u8Sec_Operate   = pStRecord->stRecord[u8CurrentPage].stOperateTime.u8Sec;
    sprintf(tab_Time_Operate,"%4d-%02d-%02d %02d:%02d:%02d",u16Year_Operate,u8Month_Operate,u8Day_Operate,u8Hour_Operate,u8Min_Operate,u8Sec_Operate); 
    
    uint8_t u8TempObj  = pStRecord->stRecord[u8CurrentPage].u8RecordObj;
    char tab_OperateObj_Name[DISPLAY_DATA_NAME_CACHE_SIZE];  //Display显示缓存
    memset(tab_OperateObj_Name,0,DISPLAY_DATA_NAME_CACHE_SIZE);
    getOperatObjeNameByOperateObjCode(tab_OperateObj_Name,u8TempObj);
    
    sprintf(tab_display,"  Operate Record %02d  \nType:%-16s\nOccur:%-15s\nObj:%-16s\n",u8CurrentPage+1,tab_Operate_Name,tab_Time_Operate+5,tab_OperateObj_Name);  //O=Operate Time 操作时间
    //GUI_DispStringAt((uint8_t*)tab_display, 0, 0);
    GUI_Display(tab_display, 0, 0);
}
/***************************************************************************
 功能:西班牙语 操作记录显示组装界面
****************************************************************************/
void updateDisplayOperationRecordData_Spanish(uint8_t u8CurrentPage)
{   
}
/***************************************************************************
 功能:德语 操作记录显示组装界面
****************************************************************************/
void updateDisplayOperationRecordData_German(uint8_t u8CurrentPage)
{   
}
/***************************************************************************
 功能:法语 操作记录显示组装界面
****************************************************************************/
void updateDisplayOperationRecordData_French(uint8_t u8CurrentPage)
{   
}
/***************************************************************************
 功能:波兰语 操作记录显示组装界面
****************************************************************************/
void updateDisplayOperationRecordData_Polish(uint8_t u8CurrentPage)
{   
}
/***************************************************************************
 功能:意大利语 操作记录显示组装界面
****************************************************************************/
void updateDisplayOperationRecordData_Italian(uint8_t u8CurrentPage)
{   
}
/***************************************************************************
 功能:捷克语 操作记录显示组装界面
****************************************************************************/
void updateDisplayOperationRecordData_Czech(uint8_t u8CurrentPage)
{   
}
/***************************************************************************
 功能:荷兰语 操作记录显示组装界面
****************************************************************************/
void updateDisplayOperationRecordData_Dutch(uint8_t u8CurrentPage)
{   
}
/***************************************************************************
 功能:根据故障码获取故障名称
****************************************************************************/
void getFaultNameByFaultCode(char* Fault_Name,uint16_t u16Code)
{
    switch(u16Code)
    {
        case SYS_FAULT_BusFastOV:
            { 
                strncpy(Fault_Name,"Bus OVFD       ",15);//bus over voltage fast detection
            } 
            break;          
        case SYS_FAULT_BusSlowOV: 
            { 
                strncpy(Fault_Name,"Bus OVSD       ",15);//bus over voltage slow detection
            } 
            break;      
        case SYS_FAULT_BusUV: 
            { 
                strncpy(Fault_Name,"Bus UV         ",15);//bus under voltage.
            } 
            break;      
        case SYS_FAULT_BusSoft: 
            { 
                strncpy(Fault_Name,"Bus Soft       ",15);//Bus Soft
            } 
            break;      
        case SYS_FAULT_EmsCommErr:
            { 
                strncpy(Fault_Name,"Ems Comm Err   ",15);//EMS Communication Error.
            } 
            break;      
        case SYS_FAULT_OutputShort: 
            { 
                strncpy(Fault_Name,"Output Short   ",15);//Output short circuit fault.
            } 
            break;        
        case SYS_FAULT_GFCIErrLv3:
            { 
                strncpy(Fault_Name,"GFCI leakage 3 ",15);//GFCI leakage fault Lv3.
            } 
            break;      
        case SYS_FAULT_GFCIErrLv2: 
            { 
                strncpy(Fault_Name,"GFCI leakage 2 ",15);//GFCI leakage fault Lv2.
            } 
            break;      
        case SYS_FAULT_GFCIErrLv1: 
            { 
                strncpy(Fault_Name,"GFCI leakage 1 ",15);//GFCI leakage fault Lv1.
            } 
            break;      
        case SYS_FAULT_SWSelfLock:
            { 
                strncpy(Fault_Name,"SW self-lock   ",15);//Software self-locking fault.
            } 
            break;      
        case SYS_FAULT_SysOT:
            {  
                strncpy(Fault_Name,"System OT      ",15);//System over-temperature fault.
            } 
            break;      
        case SYS_FAULT_SysOL: 
            { 
                strncpy(Fault_Name,"System OL      ",15);//System overload fault.
            } 
            break;      
        case SYS_FAULT_Epo:
            { 
                strncpy(Fault_Name,"EPO            ",15);//Emergency Power Off
            } 
            break;      
        case SYS_FAULT_SlaveCpuErr:
            { 
                strncpy(Fault_Name,"Slave CPU Err  ",15);//Slave CPU Error
            } 
            break;      
        case SYS_FAULT_IsoErr:
            { 
                strncpy(Fault_Name,"Iso Err        ",15);//Iso fault.
            } 
            break;      
        case SYS_FAULT_BusBoardBrkProt:
            { 
                strncpy(Fault_Name,"B-Board Dis-Pro",15);//Busbar disconnect protection fault. 
            } 
            break;      
        case SYS_FAULT_GroundProt:
            { 
                strncpy(Fault_Name,"Ground Protect ",15);//Ground protection fault.
            } 
            break;      

        case SYS_FAULT_DCDCOverLoadProt:
            { 
                strncpy(Fault_Name,"DCDC OverLoad  ",15);//DCDC OverLoad protection fault.
            } 
            break;
        case SYS_FAULT_PV1RevConnectProt:
            { 
                strncpy(Fault_Name,"PV1 Rev Connect",15);//PV1 RevConnect protection fault.
            } 
            break;
        case SYS_FAULT_PV2RevConnectProt:
            { 
                strncpy(Fault_Name,"PV2 Rev Connect",15);//PV2 RevConnect protection fault.
            } 
            break;
        case SYS_FAULT_InvOverTempProt:
            { 
                strncpy(Fault_Name,"Inv Over Temp  ",15);//Inv Over Temp protection fault.
            } 
            break;
        case SYS_FAULT_DCDCOverTempProt:
            { 
                strncpy(Fault_Name,"DCDC Over Temp ",15);//DCDCOverTemp protection fault.
            } 
            break;
        case SYS_FAULT_GridRlyErrProt:
            { 
                strncpy(Fault_Name,"Grid Rly Err   ",15);//GridRly protection fault.
            } 
            break;
        case SYS_FAULT_SysWeakEnergyProt:
            { 
                strncpy(Fault_Name,"Sys Weak Energy",15);//SysWeakEnergy protection fault.
            } 
            break;
        case SYS_FAULT_LeakageCurrProt:
            { 
                strncpy(Fault_Name,"Lkg Curr Err   ",15);//LeakageCurr protection fault.
            } 
            break;
        case INV_FAULT_GridOVLv3: 
            { 
                strncpy(Fault_Name,"Grid OV L3     ",15);//grid over voltage 3 detection.
            } 
            break;      
        case INV_FAULT_GridOVLv2: 
            { 
                strncpy(Fault_Name,"Grid OV L2     ",15);//grid over voltage 2 detection.
            } 
            break;      
        case INV_FAULT_GridOVLv1:
            { 
                strncpy(Fault_Name,"Grid OV L1     ",15);//grid over voltage 1 detection.
            } 
            break;      
        case INV_FAULT_GridUVLv3:
            { 
                strncpy(Fault_Name,"Grid UV L3     ",15);//Grid undervoltage fault (level 3).
            } 
            break;      
        case INV_FAULT_GridUVLv2:
            { 
                strncpy(Fault_Name,"Grid UV L2     ",15);//Grid undervoltage fault (level 2).
            } 
            break;      
        case INV_FAULT_GridUVLv1: 
            { 
                strncpy(Fault_Name,"Grid UV L1     ",15);//Grid undervoltage fault (level 1).
            } 
            break;      
        case INV_FAULT_GridFastOverFreq:
            { 
                strncpy(Fault_Name,"Grid OFFD      ",15);//Grid overfrequency fast detection.
            } 
            break;      
        case INV_FAULT_GridSlowOverFreq:
            { 
                strncpy(Fault_Name,"Grid OFSD      ",15);//Grid overfrequency slow detection.
            } 
            break;      
        case INV_FAULT_GridFastUnderFreq:
            { 
                strncpy(Fault_Name,"Grid UFFD      ",15);//Grid underfrequency fast detection.
            } 
            break;      
        case INV_FAULT_GridSlowUnderFreq:
            { 
                strncpy(Fault_Name,"Grid UFSD      ",15);//Grid underfrequency slow detection.
            } 
            break;      
        case INV_FAULT_GridFastPowerDown:
            { 
                strncpy(Fault_Name,"G-Power Cut FD ",15);//Grid power outage fast fault.
            } 
            break;      
        case INV_FAULT_PllErr: 
            { 
                strncpy(Fault_Name,"Pll Err        ",15);
            } 
            break;      
        case INV_FAULT_SysLNReverse:
            { 
                strncpy(Fault_Name,"Sys LN re-con  ",15);//System LN reverse connection fault.
            } 
            break;        
        case INV_FAULT_Grid10MinOV:
            { 
                strncpy(Fault_Name,"Grid OV-10Min  ",15);//Grid overvoltage fault (10 mins).
            } 
            break;      
        case INV_FAULT_FwFastOC1:
            { 
                strncpy(Fault_Name,"Software OCFD  ",15);//Software overcurrent fast detection fault 1.
            } 
            break;      
        case INV_FAULT_HwOV1:
            { 
                strncpy(Fault_Name,"Hardware OC    ",15);//Hardware overcurrent  fault 1.
            } 
            break;      
        case INV_FAULT_FwSlowOC1:
            { 
                strncpy(Fault_Name,"Software OCSD  ",15);//Software overcurrent slow detection fault 1.
            } 
            break;      
        case INV_FAULT_InvRlyErr1:
            { 
                strncpy(Fault_Name,"INV-Relay Err  ",15);//Inverter relay fault 1.
            } 
            break;      
        case INV_FAULT_OTP1:
            { 
                strncpy(Fault_Name,"INV OT Err     ",15);//Inverter overtemperature fault 1.
            } 
            break;      
        case INV_FAULT_OVP1:
            { 
                strncpy(Fault_Name,"INV OV Err     ",15);//Inverter Overvoltage fault 1.
            } 
            break;      
        case INV_FAULT_IgbtErr1:
            { 
                strncpy(Fault_Name,"INV IGBT Err   ",15);//Inverter IGBT fault 1.
            } 
            break;      
        case INV_FAULT_InductanceOT1:
            { 
                strncpy(Fault_Name,"L-OT           ",15);//Inductor overtemperature 1.
            } 
            break;      
        case INV_FAULT_VoltDcComponentErr1:
            { 
                strncpy(Fault_Name,"DC-V Comp 1    ",15);//DC voltage component fault 1.
            } 
            break;      
        case INV_FAULT_CurrDcComponentErr1:
            { 
                strncpy(Fault_Name,"DC-C Comp      ",15);//DC Current component fault 1.
            } 
            break;      
        case INV_FAULT_CT_DisConnect:
            { 
                strncpy(Fault_Name,"CT Disconnect  ",15);//CT未接故障
            } 
            break;      
        case INV_FAULT_Meter_DisConnect: 
            { 
                strncpy(Fault_Name,"MeterDisconnect",15);//电表未接故障
            } 
            break;      
        case INV_FAULT_FwSlowOC2:
            { 
                strncpy(Fault_Name,"Software OCSD 2",15);//Software overcurrent slow detection fault 2.
            } 
            break;      
        case INV_FAULT_InvRlyErr2: 
            { 
                strncpy(Fault_Name,"INV-Relay Err 2",15);//Inverter relay fault 2.
            } 
            break;      
        case INV_FAULT_OTP2: 
            { 
                strncpy(Fault_Name,"INV OT Err 2   ",15);//Inverter overtemperature fault 2.
            } 
            break;      
        case INV_FAULT_OVP2: 
            { 
                strncpy(Fault_Name,"INV OV Err 2   ",15);//Inverter Overvoltage fault 2.
            } 
            break;      
        case INV_FAULT_IgbtErr2:
            { 
                strncpy(Fault_Name,"INV IGBT Err 2 ",15);//Inverter IGBT fault 2.
            } 
            break;      
        case INV_FAULT_InductanceOT2:
            { 
                strncpy(Fault_Name,"L-OT 2         ",15);//Inductor overtemperature 2.
            } 
            break;      
        case INV_FAULT_VoltDcComponentErr2:
            { 
                strncpy(Fault_Name,"DC-V Comp 2    ",15);//DC voltage component fault 2.
            } 
            break;      
        case INV_FAULT_CurrDcComponentErr2:
            { 
                strncpy(Fault_Name,"DC-C Comp 2    ",15);//DC Current component fault 2.
            } 
            break;      
        case INV_FAULT_ParallelCanErr:
            { 
                strncpy(Fault_Name,"PO CAN Comm Err",15);//Parallel operation CAN communication fault.
            } 
            break;      
        case INV_FAULT_ParaCurrShareErr:
            { 
                strncpy(Fault_Name,"PO Share-C Err ",15);//Parallel operation current sharing fault.
            } 
            break;
        case INV_FAULT_IslandErr:
            { 
                strncpy(Fault_Name,"Island Err     ",15);//Island fault.
            } 
            break;
        case DCDC_FAULT_MidBusOVP:
            { 
                strncpy(Fault_Name,"Mid-Bus OVP Err",15);//Intermediate fault overvoltage protection fault.
            } 
            break;      
        case DCDC_FAULT_LLCHwOC:
            { 
                strncpy(Fault_Name,"LLC HWOC Err   ",15);//LLC hardware overcurrent fault.
            } 
            break;      
        case DCDC_FAULT_BuckBoostHwOC:
            { 
                strncpy(Fault_Name,"BB HWOC Err    ",15);//BuckBoost hardware overcurrent fault.
            } 
            break;      
        case DCDC_FAULT_BuckBoostSwOC:
            { 
                strncpy(Fault_Name,"BB SWOC Err    ",15);//BuckBoost software overcurrent fault.
            } 
            break;      
        case DCDC_FAULT_SOPChgOCP: 
            { 
                strncpy(Fault_Name,"SOP Chg OCP    ",15);//SOP charging overcurrent protection fault.
            } 
            break;      
        case DCDC_FAULT_SOPDisChgOCP:
            { 
                strncpy(Fault_Name,"SOP DisChg OCP ",15);//SOP discharging overcurrent protection fault.
            } 
            break;      
        case DCDC_FAULT_DCDCOverTemp:
            { 
                strncpy(Fault_Name,"DCDC OTP Err   ",15);//DCDC overtemperature protection fault.
            } 
            break;
        case DCDC_FAULT_DCDCOverVolt:
            { 
                strncpy(Fault_Name,"DCDC OVP Err   ",15);//DCDC OverVolt protection fault.
            } 
            break;
        case DCDC_FAULT_DCDCUnderVolt:
            { 
                strncpy(Fault_Name,"DCDC UVP Err   ",15);//DCDC UnderVolt protection fault.
            } 
            break;
        case PV1_FAULT_PvUV:
            { 
                strncpy(Fault_Name,"PV1 UV         ",15);//PV 1 undervoltage.
            } 
            break;      
        case PV1_FAULT_PvOV:
            { 
                strncpy(Fault_Name,"PV1 OV         ",15);//PV 1 overvoltage.
            } 
            break;      
        case PV1_FAULT_PVIso:
            { 
                strncpy(Fault_Name,"PV1 ISO Err    ",15);//PV 1 ISO fault.
            } 
            break;      
        case PV1_FAULT_SWOC:
            { 
                strncpy(Fault_Name,"PV1 SWOC Err   ",15);//PV 1 software overcurrent fault.
            } 
            break;      
        case PV1_FAULT_HWOC:
            { 
                strncpy(Fault_Name,"PV1 HWOC Err   ",15);//PV 1 hardware overcurrent fault.
            } 
            break;      
        case PV1_FAULT_LPLK:
            { 
                strncpy(Fault_Name,"PV1 LPLK Err   ",15);//PV 1 Low Power Lock fault.
            } 
            break;      
        case PV2_FAULT_PvUV:
            { 
                strncpy(Fault_Name,"PV2 UV         ",15);//PV 2 undervoltage
            } 
            break;      
        case PV2_FAULT_PvOV:
            { 
                strncpy(Fault_Name,"PV2 OV         ",15);//PV 2 overvoltage.
            } 
            break;      
        case PV2_FAULT_PVIso: 
            { 
                strncpy(Fault_Name,"PV2 ISO Err    ",15);//PV 2 ISO fault.
            } 
            break;      
        case PV2_FAULT_SWOC:
            { 
                strncpy(Fault_Name,"PV2 SWOC Err   ",15);//PV 2 software overcurrent fault.
            } 
            break;      
        case PV2_FAULT_HWOC:
            { 
                strncpy(Fault_Name,"PV2 HWOC Err   ",15);//PV 2 hardware overcurrent fault.
            } 
            break;      
        case PV2_FAULT_LPLK:
            { 
                strncpy(Fault_Name,"PV2 LPLK Err   ",15);//PV 2 Low Power Lock fault.
            } 
            break;      
        case BMS_ALERM_SingleVoltDiff:
            { 
                strncpy(Fault_Name,"SCV Cons alarm ",15);//Single-cell voltage consistency alarm.
            } 
            break;      
        case BMS_ALERM_MosfetOT:
            { 
                strncpy(Fault_Name,"MOSFET OT alarm",15);//MOSFET overtemperature alarm.
            } 
            break;      
        case BMS_ALERM_SingleUT:
            { 
                strncpy(Fault_Name,"SCLT alarm     ",15);//Single-cell under temperature alarm.
            } 
            break;      
        case BMS_ALERM_SingleOT: 
            { 
                strncpy(Fault_Name,"SCOT alarm     ",15);//Single-cell over temperature alarm.
            } 
            break;      
        case BMS_ALERM_SingleVoltUV:
            { 
                strncpy(Fault_Name,"SCUV alarm     ",15);//Single-cell under voltage alarm.
            } 
            break;        
        case BMS_ALERM_SingleVoltOV:
            { 
                strncpy(Fault_Name,"SCOV alarm     ",15);//Single-cell over voltage alarm.
            } 
            break;        
        case BMS_ALERM_TotalVoltUV:
            { 
                strncpy(Fault_Name,"TVUV alarm     ",15);//Module total voltage under voltage alarm.
            } 
            break;      
        case BMS_ALERM_TotalVoltOV:
            { 
                strncpy(Fault_Name,"TVOV alarm     ",15);//Module total voltage over voltage alarm.
            } 
            break;      
        case BMS_ALERM_InternalComErr:
            { 
                strncpy(Fault_Name,"InterComm alarm",15);//Internal communication error alarm
            } 
            break;      
        case BMS_ALERM_OCD:
            { 
                strncpy(Fault_Name,"OCD alarm      ",15);//Discharge overcurrent alarm
            } 
            break;      
        case BMS_ALERM_OCC:
            { 
                strncpy(Fault_Name,"OCC alarm      ",15);//charge overcurrent alarm
            } 
            break;      
        case BMS_ALERM_SingleTempDiff:
            { 
                strncpy(Fault_Name,"SCT Cons alarm ",15);//Single-cell temperature consistency alarm. 
            } 
            break;      
        case BMS_FAULT_MosfetOT:
            { 
                strncpy(Fault_Name,"MOSFET OT Err  ",15);//MOSFET overtemperature alarm.
            } 
            break;      
        case BMS_FAULT_SingleUT:
            { 
                strncpy(Fault_Name,"SCUT Err       ",15);//Single-cell undertemperature  fault.
            } 
            break;      
        case BMS_FAULT_SingleOT:
            { 
                strncpy(Fault_Name,"SCOT Err       ",15);//Single-cell overtemperature  fault.
            } 
            break;      
        case BMS_FAULT_SingleUV:
            { 
                strncpy(Fault_Name,"SCUV Err       ",15);//Single-cell undervoltage  fault.
            } 
            break;      
        case BMS_FAULT_SingleOV:
            { 
                strncpy(Fault_Name,"SCOV Err       ",15);//Single-cell overvoltage  fault.
            } 
            break;      
        case BMS_FAULT_TotalModeUV:
            { 
                strncpy(Fault_Name,"TVUV Err       ",15);//Module total voltage under voltage fault.
            } 
            break;        
        case BMS_FAULT_TotalModeOV:
            { 
                strncpy(Fault_Name,"TVOV Err       ",15);//Module total voltage over voltage fault.
            } 
            break;      
        case BMS_FAULT_SysFault:
            { 
                strncpy(Fault_Name,"Sys protect Err",15);//System  protection fault.
            } 
            break;      
        case BMS_FAULT_OCD:
            { 
                strncpy(Fault_Name,"OCD Err        ",15);//Discharge overcurrent fault.
            } 
            break;      
        case BMS_FAULT_OCC:
            { 
                strncpy(Fault_Name,"OCC Err        ",15);//charge overcurrent fault.
            } 
            break;      
        case EMS_FAULT_PCS:
            { 
                strncpy(Fault_Name,"PCS Comm Err   ",15);//PCS Communication fault.
            } 
            break;      
        case EMS_FAULT_METER:
            { 
                strncpy(Fault_Name,"Meter Comm Err ",15);//Meter Communication fault.
            } 
            break;      
        case EMS_FAULT_BMS:
            { 
                strncpy(Fault_Name,"BMS Comm Err   ",15);//Bms Communication fault.
            } 
            break;      
        case EMS_FAULT_CT:
            { 
                strncpy(Fault_Name,"CT Comm Err    ",15);//CT Communication fault.
            } 
            break;
        case EMS_FAULT_WEAKBATTERY:
            { 
                strncpy(Fault_Name,"Weak Bat Err   ",15);//Weak Battary fault.
            } 
            break;
        case GEN_FAULT_RlyErr:
            { 
                strncpy(Fault_Name,"Gen Rly Err    ",15);//Gen Rly fault.
            } 
            break;
        case GEN_FAULT_HighVolt:
            { 
                strncpy(Fault_Name,"Gen HVPT Err   ",15);//Gen HighVolt fault.
            } 
            break;
        case GEN_FAULT_LowVolt:
            { 
                strncpy(Fault_Name,"Gen LVPT Err   ",15);//Gen LowVolt fault.
            } 
            break;
        case GEN_FAULT_HighFreq:
            { 
                strncpy(Fault_Name,"Gen HFPT Err   ",15);//Gen HighFreqt fault.
            } 
            break;
        case GEN_FAULT_LowFreq:
            { 
                strncpy(Fault_Name,"Gen LFPT Err   ",15);//Gen LowFreq fault.
            } 
            break;
        case GEN_FAULT_OverLoad:
            { 
                strncpy(Fault_Name,"Gen OLPT Err   ",15);//Gen OverLoad fault.
            } 
            break;
        case SYS_ALARM_FANErr:
            { 
                strncpy(Fault_Name,"Sys Fan Err    ",15);//Sys FANErr fault.
            } 
            break;
        case SYS_ALARM_OverLoad:
            { 
                strncpy(Fault_Name,"Sys OLPT Err   ",15);//Sys OverLoad fault.
            } 
            break;
        default:
            {
                strncpy(Fault_Name,"undefined      ",15);
            }
            break;
    }
}

/***************************************************************************
 功能:根据操作类型码获取操作名称
****************************************************************************/
void getOperateNameByOperateCode(char* Operate_Name,uint8_t u8Code)
{
    switch(u8Code)
    {
        case RECORD_SET_Language:
            {
                strncpy(Operate_Name,"Language SET   ",15);
            }
            break;
        case RECORD_SET_Time:
            { 
                strncpy(Operate_Name,"Time SET       ",15);
            }
            break;
        case RECORD_SET_Password:
            {
                strncpy(Operate_Name,"Password SET   ",15);
            }
            break;
        case RECORD_SET_ClearFault:
            { 
                strncpy(Operate_Name,"Clear Fault    ",15);
            }
            break;
        case RECORD_SET_ClearRecord:
            {
                strncpy(Operate_Name,"Clear Record   ",15);
            }
            break;
         case RECORD_SET_Serial:
            {
                strncpy(Operate_Name,"Serial SET     ",15);
            }
            break;
         case RECORD_SET_Factory:
            {
                strncpy(Operate_Name,"Factory SET    ",15);
            }
            break;
         case RECORD_SET_WIFI_RESET:
            {
                strncpy(Operate_Name,"WIFI RESET     ",15);
            }
            break;
         case RECORD_SET_BLT_RESET:
            {
                strncpy(Operate_Name,"Bluetooth SET  ",15);
            }
            break;
         case RECORD_SET_Local_Control:
            {
                strncpy(Operate_Name,"Local Control  ",15);
            }
            break;
         case RECORD_SET_Remote_Control:
            {
                strncpy(Operate_Name,"Remote Control ",15);
            }
            break;  
         case RECORD_SET_STRATEGY_SELFUSE:
            {
                strncpy(Operate_Name,"Selfuse SET    ",15);
            }
            break;
         case RECORD_SET_TPFV_TIP_PERIOD_ONE:
            {
                strncpy(Operate_Name,"TPFV TIP 1     ",15);
            }
            break;
         case RECORD_SET_TPFV_TIP_PERIOD_TWO:
            {
                strncpy(Operate_Name,"TPFV TIP 2     ",15);
            }
            break;
         case RECORD_SET_TPFV_TIP_PERIOD_THREE:
            {
                strncpy(Operate_Name,"TPFV TIP 3     ",15);
            }
            break;
         case RECORD_SET_TPFV_PEAK_PERIOD_ONE:
            {
                strncpy(Operate_Name,"TPFV PEAK 1    ",15);
            }
            break;
         case RECORD_SET_TPFV_PEAK_PERIOD_TWO:
            {
                strncpy(Operate_Name,"TPFV PEAK 2    ",15);
            }
            break;
         case RECORD_SET_TPFV_PEAK_PERIOD_THREE:
            {
                strncpy(Operate_Name,"TPFV PEAK 3    ",15);
            }
            break;
         case RECORD_SET_TPFV_FLAT_PERIOD_ONE:
            {
                strncpy(Operate_Name,"TPFV FLAT 1    ",15);
            }
            break;
         case RECORD_SET_TPFV_FLAT_PERIOD_TWO:
            {
                strncpy(Operate_Name,"TPFV FLAT 2    ",15);
            }
            break;
         case RECORD_SET_TPFV_FLAT_PERIOD_THREE:
            {
                strncpy(Operate_Name,"TPFV FLAT 3    ",15);
            }
            break;
         case RECORD_SET_TPFV_VALLEY_PERIOD_ONE:
            {
                strncpy(Operate_Name,"TPFV VALLEY 1  ",15);
            }
            break;
         case RECORD_SET_TPFV_VALLEY_PERIOD_TWO:
            {
                strncpy(Operate_Name,"TPFV VALLEY 2  ",15);
            }
            break;
         case RECORD_SET_TPFV_VALLEY_PERIOD_THREE:
            {
                strncpy(Operate_Name,"TPFV VALLEY 3  ",15);
            }
            break;
         case RECORD_SET_CHARGE_ONE:
            {
                strncpy(Operate_Name,"CHARGE 1       ",15);
            }
            break;
         case RECORD_SET_CHARGE_TWO:
            {
                strncpy(Operate_Name,"CHARGE 2       ",15);
            }
            break;
         case RECORD_SET_CHARGE_THREE:
            {
                strncpy(Operate_Name,"CHARGE 3       ",15);
            }
            break;
         case RECORD_SET_CHARGE_FOUR:
            {
                strncpy(Operate_Name,"CHARGE 4       ",15);
            }
            break;
         case RECORD_SET_DISCHARGE_ONE:
            {
                strncpy(Operate_Name,"DISCHARGE 1    ",15);
            }
            break;
         case RECORD_SET_DISCHARGE_TWO:
            {
                strncpy(Operate_Name,"DISCHARGE 2    ",15);
            }
            break;
         case RECORD_SET_DISCHARGE_THREE:
            {
                strncpy(Operate_Name,"DISCHARGE 3    ",15);
            }
            break;
         case RECORD_SET_DISCHARGE_FOUR:
            {
                strncpy(Operate_Name,"DISCHARGE 4    ",15);
            }
            break;
         case RECORD_SET_STRATEGY_BACKUP:
            {
                strncpy(Operate_Name,"STRATEGY BACKUP",15);
            }
            break;
         case RECORD_SET_STRATEGY_GEN:
            {
                strncpy(Operate_Name,"STRATEGY GEN   ",15);
            }
            break;
         case RECORD_SET_SYSTEM_DETECTION:
            {
                strncpy(Operate_Name,"SYSTEM DETECT  ",15);
            }
            break;
         case RECORD_SET_PROTECT_ISLAND:
            {
                strncpy(Operate_Name,"PROTECT ISLAND ",15);
            }
            break;
         case RECORD_SET_PROTECT_GROUND:
            {
                strncpy(Operate_Name,"PROTECT GROUND ",15);
            }
            break;
         case RECORD_SET_PROTECT_LEAKAG:
            {
                strncpy(Operate_Name,"PROTECT LEAKAG ",15);
            }
            break;
         case RECORD_SET_PROTECT_ARC:
            {
                strncpy(Operate_Name,"PROTECT ARC   ",15);
            }
            break;
         case RECORD_SET_PROTECT_LVRT:
            {
                strncpy(Operate_Name,"PROTECT LVRT   ",15);
            }
            break;
         case RECORD_SET_PROTECT_HVRT:
            {
                strncpy(Operate_Name,"PROTECT HVRT   ",15);
            }
            break;
         case RECORD_SET_PROTECT_LIGHT:
            {
                strncpy(Operate_Name,"PROTECT LIGHT  ",15);
            }
            break;
         case RECORD_SET_PROTECT_GEN:
            {
                strncpy(Operate_Name,"PROTECT GEN    ",15);
            }
            break;
         case RECORD_SET_PROTECT_LFRT:
            {
                strncpy(Operate_Name,"PROTECT LFRT   ",15);
            }
            break;
         case RECORD_SET_PROTECT_HFRT:
            {
                strncpy(Operate_Name,"PROTECT HFRT   ",15);
            }
            break;
         case RECORD_SET_PROTECT_P_V:
            {
                strncpy(Operate_Name,"PROTECT P(V)   ",15);
            }
            break;
         case RECORD_SET_PROTECT_P_F:
            {
                strncpy(Operate_Name,"PROTECT P(F)   ",15);
            }
            break;
         case RECORD_SET_PROTECT_Q_V:
            {
                strncpy(Operate_Name,"PROTECT Q(V)   ",15);
            }
            break;
         case RECORD_SET_PROTECT_Q_P:
            {
                strncpy(Operate_Name,"PROTECT Q(P)   ",15);
            }
            break;
         case RECORD_SET_PROTECT_CPF:
            {
                strncpy(Operate_Name,"PROTECT CPF    ",15);
            }
            break;
         case RECORD_SET_PROTECT_CQ:
            {
                strncpy(Operate_Name,"PROTECT CQ     ",15);
            }
            break;
         case RECORD_SET_PV_CONTROLWAY:
            {
                strncpy(Operate_Name,"PV CONTROLWAY  ",15);
            }
            break;
         case RECORD_SET_PV_SCAN:
            {
                strncpy(Operate_Name,"PV SCAN        ",15);
            }
            break;
         case RECORD_SET_BATTERY_ENABLE:
            {
                strncpy(Operate_Name,"BATTERY ENABLE ",15);
            }
            break;
         case RECORD_SET_BATTERY_WAKEUP:
            {
                strncpy(Operate_Name,"BATTERY WAKEUP ",15);
            }
            break;
         case RECORD_SET_BATTERY_MANUFACT:
            {
                strncpy(Operate_Name,"MANUFACT       ",15);
            }
            break;
         case RECORD_SET_BATTERY_TYPE:
            {
                strncpy(Operate_Name,"BATTERY TYPE   ",15);
            }
            break;
         case RECORD_SET_SELL:
            {
                strncpy(Operate_Name,"SELL           ",15);
            }
            break;
         case RECORD_SET_GRID_METER:
            {
                strncpy(Operate_Name,"GRID METER     ",15);
            }
            break;
         case RECORD_SET_GRID_SR:
            {
                strncpy(Operate_Name,"GRID SR        ",15);
            }
            break;
         case RECORD_SET_GRID_TIMEDIVEPRICE_TPFV_TIP:
            {
                strncpy(Operate_Name,"PRICE TIP      ",15);
            }
            break;
         case RECORD_SET_GRID_TIMEDIVEPRICE_TPFV_TIP_PERIOD_ONE:
            {
                strncpy(Operate_Name,"PRICE TIP 1    ",15);
            }
            break;
         case RECORD_SET_GRID_TIMEDIVEPRICE_TPFV_TIP_PERIOD_TWO:
            {
                strncpy(Operate_Name,"PRICE TIP 2    ",15);
            }
            break;
         case RECORD_SET_GRID_TIMEDIVEPRICE_TPFV_TIP_PERIOD_THREE:
            {
                strncpy(Operate_Name,"PRICE TIP 3    ",15);
            }
            break;
         case RECORD_SET_GRID_TIMEDIVEPRICE_TPFV_PEAK:
            {
                strncpy(Operate_Name,"PRICE PEAK     ",15);
            }
            break;
         case RECORD_SET_GRID_TIMEDIVEPRICE_TPFV_PEAK_PERIOD_ONE:
            {
                strncpy(Operate_Name,"PRICE PEAK 1   ",15);
            }
            break;
         case RECORD_SET_GRID_TIMEDIVEPRICE_TPFV_PEAK_PERIOD_TWO:
            {
                strncpy(Operate_Name,"PRICE PEAK 2   ",15);
            }
            break;
         case RECORD_SET_GRID_TIMEDIVEPRICE_TPFV_PEAK_PERIOD_THREE:
            {
                strncpy(Operate_Name,"PRICE PEAK 3   ",15);
            }
            break;
         case RECORD_SET_GRID_TIMEDIVEPRICE_TPFV_FLAT:
            {
                strncpy(Operate_Name,"PRICE FLAT     ",15);
            }
            break;
         case RECORD_SET_GRID_TIMEDIVEPRICE_TPFV_FLAT_PERIOD_ONE:
            {
                strncpy(Operate_Name,"PRICE FLAT 1   ",15);
            }
            break;
         case RECORD_SET_GRID_TIMEDIVEPRICE_TPFV_FLAT_PERIOD_TWO:
            {
                strncpy(Operate_Name,"PRICE FLAT 2   ",15);
            }
            break;
         case RECORD_SET_GRID_TIMEDIVEPRICE_TPFV_FLAT_PERIOD_THREE:
            {
                strncpy(Operate_Name,"PRICE FLAT 3   ",15);
            }
            break;
         case RECORD_SET_GRID_TIMEDIVEPRICE_TPFV_VALLEY:
            {
                strncpy(Operate_Name,"PRICE VALLEY   ",15);
            }
            break;
         case RECORD_SET_GRID_TIMEDIVEPRICE_TPFV_VALLEY_PERIOD_ONE:
            {
                strncpy(Operate_Name,"PRICE VALLEY 1 ",15);
            }
            break;
         case RECORD_SET_GRID_TIMEDIVEPRICE_TPFV_VALLEY_PERIOD_TWO:
            {
                strncpy(Operate_Name,"PRICE VALLEY 2 ",15);
            }
            break;
         case RECORD_SET_GRID_TIMEDIVEPRICE_TPFV_VALLEY_PERIOD_THREE:
            {
                strncpy(Operate_Name,"PRICE VALLEY 3 ",15);
            }
            break;
         case RECORD_SET_GRID_REACTIVEPOWERCONTROLWAY:
            {
                strncpy(Operate_Name,"GRID CONTROLWAY",15);
            }
            break;
         case RECORD_SET_GRID_REACTIVEPOWER:
            {
                strncpy(Operate_Name,"REACTIVE POWER ",15);
            }
            break;
         case RECORD_SET_GRID_POWERFACTOR:
            {
                strncpy(Operate_Name,"POWER FACTOR   ",15);
            }
            break;
         case RECORD_SET_GEN:
            {
                strncpy(Operate_Name,"GEN SET        ",15);
            }
            break;
        default:
            {
                strncpy(Operate_Name,"undefined      ",15);
            }
            break;
        }
}

/***************************************************************************
 功能:根据操作对象码获取操作对象名称名称
****************************************************************************/
void getOperatObjeNameByOperateObjCode(char* OperateObj_Name,uint8_t u8Code)
{
    switch(u8Code) 
    {
        case OPERATE_OBJ_LOCAL_EMS:
            { 
                strncpy(OperateObj_Name,"Local EMS       ",15);
            }
            break;
        case OPERATE_OBJ_REMOTE_EMS:
            { 
                strncpy(OperateObj_Name,"Remote EMS      ",15);
            }
            break;
        case OPERATE_OBJ_UPPER_COMPUTER:
            { 
                strncpy(OperateObj_Name,"Upper Computer  ",15);
            }
            break;
        default:
            {
                strncpy(OperateObj_Name,"undefined       ",15);
            }
            break;
    }
}

/***************************************************************************
 功能:对外提供获取统计数据接口
****************************************************************************/
Display_DATA_STATISTICAL* Display_Get_OperateStatistics(void)
{
    return &gDisplay.stDisplayData.stStatistical;
}
/***************************************************************************
 功能:对外提供获取分时电价数据接口
****************************************************************************/
Display_SET_Grid_TimeDivisionElecPrice* Display_Get_ElecPrice(void)
{
    return &gDisplay.stDisplaySet.stGrid.stTimeDivisionElecPrice;
}

/***************************************************************************
 功能:对外提供获取电网数据接口
****************************************************************************/
Display_SET_Grid* Display_Get_Grid(void)
{
    return &gDisplay.stDisplaySet.stGrid;
}
/***************************************************************************
 功能:对外提供获取系统策略数据接口
****************************************************************************/
Display_SET_System_Strategy* Display_Get_SystemStrategy(void)
{
    return &gDisplay.stDisplaySet.stStrategy;
}

/***************************************************************************
 功能:对外提供获取系统策略数据接口
****************************************************************************/
Display_SET_Gen* Display_Get_GenPara(void)
{
    return &gDisplay.stDisplaySet.stGen;
}

/***************************************************************************
 功能:对外提供获取电网数据接口
****************************************************************************/
Display_SET_Grid* Display_Get_GridPara(void)
{
    return &gDisplay.stDisplaySet.stGrid;
}

/***************************************************************************
 功能:对外提供获取PV数据接口
****************************************************************************/
Display_SET_PV* Display_Get_PVPara(void)
{
    return &gDisplay.stDisplaySet.stPV;
}

/***************************************************************************
 功能:对外提供获取保护数据接口
****************************************************************************/
Display_SET_System_ProtectEnable *Display_Get_ProtectPara(void)
{
    return &gDisplay.stDisplaySet.stProtectEnable;
}
/***************************************************************************
 功能:对外提供获取统计数据接口
****************************************************************************/
Display_DATA_STATISTICAL* Display_Get_SystemStatistical(void)
{
    return &gDisplay.stDisplayData.stStatistical;
}

/***************************************************************************
 功能:统计数据清零接口函数
****************************************************************************/
void Display_Clear_SystemStatistical(void)
{
    memset(&gDisplay.stDisplayData.stStatistical,0,sizeof(Display_DATA_STATISTICAL));
    Flash_Device_StatisticsData_Read(&gDisplay.stDisplayData.stStatistical,sizeof(Display_DATA_STATISTICAL));
}
/***************************************************************************
 功能:获取LCD屏实时刷新数据
****************************************************************************/
void GetDisplayRealTimeData(void)
{
    GetDisplayRealTimeGridData(&gDisplay.stDisplayData.stGridData);             //获取LCD屏实时电网数据
    GetDisplayRealTimePVData(&gDisplay.stDisplayData.stPV);                     //获取LCD屏实时光伏数据
    GetDisplayRealTimeBmsData(&gDisplay.stDisplayData.stBMS);                   //获取LCD屏实时电池数据
    GetDisplayRealTimeLoadData(&gDisplay.stDisplayData.stLoad);                 //获取LCD屏实时负载数据
    GetDisplayRealTimeGenData(&gDisplay.stDisplayData.stGenData);               //获取LCD屏实时负载数据
}

/***************************************************************************
 功能:获取电网状态接口
****************************************************************************/
void Display_Get_EnableDetection(Display_EnableDetection_Status* pEnableDetection)
{
    pEnableDetection->bIsSell     = gDisplay.stDisplaySet.stGrid.u8SellElectricityFlag;
    pEnableDetection->bIsHasGen   = gDisplay.stDisplaySet.stGen.stGenPara.u8EnableFlag;
    pEnableDetection->bIsHasMeter = gDisplay.stDisplaySet.stGrid.u8MterEnableFlag;
    pEnableDetection->bIsHasCT    = gDisplay.stDisplaySet.stCTRadio.u8CTEnableFlag;
    pEnableDetection->bIsHasBMS   = gDisplay.stDisplaySet.stBMS.u8EnableFlag;
    pEnableDetection->bControlWay = gDisplay.stDisplaySet.u8RemoteControl;
    pEnableDetection->bControlLowPower = gDisplay.stDisplaySet.stGrid.LOW_POWER;
}

/***************************************************************************
 功能:设置控制方式接口函数
****************************************************************************/
void Display_Set_ControlWay(uint8_t u8ControlWay)
{
    gDisplay.stDisplaySet.u8RemoteControl = u8ControlWay;
    Flash_Device_ControlMode_Write(u8ControlWay);
}

/***************************************************************************
 功能:获取版本号数据接口
****************************************************************************/
void Display_Get_EMSVersion(Display_Version* pVersion)
{
    pVersion->u8Version_V = VER_V;
    pVersion->u8Version_B = VER_B;
    pVersion->u8Version_D = VER_D;
}

void Display_Get_KindPower(Display_Kind_Power* pKindPower)
{
    GetDisplayRealTimeGridData(&gDisplay.stDisplayData.stGridData);             //获取LCD屏实时电网数据
    GetDisplayRealTimePVData(&gDisplay.stDisplayData.stPV);                     //获取LCD屏实时光伏数据
    GetDisplayRealTimeBmsData(&gDisplay.stDisplayData.stBMS);                   //获取LCD屏实时电池数据
    GetDisplayRealTimeLoadData(&gDisplay.stDisplayData.stLoad);                 //获取LCD屏实时负载数据
    
    pKindPower->u16PVPower = gDisplay.stDisplayData.stPV.stPV1.sPVPower + gDisplay.stDisplayData.stPV.stPV2.sPVPower;
    pKindPower->s16GridPower = gDisplay.stDisplayData.stGridData.sGridActivePower;
    pKindPower->u16tLoadPower = gDisplay.stDisplayData.stLoad.sLoadPower;
    pKindPower->u16ChargePower = gDisplay.stDisplayData.stBMS.sChargePower;
    pKindPower->u16ChargePower = gDisplay.stDisplayData.stBMS.sDisChargePower;
}

/***************************************************************************
 功能:对外提供获取电池设置接口
****************************************************************************/
Display_SET_BMS* Display_Get_BmsSetPara(void)
{
    return &gDisplay.stDisplaySet.stBMS;
}

#endif
#endif
/***********************************************************************************************************************
* * Copyright (c) , CVTE All rights reserved.  * * * END OF FILE
***********************************************************************************************************************/
